{
  Throwable exception=response.getException();
  return (exception != null) ? new CommandResponseImpl<R>(exception) : new CommandResponseImpl<>(response.wasReceived() ? response.getValue() : null);
}
