{
  if (visitor.getState().next() == whenRequired) {
    Method m=visitor.getBeanInfo().findMethod(methodName,signature);
    if (m.getParameterTypes().length != 1)     throw new IllegalArgumentException("Illegal method parameter length: " + m);
    ServiceName dependency=BeanMetaDataConfig.toInstancesName(m.getParameterTypes()[0],state);
    visitor.addOptionalDependency(dependency,beans);
  }
}
