{
  InputStream is=null;
  try {
    is=ejbJarXml.openStream();
    final XMLInputFactory inputFactory=XMLInputFactory.newInstance();
    inputFactory.setXMLResolver(resolver);
    XMLStreamReader xmlReader=inputFactory.createXMLStreamReader(is);
    return xmlReader;
  }
 catch (  XMLStreamException xmlse) {
    throw new DeploymentUnitProcessingException("Failed to create reader for ejb-jar.xml: " + ejbJarXml.getPathName(),xmlse);
  }
catch (  IOException ioe) {
    throw new DeploymentUnitProcessingException("Failed to create reader for ejb-jar.xml: " + ejbJarXml.getPathName(),ioe);
  }
 finally {
    try {
      if (is != null) {
        is.close();
      }
    }
 catch (    IOException ioe) {
      logger.debug("Ignoring exception while closing the InputStream ",ioe);
    }
  }
}
