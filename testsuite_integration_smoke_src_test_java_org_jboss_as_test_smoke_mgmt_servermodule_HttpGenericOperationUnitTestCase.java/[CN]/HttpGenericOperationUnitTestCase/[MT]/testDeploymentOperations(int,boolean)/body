{
  final File temp=createTempDeploymentZip();
  try {
    final ModelNode deployment=createCompositeDeploymentOperation(quantity);
    final ContentBody operation=getOperationBody(deployment,encoded);
    final List<ContentBody> streams=new ArrayList<ContentBody>();
    for (int i=0; i < quantity; i++) {
      streams.add(new FileBody(temp));
    }
    final ModelNode response=executePost(operation,encoded,streams);
    Assert.assertEquals(response.toString(),SUCCESS,response.get(OUTCOME).asString());
  }
  finally {
    temp.delete();
  }
  final ModelNode remove=removeDeploymentsOperation(quantity);
  final ContentBody operation=getOperationBody(remove,encoded);
  final ModelNode response=executePost(operation,encoded);
  Assert.assertEquals(response.toString(),SUCCESS,response.get(OUTCOME).asString());
}
