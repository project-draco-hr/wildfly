{
  ROOT_LOGGER.tracef("Uninstall deployment: %s",dep);
  try {
    DeploymentPlanBuilder builder=deploymentManager.newDeploymentPlan();
    String contextName=DeploymentHolderService.getContextName(dep);
    builder=builder.undeploy(contextName).remove(contextName);
    DeploymentPlan plan=builder.build();
    DeploymentAction removeAction=builder.getLastAction();
    executeDeploymentPlan(plan,removeAction);
  }
 catch (  Exception ex) {
    ROOT_LOGGER.cannotUndeployBundle(ex,dep);
  }
}
