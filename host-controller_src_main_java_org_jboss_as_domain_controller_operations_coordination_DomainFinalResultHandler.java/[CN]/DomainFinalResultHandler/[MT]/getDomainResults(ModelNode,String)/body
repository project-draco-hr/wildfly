{
  ResponseProvider provider=new ResponseProvider(operation,domainOperationContext.getLocalHostInfo().getLocalHostName());
  ModelNode result;
  if (!provider.isLeaf()) {
    result=new ModelNode();
    String[] nextStepLabels=new String[stepLabels.length + 1];
    System.arraycopy(stepLabels,0,nextStepLabels,0,stepLabels.length);
    int i=1;
    for (    ModelNode step : provider.getChildren()) {
      String childStepLabel="step-" + i++;
      nextStepLabels[stepLabels.length]=childStepLabel;
      result.get(childStepLabel).set(getDomainResults(step,nextStepLabels));
    }
  }
 else   if (provider.getServer() == null) {
    String hostName=provider.getHost();
    boolean forMaster=hostName.equals(domainOperationContext.getLocalHostInfo().getLocalHostName());
    ModelNode hostResponse=forMaster ? domainOperationContext.getCoordinatorResult() : domainOperationContext.getHostControllerResults().get(hostName);
    result=getHostControllerResult(hostResponse,stepLabels);
  }
 else {
    result=domainOperationContext.getServerResult(provider.getHost(),provider.getServer(),stepLabels);
  }
  return result == null ? new ModelNode() : result;
}
