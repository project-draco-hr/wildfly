{
  OptionMap optionMap=ConnectorUtils.getFullOptions(context,model);
  ServiceName tmpDirPath=ServiceName.JBOSS.append("server","path","jboss.controller.temp.dir");
  final ServiceName securityRealm=model.hasDefined(SECURITY_REALM) ? SecurityRealmService.BASE_SERVICE_NAME.append(model.require(SECURITY_REALM).asString()) : null;
  RemotingServices.installSecurityServices(context.getServiceTarget(),connectorName,securityRealm,null,tmpDirPath,verificationHandler,newControllers);
  final ServiceTarget target=context.getServiceTarget();
  final String connectorRef=HttpConnectorResource.CONNECTOR_REF.resolveModelAttribute(context,model).asString();
  RemotingHttpUpgradeService.installServices(target,connectorName,connectorRef,RemotingServices.SUBSYSTEM_ENDPOINT,optionMap,verificationHandler,newControllers);
}
