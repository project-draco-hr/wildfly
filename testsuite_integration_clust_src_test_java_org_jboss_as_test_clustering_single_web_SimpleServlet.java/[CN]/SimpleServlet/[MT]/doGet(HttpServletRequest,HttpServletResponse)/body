{
  HttpSession session=req.getSession(true);
  System.out.println("Handling request for " + (session.isNew() ? "new" : "existing") + " session");
  Custom custom=(Custom)session.getAttribute("test");
  if (custom == null) {
    custom=new Custom(1);
    session.setAttribute("test",custom);
    session.setAttribute("static",new Custom(-1));
  }
 else {
    custom.increment();
  }
  resp.setIntHeader("value",custom.getValue());
  resp.setHeader(HEADER_SERIALIZED,Boolean.toString(custom.wasSerialized()));
  if (req.getParameter(REQUEST_DURATION_PARAM) != null) {
    int duration=Integer.valueOf(req.getParameter(REQUEST_DURATION_PARAM));
    try {
      Thread.sleep(duration);
    }
 catch (    InterruptedException ex) {
    }
  }
  resp.getWriter().write("Success");
}
