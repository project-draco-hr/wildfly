{
  values.setExistingUser(true);
  values.setGroups(ROLES);
  PreModificationState userCheckState=new PreModificationState(consoleMock,values);
  AssertConsoleBuilder consoleBuilder=new AssertConsoleBuilder().expectedDisplayText(MESSAGES.updateUser(values.getUserName(),values.getUserFiles().get(0).getCanonicalPath())).expectedDisplayText(AddUser.NEW_LINE).expectedDisplayText(MESSAGES.updatedGroups(values.getUserName(),values.getGroups(),values.getGroupFiles().get(0).getCanonicalPath())).expectedDisplayText(AddUser.NEW_LINE);
  consoleMock.setResponses(consoleBuilder);
  State nextState=userCheckState.execute();
  assertTrue(nextState instanceof UpdateUser);
  nextState=nextState.execute();
  consoleBuilder.validate();
}
