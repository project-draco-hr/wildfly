{
  PathAddress address=getParentAddress(PathAddress.pathAddress(operation.require(OP_ADDR)));
  ServiceName serviceName=getParentServiceName(address);
  ModelNode parentModel=getOriginalModel(context,address);
  if (parentModel != null && context.revertResourceRestarted(address,this)) {
    try {
      removeServices(context,serviceName,invalidatedParentModel);
      recreateParentService(context,address,parentModel,null);
    }
 catch (    OperationFailedException e) {
      throw ControllerMessages.MESSAGES.failedToRecoverServices(e);
    }
  }
}
