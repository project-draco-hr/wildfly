{
  try {
    final File jbossHome=new File(SecurityActions.getSystemProperty("jboss.home.dir"));
    final ProductConfig productConfig=this.productConfig.getValue();
    this.manager=load(jbossHome,productConfig);
    final File cleanupMaker=new File(manager.getInstalledImage().getInstallationMetadata(),"cleanup-patching-dirs");
    if (cleanupMaker.exists()) {
      try {
        final PatchingGarbageLocator garbageLocator=PatchingGarbageLocator.getIninitialized(getValue());
        garbageLocator.deleteInactiveContent();
        cleanupMaker.delete();
      }
 catch (      Exception e) {
        PatchLogger.ROOT_LOGGER.debugf(e,"failed to garbage collect changes");
      }
    }
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
}
