{
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    final OperationContext context,    final ModelNode operation) throws OperationFailedException {
      final ServiceController<?> controller=context.getServiceRegistry(false).getService(MessagingServices.JBOSS_MESSAGING);
      if (controller != null) {
        final HornetQServer server=HornetQServer.class.cast(controller.getValue());
        process(context,operation,server);
      }
      context.completeStep();
    }
  }
,OperationContext.Stage.RUNTIME);
  context.completeStep();
}
