{
  final RemotingHttpUpgradeService service=new RemotingHttpUpgradeService(connectorPropertiesOptionMap);
  final ServiceName securityProviderName=RealmSecurityProviderService.createName(connectorName);
  ServiceBuilder<RemotingHttpUpgradeService> builder=serviceTarget.addService(SERVICE_NAME,service).setInitialMode(ServiceController.Mode.PASSIVE).addDependency(HTTP_UPGRADE_REGISTRY,ChannelUpgradeHandler.class,service.injectedRegistry).addDependency(endpointName,Endpoint.class,service.injectedEndpoint).addDependency(securityProviderName,RemotingSecurityProvider.class,service.securityProviderValue);
  if (verificationHandler != null) {
    builder.addListener(verificationHandler);
  }
  builder.install();
}
