{
  if (attributeMarshaller == null) {
    final boolean wrap=wrapXmlList;
    attributeMarshaller=new AttributeMarshaller(){
      @Override public void marshallAsElement(      AttributeDefinition attribute,      ModelNode resourceModel,      boolean marshallDefault,      XMLStreamWriter writer) throws XMLStreamException {
        if (resourceModel.hasDefined(attribute.getName())) {
          if (wrap) {
            writer.writeStartElement(attribute.getXmlName());
          }
          for (          ModelNode handler : resourceModel.get(attribute.getName()).asList()) {
            valueType.marshallAsElement(handler,writer);
          }
          if (wrap) {
            writer.writeEndElement();
          }
        }
      }
    }
;
  }
  return new SimpleListAttributeDefinition(this,valueType);
}
