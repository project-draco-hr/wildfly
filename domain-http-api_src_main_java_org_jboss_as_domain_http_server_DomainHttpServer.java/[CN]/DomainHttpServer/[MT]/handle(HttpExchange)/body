{
  URI request=http.getRequestURI();
  if (!http.getRequestMethod().equals("GET")) {
    http.sendResponseHeaders(405,-1);
    return;
  }
  ModelNode dmr=null;
  ModelNode response;
  int status=200;
  try {
    dmr=convertToRequest(request);
    response=modelController.execute(dmr);
  }
 catch (  OperationFailedException e) {
    response=e.getFailureDescription();
    status=500;
  }
catch (  Throwable t) {
    log.error("Unexpected error executing model request",t);
    http.sendResponseHeaders(500,-1);
    return;
  }
  http.getResponseHeaders().add("Content-Type","application/json");
  http.sendResponseHeaders(status,0);
  OutputStream out=http.getResponseBody();
  PrintStream print=new PrintStream(out);
  try {
    print.println(response.toJSONString(false));
  }
  finally {
    print.flush();
    print.close();
  }
}
