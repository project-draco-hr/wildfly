{
  Iterator<ModelNode> it=array.iterator();
  while (it.hasNext()) {
    final ModelNode node=(ModelNode)it.next();
    int capacity=node.get(CommonAttributes.CAPACITY).asInt(512);
    int weight=node.get(CommonAttributes.WEIGHT).asInt(9);
    String type=node.get(CommonAttributes.TYPE).asString();
    Class<? extends LoadMetric> loadMetricClass=null;
    LoadMetric<LoadContext> metric=null;
    if (type.equals("ActiveSessionsLoadMetric"))     loadMetricClass=ActiveSessionsLoadMetric.class;
    if (type.equals("BusyConnectorsLoadMetric"))     loadMetricClass=BusyConnectorsLoadMetric.class;
    if (type.equals("ReceiveTrafficLoadMetric"))     loadMetricClass=ReceiveTrafficLoadMetric.class;
    if (type.equals("SendTrafficLoadMetric"))     loadMetricClass=SendTrafficLoadMetric.class;
    if (type.equals("RequestCountLoadMetric"))     loadMetricClass=RequestCountLoadMetric.class;
    if (loadMetricClass != null) {
      try {
        metric=loadMetricClass.newInstance();
        metric.setCapacity(capacity);
        metric.setWeight(weight);
        metrics.add(metric);
      }
 catch (      InstantiationException e) {
        e.printStackTrace();
      }
catch (      IllegalAccessException e) {
        e.printStackTrace();
      }
    }
  }
}
