{
  ROOT_LOGGER.debugf("Starting Mod_cluster Extension");
  boolean isMulticast=isMulticastEnabled(bindingManager.getValue().getDefaultInterfaceBinding().getNetworkInterfaces());
  if (config.getProxyList() == null) {
    config.setAdvertise(isMulticast);
  }
  config.setAdvertisePort(23364);
  config.setAdvertiseGroupAddress("224.0.1.105");
  config.setAdvertiseInterface(bindingManager.getValue().getDefaultInterfaceAddress().getHostAddress());
  config.setAutoEnableContexts(true);
  config.setStopContextTimeout(10);
  config.setSocketTimeout(20000);
  if (config.getAdvertise()) {
    final SocketBinding binding=this.binding.getValue();
    if (binding != null) {
      config.setAdvertisePort(binding.getMulticastPort());
      config.setAdvertiseGroupAddress(binding.getMulticastSocketAddress().getHostName());
      config.setAdvertiseInterface(binding.getSocketAddress().getAddress().getHostAddress());
      if (!isMulticast) {
        ROOT_LOGGER.multicastInterfaceNotAvailable();
      }
    }
  }
  if (config.getExcludedContexts() != null) {
    String defaulthost=((Engine)webServer.getValue().getService().getContainer()).getDefaultHost();
    StringBuilder excludedContexts=new StringBuilder();
    for (    String excludedContext : config.getExcludedContexts().split(",")) {
      String[] parts=excludedContext.trim().split(":");
      if (parts.length != 1) {
        excludedContexts.append(",").append(excludedContext);
      }
 else {
        excludedContexts.append(",").append(defaulthost).append(":").append(excludedContext);
      }
    }
    config.setExcludedContexts(excludedContexts.toString());
  }
 else {
    config.setExcludedContexts("ROOT,invoker,jbossws,juddi,console");
  }
  service=new org.jboss.modcluster.ModClusterService(config,load);
  adapter=new CatalinaEventHandlerAdapter(service,webServer.getValue().getServer());
  adapter.start();
}
