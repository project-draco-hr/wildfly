{
  ROOT_LOGGER.debugf("Starting Mod_cluster Extension");
  boolean isMulticast=isMulticastEnabled(bindingManager.getValue().getDefaultInterfaceBinding().getNetworkInterfaces());
  if (config.getProxies().isEmpty()) {
    config.setAdvertise(isMulticast);
  }
  if (config.getAdvertise()) {
    final SocketBinding binding=this.binding.getOptionalValue();
    if (binding != null) {
      config.setAdvertiseSocketAddress(binding.getMulticastSocketAddress());
      config.setAdvertiseInterface(binding.getSocketAddress().getAddress());
      if (!isMulticast) {
        ROOT_LOGGER.multicastInterfaceNotAvailable();
      }
    }
  }
  service=new org.jboss.modcluster.ModClusterService(config,load);
  WebServer webServer=this.webServer.getValue();
  ServerProvider serverProvider=new SimpleServerProvider(webServer.getServer());
  ProxyConnectorProvider connectorProvider=new SimpleProxyConnectorProvider(connector.getValue());
  CatalinaFactory factory=new ServiceLoaderCatalinaFactory(connectorProvider);
  adapter=new CatalinaEventHandlerAdapter(service,serverProvider,factory);
  adapter.start();
  Engine engine=(Engine)webServer.getService().getContainer();
  service.status(factory.createEngine(engine));
}
