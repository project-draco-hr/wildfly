{
  try {
    InputStream input=archive.as(ZipExporter.class).exportZip();
    DeploymentPlanBuilder builder=deploymentManager.newDeploymentPlan();
    builder=builder.add(archive.getName(),input).andDeploy();
    DeploymentPlan plan=builder.build();
    DeploymentAction deployAction=builder.getLastAction();
    String runtimeName=executeDeploymentPlan(plan,deployAction);
    registry.put(archive,runtimeName);
    return getContainerMethodExecutor(context);
  }
 catch (  Exception e) {
    throw new DeploymentException("Could not deploy to container",e);
  }
}
