{
  String filespec=groupId + ":" + artifactId+ ":jar:"+ version;
  MavenDependencyResolver resolver=DependencyResolvers.use(MavenDependencyResolver.class);
  File[] resolved=resolver.artifact(filespec).resolveAsFiles(new StrictFilter());
  if (resolved == null || resolved.length == 0)   throw new DeploymentException("Cannot obtain maven artifact: " + filespec);
  try {
    DeploymentPlanBuilder builder=deploymentManager.newDeploymentPlan();
    builder=builder.add(artifactId,resolved[0]).andDeploy();
    DeploymentPlan plan=builder.build();
    DeploymentAction deployAction=builder.getLastAction();
    executeDeploymentPlan(plan,deployAction,ShrinkWrap.create(JavaArchive.class,artifactId));
  }
 catch (  Exception e) {
    throw new DeploymentException("Could not deploy to container",e);
  }
}
