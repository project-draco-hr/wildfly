{
  final String patchId=operation.require(PATCH_ID).asString();
  context.acquireControllerLock();
  final PatchInfoService service=(PatchInfoService)context.getServiceRegistry(false).getRequiredService(PatchInfoService.NAME).getValue();
  final PatchInfo info=service.getPatchInfo();
  final DirectoryStructure structure=service.getStructure();
  final PatchingTaskRunner taskRunner=new PatchingTaskRunner(info,structure);
  try {
    taskRunner.rollback(patchId);
    context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
  }
 catch (  PatchingException e) {
    throw new OperationFailedException(e.getMessage(),e);
  }
 finally {
  }
}
