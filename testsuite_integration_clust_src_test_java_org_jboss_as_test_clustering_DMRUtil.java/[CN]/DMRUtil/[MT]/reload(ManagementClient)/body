{
  ModelNode operation=new ModelNode();
  operation.get(OP).set("reload");
  try {
    managementClient.getControllerClient().execute(operation);
  }
 catch (  Exception e) {
    log.error("Exception applying reload operation. This is probably fine, as the server probably shut down before the response was sent",e);
  }
  boolean reloaded=false;
  int i=0;
  while (!reloaded && i++ <= 20) {
    try {
      Thread.sleep(TimeoutUtil.adjust(TimeoutUtil.adjust(2000)));
      if (managementClient.isServerInRunningState()) {
        reloaded=true;
      }
    }
 catch (    Throwable t) {
    }
  }
  if (!reloaded) {
    throw new Exception("Server reloading failed");
  }
}
