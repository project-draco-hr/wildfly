{
  log.debugf("Received update %s",update.getClass().getSimpleName());
  if (applyToDomain) {
    try {
      if (update instanceof NewRepositoryContentUpdate && repository != null)       repository.getDeploymentFiles(((NewRepositoryContentUpdate)update).getHash());
      domainModel.update(update);
    }
 catch (    UpdateFailedException e) {
      throw e;
    }
  }
  List<String> serverNames=update.getAffectedServers(domainModel,getHostModel());
  log.debugf("Servers affected by %s: %s",update.getClass().getSimpleName(),serverNames);
  if (serverNames.size() == 0) {
    return Collections.emptyList();
  }
  List<ServerIdentity> ids=new ArrayList<ServerIdentity>(serverNames.size());
  String hostName=hostModel.getName();
  for (  String server : serverNames) {
    ServerElement se=hostModel.getServer(server);
    ids.add(new ServerIdentity(hostName,se.getServerGroup(),server));
  }
  return ids;
}
