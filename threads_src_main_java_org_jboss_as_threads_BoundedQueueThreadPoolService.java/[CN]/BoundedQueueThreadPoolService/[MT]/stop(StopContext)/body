{
  final QueueExecutor executor=this.executor;
  if (executor == null) {
    throw new IllegalStateException();
  }
  this.context=context;
  context.asynchronous();
  executor.shutdown();
  executor.addShutdownListener(new EventListener<StopContext>(){
    public void handleEvent(    final StopContext stopContext){
      stopContext.complete();
      BoundedQueueThreadPoolService.this.context=null;
    }
  }
,context);
  this.executor=null;
  value=null;
}
