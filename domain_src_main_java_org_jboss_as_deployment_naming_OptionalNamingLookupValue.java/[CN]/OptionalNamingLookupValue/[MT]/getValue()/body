{
  T value=injectedValue.getOptionalValue();
  if (value == null) {
    final Context context=contextValue.getValue();
    try {
      value=(T)context.lookup(contextName);
    }
 catch (    NamingException e) {
      throw new IllegalStateException("Jndi entry '" + contextName + "' is not yet registered in context '"+ context+ "'");
    }
  }
  return value;
}
