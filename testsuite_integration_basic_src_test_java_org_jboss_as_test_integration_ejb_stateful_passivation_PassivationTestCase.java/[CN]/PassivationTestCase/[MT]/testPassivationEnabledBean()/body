{
  final PassivationEnabledBean bean=(PassivationEnabledBean)ctx.lookup("java:module/" + PassivationEnabledBean.class.getSimpleName() + "!"+ PassivationEnabledBean.class.getName());
  bean.doNothing();
  final DDBasedSFSB ddBean=(DDBasedSFSB)ctx.lookup("java:module/passivation-enabled-bean" + "!" + DDBasedSFSB.class.getName());
  ddBean.doNothing();
  final int sleepTime=TimeoutUtil.adjust(2000);
  Thread.sleep(sleepTime);
  bean.doNothing();
  ddBean.doNothing();
  Assert.assertTrue("(Annotation based) Stateful bean marked as passivation enabled was not passivated",bean.wasPassivated());
  Assert.assertTrue("(Annotation based) Stateful bean marked as passivation enabled was not activated",bean.wasActivated());
  Assert.assertTrue("(Deployment descriptor based) Stateful bean marked as passivation enabled was not passivated",ddBean.wasPassivated());
  Assert.assertTrue("(Deployment descriptor based) Stateful bean marked as passivation enabled was not activated",ddBean.wasActivated());
}
