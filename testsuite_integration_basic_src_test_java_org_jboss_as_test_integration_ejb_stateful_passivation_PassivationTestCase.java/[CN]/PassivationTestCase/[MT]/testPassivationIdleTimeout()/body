{
  PassivationInterceptor.reset();
  TestPassivationRemote remote=(TestPassivationRemote)ctx.lookup("java:module/" + TestPassivationBean.class.getSimpleName());
  Assert.assertEquals("Returned result was not expected",TestPassivationRemote.EXPECTED_RESULT,remote.returnTrueString());
  Thread.sleep(1600L);
  Assert.assertEquals("Returned result was not expected",TestPassivationRemote.EXPECTED_RESULT,remote.returnTrueString());
  Assert.assertTrue("@PostActivate not called, check CacheConfig and client sleep time",remote.hasBeenActivated());
  Assert.assertTrue("@PrePassivate not called, check CacheConfig and client sleep time",remote.hasBeenPassivated());
  remote.remove();
  Assert.assertTrue(PassivationInterceptor.getPostActivateTarget() instanceof TestPassivationBean);
  Assert.assertTrue(PassivationInterceptor.getPrePassivateTarget() instanceof TestPassivationBean);
}
