{
  String relativeTo=this.relativeTo.getOptionalValue();
  String file=relativeTo == null ? path : relativeTo + "/" + path;
  FileInputStream fis=null;
  try {
    KeyStore loadedKeystore=KeyStore.getInstance("JKS");
    fis=new FileInputStream(file);
    loadedKeystore.load(fis,keystorePassword);
    if (alias == null) {
      this.theKeyStore=loadedKeystore;
    }
 else {
      KeyStore newKeystore=KeyStore.getInstance("JKS");
      newKeystore.load(null);
      KeyStore.ProtectionParameter passParam=new KeyStore.PasswordProtection(keyPassword == null ? keystorePassword : keyPassword);
      KeyStore.Entry entry=loadedKeystore.getEntry(alias,passParam);
      newKeystore.setEntry(alias,entry,passParam);
      this.theKeyStore=newKeystore;
    }
  }
 catch (  KeyStoreException e) {
    throw MESSAGES.unableToStart(e);
  }
catch (  NoSuchAlgorithmException e) {
    throw MESSAGES.unableToStart(e);
  }
catch (  CertificateException e) {
    throw MESSAGES.unableToStart(e);
  }
catch (  IOException e) {
    throw MESSAGES.unableToStart(e);
  }
catch (  UnrecoverableEntryException e) {
    throw MESSAGES.unableToStart(e);
  }
 finally {
    safeClose(fis);
  }
}
