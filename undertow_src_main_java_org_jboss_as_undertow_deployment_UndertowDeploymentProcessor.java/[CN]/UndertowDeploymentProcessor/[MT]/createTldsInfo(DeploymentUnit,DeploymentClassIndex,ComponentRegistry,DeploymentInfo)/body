{
  TldsMetaData tldsMetaData=deploymentUnit.getAttachment(TldsMetaData.ATTACHMENT_KEY);
  final HashMap<String,TagLibraryInfo> ret=new HashMap<>();
  if (tldsMetaData != null) {
    if (tldsMetaData.getTlds() != null) {
      for (      Map.Entry<String,TldMetaData> tld : tldsMetaData.getTlds().entrySet()) {
        createTldInfo(tld.getKey(),tld.getValue(),ret,classReflectionIndex,components,d);
      }
    }
    List<TldMetaData> sharedTlds=tldsMetaData.getSharedTlds(deploymentUnit);
    if (sharedTlds != null) {
      for (      TldMetaData metaData : sharedTlds) {
        createTldInfo(null,metaData,ret,classReflectionIndex,components,d);
      }
    }
  }
  return ret;
}
