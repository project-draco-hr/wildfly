{
  if (reference instanceof ModularReference) {
    return factoryFromModularReference(ModularReference.class.cast(reference),environment);
  }
  return factoryFromReference(reference,SecurityActions.getContextClassLoader(),environment);
}
