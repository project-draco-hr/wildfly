{
  if (serviceName == null) {
    throw new IllegalArgumentException("serviceName is null");
  }
  if (type == null) {
    throw new IllegalArgumentException("type is null");
  }
  final Map<ServiceName,ServiceBuilder.DependencyType> dependencies=this.dependencies;
  final ServiceBuilder.DependencyType dependencyType=dependencies.get(serviceName);
  if (dependencyType == ServiceBuilder.DependencyType.REQUIRED) {
    dependencies.put(serviceName,ServiceBuilder.DependencyType.REQUIRED);
  }
 else {
    dependencies.put(serviceName,type);
  }
}
