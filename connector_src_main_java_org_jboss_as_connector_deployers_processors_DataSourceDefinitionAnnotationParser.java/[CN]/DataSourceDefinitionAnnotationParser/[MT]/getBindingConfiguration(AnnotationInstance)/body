{
  final AnnotationValue nameValue=datasourceAnnotation.value("name");
  if (nameValue == null || nameValue.asString().isEmpty()) {
    throw new IllegalArgumentException("@DataSourceDefinition annotations must provide a name.");
  }
  String name=nameValue.asString();
  if (!name.startsWith("java:")) {
    name="java:comp/env/" + name;
  }
  final AnnotationValue classValue=datasourceAnnotation.value("className");
  if (classValue == null || classValue.asString().equals(Object.class.getName())) {
    throw new IllegalArgumentException("@DataSourceDefinition annotations must provide a driver class name.");
  }
  final String type=classValue.asString();
  final DirectDataSourceInjectionSource directDataSourceInjectionSource=new DirectDataSourceInjectionSource();
  directDataSourceInjectionSource.setClassName(type);
  directDataSourceInjectionSource.setDatabaseName(asString(datasourceAnnotation,DATABASE_NAME_PROP));
  directDataSourceInjectionSource.setDescription(asString(datasourceAnnotation,DESCRIPTION_PROP));
  directDataSourceInjectionSource.setInitialPoolSize(asInt(datasourceAnnotation,INITIAL_POOL_SIZE_PROP));
  directDataSourceInjectionSource.setIsolationLevel(asInt(datasourceAnnotation,ISOLATION_LEVEL_PROP));
  directDataSourceInjectionSource.setLoginTimeout(asInt(datasourceAnnotation,LOGIN_TIMEOUT_PROP));
  directDataSourceInjectionSource.setMaxIdleTime(asInt(datasourceAnnotation,MAX_IDLE_TIME_PROP));
  directDataSourceInjectionSource.setMaxStatements(asInt(datasourceAnnotation,MAX_STATEMENTS_PROP));
  directDataSourceInjectionSource.setMaxPoolSize(asInt(datasourceAnnotation,MAX_POOL_SIZE_PROP));
  directDataSourceInjectionSource.setMinPoolSize(asInt(datasourceAnnotation,MIN_POOL_SIZE_PROP));
  directDataSourceInjectionSource.setPassword(asString(datasourceAnnotation,PASSWORD_PROP));
  directDataSourceInjectionSource.setPortNumber(asInt(datasourceAnnotation,PORT_NUMBER_PROP));
  directDataSourceInjectionSource.setProperties(asArray(datasourceAnnotation,PROPERTIES_PROP));
  directDataSourceInjectionSource.setServerName(asString(datasourceAnnotation,SERVER_NAME_PROP));
  directDataSourceInjectionSource.setTransactional(asBool(datasourceAnnotation,TRANSACTIONAL_PROP));
  directDataSourceInjectionSource.setUrl(asString(datasourceAnnotation,URL_PROP));
  directDataSourceInjectionSource.setUser(asString(datasourceAnnotation,USER_PROP));
  final BindingConfiguration bindingDescription=new BindingConfiguration(name,directDataSourceInjectionSource);
  return bindingDescription;
}
