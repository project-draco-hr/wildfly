{
  ModelNode opAddr=operation.get(OP_ADDR);
  PathAddress address=PathAddress.pathAddress(opAddr);
  String name=address.getLastElement().getValue();
  ModelNode deployment=context.getSubModel(PathAddress.pathAddress(PathElement.pathElement(DEPLOYMENT,name)));
  byte[] hash=deployment.require(CONTENT).require(0).require(HASH).asBytes();
  fileRepository.getDeploymentFiles(hash);
  ModelNode subModel=context.getSubModel();
  subModel.get(NAME).set(name);
  subModel.get(RUNTIME_NAME).set(deployment.get(RUNTIME_NAME).asString());
  subModel.get(CONTENT).get(0).get(HASH).set(hash);
  subModel.get(ENABLED).set(operation.has(ENABLED) && operation.get(ENABLED).asBoolean());
  resultHandler.handleResultComplete();
  return new BasicOperationResult(Util.getResourceRemoveOperation(operation.get(OP_ADDR)));
}
