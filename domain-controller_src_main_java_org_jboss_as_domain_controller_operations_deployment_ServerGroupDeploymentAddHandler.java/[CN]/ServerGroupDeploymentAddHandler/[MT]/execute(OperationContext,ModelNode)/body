{
  final ModelNode opAddr=operation.get(OP_ADDR);
  PathAddress address=PathAddress.pathAddress(opAddr);
  String name=address.getLastElement().getValue();
  final Resource deploymentResource=context.getRootResource().navigate(PathAddress.pathAddress(PathElement.pathElement(DEPLOYMENT,name)));
  ModelNode deployment=deploymentResource.getModel();
  for (  ModelNode content : deployment.require(CONTENT).asList()) {
    if ((content.hasDefined(HASH))) {
      byte[] hash=content.require(HASH).asBytes();
      fileRepository.getDeploymentFiles(hash);
    }
  }
  final String runtimeName=operation.hasDefined(RUNTIME_NAME) ? operation.get(RUNTIME_NAME).asString() : deployment.get(RUNTIME_NAME).asString();
  final Resource resource=context.createResource(PathAddress.EMPTY_ADDRESS);
  final ModelNode subModel=resource.getModel();
  subModel.get(NAME).set(name);
  subModel.get(RUNTIME_NAME).set(runtimeName);
  subModel.get(ENABLED).set(operation.has(ENABLED) && operation.get(ENABLED).asBoolean());
  context.completeStep();
}
