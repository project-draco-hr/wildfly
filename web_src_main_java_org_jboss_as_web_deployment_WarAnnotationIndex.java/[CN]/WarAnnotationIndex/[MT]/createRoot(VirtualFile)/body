{
  final VirtualFile classes=deploymentRoot.getChild(WarStructureDeploymentProcessor.WEB_INF_CLASSES);
  if (classes.exists()) {
    final Indexer indexer=new Indexer();
    try {
      final List<VirtualFile> classChildren=classes.getChildren(new SuffixMatchFilter(".class",VisitorAttributes.RECURSE_LEAVES_ONLY));
      for (      VirtualFile classFile : classChildren) {
        InputStream inputStream=null;
        try {
          inputStream=classFile.openStream();
          indexer.index(inputStream);
        }
  finally {
          VFSUtils.safeClose(inputStream);
        }
      }
      return indexer.complete();
    }
 catch (    Throwable t) {
      throw new DeploymentUnitProcessingException("Failed to index deployment root for annotations",t);
    }
  }
  return null;
}
