{
  if (resModule == null)   throw MESSAGES.nullVar("resModule");
  XModuleIdentity moduleId=resModule.getModuleId();
  String slot=moduleId.getVersion().toString();
  int revision=moduleId.getRevision();
  if (revision > 0)   slot+="-rev" + revision;
  String name=ServiceModuleLoader.MODULE_PREFIX + moduleId.getName();
  ModuleIdentifier identifier=ModuleIdentifier.create(name,slot);
  resModule.addAttachment(ModuleIdentifier.class,identifier);
  return identifier;
}
