{
  Deployment deployment=brev.getBundle().adapt(Deployment.class);
  DeploymentUnit depUnit=deployment.getAttachment(DeploymentUnit.class);
  List<ModuleDependency> dependencies=new ArrayList<ModuleDependency>();
  if (depUnit != null && depUnit.getParent() != null) {
    String parentName=depUnit.getParent().getName();
    ModuleIdentifier depId=ModuleIdentifier.create(MODULE_PREFIX + parentName);
    dependencies.add(new ModuleDependency(null,depId,false,false,false,false));
  }
  for (  BundleWire wire : wires) {
    XBundleRevision provider=(XBundleRevision)wire.getProvider();
    ModuleIdentifier providerid=provider.getModuleIdentifier();
    dependencies.add(new ModuleDependency(null,providerid,false,false,false,false));
  }
  ModuleIdentifier identifier=brev.getModuleIdentifier();
  return ModuleLoadService.install(serviceTarget,identifier,dependencies);
}
