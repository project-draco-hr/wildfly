{
  log.info("Activating Naming Subsystem");
  System.setProperty(Context.URL_PKG_PREFIXES,PACKAGE_PREFIXES);
  try {
    NamingManager.setInitialContextFactoryBuilder(new InitialContextFactoryBuilder());
  }
 catch (  NamingException e) {
    log.warn("Failed to set InitialContextFactoryBuilder",e);
  }
  final BatchBuilder builder=context.getBatchBuilder();
  builder.addService(NamingService.SERVICE_NAME,new NamingService(isSupportEvents()));
  final JavaContextService contextService=new JavaContextService();
  builder.addService(JavaContextService.SERVICE_NAME,contextService).addDependency(NamingService.SERVICE_NAME);
  if (isBindAppContext()) {
    addContextFactory(builder,"app");
  }
  if (isBindModuleContext()) {
    addContextFactory(builder,"module");
  }
  if (isBindCompContext()) {
    addContextFactory(builder,"comp");
  }
}
