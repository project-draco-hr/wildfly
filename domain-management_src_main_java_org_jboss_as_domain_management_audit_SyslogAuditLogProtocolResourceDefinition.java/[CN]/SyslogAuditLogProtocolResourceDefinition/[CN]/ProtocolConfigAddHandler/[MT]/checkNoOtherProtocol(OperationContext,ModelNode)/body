{
  PathAddress opAddr=PathAddress.pathAddress(operation.require(OP_ADDR));
  PathAddress addr=opAddr.subAddress(0,opAddr.size() - 1);
  Resource resource=context.readResourceFromRoot(addr);
  Set<ResourceEntry> existing=resource.getChildren(ModelDescriptionConstants.PROTOCOL);
  if (existing.size() > 1) {
    for (    ResourceEntry entry : existing) {
      PathElement mine=addr.getLastElement();
      if (!entry.getPathElement().equals(mine)) {
        throw DomainManagementMessages.MESSAGES.sysLogProtocolAlreadyConfigured(addr.append(mine));
      }
    }
  }
}
