{
  try {
    log.info("-->About to deploy MDB archive");
    deployer.deploy(MDB_DEPLOYMENT_NAME);
    log.info("-->deployed");
    assertEquals("Wrong postCreate calls count",0,cycleCounter.getPostCreateCount());
    assertEquals("Wrong preDestroy calls count",0,cycleCounter.getPreDestroyCount());
    log.info("-->Performing JMS call to spawn bean");
    triggerMDB();
    assertEquals("Wrong postCreate calls count, after EJB has been triggered",1,cycleCounter.getPostCreateCount());
    assertEquals("Wrong preDestroy calls count, after EJB has been triggered",0,cycleCounter.getPreDestroyCount());
    log.info("-->About to undeploy MDB archive");
    deployer.undeploy(MDB_DEPLOYMENT_NAME);
    assertEquals("Wrong postCreate calls count, after EJB has been undeployed",1,cycleCounter.getPostCreateCount());
    assertEquals("Wrong preDestroy calls count, after EJB has been undeployed",1,cycleCounter.getPreDestroyCount());
  }
  finally {
    cycleCounter.reset();
  }
}
