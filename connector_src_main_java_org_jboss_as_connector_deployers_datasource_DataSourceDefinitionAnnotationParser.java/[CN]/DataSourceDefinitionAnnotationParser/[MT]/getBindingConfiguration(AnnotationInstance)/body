{
  final AnnotationValue nameValue=datasourceAnnotation.value("name");
  if (nameValue == null || nameValue.asString().isEmpty()) {
    throw MESSAGES.annotationAttributeMissing("@DataSourceDefinition","name");
  }
  String name=nameValue.asString();
  if (!name.startsWith("java:")) {
    name="java:comp/env/" + name;
  }
  final AnnotationValue classValue=datasourceAnnotation.value("className");
  if (classValue == null || classValue.asString().equals(Object.class.getName())) {
    throw MESSAGES.annotationAttributeMissing("@DataSourceDefinition","className");
  }
  final String type=classValue.asString();
  final DirectDataSourceInjectionSource directDataSourceInjectionSource=new DirectDataSourceInjectionSource(name);
  directDataSourceInjectionSource.setClassName(type);
  directDataSourceInjectionSource.setDatabaseName(asString(datasourceAnnotation,DirectDataSourceInjectionSource.DATABASE_NAME_PROP));
  directDataSourceInjectionSource.setDescription(asString(datasourceAnnotation,DirectDataSourceInjectionSource.DESCRIPTION_PROP));
  directDataSourceInjectionSource.setInitialPoolSize(asInt(datasourceAnnotation,DirectDataSourceInjectionSource.INITIAL_POOL_SIZE_PROP));
  directDataSourceInjectionSource.setIsolationLevel(asInt(datasourceAnnotation,DirectDataSourceInjectionSource.ISOLATION_LEVEL_PROP));
  directDataSourceInjectionSource.setLoginTimeout(asInt(datasourceAnnotation,DirectDataSourceInjectionSource.LOGIN_TIMEOUT_PROP));
  directDataSourceInjectionSource.setMaxIdleTime(asInt(datasourceAnnotation,DirectDataSourceInjectionSource.MAX_IDLE_TIME_PROP));
  directDataSourceInjectionSource.setMaxStatements(asInt(datasourceAnnotation,DirectDataSourceInjectionSource.MAX_STATEMENTS_PROP));
  directDataSourceInjectionSource.setMaxPoolSize(asInt(datasourceAnnotation,DirectDataSourceInjectionSource.MAX_POOL_SIZE_PROP));
  directDataSourceInjectionSource.setMinPoolSize(asInt(datasourceAnnotation,DirectDataSourceInjectionSource.MIN_POOL_SIZE_PROP));
  directDataSourceInjectionSource.setPassword(asString(datasourceAnnotation,DirectDataSourceInjectionSource.PASSWORD_PROP));
  directDataSourceInjectionSource.setPortNumber(asInt(datasourceAnnotation,DirectDataSourceInjectionSource.PORT_NUMBER_PROP));
  directDataSourceInjectionSource.setProperties(asArray(datasourceAnnotation,DirectDataSourceInjectionSource.PROPERTIES_PROP));
  directDataSourceInjectionSource.setServerName(asString(datasourceAnnotation,DirectDataSourceInjectionSource.SERVER_NAME_PROP));
  directDataSourceInjectionSource.setTransactional(asBool(datasourceAnnotation,DirectDataSourceInjectionSource.TRANSACTIONAL_PROP));
  directDataSourceInjectionSource.setUrl(asString(datasourceAnnotation,DirectDataSourceInjectionSource.URL_PROP));
  directDataSourceInjectionSource.setUser(asString(datasourceAnnotation,DirectDataSourceInjectionSource.USER_PROP));
  final BindingConfiguration bindingDescription=new BindingConfiguration(name,directDataSourceInjectionSource);
  return bindingDescription;
}
