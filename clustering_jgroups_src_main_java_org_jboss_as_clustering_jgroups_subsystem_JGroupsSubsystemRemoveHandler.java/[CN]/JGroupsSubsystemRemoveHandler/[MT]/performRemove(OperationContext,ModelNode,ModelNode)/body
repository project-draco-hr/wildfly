{
  PathAddress subsystemAddress=PathAddress.pathAddress(operation.require(OP_ADDR));
  if (model.hasDefined(ChannelResourceDefinition.WILDCARD_PATH.getKey())) {
    ModelNode channels=model.get(ChannelResourceDefinition.WILDCARD_PATH.getKey());
    if (channels.isDefined()) {
      for (      Property channel : channels.asPropertyList()) {
        PathAddress address=subsystemAddress.append(ChannelResourceDefinition.pathElement(channel.getName()));
        context.addStep(Util.createRemoveOperation(address),new ChannelRemoveHandler(this.allowRuntimeOnlyRegistration),OperationContext.Stage.MODEL);
      }
    }
  }
  if (model.hasDefined(StackResourceDefinition.WILDCARD_PATH.getKey())) {
    ModelNode stacks=model.get(StackResourceDefinition.WILDCARD_PATH.getKey());
    if (stacks.isDefined()) {
      for (      Property stack : stacks.asPropertyList()) {
        PathAddress address=subsystemAddress.append(StackResourceDefinition.pathElement(stack.getName()));
        context.addStep(Util.createRemoveOperation(address),new StackRemoveHandler(),OperationContext.Stage.MODEL);
      }
    }
  }
  super.performRemove(context,operation,model);
}
