{
  final BatchBuilder builder=context.getBatchBuilder();
  final XATerminatorService xaTerminatorService=new XATerminatorService();
  builder.addService(TxnServices.JBOSS_TXN_XA_TERMINATOR,xaTerminatorService);
  final TransactionManagerService transactionManagerService=new TransactionManagerService();
  builder.addService(TxnServices.JBOSS_TXN_TRANSACTION_MANAGER,transactionManagerService);
  final TransactionManagerService transactionManagerPrivateService=new TransactionManagerService();
  final BatchServiceBuilder<com.arjuna.ats.jbossatx.jta.TransactionManagerService> transactionManagerPrivateServiceBuilder=builder.addService(TxnServices.JBOSS_TXN_TRANSACTION_MANAGER_PRIVATE,transactionManagerPrivateService);
  transactionManagerPrivateServiceBuilder.addOptionalDependency(ServiceName.JBOSS.append("iiop","orb"),new CastingInjector<ORB>(transactionManagerPrivateService.getOrbInjector(),ORB.class));
}
