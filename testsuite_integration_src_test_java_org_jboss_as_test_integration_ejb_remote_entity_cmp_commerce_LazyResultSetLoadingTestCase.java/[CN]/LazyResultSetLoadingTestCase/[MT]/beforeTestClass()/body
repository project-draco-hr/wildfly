{
  final Endpoint endpoint=Remoting.createEndpoint("endpoint",OptionMap.EMPTY);
  endpoint.addConnectionProvider("remote",new RemoteConnectionProviderFactory(),OptionMap.create(Options.SSL_ENABLED,Boolean.FALSE));
  final int ejbRemotingPort=EJBRemoteManagementUtil.getEJBRemoteConnectorPort("localhost",9999,getCallbackHandler());
  final IoFuture<Connection> futureConnection=endpoint.connect(new URI("remote://localhost:" + ejbRemotingPort),OptionMap.create(Options.SASL_POLICY_NOANONYMOUS,Boolean.FALSE),getCallbackHandler());
  connection=IoFutureHelper.get(futureConnection,5,TimeUnit.SECONDS);
}
