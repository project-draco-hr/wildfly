{
  Iterator<NodeImpl> iterator=nodes.iterator();
  while (iterator.hasNext()) {
    Node next=iterator.next();
    if (next.getName() == null) {
      if (iterator.hasNext()) {
        throw new IllegalStateException("The node name is not specified for type '" + next.getType() + "'");
      }
 else {
        builder.addNodeType(next.getType());
      }
    }
 else {
      builder.addNode(next.getType(),next.getName());
    }
  }
}
