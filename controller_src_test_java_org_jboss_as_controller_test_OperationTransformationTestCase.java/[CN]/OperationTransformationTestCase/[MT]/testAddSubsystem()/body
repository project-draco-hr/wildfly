{
  final ModelVersion subsystem=ModelVersion.create(1,2);
  final TransformerRegistry registry=TransformerRegistry.Factory.create(null);
  TransformersSubRegistration sub=registry.registerSubsystemTransformers("test",subsystem,ResourceTransformer.DISCARD);
  sub.registerOperationTransformer("test",OPERATION_TRANSFORMER);
  final TransformationTarget host=create(registry,ModelVersion.create(1,2,3));
  host.addSubsystemVersion("test",subsystem);
  final PathAddress profile=PathAddress.pathAddress(PathElement.pathElement(ModelDescriptionConstants.PROFILE,"test"));
  final PathAddress serverAddress=PathAddress.pathAddress(PathElement.pathElement(ModelDescriptionConstants.HOST,"test"),PathElement.pathElement(ModelDescriptionConstants.RUNNING_SERVER,"test"));
  final PathAddress subsytemAddress=PathAddress.pathAddress(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM,"test"));
  final OperationTransformer profileTransformer=host.resolveTransformer(new MockTransformationContext(),profile.append(subsytemAddress),"test");
  Assert.assertEquals(profileTransformer,OPERATION_TRANSFORMER);
  final OperationTransformer serverTransformer=host.resolveTransformer(new MockTransformationContext(),serverAddress.append(subsytemAddress),"test");
  Assert.assertEquals(serverTransformer,OPERATION_TRANSFORMER);
}
