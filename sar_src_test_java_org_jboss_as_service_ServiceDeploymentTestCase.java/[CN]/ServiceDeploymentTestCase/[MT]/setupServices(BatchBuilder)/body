{
  super.setupServices(batchBuilder);
  batchBuilder.addService(MBeanServerService.SERVICE_NAME,new MBeanServerService()).install();
  final DeploymentChain deploymentChain=new DeploymentChainImpl();
  batchBuilder.addService(DeploymentChain.SERVICE_NAME,new DeploymentChainService(deploymentChain)).install();
  deploymentChain.addProcessor(new ManifestAttachmentProcessor(),Phase.PARSE_MANIFEST);
  deploymentChain.addProcessor(new AnnotationIndexProcessor(),Phase.PARSE_ANNOTATION_INDEX);
  deploymentChain.addProcessor(new ModuleDependencyProcessor(),Phase.DEPENDENCIES_MODULE);
  deploymentChain.addProcessor(new ModuleConfigProcessor(),Phase.MODULARIZE_CONFIG);
  deploymentChain.addProcessor(new DeploymentModuleLoaderProcessor(new DeploymentModuleLoaderImpl(mainModuleLoader)),Phase.MODULARIZE_DEPLOYMENT_MODULE_LOADER);
  deploymentChain.addProcessor(new ModuleDeploymentProcessor(),Phase.MODULARIZE_DEPLOYMENT);
  deploymentChain.addProcessor(new ServiceDeploymentParsingProcessor(),Phase.PARSE_SERVICE_DEPLOYMENT);
  deploymentChain.addProcessor(new ParsedServiceDeploymentProcessor(),Phase.INSTALL_SERVICE_DEPLOYMENT);
}
