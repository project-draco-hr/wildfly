{
  this.console=console;
  console.setUseHistory(true);
  String userHome=SecurityActions.getSystemProperty("user.home");
  File historyFile=new File(userHome,".jboss-cli-history");
  try {
    console.getHistory().setHistoryFile(historyFile);
  }
 catch (  IOException e) {
    System.err.println("Failed to setup the history file " + historyFile.getAbsolutePath() + ": "+ e.getLocalizedMessage());
  }
  this.history=new HistoryImpl();
  operationCandidatesProvider=new DefaultOperationCandidatesProvider(this);
}
