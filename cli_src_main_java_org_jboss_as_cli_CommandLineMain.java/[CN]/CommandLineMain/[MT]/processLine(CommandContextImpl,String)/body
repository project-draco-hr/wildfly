{
  if (line.isEmpty()) {
    return;
  }
  if (isOperation(line)) {
    cmdCtx.cmdArgs=line;
    operationHandler.handle(cmdCtx);
  }
 else {
    String cmd=line;
    String cmdArgs=null;
    for (int i=0; i < cmd.length(); ++i) {
      if (Character.isWhitespace(cmd.charAt(i))) {
        cmdArgs=cmd.substring(i + 1).trim();
        cmd=cmd.substring(0,i);
        break;
      }
    }
    cmdCtx.setArgs(cmdArgs);
    CommandHandler handler=handlers.get(cmd.toLowerCase());
    if (handler != null) {
      handler.handle(cmdCtx);
    }
 else {
      cmdCtx.printLine("Unexpected command '" + line + "'. Type 'help' for the list of supported commands.");
    }
  }
}
