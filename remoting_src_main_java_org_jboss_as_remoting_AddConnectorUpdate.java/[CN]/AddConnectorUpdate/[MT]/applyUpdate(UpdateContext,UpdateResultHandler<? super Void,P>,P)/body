{
  final BatchBuilder batchBuilder=updateContext.getBatchBuilder();
  final OptionMap.Builder builder=OptionMap.builder();
  if (saslElement != null)   saslElement.applyTo(builder);
  final ConnectorService connectorService=new ConnectorService();
  connectorService.setOptionMap(builder.getMap());
  final UpdateResultHandler.ServiceStartListener<P> listener=new UpdateResultHandler.ServiceStartListener<P>(resultHandler,param);
  final ServiceName connectorName=ConnectorElement.connectorName(name);
  try {
    batchBuilder.addService(connectorName,connectorService).addDependency(connectorName.append("auth-provider"),ServerAuthenticationProvider.class,connectorService.getAuthenticationProviderInjector()).addDependency(RemotingSubsystemElement.JBOSS_REMOTING_ENDPOINT,Endpoint.class,connectorService.getEndpointInjector()).addListener(listener).setInitialMode(ServiceController.Mode.ACTIVE).install();
    batchBuilder.install();
  }
 catch (  ServiceRegistryException e) {
    resultHandler.handleFailure(e,param);
  }
}
