{
  final BatchBuilder batchBuilder=updateContext.getBatchBuilder();
  final OptionMap.Builder builder=OptionMap.builder();
  if (saslElement != null)   saslElement.applyTo(builder);
  final ConnectorService connectorService=new ConnectorService();
  connectorService.setOptionMap(builder.getMap());
  final UpdateResultHandler.ServiceStartListener<P> listener=new UpdateResultHandler.ServiceStartListener<P>(resultHandler,param);
  final ServiceName connectorName=ConnectorElement.connectorName(name);
  final BatchServiceBuilder<ChannelListener<ConnectedStreamChannel<InetSocketAddress>>> serviceBuilder=batchBuilder.addService(connectorName,connectorService);
  serviceBuilder.addDependency(connectorName.append("auth-provider"),ServerAuthenticationProvider.class,connectorService.getAuthenticationProviderInjector());
  serviceBuilder.addDependency(RemotingSubsystemElement.JBOSS_REMOTING_ENDPOINT,Endpoint.class,connectorService.getEndpointInjector());
  serviceBuilder.addListener(listener);
  serviceBuilder.setInitialMode(ServiceController.Mode.ACTIVE);
  try {
    batchBuilder.install();
  }
 catch (  ServiceRegistryException e) {
    resultHandler.handleFailure(e,param);
  }
}
