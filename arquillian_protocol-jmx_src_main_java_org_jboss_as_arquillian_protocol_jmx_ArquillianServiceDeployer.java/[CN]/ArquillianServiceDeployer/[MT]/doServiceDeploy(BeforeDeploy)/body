{
  ServiceArchiveHolder archiveHolder=archiveHolderInst.get();
  if (archiveHolder != null && serviceArchiveDeployed.get() == false) {
    Archive<?> archive=archiveHolder.getArchive();
    if (isArquillianServiceDeployed(archive))     undeployArquillianService(archive);
    try {
      log.infof("Deploy arquillian service: %s",archive);
      DeployableContainer<?> deployableContainer=containerInst.get().getDeployableContainer();
      deployableContainer.deploy(archive);
      serviceArchiveDeployed.set(true);
    }
 catch (    Throwable th) {
      log.error("Cannot deploy arquillian service",th);
    }
  }
}
