{
  try {
    final ModelNode operation=new ModelNode();
    operation.get(OP).set(READ_CHILDREN_NAMES_OPERATION);
    operation.get(CHILD_TYPE).set(DEPLOYMENT);
    ModelNode result=getModelControllerClient().execute(OperationBuilder.Factory.create(operation).build());
    if (FAILED.equals(result.get(OUTCOME).asString()))     throw new IllegalStateException("Management request failed: " + result);
    List<ModelNode> nodeList=result.get(RESULT).asList();
    for (    ModelNode node : nodeList) {
      if (node.asString().equals(archive.getName())) {
        log.infof("Found already deployed arquillian service: %s",node);
        return true;
      }
    }
    return false;
  }
 catch (  RuntimeException rte) {
    throw rte;
  }
catch (  Exception ex) {
    throw new IllegalStateException("Cannot determine whether arquillian service is deployed",ex);
  }
}
