{
  if (asyncHandlerName.equals(handlerNameToAdd)) {
    throw createFailureMessage(MESSAGES.cannotAddHandlerToSelf(asyncHandlerName));
  }
  final ServiceRegistry serviceRegistry=context.getServiceRegistry(true);
  @SuppressWarnings("unchecked") final ServiceController<Handler> asyncHandlerController=(ServiceController<Handler>)serviceRegistry.getService(LogServices.handlerName(asyncHandlerName));
  @SuppressWarnings("unchecked") final ServiceController<Handler> handlerToAssignController=(ServiceController<Handler>)serviceRegistry.getService(LogServices.handlerName(handlerNameToAdd));
  if (handlerToAssignController == null) {
    throw createFailureMessage(MESSAGES.handlerNotFound(handlerNameToAdd));
  }
  final AsyncHandlerService service=AsyncHandlerService.class.cast(asyncHandlerController.getService());
  final InjectedValue<Handler> injectedHandler=new InjectedValue<Handler>();
  injectedHandler.inject(handlerToAssignController.getValue());
  service.addHandler(injectedHandler);
}
