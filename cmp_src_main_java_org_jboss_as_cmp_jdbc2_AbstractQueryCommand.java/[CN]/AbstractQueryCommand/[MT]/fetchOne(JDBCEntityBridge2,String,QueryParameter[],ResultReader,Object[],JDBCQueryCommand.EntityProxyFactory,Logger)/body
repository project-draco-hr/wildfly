{
  Object pk;
  Connection con=null;
  PreparedStatement ps=null;
  ResultSet rs=null;
  boolean throwRuntimeExceptions=entity.getMetaData().getThrowRuntimeExceptions();
  if (throwRuntimeExceptions) {
    try {
      con=entity.getDataSource().getConnection();
    }
 catch (    SQLException sqle) {
      javax.ejb.EJBException ejbe=new javax.ejb.EJBException("Could not get a connection; " + sqle);
      throw ejbe;
    }
  }
  try {
    if (log.isDebugEnabled()) {
      log.debug("executing: " + sql);
    }
    if (!throwRuntimeExceptions) {
      con=entity.getDataSource().getConnection();
    }
    ps=con.prepareStatement(sql);
    if (params != null) {
      for (int i=0; i < params.length; i++) {
        params[i].set(log,ps,i + 1,args);
      }
    }
    rs=ps.executeQuery();
    if (rs.next()) {
      pk=resultReader.readRow(rs,factory);
      if (rs.next()) {
        List list=new ArrayList();
        list.add(pk);
        list.add(resultReader.readRow(rs,factory));
        while (rs.next()) {
          list.add(resultReader.readRow(rs,factory));
        }
        throw MESSAGES.moreThanOneInstanceForSingleValueFinder(list);
      }
    }
 else {
      throw new ObjectNotFoundException();
    }
  }
 catch (  FinderException e) {
    throw e;
  }
catch (  Exception e) {
    FinderException fe=new FinderException(e.getMessage());
    fe.initCause(e);
    throw fe;
  }
 finally {
    JDBCUtil.safeClose(rs);
    JDBCUtil.safeClose(ps);
    JDBCUtil.safeClose(con);
  }
  return pk;
}
