{
  if (cachedLdapConnectionHandlers != null && cachedLdapConnectionHandlers.containsKey(referralUri)) {
    return cachedLdapConnectionHandlers.get(referralUri);
  }
  LdapConnectionManager nextConnectionManager=ldapConnectionManager.findForReferral(referralUri);
  if (nextConnectionManager == null) {
    return null;
  }
  final LdapConnectionHandler nextLdapConnectionHandler;
  if (nextConnectionManager == ldapConnectionManager) {
    nextLdapConnectionHandler=this;
  }
 else {
    nextLdapConnectionHandler=new LdapConnectionHandler(this,nextConnectionManager);
  }
  cache(referralUri,nextLdapConnectionHandler);
  return nextLdapConnectionHandler;
}
