{
  try {
    onBeforeInvocation(wsInvocation);
    final ComponentViewInstance ejbInstance=getEjb3Container();
    final Method method=getEJBMethod(wsInvocation.getJavaMethod(),ejbInstance.allowedMethods());
    final InterceptorContext context=new InterceptorContext();
    context.setMethod(method);
    context.setContextData(getWebServiceContext(wsInvocation).getMessageContext());
    context.setParameters(wsInvocation.getArgs());
    context.setTarget(ejbInstance.createProxy());
    context.putPrivateData(Component.class,ejbInstance.getComponent());
    final Object retObj=ejbInstance.getEntryPoint(method).processInvocation(context);
    wsInvocation.setReturnValue(retObj);
  }
 catch (  Throwable t) {
    log.error("Method invocation failed with exception: " + t.getMessage(),t);
    handleInvocationException(t);
  }
 finally {
    onAfterInvocation(wsInvocation);
  }
}
