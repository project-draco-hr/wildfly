{
  try {
    onBeforeInvocation(wsInvocation);
    final ComponentViewInstance componentViewInstance=getComponentViewInstance();
    final Method method=getEJBMethod(wsInvocation.getJavaMethod(),componentViewInstance.allowedMethods());
    final InterceptorContext context=new InterceptorContext();
    context.setMethod(method);
    context.setContextData(getWebServiceContext(wsInvocation).getMessageContext());
    context.setParameters(wsInvocation.getArgs());
    context.setTarget(componentViewInstance.createProxy());
    context.putPrivateData(Component.class,componentViewInstance.getComponent());
    context.putPrivateData(ComponentViewInstance.class,componentViewInstance);
    final Object retObj=componentViewInstance.getEntryPoint(method).processInvocation(context);
    wsInvocation.setReturnValue(retObj);
  }
 catch (  Throwable t) {
    log.error("Method invocation failed with exception: " + t.getMessage(),t);
    handleInvocationException(t);
  }
 finally {
    onAfterInvocation(wsInvocation);
  }
}
