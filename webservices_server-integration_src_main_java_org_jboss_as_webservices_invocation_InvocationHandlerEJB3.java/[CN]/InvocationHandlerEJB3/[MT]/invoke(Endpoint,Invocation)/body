{
  try {
    this.onBeforeInvocation(wsInvocation);
    final ComponentView ejbContainer=getEjb3Container();
    final Map<String,Object> contextData=getWebServiceContext(wsInvocation).getMessageContext();
    final Object[] args=wsInvocation.getArgs();
    final ComponentViewInstance ejbInstance=ejbContainer.createInstance();
    final InterceptorContext interceptorContext=new InterceptorContext();
    final Method seiMethod=wsInvocation.getJavaMethod();
    final Method method=lookupProperMethod(seiMethod,ejbInstance.allowedMethods());
    interceptorContext.setMethod(method);
    interceptorContext.setContextData(contextData);
    interceptorContext.setParameters(args);
    interceptorContext.setTarget(ejbInstance.createProxy());
    interceptorContext.putPrivateData(Component.class,ejbInstance.getComponent());
    final Object retObj=ejbInstance.getEntryPoint(method).processInvocation(interceptorContext);
    wsInvocation.setReturnValue(retObj);
  }
 catch (  Throwable t) {
    this.log.error("Method invocation failed with exception: " + t.getMessage(),t);
    this.handleInvocationException(t);
  }
 finally {
    this.onAfterInvocation(wsInvocation);
  }
}
