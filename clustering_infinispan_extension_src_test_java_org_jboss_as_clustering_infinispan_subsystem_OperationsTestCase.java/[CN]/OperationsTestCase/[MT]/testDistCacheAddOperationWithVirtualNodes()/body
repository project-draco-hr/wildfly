{
  String subsystemXml=getSubsystemXml();
  KernelServices servicesA=this.createKernelServicesBuilder().setSubsystemXml(subsystemXml).build();
  ModelNode distCacheAddOp=getCacheAddOperation("maximal",ModelKeys.DISTRIBUTED_CACHE,"new-dist-cache");
  distCacheAddOp.get(ModelKeys.MODE).set("SYNC");
  distCacheAddOp.get(ModelKeys.VIRTUAL_NODES).set(6);
  ModelNode result=servicesA.executeOperation(distCacheAddOp);
  Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
  ModelNode readDistCacheSegmentsOp=getCacheReadOperation("maximal",ModelKeys.DISTRIBUTED_CACHE,"new-dist-cache","segments");
  result=servicesA.executeOperation(readDistCacheSegmentsOp);
  Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
  Assert.assertEquals("36",result.get(RESULT).asString());
}
