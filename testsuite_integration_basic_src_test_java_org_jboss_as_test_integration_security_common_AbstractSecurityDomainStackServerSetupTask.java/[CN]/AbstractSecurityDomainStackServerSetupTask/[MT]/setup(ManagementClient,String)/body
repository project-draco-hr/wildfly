{
  final String securityDomainName=getSecurityDomainName();
  if (LOGGER.isInfoEnabled()) {
    LOGGER.info("Adding security domain " + securityDomainName);
  }
  this.managementClient=managementClient;
  final List<ModelNode> updates=new ArrayList<ModelNode>();
  ModelNode op=new ModelNode();
  op.get(OP).set(ADD);
  op.get(OP_ADDR).add(SUBSYSTEM,SUBSYSTEM_SECURITY);
  op.get(OP_ADDR).add(SECURITY_DOMAIN,securityDomainName);
  updates.add(op);
  final ModelNode authnNode=createSecurityModelNode(Constants.AUTHENTICATION,Constants.LOGIN_MODULES,getLoginModuleConfigurations());
  if (authnNode != null) {
    updates.add(authnNode);
  }
  final ModelNode authzNode=createSecurityModelNode(Constants.AUTHORIZATION,Constants.POLICY_MODULES,getAuthorizationModuleConfigurations());
  if (authzNode != null) {
    updates.add(authzNode);
  }
  applyUpdates(managementClient.getControllerClient(),updates);
}
