{
  final Subject subject=context.getAttachment().getSerializableSubject();
  final ManagementRequestHeader header=ManagementRequestHeader.class.cast(context.getRequestHeader());
  final ManagementResponseHeader response=new ManagementResponseHeader(header.getVersion(),header.getRequestId(),null);
  context.executeAsync(new ManagementRequestContext.AsyncTask<ExecuteRequestContext>(){
    @Override public void execute(    ManagementRequestContext<ExecuteRequestContext> context) throws Exception {
      final FlushableDataOutput output=context.writeMessage(response);
      try {
        output.writeByte(ModelControllerProtocol.PARAM_SUBJECT_LENGTH);
        if (subject != null) {
          output.writeInt(1);
          Marshaller marshaller=MarshallingUtil.getMarshaller();
          marshaller.start(MarshallingUtil.createByteOutput(output));
          marshaller.writeObject(subject);
          marshaller.finish();
        }
 else {
          output.writeInt(0);
        }
        output.writeByte(ManagementProtocol.RESPONSE_END);
        output.close();
      }
  finally {
        StreamUtils.safeClose(output);
      }
    }
  }
);
}
