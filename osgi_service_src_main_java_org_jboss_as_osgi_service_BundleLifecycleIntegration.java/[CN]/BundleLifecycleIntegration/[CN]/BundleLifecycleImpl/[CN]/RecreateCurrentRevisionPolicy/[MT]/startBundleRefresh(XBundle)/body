{
  this.bundle=bundle;
  XBundleRevision brev=bundle.getBundleRevision();
  Deployment dep=brev.getAttachment(IntegrationConstants.DEPLOYMENT_KEY);
  try {
    InputStream inputStream=dep.getRoot().getStreamURL().openStream();
    rootFile=AbstractVFS.toVirtualFile(inputStream);
  }
 catch (  IOException ex) {
    throw FrameworkMessages.MESSAGES.cannotObtainVirtualFile(ex);
  }
  bundle.putAttachment(BUNDLE_REFRESHING_KEY,Boolean.TRUE);
  undeployRevision(brev);
}
