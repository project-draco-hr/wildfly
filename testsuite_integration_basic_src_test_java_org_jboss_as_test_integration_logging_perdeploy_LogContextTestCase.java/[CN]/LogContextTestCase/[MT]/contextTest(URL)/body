{
  final String u=UrlBuilder.of(url,LogContextHackServlet.SERVLET_URL).build();
  String result=performCall(u);
  Assert.assertEquals("No LogContexts should exist in WAR deployment",0,Integer.valueOf(result).intValue());
  deployer.deploy("logging");
  result=performCall(u);
  Assert.assertEquals("One LogContexts should exist in WAR deployment",1,Integer.valueOf(result).intValue());
  deployer.undeploy("logging");
  result=performCall(u);
  Assert.assertEquals("No LogContexts should exist in WAR deployment",0,Integer.valueOf(result).intValue());
  deployer.deploy("logging-ear");
  result=performCall(u);
  Assert.assertEquals("Three LogContexts should exist in EAR deployment",3,Integer.valueOf(result).intValue());
  deployer.undeploy("logging-ear");
  result=performCall(u);
  Assert.assertEquals("No LogContexts should exist in EAR deployment",0,Integer.valueOf(result).intValue());
  deployer.deploy("logging-profile");
  result=performCall(u);
  Assert.assertEquals("One LogContexts should exist in WAR deployment with logging-profile",1,Integer.valueOf(result).intValue());
  deployer.undeploy("logging-profile");
  result=performCall(u);
  Assert.assertEquals("No LogContexts should exist in WAR deployment with logging-profile",0,Integer.valueOf(result).intValue());
  deployer.deploy("logging-profile-ear");
  result=performCall(u);
  Assert.assertEquals("Three LogContexts should exist in EAR deployment with logging-profile",3,Integer.valueOf(result).intValue());
  deployer.undeploy("logging-profile-ear");
  result=performCall(u);
  Assert.assertEquals("No LogContexts should exist in EAR deployment with logging-profile",0,Integer.valueOf(result).intValue());
}
