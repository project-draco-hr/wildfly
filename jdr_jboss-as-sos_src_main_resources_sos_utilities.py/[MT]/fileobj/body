def fileobj(path_or_file, mode='r'):
    'Returns a file-like object that can be used as a context manager'
    if isinstance(path_or_file, basestring):
        try:
            return open(path_or_file, mode)
        except:
            log = logging.getLogger('sos')
            log.debug(('fileobj: %s could not be opened' % path_or_file))
            return closing(StringIO())
    else:
        return closing(path_or_file)
