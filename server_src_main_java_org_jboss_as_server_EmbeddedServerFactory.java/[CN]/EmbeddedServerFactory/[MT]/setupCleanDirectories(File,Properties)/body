{
  File tempRoot=getTempRoot(props);
  if (tempRoot == null) {
    return;
  }
  File originalConfigDir=getFileUnderAsRoot(jbossHomeDir,props,ServerEnvironment.SERVER_CONFIG_DIR,"configuration");
  File orginalDataDir=getFileUnderAsRoot(jbossHomeDir,props,ServerEnvironment.SERVER_DATA_DIR,"data");
  File configDir=new File(tempRoot,"config");
  configDir.mkdir();
  File dataDir=new File(tempRoot,"data");
  dataDir.mkdir();
  copyDirectory(originalConfigDir,configDir);
  copyDirectory(orginalDataDir,dataDir);
  props.put(ServerEnvironment.SERVER_CONFIG_DIR,configDir.getAbsolutePath());
  props.put(ServerEnvironment.SERVER_DATA_DIR,dataDir.getAbsolutePath());
}
