{
  File patchXMLfile=new File(dir,"patch.xml");
  patchXMLfile.createNewFile();
  FileOutputStream fos=new FileOutputStream(patchXMLfile);
  try {
    PatchXml.marshal(fos,patch);
  }
  finally {
    safeClose(fos);
  }
  if (logContent) {
    java.io.FileInputStream fis=null;
    try {
      fis=new java.io.FileInputStream(new java.io.File(dir,"patch.xml"));
      final byte[] bytes=new byte[fis.available()];
      fis.read(bytes);
      System.out.println(new String(bytes));
    }
  finally {
      StreamUtils.safeClose(fis);
    }
  }
}
