{
  assertNotBuilt();
  built=true;
  ModelNode add=new ModelNode();
  add.get(OP).set(ADD);
  add.get(ADDRESS).set(parent.getLdapAuthorizationAddress().add(GROUP_SEARCH,GROUP_TO_PRINCIPAL));
  if (baseDn != null) {
    add.get(BASE_DN).set(baseDn);
  }
  if (groupDnAttribute != null) {
    add.get(GROUP_DN_ATTRIBUTE).set(groupDnAttribute);
  }
  if (groupName != null) {
    add.get(GROUP_NAME).set(groupName.toString());
  }
  if (groupNameAttribute != null) {
    add.get(GROUP_NAME_ATTRIBUTE).set(groupNameAttribute);
  }
  if (iterative) {
    add.get(ITERATIVE).set(true);
  }
  if (principalAttribute != null) {
    add.get(PRINCIPAL_ATTRIBUTE).set(principalAttribute);
  }
  if (recursive) {
    add.get(RECURSIVE).set(true);
  }
  if (searchBy != null) {
    add.get(SEARCH_BY).set(searchBy.toString());
  }
  return parent.addStep(add);
}
