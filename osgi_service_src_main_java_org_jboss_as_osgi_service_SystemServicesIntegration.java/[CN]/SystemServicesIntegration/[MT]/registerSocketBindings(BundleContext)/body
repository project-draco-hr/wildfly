{
  BundleManager bundleManager=injectedBundleManager.getValue();
  String bindingNames=syscontext.getProperty(FrameworkBootstrapService.MAPPED_OSGI_SOCKET_BINDINGS);
  if (bindingNames != null) {
    final Set<ServiceName> socketBindingNames=new HashSet<ServiceName>();
    for (    String suffix : bindingNames.split(",")) {
      socketBindingNames.add(JBOSS_BINDING_NAME.append(suffix));
    }
    ServiceTarget serviceTarget=bundleManager.getServiceTarget();
    ServiceName serviceName=IntegrationServices.SYSTEM_SERVICES_PLUGIN.append("BINDINGS");
    ServiceBuilder<Void> builder=serviceTarget.addService(serviceName,new AbstractService<Void>(){
      @Override public void start(      StartContext context) throws StartException {
        for (        ServiceName serviceName : socketBindingNames) {
          SocketBinding binding=(SocketBinding)serviceContainer.getRequiredService(serviceName).getValue();
          Dictionary<String,String> props=new Hashtable<String,String>();
          props.put("socketBinding",serviceName.getSimpleName());
          InetSocketAddress value=binding.getSocketAddress();
          syscontext.registerService(InetSocketAddress.class,value,props);
        }
      }
    }
);
    ServiceName[] serviceNameArray=socketBindingNames.toArray(new ServiceName[socketBindingNames.size()]);
    builder.addDependencies(serviceNameArray);
    builder.install();
  }
}
