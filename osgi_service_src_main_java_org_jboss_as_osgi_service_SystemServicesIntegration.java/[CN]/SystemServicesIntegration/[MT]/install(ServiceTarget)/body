{
  ServiceBuilder<SystemServicesPlugin> builder=serviceTarget.addService(SYSTEM_SERVICES_PLUGIN,this);
  builder.addDependency(JBOSS_SERVER_CONTROLLER,ModelController.class,injectedModelController);
  builder.addDependency(Services.BUNDLE_MANAGER,BundleManager.class,injectedBundleManager);
  builder.addDependency(Services.FRAMEWORK_CREATE,BundleContext.class,injectedBundleContext);
  builder.addDependency(OSGiConstants.REPOSITORY_SERVICE_NAME,XRepository.class,injectedRepository);
  for (  SubsystemExtension extension : extensions) {
    extension.configureServiceDependencies(SYSTEM_SERVICES_PLUGIN,builder);
  }
  builder.setInitialMode(Mode.ON_DEMAND);
  return builder.install();
}
