{
  DomainController dc=null;
  try {
    dc=injectedDomainController.getValue();
  }
 catch (  IllegalStateException ise) {
    throw new StartException(DomainController.class.getSimpleName() + " was not injected");
  }
  File configDir=dc.getDomainConfigDir();
  if (configDir == null)   throw new StartException("Domain configuration directory is null");
  File configFile=new File(configDir,"domain.xml");
  if (configFile.exists()) {
    if (configFile.isDirectory()) {
      throw new IllegalArgumentException(configFile.getAbsolutePath() + " is a directory");
    }
  }
 else {
    if (configFile.isDirectory() || !configDir.canWrite()) {
      throw new IllegalArgumentException(configFile.getAbsolutePath() + " is not a writable");
    }
  }
  this.configFile=configFile;
}
