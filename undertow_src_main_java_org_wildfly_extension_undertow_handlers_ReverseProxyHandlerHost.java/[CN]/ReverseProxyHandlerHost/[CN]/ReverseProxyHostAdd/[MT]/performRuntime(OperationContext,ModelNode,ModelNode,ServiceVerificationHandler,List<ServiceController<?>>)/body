{
  final PathAddress address=PathAddress.pathAddress(operation.require(ModelDescriptionConstants.OP_ADDR));
  final String name=address.getLastElement().getValue();
  final String proxyName=address.getElement(address.size() - 2).getValue();
  final String jvmRoute;
  if (model.hasDefined(Constants.NODE_ID)) {
    jvmRoute=NODE_ID.resolveModelAttribute(context,model).asString();
  }
 else {
    jvmRoute=null;
  }
  ReverseProxyHostService service=new ReverseProxyHostService(name,jvmRoute);
  ServiceBuilder<ReverseProxyHostService> builder=context.getServiceTarget().addService(SERVICE_NAME.append(proxyName).append(name),service).addDependency(UndertowService.HANDLER.append(proxyName),ProxyHandler.class,service.proxyHandler);
  if (verificationHandler != null) {
    builder.addListener(verificationHandler);
  }
  ServiceController<ReverseProxyHostService> controller=builder.install();
  if (newControllers != null) {
    newControllers.add(controller);
  }
}
