{
  node=peek(node,MAPPING,CLASSIC);
  if (node == null)   return false;
  List<ModelNode> modules=node.get(MAPPING_MODULES).asList();
  for (  ModelNode module : modules) {
    MappingInfo mappingInfo=new MappingInfo(securityDomain);
    String codeName=extractCode(module,ModulesMap.MAPPING_MAP);
    String mappingType;
    if (module.hasDefined(TYPE))     mappingType=module.get(TYPE).asString();
 else     mappingType=MappingType.ROLE.toString();
    Map<String,Object> options=extractOptions(module);
    MappingModuleEntry entry=new MappingModuleEntry(codeName,options,mappingType);
    mappingInfo.add(entry);
    applicationPolicy.setMappingInfo(mappingType,mappingInfo);
    String moduleName=module.get(MODULE).asString();
    if (moduleName != null && moduleName.length() > 0) {
      mappingInfo.setJBossModuleName(moduleName);
    }
  }
  return true;
}
