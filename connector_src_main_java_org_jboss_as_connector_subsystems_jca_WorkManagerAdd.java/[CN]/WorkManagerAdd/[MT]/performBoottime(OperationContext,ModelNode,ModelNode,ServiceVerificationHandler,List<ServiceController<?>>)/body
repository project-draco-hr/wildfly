{
  String name=WmParameters.NAME.getAttribute().resolveModelAttribute(context,model).asString();
  ServiceTarget serviceTarget=context.getServiceTarget();
  WorkManager wm=new NamedWorkManager(name);
  final WorkManagerService wmService=new WorkManagerService(wm);
  ServiceBuilder builder=serviceTarget.addService(ConnectorServices.WORKMANAGER_SERVICE.append(name),wmService);
  if (operation.get(WORKMANAGER_LONG_RUNNING).isDefined() && operation.get(WORKMANAGER_LONG_RUNNING).asBoolean()) {
    builder.addDependency(ThreadsServices.EXECUTOR.append(name + "-" + WORKMANAGER_LONG_RUNNING),Executor.class,wmService.getExecutorLongInjector());
  }
  builder.addDependency(ThreadsServices.EXECUTOR.append(name + "-" + WORKMANAGER_SHORT_RUNNING),Executor.class,wmService.getExecutorShortInjector());
  builder.addDependency(TxnServices.JBOSS_TXN_XA_TERMINATOR,JBossXATerminator.class,wmService.getXaTerminatorInjector()).addListener(verificationHandler).setInitialMode(ServiceController.Mode.ACTIVE).install();
}
