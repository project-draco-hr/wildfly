{
  try (BatchContext context=this.closed.compareAndSet(false,true) ? this.batcher.resumeBatch(this.batch) : null){
    try (Batch batch=(context != null) ? this.batch : this.batcher.createBatch()){
      if (log.isTraceEnabled()) {
        log.tracef("Invalidating SSO ID %s.",this.sso.getId());
      }
      this.sso.invalidate();
    }
   }
 }
