{
  ProtocolChannelClient.Configuration configuration=new ProtocolChannelClient.Configuration();
  configuration.setEndpointName(ENDPOINT_NAME);
  configuration.setUriScheme(URI_SCHEME);
  configuration.setUri(new URI("" + URI_SCHEME + "://127.0.0.1:"+ PORT+ ""));
  ProtocolChannelClient client=ProtocolChannelClient.create(configuration);
  connection=client.connect(new PasswordClientCallbackHandler("bob",configuration.getEndpointName(),"pass".toCharArray())).get();
  clientChannel=connection.openChannel(TEST_CHANNEL,OptionMap.EMPTY).get();
  try {
    clientConnectedLatch.await();
  }
 catch (  InterruptedException e) {
    throw new RuntimeException(e);
  }
}
