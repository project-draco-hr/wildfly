{
  final ModelNode address=operation.require(OP_ADDR);
  final String name=PathAddress.pathAddress(address).getLastElement().getValue();
  String archiveOrModuleName;
  if (!model.hasDefined(ARCHIVE.getName()) && !model.hasDefined(MODULE.getName())) {
    throw ConnectorMessages.MESSAGES.archiveOrModuleRequired();
  }
  if (model.get(ARCHIVE.getName()).isDefined()) {
    archiveOrModuleName=model.get(ARCHIVE.getName()).asString();
  }
 else {
    archiveOrModuleName=model.get(MODULE.getName()).asString();
  }
  ModifiableResourceAdapter resourceAdapter=RaOperationUtil.buildResourceAdaptersObject(name,context,operation,archiveOrModuleName);
  if (model.get(ARCHIVE.getName()).isDefined()) {
    RaOperationUtil.installRaServices(context,verificationHandler,name,resourceAdapter,newControllers);
  }
 else {
    RaOperationUtil.installRaServicesAndDeployFromModule(context,verificationHandler,name,resourceAdapter,archiveOrModuleName,newControllers);
  }
}
