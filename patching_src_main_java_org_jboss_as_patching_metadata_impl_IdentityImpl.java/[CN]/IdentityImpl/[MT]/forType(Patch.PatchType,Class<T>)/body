{
  if (patchType != this.patchType) {
    throw new IllegalStateException();
  }
  if (patchType == Patch.PatchType.ONE_OFF) {
    if (cumulativePatchId == null) {
      throw new IllegalStateException();
    }
  }
 else   if (patchType == Patch.PatchType.UPGRADE) {
    if (resultingVersion == null) {
      throw new IllegalStateException();
    }
  }
  return clazz.cast(this);
}
