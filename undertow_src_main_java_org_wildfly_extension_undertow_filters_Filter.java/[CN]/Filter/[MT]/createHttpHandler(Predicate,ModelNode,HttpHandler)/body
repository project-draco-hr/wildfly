{
  Class<? extends HttpHandler> handlerClass=getHandlerClass();
  List<AttributeDefinition> attributes=new ArrayList<>(getAttributes());
  int numOfParams=attributes.size() + 1;
  try {
    for (    Constructor<?> c : handlerClass.getDeclaredConstructors()) {
      if (c.getParameterTypes().length == numOfParams) {
        Object[] params=new Object[numOfParams];
        Class[] parameterTypes=c.getParameterTypes();
        int attrCounter=0;
        for (int i=0; i < parameterTypes.length; i++) {
          Class param=parameterTypes[i];
          if (param == String.class) {
            params[i]=model.get(attributes.get(attrCounter).getName()).asString();
            attrCounter++;
          }
 else           if (param == Integer.class || param == int.class) {
            params[i]=model.get(attributes.get(attrCounter).getName()).asInt();
            attrCounter++;
          }
 else           if (param == Long.class || param == long.class) {
            params[i]=model.get(attributes.get(attrCounter).getName()).asLong();
            attrCounter++;
          }
 else           if (param == HttpHandler.class) {
            params[i]=next;
          }
        }
        HttpHandler handler=(HttpHandler)c.newInstance(params);
        if (predicate != null) {
          return Handlers.predicate(predicate,handler,next);
        }
 else {
          return handler;
        }
      }
    }
  }
 catch (  Throwable e) {
    throw UndertowMessages.MESSAGES.cannotCreateHttpHandler(handlerClass,model,e);
  }
  throw UndertowMessages.MESSAGES.cannotCreateHttpHandler(handlerClass,model,null);
}
