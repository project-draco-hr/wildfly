{
  localActiveCounter.set(sessions.size());
  int active=localActiveCounter.get();
  int maxLocal=maxLocalActiveCounter.get();
  while (active > maxLocal) {
    if (!maxLocalActiveCounter.compareAndSet(maxLocal,active)) {
      maxLocal=maxLocalActiveCounter.get();
    }
  }
  int count=getTotalActiveSessions();
  int max=maxActiveCounter.get();
  while (count > max) {
    if (!maxActiveCounter.compareAndSet(max,count)) {
      max=maxActiveCounter.get();
      count=getTotalActiveSessions();
    }
  }
  return count;
}
