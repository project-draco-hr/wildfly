{
  ErrorState errorState=new ErrorState(consoleMock,null);
  PromptPasswordState passwordState=new PromptPasswordState(consoleMock,null);
  ConfirmationChoice confirmationChoice=new ConfirmationChoice(consoleMock,USER_DISPLAY_TEXT,PLEASE_ANSWER,passwordState,errorState);
  AssertConsoleBuilder consoleBuilder=new AssertConsoleBuilder().expectedConfirmMessage(USER_DISPLAY_TEXT,PLEASE_ANSWER,"d").expectedErrorMessage(MESSAGES.invalidConfirmationResponse());
  consoleMock.setResponses(consoleBuilder);
  State nextState=confirmationChoice.execute();
  assertTrue("Expected the next state to be ErrorState",nextState instanceof ErrorState);
  nextState.execute();
  consoleBuilder.validate();
}
