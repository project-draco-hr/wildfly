{
  final BatchBuilder builder=serviceContainer.batchBuilder();
  final DeploymentServiceListener listener=new DeploymentServiceListener();
  builder.addListener(listener);
  addProcessor(builder,ServiceName.JBOSS.append("deployment","processor","module","dependency"),new ModuleDependencyProcessor(),ModuleDependencyProcessor.PRIORITY);
  addProcessor(builder,ServiceName.JBOSS.append("deployment","processor","module","dependency","test"),new TestModuleDependencyProcessor(),TestModuleDependencyProcessor.PRIORITY);
  addProcessor(builder,ServiceName.JBOSS.append("deployment","processor","module","deployment"),new ModuleDeploymentProcessor(),ModuleDeploymentProcessor.PRIORITY);
  addProcessor(builder,ServiceName.JBOSS.append("deployment","processor","service","parser"),new ServiceDeploymentParsingProcessor(),ServiceDeploymentParsingProcessor.PRIORITY);
  addProcessor(builder,ServiceName.JBOSS.append("deployment","processor","service","deployment"),new ServiceDeploymentProcessor(),ServiceDeploymentProcessor.PRIORITY);
  builder.install();
  listener.waitForCompletion();
}
