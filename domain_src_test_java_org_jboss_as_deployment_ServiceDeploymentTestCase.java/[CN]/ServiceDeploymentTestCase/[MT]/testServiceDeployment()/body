{
  Module.setModuleLoaderSelector(new DeploymentModuleLoaderSelector());
  final DeploymentModuleLoader deploymentModuleLoader=new DeploymentModuleLoaderImpl(ModuleLoaderSelector.DEFAULT.getCurrentLoader());
  final ServiceContainer serviceContainer=ServiceContainer.Factory.create();
  final DeploymentManagerImpl deploymentManager=setupDeploymentManger(serviceContainer,deploymentModuleLoader);
  setupProcessors(serviceContainer);
  deploymentManager.deploy(initializeDeployment());
  final ServiceController<?> testServiceController=serviceContainer.getService(TestServiceDeployment.TEST_SERVICE_NAME);
  assertNotNull(testServiceController);
  assertEquals(ServiceController.State.UP,testServiceController.getState());
  serviceContainer.shutdown();
}
