{
  if (operationHandler instanceof BootOperationHandler) {
    if (state == State.STARTING) {
      return new BootContextImpl(subModel);
    }
 else {
      state=State.RESTART_REQUIRED;
      return super.getOperationContext(subModel,operation,operationHandler);
    }
  }
 else   if (operationHandler instanceof RuntimeOperationHandler && !(state == State.RESTART_REQUIRED && operationHandler instanceof ModelUpdateOperationHandler)) {
    return new RuntimeContextImpl(subModel);
  }
 else {
    return super.getOperationContext(subModel,operation,operationHandler);
  }
}
