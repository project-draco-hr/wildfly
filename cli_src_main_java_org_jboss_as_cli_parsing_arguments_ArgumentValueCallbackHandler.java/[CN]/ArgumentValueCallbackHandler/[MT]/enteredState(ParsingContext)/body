{
  final String stateId=ctx.getState().getId();
  if (ArgumentValueState.ID.equals(stateId)) {
    if (currentState != null) {
      if (stack == null) {
        stack=new ArrayDeque<ValueState>();
      }
      stack.push(currentState);
      if (ctx.getCharacter() == '{') {
        currentState=new DefaultValueState(false,true);
      }
 else {
        currentState=new DefaultValueState(currentState.isList());
      }
    }
 else     if (ctx.getCharacter() == '{') {
      currentState=new DefaultValueState(false,true);
    }
 else {
      currentState=new DefaultValueState(false);
    }
  }
 else   if (ListState.ID.equals(stateId)) {
    if (currentState != null) {
      if (stack == null) {
        stack=new ArrayDeque<ValueState>();
      }
      stack.push(currentState);
    }
    currentState=new ListValueState();
  }
 else   if (ListItemSeparatorState.ID.equals(stateId)) {
    currentState.itemSeparator();
  }
 else   if (NameValueSeparatorState.ID.equals(stateId)) {
    currentState.nameSeparator(ctx);
  }
 else   if (QuotesState.ID.equals(stateId)) {
    flag^=QUOTES;
  }
 else   if (EscapeCharacterState.ID.equals(stateId)) {
    flag^=ESCAPE;
  }
}
