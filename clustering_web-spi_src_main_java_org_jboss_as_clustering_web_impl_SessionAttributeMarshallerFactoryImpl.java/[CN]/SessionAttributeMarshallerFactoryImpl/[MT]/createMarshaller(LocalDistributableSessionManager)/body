{
  MarshallingConfiguration configuration=new MarshallingConfiguration();
  AbstractClassResolver resolver=new AbstractClassResolver(){
    @Override protected ClassLoader getClassLoader(){
      return manager.getApplicationClassLoader();
    }
  }
;
  configuration.setClassResolver(resolver);
  ClassLoaderProvider provider=new ClassLoaderProvider(){
    @Override public ClassLoader getClassLoader(){
      return manager.getApplicationClassLoader();
    }
  }
;
  return new SessionAttributeMarshallerImpl(new MarshallingContext(this.factory,configuration,provider));
}
