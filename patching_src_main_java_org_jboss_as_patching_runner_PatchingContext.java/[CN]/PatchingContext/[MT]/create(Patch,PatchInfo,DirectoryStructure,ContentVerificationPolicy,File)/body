{
  final File backup=structure.getHistoryDir(patch.getPatchId());
  if (!backup.mkdirs()) {
    PatchMessages.MESSAGES.cannotCreateDirectory(backup.getAbsolutePath());
  }
  final PatchingContext context=new PatchingContext(patch,info,structure,backup,policy);
  final PatchContentLoader loader=PatchContentLoader.create(workDir);
  context.contentLoaders.put(patch.getPatchId(),loader);
  return context;
}
