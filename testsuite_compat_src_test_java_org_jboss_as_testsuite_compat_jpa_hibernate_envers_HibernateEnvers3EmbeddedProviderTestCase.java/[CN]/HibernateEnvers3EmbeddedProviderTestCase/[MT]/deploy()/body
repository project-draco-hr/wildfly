{
  EnterpriseArchive ear=ShrinkWrap.create(EnterpriseArchive.class,ARCHIVE_NAME + ".ear");
  addHibernate3JarsToEar(ear);
  JavaArchive lib=ShrinkWrap.create(JavaArchive.class,"beans.jar");
  lib.addClasses(SLSBPU.class);
  ear.addAsModule(lib);
  lib=ShrinkWrap.create(JavaArchive.class,"entities.jar");
  lib.addClasses(Address.class,Person.class);
  lib.addAsManifestResource(new StringAsset(persistence_xml),"persistence.xml");
  ear.addAsLibraries(lib);
  final WebArchive main=ShrinkWrap.create(WebArchive.class,"main.war");
  main.addClasses(HibernateEnvers3EmbeddedProviderTestCase.class);
  ear.addAsModule(main);
  return ear;
}
