{
  Validator validator=(Validator)new InitialContext().lookup("java:comp/Validator");
  UserBean user1=new UserBean("MADHUMITA","SADHUKHAN");
  user1.setEmail("madhu@gmail.com");
  user1.setAddress("REDHAT Brno");
  UserBean user2=new UserBean("Mickey","Mouse");
  user2.setEmail("mickey@gmail.com");
  user2.setAddress("DISNEY CA USA");
  List<UserBean> passengers=new ArrayList<UserBean>();
  passengers.add(user1);
  passengers.add(user2);
  Car car=new Car("CET5678",passengers);
  car.setModel("SKODA Octavia");
  Set<ConstraintViolation<Car>> result=validator.validate(car);
  assertEquals(1,result.size());
  assertEquals("The Car has to pass the fuel test and inspection test before being driven",result.iterator().next().getMessage());
  Driver driver=new Driver("Sebastian","Vettel");
  driver.setAge(25);
  driver.setAddress("ABC");
  result=validator.validate(car);
  assertEquals(1,result.size());
  assertEquals("The Car has to pass the fuel test and inspection test before being driven",result.iterator().next().getMessage());
  car.setPassedVehicleInspection(true);
  result=validator.validate(car);
  assertEquals(2,result.size());
  car.setDriver(driver);
  Set<ConstraintViolation<Car>> driverResult=validator.validate(car,DriverChecks.class);
  assertEquals(1,driverResult.size());
  driver.setHasValidDrivingLicense(true);
  assertEquals(0,validator.validate(car,DriverChecks.class).size());
  car.setSeats(5);
  car.setHasBeenPaid(true);
  assertEquals(0,validator.validate(car).size());
}
