{
  final List<ServiceController<?>> controllers=new ArrayList<ServiceController<?>>();
  FrameworkBootstrapService service=new FrameworkBootstrapService();
  ServiceBuilder<?> builder=target.addService(FRAMEWORK_BOOTSTRAP,service);
  builder.addDependency(ServerEnvironmentService.SERVICE_NAME,ServerEnvironment.class,service.injectedEnvironment);
  builder.addDependency(SubsystemState.SERVICE_NAME,SubsystemState.class,service.injectedSubsystemState);
  builder.addDependency(SocketBinding.JBOSS_BINDING_NAME.append("osgi-http"),SocketBinding.class,service.httpServerPortBinding);
  builder.addListener(listeners);
  controllers.add(builder.install());
  controllers.add(AutoInstallIntegration.addService(target));
  controllers.add(FrameworkModuleIntegration.addService(target));
  controllers.add(ModuleLoaderIntegration.addService(target));
  controllers.add(SystemServicesIntegration.addService(target));
  return controllers;
}
