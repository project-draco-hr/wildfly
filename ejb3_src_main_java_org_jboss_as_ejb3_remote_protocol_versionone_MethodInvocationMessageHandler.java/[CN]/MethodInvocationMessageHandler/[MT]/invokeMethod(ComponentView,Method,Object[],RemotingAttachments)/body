{
  final InterceptorContext interceptorContext=new InterceptorContext();
  interceptorContext.setParameters(args);
  interceptorContext.setMethod(method);
  interceptorContext.setContextData(new HashMap<String,Object>());
  interceptorContext.putPrivateData(Component.class,componentView.getComponent());
  interceptorContext.putPrivateData(ComponentView.class,componentView);
  this.attachRemotingAttachments(interceptorContext,attachments);
  if (componentView.isAsynchronous(method)) {
    final Component component=componentView.getComponent();
    if (!(component instanceof SessionBeanComponent)) {
      logger.warn("Asynchronous invocations are only supported on session beans. Bean class " + component.getComponentClass() + " is not a session bean, invocation on method "+ method+ " will have no asynchronous semantics");
      return componentView.invoke(interceptorContext);
    }
    final SessionBeanComponent sessionBeanComponent=(SessionBeanComponent)componentView.getComponent();
    final CancellationFlag cancellationFlag=new CancellationFlag();
    interceptorContext.putPrivateData(CancellationFlag.class,cancellationFlag);
    final AsyncInvocationTask asyncInvocationTask=new AsyncInvocationTask(cancellationFlag){
      @Override protected Object runInvocation() throws Exception {
        return componentView.invoke(interceptorContext);
      }
    }
;
    sessionBeanComponent.getAsynchronousExecutor().submit(asyncInvocationTask);
    return asyncInvocationTask.get();
  }
 else {
    return componentView.invoke(interceptorContext);
  }
}
