{
  List<byte[]> list=DeploymentUtils.getDeploymentHash(domainDeployment);
  if (list.size() != 1) {
    MESSAGES.expectedOnlyOneDeployment(list.size());
  }
  VirtualFile file=contentRepository.getContent(list.get(0));
  if (file == null) {
    throw MESSAGES.deploymentHashNotFoundInRepository(Arrays.toString(list.get(0)));
  }
  ByteArrayOutputStream out;
  try {
    out=new ByteArrayOutputStream();
    InputStream in=file.openStream();
    try {
      int i=in.read();
      while (i != -1) {
        out.write(i);
        i=in.read();
      }
    }
  finally {
      IoUtils.safeClose(in);
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  return out.toByteArray();
}
