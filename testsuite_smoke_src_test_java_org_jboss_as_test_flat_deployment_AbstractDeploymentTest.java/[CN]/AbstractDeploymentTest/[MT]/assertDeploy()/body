{
  assertNotNull("Deployment manager has been initialized.",dm);
  InitialDeploymentPlanBuilder builder=dm.newDeploymentPlan();
  builder.add(managedBeansJar).andDeploy();
  Future<ServerDeploymentPlanResult> future=dm.execute(builder.build());
  ServerDeploymentPlanResult result=null;
  try {
    result=future.get(2,TimeUnit.SECONDS);
  }
 catch (  CancellationException ce) {
    fail("The plan was cancelled " + ce);
  }
catch (  ExecutionException ee) {
    fail("The plan execution failed " + ee);
  }
catch (  InterruptedException ie) {
    fail("The thread was interrupted " + ie);
  }
catch (  TimeoutException te) {
    fail("Timed out waiting for the deployment to complete " + te);
  }
  assertFalse("The task wasn't cancelled",future.isCancelled());
  assertNotNull("The result is not null",result);
}
