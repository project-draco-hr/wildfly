{
  TransactionalModelControllerOperationHandler operationHandler=new TransactionalModelControllerOperationHandler(proxiedController,Executors.newCachedThreadPool());
  try {
    channels=new RemoteChannelPairSetup();
    channels.setupRemoting(operationHandler);
    channels.startChannels();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  final Channel clientChannel=channels.getClientChannel();
  final RemoteProxyController proxyController=RemoteProxyController.create(channels.getExecutorService(),proxyNodeAddress,ProxyOperationAddressTranslator.SERVER,channels.getClientChannel());
  clientChannel.addCloseHandler(new CloseHandler<Channel>(){
    @Override public void handleClose(    Channel closed,    IOException exception){
      proxyController.shutdownNow();
    }
  }
);
  clientChannel.receiveMessage(ManagementChannelReceiver.createDelegating(proxyController));
  return proxyController;
}
