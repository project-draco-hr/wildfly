{
  try {
    channels=new RemoteChannelPairSetup();
    channels.setupRemoting();
    channels.startChannels();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  ManagementChannel serverChannel=channels.getServerChannel();
  ManagementChannel clientChannel=channels.getClientChannel();
  clientChannel.startReceiving();
  NewTransactionalModelControllerOperationHandler operationHandler=new NewTransactionalModelControllerOperationHandler(channels.getExecutorService(),proxiedController);
  serverChannel.setOperationHandler(operationHandler);
  serverChannel.setBatchIdManager(ManagementBatchIdManager.DEFAULT);
  NewRemoteProxyController proxyController=NewRemoteProxyController.create(channels.getExecutorService(),proxyNodeAddress,channels.getClientChannel());
  clientChannel.setOperationHandler(proxyController);
  return proxyController;
}
