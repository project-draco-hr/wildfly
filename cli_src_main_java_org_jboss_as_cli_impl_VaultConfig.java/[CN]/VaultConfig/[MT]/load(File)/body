{
  if (f == null) {
    throw new IllegalArgumentException("File is null");
  }
  if (!f.exists()) {
    throw new XMLStreamException("Failed to locate vault file " + f.getAbsolutePath());
  }
  final VaultConfig config=new VaultConfig();
  BufferedInputStream input=null;
  try {
    final XMLMapper mapper=XMLMapper.Factory.create();
    final XMLElementReader<VaultConfig> reader=new VaultConfigReader();
    mapper.registerRootElement(new QName(VaultConfigReader.VAULT),reader);
    FileInputStream is=new FileInputStream(f);
    input=new BufferedInputStream(is);
    XMLStreamReader streamReader=XMLInputFactory.newInstance().createXMLStreamReader(input);
    mapper.parseDocument(config,streamReader);
    streamReader.close();
  }
 catch (  FileNotFoundException e) {
    throw new XMLStreamException("Vault file not found",e);
  }
catch (  XMLStreamException t) {
    throw t;
  }
 finally {
    StreamUtils.safeClose(input);
  }
  return config;
}
