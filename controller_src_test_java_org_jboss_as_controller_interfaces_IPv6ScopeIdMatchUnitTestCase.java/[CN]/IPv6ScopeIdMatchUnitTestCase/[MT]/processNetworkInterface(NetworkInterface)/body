{
  for (  InterfaceAddress ifaddr : nif.getInterfaceAddresses()) {
    InetAddress inetAddress=ifaddr.getAddress();
    if (inetAddress instanceof Inet6Address) {
      Inet6Address inet6=(Inet6Address)inetAddress;
      if (inet6.isLoopbackAddress()) {
        loopbackInterface=nif;
        loopbackAddress=inet6;
      }
 else       if (addresses.containsKey(nif)) {
        addresses.get(nif).add(inet6);
      }
 else {
        Set<Inet6Address> set=new HashSet<Inet6Address>();
        set.add(inet6);
        addresses.put(nif,set);
      }
    }
  }
}
