{
  for (; ; ) {
    final ManagementRequestHandlerFactory[] snapshot=updater.get(this);
    final int length=snapshot.length;
    int index=-1;
    for (int i=0; i < length; i++) {
      if (snapshot[i] == instance) {
        index=i;
        break;
      }
    }
    if (index == -1) {
      return false;
    }
    final ManagementRequestHandlerFactory[] newVal=new ManagementRequestHandlerFactory[length - 1];
    System.arraycopy(snapshot,0,newVal,0,index);
    System.arraycopy(snapshot,index + 1,newVal,index,length - index - 1);
    if (updater.compareAndSet(this,snapshot,newVal)) {
      return true;
    }
  }
}
