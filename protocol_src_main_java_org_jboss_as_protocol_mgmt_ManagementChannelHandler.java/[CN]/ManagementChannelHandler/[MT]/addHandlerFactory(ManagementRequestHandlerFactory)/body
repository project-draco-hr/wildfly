{
  for (; ; ) {
    final ManagementRequestHandlerFactory[] snapshot=updater.get(this);
    final int length=snapshot.length;
    final ManagementRequestHandlerFactory[] newVal=new ManagementRequestHandlerFactory[length + 1];
    System.arraycopy(snapshot,0,newVal,0,length);
    newVal[length]=factory;
    if (updater.compareAndSet(this,snapshot,newVal)) {
      return;
    }
  }
}
