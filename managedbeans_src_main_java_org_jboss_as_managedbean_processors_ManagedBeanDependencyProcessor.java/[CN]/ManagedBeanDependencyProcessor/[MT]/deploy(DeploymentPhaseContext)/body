{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  boolean managedBeansInDeployment=false;
  Map<ResourceRoot,Index> indexes=AnnotationIndexUtils.getAnnotationIndexes(deploymentUnit);
  for (  Entry<ResourceRoot,Index> entry : indexes.entrySet()) {
    if (entry.getValue().getAnnotations(MANAGED_BEAN_ANNOTATION_NAME) != null) {
      managedBeansInDeployment=true;
      break;
    }
  }
  if (!managedBeansInDeployment)   return;
  final ModuleLoader moduleLoader=Module.getSystemModuleLoader();
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,JAVAEE_API_ID,false,false,false));
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,JBOSS_LOGGING_ID,false,false,false));
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,JAVASSIST_ID,false,false,false));
}
