{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final CompositeIndex compositeIndex=deploymentUnit.getAttachment(Attachments.COMPOSITE_ANNOTATION_INDEX);
  if (compositeIndex == null) {
    return;
  }
  final List<AnnotationInstance> instances=compositeIndex.getAnnotations(MANAGED_BEAN_ANNOTATION_NAME);
  if (instances == null || instances.isEmpty()) {
    return;
  }
  final ModuleLoader moduleLoader=Module.getSystemModuleLoader();
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,JAVAEE_API_ID,false,false,false));
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,JBOSS_LOGGING_ID,false,false,false));
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,JAVASSIST_ID,false,false,false));
}
