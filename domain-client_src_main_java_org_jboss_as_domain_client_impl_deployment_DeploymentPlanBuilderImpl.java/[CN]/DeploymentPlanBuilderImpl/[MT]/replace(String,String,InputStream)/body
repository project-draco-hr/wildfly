{
  byte[] hash=deploymentDistributor.distributeReplacementDeploymentContent(name,commonName,stream);
  DeploymentActionImpl mod=DeploymentActionImpl.getFullReplaceAction(name,commonName,hash);
  DeploymentSetPlanImpl currentSet=getCurrentDeploymentSetPlan();
  boolean add=currentSet.hasServerGroupPlans();
  DeploymentSetPlanImpl newSet=add ? new DeploymentSetPlanImpl() : currentSet;
  newSet=newSet.addAction(mod);
  return new RemoveDeploymentPlanBuilderImpl(this,newSet,!add);
}
