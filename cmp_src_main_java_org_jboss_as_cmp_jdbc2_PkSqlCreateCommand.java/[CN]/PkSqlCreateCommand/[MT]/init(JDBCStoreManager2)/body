{
  this.entityBridge=(JDBCEntityBridge2)manager.getEntityBridge();
  log=Logger.getLogger(getClass().getName() + "." + entityBridge.getEntityName());
  final JDBCFieldBridge[] pkFields=entityBridge.getPrimaryKeyFields();
  if (pkFields.length > 1) {
    throw new RuntimeException("This entity-command cannot be used with composite primary keys!");
  }
  this.pkField=(JDBCCMPFieldBridge2)pkFields[0];
  JDBCEntityCommandMetaData metadata=entityBridge.getMetaData().getEntityCommand();
  pkSql=metadata.getAttribute("pk-sql");
  if (pkSql == null) {
    throw new RuntimeException("pk-sql attribute must be set for entity " + entityBridge.getEntityName());
  }
  if (log.isDebugEnabled()) {
    log.debug("entity-command generate pk sql: " + pkSql);
  }
}
