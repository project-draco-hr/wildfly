{
  super.updateModel(context,operation);
  final PathAddress address=getParentAddress(PathAddress.pathAddress(operation.require(OP_ADDR)));
  Resource resource=context.readResourceFromRoot(address);
  final ModelNode parentModel=Resource.Tools.readModel(resource);
  PartitionManagerAddHandler.INSTANCE.validateModel(context,address.getLastElement().getValue(),parentModel);
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      PartitionManagerRemoveHandler.INSTANCE.removeIdentityStoreServices(context,parentModel,address.getLastElement().getValue());
      context.completeStep(new OperationContext.RollbackHandler(){
        @Override public void handleRollback(        OperationContext context,        ModelNode operation){
          context.completeStep(NOOP_ROLLBACK_HANDLER);
        }
      }
);
    }
  }
,OperationContext.Stage.RUNTIME);
}
