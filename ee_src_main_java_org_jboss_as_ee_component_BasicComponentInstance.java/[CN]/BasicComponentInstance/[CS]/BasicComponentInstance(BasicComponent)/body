{
  this.component=component;
  final SimpleInterceptorFactoryContext context=new SimpleInterceptorFactoryContext();
  context.getContextData().put(Component.class,component);
  context.getContextData().put(ComponentInstance.class,this);
  final Interceptor instantiationInterceptors=component.getInstantiationInterceptorFactory().create(context);
  postConstruct=component.getPostConstruct().create(context);
  preDestroy=component.getPreDestroy().create(context);
  final AtomicReference<ManagedReference> instanceReference=(AtomicReference<ManagedReference>)context.getContextData().get(INSTANCE_KEY);
  final InterceptorContext interceptorContext=new InterceptorContext();
  interceptorContext.putPrivateData(Component.class,component);
  interceptorContext.putPrivateData(ComponentInstance.class,this);
  try {
    instantiationInterceptors.processInvocation(interceptorContext);
  }
 catch (  Exception e) {
    throw new IllegalStateException("Failed to construct component instance",e);
  }
  final Map<Method,InterceptorFactory> interceptorFactoryMap=component.getInterceptorFactoryMap();
  final IdentityHashMap<Method,Interceptor> interceptorMap=new IdentityHashMap<Method,Interceptor>();
  for (  Method method : interceptorFactoryMap.keySet()) {
    interceptorMap.put(method,interceptorFactoryMap.get(method).create(context));
  }
  methodMap=Collections.unmodifiableMap(interceptorMap);
  this.instance=instanceReference.get().getInstance();
}
