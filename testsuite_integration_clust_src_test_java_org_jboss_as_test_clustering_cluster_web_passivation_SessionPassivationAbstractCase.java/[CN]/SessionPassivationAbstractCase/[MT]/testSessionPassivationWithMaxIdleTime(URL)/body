{
  HttpClient client=HttpClientUtils.relaxedCookieHttpClient();
  try {
    HttpResponse response=ClusterHttpClientUtil.tryGet(client,baseURL1 + SimpleServlet.URL);
    Assert.assertEquals(1,Integer.parseInt(response.getFirstHeader("value").getValue()));
    Assert.assertFalse("Session should not be serialized",Boolean.valueOf(response.getFirstHeader(SimpleServlet.HEADER_SERIALIZED).getValue()));
    response.getEntity().getContent().close();
    response=ClusterHttpClientUtil.tryGet(client,baseURL1 + SimpleServlet.URL);
    Assert.assertEquals(2,Integer.parseInt(response.getFirstHeader("value").getValue()));
    Assert.assertFalse("Session still should not be serialized",Boolean.valueOf(response.getFirstHeader(SimpleServlet.HEADER_SERIALIZED).getValue()));
    response.getEntity().getContent().close();
    Thread.sleep((PASSIVATION_MAX_IDLE_TIME + 10) * 1000);
    response=ClusterHttpClientUtil.tryGet(client,baseURL1 + SimpleServlet.URL);
    Assert.assertEquals(3,Integer.parseInt(response.getFirstHeader("value").getValue()));
    Assert.assertTrue("Session should have activated and have been deserialized",Boolean.valueOf(response.getFirstHeader(SimpleServlet.HEADER_SERIALIZED).getValue()));
    response.getEntity().getContent().close();
  }
  finally {
    client.getConnectionManager().shutdown();
  }
}
