{
  Assert.assertNull(System.getProperty("test.one"));
  Assert.assertNull(System.getProperty("test.two"));
  Assert.assertNull(System.getProperty("test.referencing"));
  ModelNode op=new ModelNode();
  op.get(OP).set(ADD);
  op.get(OP_ADDR).add("system-property","test.one");
  op.get(VALUE).set("ONE");
  ModelNode result=getController().execute(op,OperationMessageHandler.DISCARD,ModelController.OperationTransactionControl.COMMIT,null);
  Assert.assertEquals(result.toString(),SUCCESS,result.get(OUTCOME).asString());
  op=new ModelNode();
  op.get(OP).set(ADD);
  op.get(OP_ADDR).add("system-property","test.two");
  op.get(VALUE).set("TWO");
  result=getController().execute(op,OperationMessageHandler.DISCARD,ModelController.OperationTransactionControl.COMMIT,null);
  Assert.assertEquals(result.toString(),SUCCESS,result.get(OUTCOME).asString());
  op=new ModelNode();
  op.get(OP).set(ADD);
  op.get(OP_ADDR).add("system-property","test.referencing");
  op.get(VALUE).setExpression("${test.one} ${test.two}");
  result=getController().execute(op,OperationMessageHandler.DISCARD,ModelController.OperationTransactionControl.COMMIT,null);
  Assert.assertEquals(result.toString(),SUCCESS,result.get(OUTCOME).asString());
  Assert.assertEquals("ONE",System.getProperty("test.one"));
  Assert.assertEquals("TWO",System.getProperty("test.two"));
  Assert.assertEquals("ONE TWO",System.getProperty("test.referencing"));
  op=new ModelNode();
  op.get(OP).set(WRITE_ATTRIBUTE_OPERATION);
  op.get(OP_ADDR).add("system-property","test.referencing");
  op.get(NAME).set(VALUE);
  op.get(VALUE).setExpression("${test.one}---${test.two}");
  result=getController().execute(op,OperationMessageHandler.DISCARD,ModelController.OperationTransactionControl.COMMIT,null);
  Assert.assertEquals(result.toString(),SUCCESS,result.get(OUTCOME).asString());
  Assert.assertEquals("ONE---TWO",System.getProperty("test.referencing"));
}
