{
  ServerStatus status;
  final String processName=ManagedServer.getServerProcessName(serverName);
  final ManagedServer client=servers.get(processName);
  if (client == null) {
    System.out.println(serverName + " unknown");
    status=ServerStatus.STOPPED;
  }
 else {
    System.out.println(serverName + " is " + client.getState());
switch (client.getState()) {
case AVAILABLE:
case BOOTING:
case STARTING:
      status=ServerStatus.STARTING;
    break;
case FAILED:
case MAX_FAILED:
  status=ServerStatus.FAILED;
break;
case STARTED:
status=ServerStatus.STARTED;
break;
case STOPPING:
status=ServerStatus.STOPPING;
break;
case STOPPED:
status=ServerStatus.STOPPED;
break;
default :
throw new IllegalStateException("Unexpected state " + client.getState());
}
}
return status;
}
