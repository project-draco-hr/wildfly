{
  ControlledProcessState state=new ControlledProcessState(true);
  state.setRunning();
  Assert.assertEquals(ControlledProcessState.State.RUNNING,state.getState());
  Object stamp=state.setRestartRequired();
  Assert.assertEquals(ControlledProcessState.State.RESTART_REQUIRED,state.getState());
  state.setRunning();
  Assert.assertEquals(ControlledProcessState.State.RESTART_REQUIRED,state.getState());
  state.revertRestartRequired(stamp);
  Assert.assertEquals(ControlledProcessState.State.RUNNING,state.getState());
  state=new ControlledProcessState(true);
  state.setRunning();
  Assert.assertEquals(ControlledProcessState.State.RUNNING,state.getState());
  stamp=state.setReloadRequired();
  Assert.assertEquals(ControlledProcessState.State.RELOAD_REQUIRED,state.getState());
  state.setRunning();
  Assert.assertEquals(ControlledProcessState.State.RELOAD_REQUIRED,state.getState());
  state.revertReloadRequired(stamp);
  Assert.assertEquals(ControlledProcessState.State.RUNNING,state.getState());
}
