{
  handleRollback(stepHandlerContext,results);
  final ModelNode failureMsg=new ModelNode();
  final String baseMsg="Composite operation failed and was rolled back. Steps that failed:";
  for (int i=0; i < results.asInt(); i++) {
    final ModelNode result=results.get(i);
    result.get(SUCCESS).set(false);
    if (result.has(FAILURE_DESCRIPTION)) {
      failureMsg.get(baseMsg,"Operation at index " + i).set(result.get(FAILURE_DESCRIPTION));
    }
  }
  resultHandler.handleResultFragment(EMPTY,results);
  resultHandler.handleFailed(failureMsg);
}
