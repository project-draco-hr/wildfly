{
  final ModelNode compensatingOp=new ModelNode();
  compensatingOp.get(OP).set(COMPOSITE);
  compensatingOp.get(OP_ADDR).setEmptyList();
  final ModelNode compSteps=compensatingOp.get(STEPS);
  compSteps.setEmptyList();
  for (int i=results.asInt() - 1; i >= 0; i--) {
    ModelNode stepResult=results.get(i);
    stepResult.get(SUCCESS).set(true);
    final ModelNode compStep=stepHandlerContext.getCompensatingOperation(Integer.valueOf(i));
    if (compStep.isDefined()) {
      compSteps.add(compStep);
    }
    stepResult.get(COMPENSATING_OPERATION).set(compStep);
  }
  resultHandler.handleResultFragment(EMPTY,results);
  resultHandler.handleResultComplete(compensatingOp);
}
