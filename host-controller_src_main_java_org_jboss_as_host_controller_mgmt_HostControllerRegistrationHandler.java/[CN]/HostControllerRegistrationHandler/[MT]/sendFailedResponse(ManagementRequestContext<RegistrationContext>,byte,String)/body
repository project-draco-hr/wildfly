{
  final ManagementResponseHeader header=ManagementResponseHeader.create(context.getRequestHeader());
  final FlushableDataOutput output=context.writeMessage(header);
  try {
    output.writeByte(DomainControllerProtocol.PARAM_ERROR);
    output.writeByte(errorCode);
    if (message == null) {
      output.writeUTF("unknown error");
    }
 else {
      output.writeUTF(message);
    }
    output.writeByte(ManagementProtocol.RESPONSE_END);
    output.close();
  }
  finally {
    StreamUtils.safeClose(output);
  }
}
