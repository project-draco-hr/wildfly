{
  try {
    if (failed) {
      transaction.rollback();
    }
 else {
      registerHost(transaction,result);
      if (failed) {
        transaction.rollback();
      }
    }
  }
  finally {
    activeOperation.getResultHandler().done(null);
  }
}
