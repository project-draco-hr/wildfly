{
  log.info("++++ Starting testRemoteExpirationGracePeriod ++++");
  String warname=String.valueOf(++testId);
  startManagers(warname,3,2);
  SetAttributesRequestHandler setHandler1=new SetAttributesRequestHandler(allAttributes,false);
  SessionTestUtil.invokeRequest(managers[0],setHandler1,null);
  validateNewSession(setHandler1);
  String id1=setHandler1.getSessionId();
  SetAttributesRequestHandler setHandler2=new SetAttributesRequestHandler(allAttributes,false);
  SessionTestUtil.invokeRequest(managers[0],setHandler2,null);
  validateNewSession(setHandler1);
  String id2=setHandler2.getSessionId();
  Thread.sleep(3010);
  managers[1].backgroundProcess();
  org.jboss.as.clustering.web.IncomingDistributableSessionData data1=managers[1].getDistributedCacheManager().getSessionData(id1,false);
  org.jboss.as.clustering.web.IncomingDistributableSessionData data2=managers[1].getDistributedCacheManager().getSessionData(id2,false);
  assertNotNull(data1);
  assertNotNull(data2);
  BasicRequestHandler getHandler=new BasicRequestHandler(allAttributes.keySet(),false);
  SessionTestUtil.invokeRequest(managers[1],getHandler,setHandler1.getSessionId());
  validateNewSession(getHandler);
  Thread.sleep(2010);
  managers[1].backgroundProcess();
  assertNull(managers[1].getDistributedCacheManager().getSessionData(id2,false));
}
