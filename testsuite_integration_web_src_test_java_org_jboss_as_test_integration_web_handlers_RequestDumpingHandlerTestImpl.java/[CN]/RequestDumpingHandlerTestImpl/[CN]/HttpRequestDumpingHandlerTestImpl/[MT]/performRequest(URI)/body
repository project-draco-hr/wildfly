{
  Header[][] ret=new Header[2][];
  CloseableHttpClient httpClient=HttpClientBuilder.create().build();
  try {
    HttpGet httpget=new HttpGet(uri.toURL().toExternalForm() + "file.txt");
    HttpContext localContext=new BasicHttpContext();
    HttpResponse response=httpClient.execute(httpget,localContext);
    HttpRequest request=(HttpRequest)localContext.getAttribute(HttpCoreContext.HTTP_REQUEST);
    ret[0]=request.getAllHeaders();
    ret[1]=response.getAllHeaders();
    StatusLine statusLine=response.getStatusLine();
    Assert.assertEquals(200,statusLine.getStatusCode());
    String result=EntityUtils.toString(response.getEntity());
    Assert.assertEquals("Could not reach expected content via http request","A file",result);
  }
  finally {
    httpClient.close();
  }
  return ret;
}
