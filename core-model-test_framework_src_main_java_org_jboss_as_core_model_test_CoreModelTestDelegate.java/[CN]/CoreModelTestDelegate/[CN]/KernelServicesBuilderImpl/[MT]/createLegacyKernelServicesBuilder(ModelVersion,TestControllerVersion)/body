{
  if (type != TestModelType.DOMAIN) {
    throw new IllegalStateException("Can only create legacy kernel services for DOMAIN.");
  }
  LegacyKernelServicesInitializerImpl legacyKernelServicesInitializerImpl=new LegacyKernelServicesInitializerImpl(modelVersion,testControllerVersion);
  legacyControllerInitializers.put(modelVersion,legacyKernelServicesInitializerImpl);
  return legacyKernelServicesInitializerImpl;
}
