{
  final ServiceName dataSourceServiceName=AbstractDataSourceService.SERVICE_NAME_BASE.append(jndiName);
  final ServiceBuilder<?> serviceBuilder=serviceTarget.addService(dataSourceServiceName,dataSourceService).addDependency(TxnServices.JBOSS_TXN_ARJUNA_TRANSACTION_MANAGER,com.arjuna.ats.jbossatx.jta.TransactionManagerService.class,dataSourceService.getTransactionManagerInjector()).addDependency(NamingService.SERVICE_NAME);
  final ServiceName driverServiceName=getDriverDependency(driver);
  if (driverServiceName != null) {
    serviceBuilder.addDependency(driverServiceName,Driver.class,dataSourceService.getDriverInjector());
  }
  serviceBuilder.setInitialMode(ServiceController.Mode.ACTIVE);
  serviceBuilder.install();
  final BinderService binderService=new BinderService(jndiName.substring(6));
  final ServiceName binderServiceName=ContextNames.JAVA_CONTEXT_SERVICE_NAME.append(jndiName);
  serviceTarget.addService(binderServiceName,binderService).addDependency(dataSourceServiceName,ManagedReferenceFactory.class,binderService.getManagedObjectInjector()).addDependency(ContextNames.JAVA_CONTEXT_SERVICE_NAME,NamingStore.class,binderService.getNamingStoreInjector()).setInitialMode(ServiceController.Mode.ACTIVE).install();
}
