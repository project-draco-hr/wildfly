{
  Map<String,Object> params=new HashMap<String,Object>();
  int tag=reader.getEventType();
  String localName=null;
  String clazz=null;
  do {
    tag=reader.nextTag();
    localName=reader.getLocalName();
    Element element=Element.forName(localName);
    if (localName.equals(parentElement.getLocalName()) == true)     break;
switch (element) {
case FACTORY_CLASS:
      clazz=reader.getElementText();
    break;
case PARAM:
  int count=reader.getAttributeCount();
String key=null, value=null;
for (int n=0; n < count; n++) {
String attrName=reader.getAttributeLocalName(n);
Attribute attribute=Attribute.forName(attrName);
switch (attribute) {
case KEY:
  key=reader.getAttributeValue(n);
break;
case VALUE:
value=reader.getAttributeValue(n);
break;
default :
throw unexpectedAttribute(reader,n);
}
}
reader.discardRemainder();
params.put(key,value);
break;
}
}
 while (reader.hasNext());
return new TransportConfiguration(clazz,params,name);
}
