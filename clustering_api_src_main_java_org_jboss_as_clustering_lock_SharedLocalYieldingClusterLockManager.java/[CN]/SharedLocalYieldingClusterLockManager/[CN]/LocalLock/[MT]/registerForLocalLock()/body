{
  LockState current=lockState.get();
  LockState newState=null;
  for (; ; ) {
    newState=current.register(SharedLocalYieldingClusterLockManager.this.localNode);
    if (lockState.compareAndSet(current,newState)) {
      break;
    }
    current=lockState.get();
  }
  return newState;
}
