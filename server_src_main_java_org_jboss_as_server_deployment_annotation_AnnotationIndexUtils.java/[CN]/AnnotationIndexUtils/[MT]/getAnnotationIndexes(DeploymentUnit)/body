{
  final List<ResourceRoot> allResourceRoots=new ArrayList<ResourceRoot>();
  final List<ResourceRoot> resourceRoots=deploymentUnit.getAttachment(Attachments.RESOURCE_ROOTS);
  if (resourceRoots != null) {
    allResourceRoots.addAll(resourceRoots);
  }
  allResourceRoots.add(deploymentUnit.getAttachment(Attachments.DEPLOYMENT_ROOT));
  Map<ResourceRoot,Index> indexes=new HashMap<ResourceRoot,Index>();
  for (  ResourceRoot resourceRoot : resourceRoots) {
    Index index=resourceRoot.getAttachment(Attachments.ANNOTATION_INDEX);
    if (index != null) {
      indexes.put(resourceRoot,index);
    }
  }
  return indexes;
}
