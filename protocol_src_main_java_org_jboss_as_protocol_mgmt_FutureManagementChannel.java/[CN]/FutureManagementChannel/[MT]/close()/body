{
synchronized (lock) {
    if (closed) {
      return;
    }
    closed=true;
    StreamUtils.safeClose(channel);
    lock.notifyAll();
  }
}
