{
synchronized (lock) {
    if (state == State.CLOSED) {
      return;
    }
    state=State.CLOSED;
    StreamUtils.safeClose(channel);
    lock.notifyAll();
  }
}
