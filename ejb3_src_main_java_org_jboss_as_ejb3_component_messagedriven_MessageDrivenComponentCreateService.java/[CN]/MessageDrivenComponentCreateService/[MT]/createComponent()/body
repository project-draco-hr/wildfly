{
  final ActivationSpec activationSpec=getEndpointDeployer().createActivationSpecs(resourceAdapterName,messageListenerInterface,activationProps,getDeploymentClassLoader());
  final MessageDrivenComponent component=new MessageDrivenComponent(this,messageListenerInterface,activationSpec);
  final ResourceAdapter resourceAdapter=getRequiredService(raServiceName,ResourceAdapter.class).getValue();
  component.setResourceAdapter(resourceAdapter);
  try {
    activationSpec.setResourceAdapter(resourceAdapter);
  }
 catch (  ResourceException e) {
    throw new RuntimeException(e);
  }
  return component;
}
