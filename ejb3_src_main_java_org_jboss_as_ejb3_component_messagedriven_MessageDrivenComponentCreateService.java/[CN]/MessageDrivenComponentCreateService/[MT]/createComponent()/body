{
  final String activeResourceAdapterName;
  if (resourceAdapterName == null) {
    activeResourceAdapterName=defaultResourceAdapterServiceInjectedValue.getValue().getDefaultResourceAdapterName();
  }
 else {
    activeResourceAdapterName=resourceAdapterName;
  }
  final ActivationSpec activationSpec=getEndpointDeployer().createActivationSpecs(activeResourceAdapterName,messageListenerInterface,activationProps,getDeploymentClassLoader());
  final MessageDrivenComponent component=new MessageDrivenComponent(this,messageListenerInterface,activationSpec);
  final ResourceAdapter resourceAdapter=this.resourceAdapterInjectedValue.getValue();
  component.setResourceAdapter(resourceAdapter);
  final EJBUtilities ejbUtilities=this.ejbUtilitiesInjectedValue.getValue();
  final Endpoint endpoint=ejbUtilities.getEndpoint(activeResourceAdapterName);
  component.setEndpoint(endpoint);
  return component;
}
