{
  this.channel.addCloseHandler(new ChannelCloseHandler());
  this.channel.receiveMessage(this);
  this.deploymentRepository.addListener(this);
  this.groupMembershipNotifierRegistry.addListener(this);
  final Iterable<GroupMembershipNotifier> clusters=this.groupMembershipNotifierRegistry.getGroupMembershipNotifiers();
  try {
    this.sendNewClusterFormedMessage(clusters);
  }
 catch (  IOException ioe) {
    logger.warn("Could not send cluster formation message to the client on channel " + channel,ioe);
  }
  for (  final GroupMembershipNotifier cluster : clusters) {
    cluster.registerGroupMembershipListener(new ClusterTopologyUpdateListener(cluster.getGroupName(),this));
  }
}
