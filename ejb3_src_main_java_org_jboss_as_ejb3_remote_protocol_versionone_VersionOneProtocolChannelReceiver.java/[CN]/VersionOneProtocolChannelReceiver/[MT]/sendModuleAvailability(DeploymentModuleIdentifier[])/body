{
  final DataOutputStream outputStream=new DataOutputStream(this.channel.writeMessage());
  final ModuleAvailabilityWriter moduleAvailabilityWriter=new ModuleAvailabilityWriter(this.marshallingStrategy);
  try {
    moduleAvailabilityWriter.writeModuleAvailability(outputStream,availableModules);
  }
  finally {
    outputStream.close();
  }
}
