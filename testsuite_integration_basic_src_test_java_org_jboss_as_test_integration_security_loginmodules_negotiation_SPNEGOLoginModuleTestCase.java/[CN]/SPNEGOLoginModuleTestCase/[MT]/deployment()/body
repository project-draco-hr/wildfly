{
  LOGGER.info("start deployment");
  final WebArchive war=ShrinkWrap.create(WebArchive.class,WEBAPP_NAME + ".war");
  war.addClasses(SimpleSecuredServlet.class,SimpleServlet.class);
  war.addAsWebInfResource(SPNEGOLoginModuleTestCase.class.getPackage(),"web-spnego-authn.xml","web.xml");
  war.addAsWebInfResource(new StringAsset("<jboss-web>" + "<security-domain>SPNEGO</security-domain>" + "<valve><class-name>org.jboss.security.negotiation.NegotiationAuthenticator</class-name></valve>"+ "</jboss-web>"),"jboss-web.xml");
  war.addAsManifestResource(new StringAsset("<jboss-deployment-structure><deployment><dependencies>" + "<module name='org.jboss.security.negotiation'/>" + "</dependencies></deployment></jboss-deployment-structure>"),"jboss-deployment-structure.xml");
  if (LOGGER.isDebugEnabled()) {
    LOGGER.debug(war.toString(true));
  }
  return war;
}
