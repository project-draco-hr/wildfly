{
  Thread.sleep(TimeoutUtil.adjust(500));
  long start=System.currentTimeMillis();
  long now;
  ModelControllerClient client=initialClient;
  do {
    client.close();
    client=createClient1();
    ModelNode operation=new ModelNode();
    operation.get(OP_ADDR).setEmptyList();
    operation.get(OP).set(READ_ATTRIBUTE_OPERATION);
    operation.get(NAME).set("server-state");
    try {
      ModelNode result=client.execute(operation);
      boolean normal="running".equals(result.get(RESULT).asString());
      if (normal) {
        return client;
      }
    }
 catch (    Exception e) {
    }
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
    }
    now=System.currentTimeMillis();
  }
 while (now - start < RELOAD_TIMEOUT);
  throw new Exception("Server did not reload in the imparted time.");
}
