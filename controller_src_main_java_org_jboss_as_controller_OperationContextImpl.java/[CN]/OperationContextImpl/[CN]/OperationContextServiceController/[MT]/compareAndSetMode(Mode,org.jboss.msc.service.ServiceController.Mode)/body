{
  checkModeTransition(newMode);
  return controller.compareAndSetMode(expected,newMode);
}
