{
  this.contextType=contextType;
  this.transactionControl=transactionControl;
  this.booting=booting;
  this.model=model;
  this.modelController=modelController;
  this.messageHandler=messageHandler;
  this.attachments=attachments;
  this.processState=processState;
  steps=new EnumMap<Stage,Deque<Step>>(Stage.class);
  for (  Stage stage : Stage.values()) {
    steps.put(stage,new ArrayDeque<Step>());
  }
  affectsModel=new HashSet<PathAddress>(1);
  initiatingThread=Thread.currentThread();
  this.contextFlags=contextFlags;
  serviceTarget=new ContextServiceTarget(modelController);
}
