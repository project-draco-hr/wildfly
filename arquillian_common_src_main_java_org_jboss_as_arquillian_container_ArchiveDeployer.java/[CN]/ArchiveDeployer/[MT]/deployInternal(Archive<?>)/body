{
  final InputStream input=archive.as(ZipExporter.class).exportAsInputStream();
  try {
    return deployInternal(archive.getName(),input);
  }
  finally {
    if (input != null)     try {
      input.close();
    }
 catch (    IOException e) {
      log.warnf(e,"Failed to close resource %s",input);
    }
  }
}
