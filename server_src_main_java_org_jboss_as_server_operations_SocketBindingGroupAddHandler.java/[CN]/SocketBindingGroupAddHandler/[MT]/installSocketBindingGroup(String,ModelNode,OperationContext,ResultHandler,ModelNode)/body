{
  if (context instanceof RuntimeOperationContext) {
    ModelNode resolvedOp=operation.resolve();
    String failure=runtimeValidator.validate(resolvedOp);
    if (failure == null) {
      int portOffset=resolvedOp.get(PORT_OFFSET).isDefined() ? resolvedOp.get(PORT_OFFSET).asInt() : 0;
      String defaultInterface=resolvedOp.require(DEFAULT_INTERFACE).asString();
      RuntimeOperationContext runtimeContext=(RuntimeOperationContext)context;
      SocketBindingManagerService service=new SocketBindingManagerService(portOffset);
      final ServiceTarget serviceTarget=runtimeContext.getServiceTarget();
      serviceTarget.addService(SocketBindingManager.SOCKET_BINDING_MANAGER,service).setInitialMode(ServiceController.Mode.ON_DEMAND).addDependency(NetworkInterfaceService.JBOSS_NETWORK_INTERFACE.append(defaultInterface),NetworkInterfaceBinding.class,service.getDefaultInterfaceBinding()).install();
      resultHandler.handleResultComplete(compensatingOp);
    }
 else {
      resultHandler.handleFailed(new ModelNode().set(failure));
    }
  }
 else {
    resultHandler.handleResultComplete(compensatingOp);
  }
}
