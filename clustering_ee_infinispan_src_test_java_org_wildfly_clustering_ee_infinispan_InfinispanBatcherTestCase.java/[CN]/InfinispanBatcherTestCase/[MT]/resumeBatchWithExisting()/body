{
  TransactionBatch batch=mock(TransactionBatch.class);
  Transaction batchTx=mock(Transaction.class);
  Transaction otherTx=mock(Transaction.class);
  when(batch.getTransaction()).thenReturn(batchTx);
  when(this.tm.suspend()).thenReturn(otherTx);
  try (BatchContext context=this.batcher.resumeBatch(batch)){
    verify(this.tm).resume(batchTx);
    reset(this.tm);
  }
   verify(this.tm).resume(otherTx);
}
