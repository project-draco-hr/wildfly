{
  Constraint[] altered;
  if (constraintIndex == constraints.length) {
    altered=new Constraint[constraintIndex + 1];
    System.arraycopy(constraints,0,altered,0,constraints.length);
  }
 else {
    Constraint existing=constraints[constraintIndex];
    if (constraint.replaces(existing)) {
      altered=new Constraint[constraints.length];
      System.arraycopy(constraints,0,altered,0,constraints.length);
    }
 else {
      altered=new Constraint[constraintIndex + 1];
      if (constraintIndex == 0) {
        System.arraycopy(constraints,0,altered,1,constraints.length);
      }
 else {
        System.arraycopy(constraints,0,altered,0,constraintIndex);
        System.arraycopy(constraints,constraintIndex,altered,constraintIndex + 1,constraints.length - constraintIndex);
      }
    }
  }
  altered[constraintIndex]=constraint;
  return new SimpleManagementPermission(getActionEffect(),altered);
}
