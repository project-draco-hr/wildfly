{
  String channel=properties.getProperty(CHANNEL);
  if (channel == null) {
    throw MESSAGES.invalidTransportProperty(CHANNEL,properties);
  }
  ServiceName name=ServiceName.parse(channel);
  ServiceRegistry registry=ServiceContainerHelper.getCurrentServiceContainer();
  ServiceController<Channel> service=ServiceContainerHelper.getService(registry,name);
  try {
    return ServiceContainerHelper.getValue(service);
  }
 catch (  StartException e) {
    throw new IllegalStateException(e);
  }
}
