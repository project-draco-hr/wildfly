{
  String channel=properties.getProperty(CHANNEL);
  if (channel == null) {
    throw MESSAGES.invalidTransportProperty(CHANNEL,properties);
  }
  ServiceName name=ServiceName.parse(channel);
  ServiceController<?> service=ServiceContainerHelper.getCurrentServiceContainer().getRequiredService(name);
  try {
    return ServiceContainerHelper.getValue(service,Channel.class);
  }
 catch (  StartException e) {
    throw new IllegalStateException(e);
  }
}
