{
  DeploymentSetPlanImpl setPlan=getCurrentDeploymentSetPlan();
  ServerGroupDeploymentPlan groupPlan=setPlan.getLatestServerGroupDeploymentPlan();
  if (groupPlan == null) {
    throw ControllerClientLogger.ROOT_LOGGER.notConfigured(ServerGroupDeploymentPlan.class.getSimpleName());
  }
  groupPlan=groupPlan.createAllowFailures(serverFailures);
  setPlan=setPlan.storeServerGroup(groupPlan);
  return new ServerGroupDeploymentPlanBuilderImpl(this,setPlan);
}
