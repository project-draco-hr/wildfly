{
  ModelNode operation=Util.createOperation(READ_CHILDREN_RESOURCES_OPERATION,EMPTY_ADDRESS);
  operation.get(CHILD_TYPE).set(UNCONSTRAINED_RESOURCE);
  ModelNode result=executeWithRoles(operation,roles);
  assertEquals(SUCCESS,result.get(OUTCOME).asString());
  assertTrue(result.get(RESULT).hasDefined(FOO));
  assertTrue(result.get(RESULT).hasDefined(BAR));
  operation.get(CHILD_TYPE).set(SENSITIVE_CONSTRAINED_RESOURCE);
  result=executeWithRoles(operation,roles);
  assertEquals(sensitiveResourceVisible,result.get(RESULT).has(FOO));
  assertEquals(sensitiveResourceVisible,result.get(RESULT).has(BAR));
  assertEquals(!sensitiveResourceVisible,result.get(RESPONSE_HEADERS,ACCESS_CONTROL).get(0).get("filtered-children-types").get(0).asString().equals(SENSITIVE_CONSTRAINED_RESOURCE));
}
