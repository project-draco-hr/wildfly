{
  return new Interceptor(){
    @Override public Object processInvocation(    InterceptorContext interceptorContext) throws Exception {
      StatefulSessionComponentInstance sfsb=(StatefulSessionComponentInstance)context.getContextData().get(BasicComponent.COMPONENT_INSTANCE_KEY);
      SFSBContextHandleImpl sfsbContextHandle=new SFSBContextHandleImpl(sfsb);
      List<EntityManager> readyToClose=SFSBXPCMap.getINSTANCE().remove(sfsbContextHandle);
      if (readyToClose != null && readyToClose.size() > 0) {
        for (        EntityManager entityManager : readyToClose) {
          if (entityManager instanceof ExtendedEntityManager) {
            ((ExtendedEntityManager)entityManager).containerClose();
          }
 else {
            throw new RuntimeException("can only close SFSB XPC entity manager that are instances of ExtendedEntityManager" + entityManager.getClass().getName());
          }
        }
      }
      return interceptorContext.proceed();
    }
  }
;
}
