{
  if (ServiceProviderRegistryFactoryService.this.listeners.remove(this.serviceName) != null) {
    final Node node=ServiceProviderRegistryFactoryService.this.dispatcherFactory.getValue().getLocalNode();
    Operation<Void> operation=new Operation<Void>(){
      @Override public Void invoke(      Cache<ServiceName,Set<Node>> cache){
        Set<Node> nodes=cache.get(ServiceProviderRegistrationImpl.this.serviceName);
        if ((nodes != null) && nodes.remove(node)) {
          if (nodes.isEmpty()) {
            cache.remove(ServiceProviderRegistrationImpl.this.serviceName);
          }
 else {
            cache.replace(ServiceProviderRegistrationImpl.this.serviceName,nodes);
          }
        }
        return null;
      }
    }
;
    ServiceProviderRegistryFactoryService.this.invoker.invoke(ServiceProviderRegistryFactoryService.this.cache,operation,Flag.IGNORE_RETURN_VALUES);
  }
}
