{
  if (!(componentDescription instanceof EJBComponentDescription)) {
    return;
  }
  if (componentDescription.getNamingMode() != ComponentNamingMode.CREATE) {
    final EEModuleDescription moduleDescription=componentDescription.getModuleDescription();
    moduleDescription.getConfigurators().add(new EEModuleConfigurator(){
      @Override public void configure(      DeploymentPhaseContext context,      EEModuleDescription description,      EEModuleConfiguration configuration) throws DeploymentUnitProcessingException {
        final BindingConfiguration ejbContextBinding=new BindingConfiguration("java:module/EJBContext",directEjbContextReferenceSource);
        configuration.getBindingConfigurations().add(ejbContextBinding);
      }
    }
);
  }
 else {
    componentDescription.getConfigurators().add(new ComponentConfigurator(){
      @Override public void configure(      DeploymentPhaseContext context,      ComponentDescription description,      ComponentConfiguration configuration) throws DeploymentUnitProcessingException {
        final BindingConfiguration ejbContextBinding=new BindingConfiguration("java:comp/EJBContext",directEjbContextReferenceSource);
        configuration.getBindingConfigurations().add(ejbContextBinding);
      }
    }
);
  }
}
