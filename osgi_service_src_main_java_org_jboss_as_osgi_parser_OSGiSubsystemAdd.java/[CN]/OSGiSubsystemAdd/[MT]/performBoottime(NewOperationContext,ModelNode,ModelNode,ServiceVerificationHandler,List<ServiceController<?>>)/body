{
  context.addStep(new AbstractDeploymentChainStep(){
    protected void execute(    DeploymentProcessorTarget processorTarget){
      new OSGiDeploymentActivator().activate(processorTarget);
    }
  }
,NewOperationContext.Stage.RUNTIME);
  log.infof("Activating OSGi Subsystem");
  long begin=System.currentTimeMillis();
  SubsystemState subsystemState=createSubsystemState(operation);
  ServiceTarget serviceTarget=context.getServiceTarget();
  newControllers.add(BundleStartTracker.addService(serviceTarget));
  newControllers.add(BundleInstallProviderIntegration.addService(serviceTarget));
  newControllers.addAll(FrameworkBootstrapService.addService(serviceTarget,subsystemState,verificationHandler));
  newControllers.add(ConfigAdminServiceImpl.addService(serviceTarget,subsystemState,verificationHandler));
  long end=System.currentTimeMillis();
  log.debugf("Activated OSGi Subsystem in %dms",end - begin);
}
