{
  BundleContext syscontext=injectedSystemContext.getValue();
  ArtifactProviderPlugin provider=new MavenArtifactProvider();
  syscontext.registerService(ArtifactProviderPlugin.class.getName(),provider,null);
  File cacheFile=syscontext.getDataFile("repository");
  RepositoryCachePlugin cache=new FileBasedRepositoryCachePlugin(cacheFile);
  repository=new RepositoryImpl(new TrackingArtifactProvider(syscontext),cache);
  syscontext.registerService(Repository.class.getName(),repository,null);
}
