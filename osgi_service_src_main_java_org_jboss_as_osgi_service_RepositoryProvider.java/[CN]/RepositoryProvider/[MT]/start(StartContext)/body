{
  BundleContext syscontext=injectedSystemContext.getValue();
  ArtifactProviderPlugin provider=new MavenArtifactProvider();
  syscontext.registerService(ArtifactProviderPlugin.class.getName(),provider,null);
  File dataDir=injectedServerEnvironment.getValue().getServerDataDir();
  File cacheFile=new File(dataDir.getPath() + File.separator + "repository");
  RepositoryCachePlugin cache=new FileBasedRepositoryCachePlugin(cacheFile);
  repository=new RepositoryImpl(new TrackingArtifactProvider(syscontext),cache);
  syscontext.registerService(Repository.class.getName(),repository,null);
}
