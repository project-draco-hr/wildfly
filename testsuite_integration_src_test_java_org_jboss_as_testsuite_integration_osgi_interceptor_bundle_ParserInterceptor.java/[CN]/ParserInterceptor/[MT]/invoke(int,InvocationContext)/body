{
  HttpMetadata metadata=context.getAttachment(HttpMetadata.class);
  if (metadata != null)   return;
  if (state == Bundle.STARTING) {
    try {
      VirtualFile root=context.getRoot();
      VirtualFile propsFile=root.getChild("/http-metadata.properties");
      if (propsFile != null) {
        log.info("Create and attach HttpMetadata");
        metadata=createHttpMetadata(propsFile);
        context.addAttachment(HttpMetadata.class,metadata);
      }
    }
 catch (    IOException ex) {
      throw new LifecycleInterceptorException("Cannot parse metadata",ex);
    }
  }
}
