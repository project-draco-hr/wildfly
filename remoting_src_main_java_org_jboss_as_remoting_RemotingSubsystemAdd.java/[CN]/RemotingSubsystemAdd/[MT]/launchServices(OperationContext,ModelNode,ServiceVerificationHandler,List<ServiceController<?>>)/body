{
  final String nodeName=SecurityActions.getSystemProperty(RemotingExtension.NODE_NAME_PROPERTY);
  final EndpointService endpointService=new EndpointService(nodeName,EndpointService.EndpointType.SUBSYSTEM);
  final OptionMap map=EndpointConfigFactory.create(context,model);
  endpointService.setOptionMap(map);
  final ServiceTarget serviceTarget=context.getServiceTarget();
  if (context.getProcessType() == ProcessType.DOMAIN_SERVER) {
    final ServiceController<?> controller=context.getServiceRegistry(false).getService(RemotingServices.SUBSYSTEM_ENDPOINT);
    if (controller != null) {
      return;
    }
  }
  final ServiceBuilder<?> builder=serviceTarget.addService(RemotingServices.SUBSYSTEM_ENDPOINT,endpointService);
  if (verificationHandler != null) {
    builder.addListener(verificationHandler);
  }
  ServiceController<?> controller=builder.install();
  if (newControllers != null) {
    newControllers.add(controller);
  }
}
