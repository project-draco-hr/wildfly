{
  final ServiceTarget target=updateContext.getServiceTarget();
  final WebVirtualHostService service=new WebVirtualHostService(name,aliases());
  final ServiceBuilder<?> serviceBuilder=target.addService(WebSubsystemElement.JBOSS_WEB_HOST.append(name),service).addDependency(AbstractPathService.pathNameOf(TEMP_DIR),String.class,service.getTempPathInjector()).addDependency(WebSubsystemElement.JBOSS_WEB,WebServer.class,service.getWebServer());
  if (accessLog != null) {
    service.setAccessLog(accessLog);
    accessLogService(name,accessLog.getDirectory(),target);
    serviceBuilder.addDependency(WebSubsystemElement.JBOSS_WEB_HOST.append(name,"access-log"),String.class,service.getAccessLogPathInjector());
  }
  if (rewrite != null) {
    service.setRewrite(rewrite);
  }
  serviceBuilder.install();
}
