{
  TestHandler testHandler=new TestHandler();
  try {
    AutoInstallIntegration aii=new AutoInstallIntegration();
    ModuleIdentifier id=ModuleIdentifier.fromString("testing");
    SubsystemState.ChangeEvent event=new SubsystemState.ChangeEvent(SubsystemState.ChangeType.MODULE,false,id.toString());
    Assert.assertEquals("Precondition",0,testHandler.records.size());
    aii.update(null,event);
    Assert.assertEquals("There should be an error log, because the update was called with insufficient services available",1,testHandler.records.size());
    Assert.assertEquals(Level.ERROR,testHandler.records.get(0).getLevel());
  }
  finally {
    testHandler.remove();
  }
}
