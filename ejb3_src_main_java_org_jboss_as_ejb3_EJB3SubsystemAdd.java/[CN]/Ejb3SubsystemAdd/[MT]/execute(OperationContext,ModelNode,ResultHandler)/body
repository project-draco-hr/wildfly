{
  final ModelNode compensatingOperation=Util.getResourceRemoveOperation(operation.require(OP_ADDR));
  if (context instanceof BootOperationContext) {
    final BootOperationContext updateContext=(BootOperationContext)context;
    updateContext.addDeploymentProcessor(Phase.PARSE,Phase.PARSE_EJB_DEPLOYMENT,new EjbJarParsingDeploymentUnitProcessor());
    updateContext.addDeploymentProcessor(Phase.PARSE,Phase.PARSE_EJB_ANNOTATION,new EjbAnnotationProcessor());
    updateContext.addDeploymentProcessor(Phase.DEPENDENCIES,Phase.DEPENDENCIES_EJB,new EjbDependencyDeploymentUnitProcessor());
    updateContext.addDeploymentProcessor(Phase.POST_MODULE,Phase.POST_MODULE_EJB_TRANSACTION_MANAGEMENT,new TransactionManagementAnnotationProcessor());
    updateContext.addDeploymentProcessor(Phase.POST_MODULE,Phase.POST_MODULE_EJB_LOCAL_VIEW_ANNOTATION,new LocalEjbViewAnnotationProcessor());
    updateContext.addDeploymentProcessor(Phase.POST_MODULE,Phase.POST_MODULE_EJB_NO_INTERFACE_VIEW_ANNOTATION,new NoInterfaceViewAnnotationProcessor());
    updateContext.addDeploymentProcessor(Phase.POST_MODULE,Phase.POST_MODULE_EJB_INJECTION_ANNOTATION,new EjbResourceInjectionAnnotationProcessor());
  }
  context.getSubModel().setEmptyObject();
  resultHandler.handleResultComplete();
  return new BasicOperationResult(compensatingOperation);
}
