{
  final BatchBuilder batchBuilder=context.getBatchBuilder();
  profile.activate(context);
  final Map<String,ServerInterfaceElement> interfaces;
synchronized (this.interfaces) {
    interfaces=new TreeMap<String,ServerInterfaceElement>(this.interfaces);
  }
  for (  ServerInterfaceElement interfaceElement : interfaces.values()) {
    interfaceElement.activate(context);
  }
  batchBuilder.addService(SocketBindingManager.SOCKET_BINDING_MANAGER,new SocketBindingManagerService(portOffset)).setInitialMode(Mode.ON_DEMAND);
  socketBindings.activate(context);
  batchBuilder.addService(ClassifyingModuleLoaderService.SERVICE_NAME,new ClassifyingModuleLoaderService());
  final DeploymentModuleLoaderService deploymentModuleLoaderService=new DeploymentModuleLoaderService(new DeploymentModuleLoaderImpl());
  batchBuilder.addService(DeploymentModuleLoaderService.SERVICE_NAME,deploymentModuleLoaderService).addDependency(ClassifyingModuleLoaderService.SERVICE_NAME,ClassifyingModuleLoaderService.class,new ClassifyingModuleLoaderInjector("deployment",deploymentModuleLoaderService));
  new JarDeploymentActivator().activate(context);
}
