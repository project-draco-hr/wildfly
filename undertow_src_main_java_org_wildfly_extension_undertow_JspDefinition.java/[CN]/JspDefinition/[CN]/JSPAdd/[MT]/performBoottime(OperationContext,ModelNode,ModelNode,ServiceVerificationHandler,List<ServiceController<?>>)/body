{
  try {
    Class.forName("org.apache.jasper.compiler.JspRuntimeContext",true,this.getClass().getClassLoader());
    final PathAddress address=PathAddress.pathAddress(operation.get(OP_ADDR));
    final PathAddress parent=address.subAddress(0,address.size() - 1);
    String servletContainerName=parent.getLastElement().getValue();
    ModelNode resolved=new ModelNode();
    for (    AttributeDefinition attribute : ATTRIBUTES) {
      resolved.get(attribute.getName()).set(attribute.resolveModelAttribute(context,model));
    }
    final JSPService jspService=new JSPService(resolved);
    final ServiceTarget target=context.getServiceTarget();
    final ServiceName servletContainerServiceName=UndertowService.SERVLET_CONTAINER.append(servletContainerName);
    ServiceBuilder<JSPService> svcBuilder=target.addService(servletContainerServiceName.append(Constants.JSP),jspService).addDependency(servletContainerServiceName,ServletContainerService.class,jspService.getServletContainerServiceInjectedValue()).setInitialMode(ServiceController.Mode.ACTIVE);
    if (verificationHandler != null) {
      svcBuilder.addListener(verificationHandler);
    }
    newControllers.add(svcBuilder.install());
  }
 catch (  ClassNotFoundException e) {
    UndertowLogger.ROOT_LOGGER.couldNotInitJsp(e);
  }
}
