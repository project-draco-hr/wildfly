{
  try {
    final ServiceModuleLoader moduleLoader=serviceModuleLoader.getValue();
    final Module module=moduleLoader.loadModule(moduleSpec.getValue().getModuleIdentifier());
    moduleLoader.relinkModule(module);
    for (    ModuleDependency dependency : dependencies) {
      if (dependency.isUserSpecified()) {
        final ModuleIdentifier id=dependency.getIdentifier();
        try {
          String val=moduleLoader.loadModule(id).getProperty("jboss.api");
          if (val != null) {
            if (val.equals("private")) {
              PRIVATE_DEP_LOGGER.privateApiUsed(moduleSpec.getValue().getModuleIdentifier().getName(),id);
            }
 else             if (val.equals("unsupported")) {
              UNSUPPORTED_DEP_LOGGER.unsupportedApiUsed(moduleSpec.getValue().getModuleIdentifier().getName(),id);
            }
          }
        }
 catch (        ModuleNotFoundException ignore) {
        }
      }
    }
    this.module=module;
  }
 catch (  ModuleLoadException e) {
    throw ServerMessages.MESSAGES.failedToLoadModule(moduleSpec.getValue().getModuleIdentifier(),e);
  }
}
