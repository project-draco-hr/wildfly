{
  if (!element.removeDeployment(uniqueName)) {
    throw new UpdateFailedException("Deployment '" + uniqueName + "' did not exist; cannot replace it");
  }
  DeploymentUnitElement due=new DeploymentUnitElement(uniqueName,runtimeName,hash,start);
  element.addDeployment(due);
  for (  String groupName : element.getServerGroupNames()) {
    ServerGroupElement group=element.getServerGroup(groupName);
    ServerGroupDeploymentElement sgde=group.getDeployment(uniqueName);
    if (group.removeDeployment(groupName)) {
      group.addDeployment(uniqueName,runtimeName,hash,sgde.isStart());
    }
  }
}
