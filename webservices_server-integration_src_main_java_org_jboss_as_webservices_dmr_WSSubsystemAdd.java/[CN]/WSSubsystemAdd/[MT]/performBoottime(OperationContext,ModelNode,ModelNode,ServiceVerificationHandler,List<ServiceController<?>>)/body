{
  context.addStep(new AbstractDeploymentChainStep(){
    protected void execute(    DeploymentProcessorTarget processorTarget){
      WSDeploymentActivator.activate(processorTarget);
      processorTarget.addDeploymentProcessor(Phase.PARSE,Phase.PARSE_WEB_SERVICE_INJECTION_ANNOTATION,new WebServiceRefAnnotationParsingProcessor());
    }
  }
,OperationContext.Stage.RUNTIME);
  log.info("Activating WebServices Extension");
  ModuleClassLoaderProvider.register();
  WSServices.saveContainerRegistry(context.getServiceRegistry(false));
  ServiceTarget serviceTarget=context.getServiceTarget();
  ServerConfigImpl serverConfig=createServerConfig(operation);
  newControllers.add(ServerConfigService.install(serviceTarget,serverConfig,verificationHandler));
  newControllers.add(ModelUpdateService.install(serviceTarget,verificationHandler));
  newControllers.add(EndpointRegistryService.install(serviceTarget,verificationHandler));
}
