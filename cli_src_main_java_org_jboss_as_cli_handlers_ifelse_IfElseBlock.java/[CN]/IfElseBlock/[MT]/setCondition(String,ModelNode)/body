{
  if (condition == null) {
    throw new CommandFormatException("The path of the if condition can't be null.");
  }
  if (request == null) {
    throw new CommandFormatException("The request in the if condition can't be null.");
  }
  if (condition.charAt(0) == '(' && condition.charAt(condition.length() - 1) == ')') {
    condition=condition.substring(1,condition.length() - 1);
  }
  int i=condition.indexOf(EQ);
  if (i < 0) {
    throw new CommandFormatException("Failed to locate " + EQ + " in the if condition: "+ condition);
  }
  final String pathStr=condition.substring(0,i).trim();
  if (pathStr.isEmpty()) {
    throw new CommandFormatException("The path in the if condition is empty: " + condition);
  }
  final String[] path=pathStr.split("\\.");
  if (path.length == 0) {
    throw new CommandFormatException("The path in the if condition is empty: '" + pathStr + "'");
  }
  final String value=condition.substring(i + EQ.length()).trim();
  if (value.isEmpty()) {
    throw new CommandFormatException("The value in the if condition is empty: " + condition);
  }
  this.path=path;
  this.value=value;
  this.conditionRequest=request;
  state=IN_IF;
}
