{
  SubjectSupplemental ss=securityRealm.getSubjectSupplemental();
  if (ss != null) {
    Subject tempSubject=new Subject();
    tempSubject.getPrincipals().add(new RealmUser(getUsername()));
    try {
      ss.supplementSubject(tempSubject);
      SimpleGroup sg=new SimpleGroup("Roles");
      Set<RealmRole> roles=tempSubject.getPrincipals(RealmRole.class);
      for (      RealmRole current : roles) {
        sg.addMember(createIdentity(current.getName()));
      }
      return new Group[]{sg};
    }
 catch (    Exception e) {
      throw SecurityMessages.MESSAGES.failureCallingSecurityRealm(e.getMessage());
    }
  }
  return new Group[0];
}
