{
  SSO<LocalSSOContext> sso=this.manager.findSSO(ssoId);
  Manager manager=session.getManager();
  WebApplication application=this.getApplication(manager);
  if (sso != null) {
    sso.getSessions().addSession(application,session.getId());
  }
  if (this.managers.putIfAbsent(this.getApplication(session),session.getManager()) == null) {
    ((Lifecycle)manager).addLifecycleListener(this);
  }
}
