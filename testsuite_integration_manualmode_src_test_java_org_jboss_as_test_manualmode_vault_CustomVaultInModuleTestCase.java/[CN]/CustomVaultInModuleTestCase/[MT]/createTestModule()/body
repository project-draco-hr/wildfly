{
  File moduleXml=new File(CustomSecurityVault.class.getResource(CustomVaultInModuleTestCase.class.getSimpleName() + "-module.xml").toURI());
  testModule=new TestModule(MODULE_NAME,moduleXml);
  JavaArchive archive=testModule.addResource("test-custom-vault-in-module.jar").addClass(CustomSecurityVault.class).addClass(TestVaultExtension.class).addClass(TestVaultParser.class).addClass(TestVaultRemoveHandler.class).addClass(TestVaultResolveExpressionHandler.class).addClass(TestVaultSubsystemResourceDescription.class);
  ArchivePath path=ArchivePaths.create("/");
  path=ArchivePaths.create(path,"services");
  path=ArchivePaths.create(path,Extension.class.getName());
  archive.addAsManifestResource(CustomSecurityVault.class.getPackage(),Extension.class.getName(),path);
  testModule.create(true);
}
