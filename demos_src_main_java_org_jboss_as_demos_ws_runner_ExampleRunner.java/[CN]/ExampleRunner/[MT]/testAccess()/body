{
  URLConnection conn=null;
  InputStream in=null;
  try {
    URL url=new URL("http://localhost:8080/ws-example/?wsdl");
    System.out.println("Reading response from " + url + ":");
    conn=url.openConnection();
    conn.setDoInput(true);
    in=new BufferedInputStream(conn.getInputStream());
    int i=in.read();
    while (i != -1) {
      System.out.print((char)i);
      i=in.read();
    }
    System.out.println("");
  }
  finally {
    safeClose(in);
  }
  URL wsdlURL=new URL("http://localhost:8080/ws-example?wsdl");
  QName serviceName=new QName("http://archive.ws.demos.as.jboss.org/","EndpointService");
  System.out.println("JAXWS Client provider being used: " + Provider.provider().getClass());
  Service service=Service.create(wsdlURL,serviceName);
  Endpoint port=(Endpoint)service.getPort(Endpoint.class);
  System.out.println("Sending request 'hello' to address http://localhost:8080/ws-example");
  System.out.println("Got result : " + port.echo("hello"));
}
