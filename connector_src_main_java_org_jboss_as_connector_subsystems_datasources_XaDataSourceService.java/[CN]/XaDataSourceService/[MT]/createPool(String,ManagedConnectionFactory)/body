{
  final PoolConfiguration pc=createPoolConfiguration(dataSourceConfig.getXaPool(),dataSourceConfig.getTimeOut(),dataSourceConfig.getValidation());
  Boolean noTxSeparatePool=Boolean.FALSE;
  if (dataSourceConfig.getXaPool() != null && dataSourceConfig.getXaPool().isNoTxSeparatePool() != null) {
    noTxSeparatePool=dataSourceConfig.getXaPool().isNoTxSeparatePool();
  }
  final PoolFactory pf=new PoolFactory();
  final Pool pool=pf.create(PoolStrategy.ONE_POOL,mcf,pc,noTxSeparatePool.booleanValue());
  String poolName=null;
  if (dataSourceConfig.getPoolName() != null) {
    poolName=dataSourceConfig.getPoolName();
  }
  if (poolName == null) {
    poolName=jndiName;
  }
  pool.setName(poolName);
  return pool;
}
