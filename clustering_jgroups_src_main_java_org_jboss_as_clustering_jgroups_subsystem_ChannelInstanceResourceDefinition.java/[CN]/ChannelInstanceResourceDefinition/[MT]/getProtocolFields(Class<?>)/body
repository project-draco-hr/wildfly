{
  List<Field> fields=new ArrayList<Field>();
  fields.addAll(Arrays.asList(clazz.getDeclaredFields()));
  if (clazz.getSuperclass() != null) {
    fields.addAll(Arrays.asList(getProtocolFields(clazz.getSuperclass())));
  }
  return fields.toArray(new Field[fields.size()]);
}
