{
  final Transaction tx=this.getCurrentTransaction();
  if ((tx != null) && TxUtils.isActive(tx)) {
    try {
      tx.registerSynchronization(new DestroySynchronization<T>(this.factory,instance));
    }
 catch (    RollbackException e) {
      throw EjbMessages.MESSAGES.failedToRegisterTransactionSynchronization(e);
    }
catch (    SystemException e) {
      throw EjbMessages.MESSAGES.failedToRegisterTransactionSynchronization(e);
    }
  }
 else {
    this.factory.destroyInstance(instance);
  }
}
