{
  final JarInputStream is=new JarInputStream(new FileInputStream(jar));
  try {
    final Manifest manifest=is.getManifest();
    Assert.assertNotNull(manifest);
  }
  finally {
    IoUtils.safeClose(is);
  }
  final URL[] urls=new URL[]{jar.toURL()};
  final URLClassLoader cl=new URLClassLoader(urls);
  try {
    Assert.assertNotNull(cl.getResource("testResource"));
    final Class<?> clazz=cl.loadClass("org.jboss.as.patching.tests.TestClass");
    final Constructor<?> constructor=clazz.getConstructor(String.class);
    final Object instance=constructor.newInstance("test");
    Assert.assertNotNull(instance);
  }
  finally {
    IoUtils.safeClose(cl);
  }
}
