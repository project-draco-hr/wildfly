{
  if (getXmlWrapperElement() != null) {
    if (reader.getLocalName().equals(getXmlWrapperElement())) {
      if (reader.hasNext()) {
        if (reader.nextTag() == END_ELEMENT) {
          return;
        }
      }
    }
 else {
      throw ParseUtils.unexpectedElement(reader);
    }
  }
  ModelNode op=Util.createAddOperation();
  Map<String,AttributeDefinition> definedAttributes=getAttributeMap();
  Map<String,String> parsedAttributes=new HashMap<String,String>();
  for (int i=0; i < reader.getAttributeCount(); i++) {
    String attributeName=reader.getAttributeLocalName(i);
    String value=reader.getAttributeValue(i);
    if (definedAttributes.containsKey(attributeName)) {
      parsedAttributes.put(attributeName,value);
      SimpleAttributeDefinition def=(SimpleAttributeDefinition)definedAttributes.get(attributeName);
      def.parseAndSetParameter(value,op,reader);
    }
 else {
      throw ParseUtils.unexpectedAttribute(reader,i);
    }
  }
  if (parsedAttributes.get(PERMISSION_CLASS) == null)   throw ParseUtils.missingRequired(reader,PERMISSION_CLASS);
  String resourceName=parsedAttributes.get(PERMISSION_CLASS) + "|" + parsedAttributes.get(PERMISSION_NAME)+ "|"+ parsedAttributes.get(PERMISSION_ACTIONS);
  PathElement path=PathElement.pathElement(getPathElement().getKey(),resourceName);
  PathAddress address=parentAddress.append(path);
  op.get(ADDRESS).set(address.toModelNode());
  list.add(op);
  parseChildren(reader,address,list);
  if (getXmlWrapperElement() != null) {
    ParseUtils.requireNoContent(reader);
  }
}
