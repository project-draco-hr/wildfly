{
  final String oldMessage="SizeAppenderRestartTestCase - This is old message";
  final String newMessage="SizeAppenderRestartTestCase - This is new message";
  ModelNode op=Operations.createWriteAttributeOperation(SIZE_HANDLER_ADDRESS,"rotate-on-boot",true);
  validateResponse(op);
  restartServer(true);
  makeLog(oldMessage,url);
  checkLogs(oldMessage);
  restartServer(false);
  makeLog(newMessage,url);
  checkLogs(newMessage);
  int count=0;
  File[] logs=null;
  try {
    logs=logFile.getParentFile().listFiles();
  }
 catch (  NullPointerException npe) {
    Assert.fail("Failed to find any log file");
  }
  for (  File file : logs) {
    if (file.getName().contains(logFile.getName())) {
      count++;
      if (file.getName().equals(logFile.getName() + ".1")) {
        checkLogs(newMessage,false,file);
        checkLogs(oldMessage,true,file);
      }
    }
  }
  Assert.assertEquals("There should be two log files",2,count);
}
