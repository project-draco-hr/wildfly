{
  ResourceAndRegistration threadResource=resource.get();
  if (threadResource == null || threadResource != ResourceAndRegistration.NULL) {
    throw ServerMessages.MESSAGES.internalUseOnly();
  }
  resource.set(new ResourceAndRegistration(context.readResourceFromRoot(PathAddress.EMPTY_ADDRESS,true),context.getResourceRegistration()));
  context.stepCompleted();
}
