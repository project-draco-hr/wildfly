{
  ResourceAndRegistration threadResource=resource.get();
  if (threadResource == null || threadResource != ResourceAndRegistration.NULL) {
    throw new OperationFailedException(new ModelNode().set("This operation is internal use only"));
  }
  resource.set(new ResourceAndRegistration(context.getRootResource(),context.getResourceRegistration()));
  context.completeStep();
}
