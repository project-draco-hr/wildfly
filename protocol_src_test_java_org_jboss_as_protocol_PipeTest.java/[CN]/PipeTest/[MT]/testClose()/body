{
  Pipe pipe=new Pipe(8192);
  InputStream in=pipe.getIn();
  OutputStream out=pipe.getOut();
  out.close();
  try {
    out.write(0);
    fail("Expected exception");
  }
 catch (  IOException expected) {
  }
  assertEquals(-1,in.read());
  out.close();
  in.close();
  pipe.await();
}
