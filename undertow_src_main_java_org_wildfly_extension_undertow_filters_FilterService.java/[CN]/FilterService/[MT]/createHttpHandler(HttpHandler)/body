{
  Class<? extends HttpHandler> handlerClass=handler.getHandlerClass();
  List<AttributeDefinition> attributes=new ArrayList<>(handler.getAttributes());
  int numOfParams=attributes.size() + 1;
  try {
    for (    Constructor<?> c : handlerClass.getDeclaredConstructors()) {
      if (c.getParameterTypes().length == numOfParams) {
        Object[] params=new Object[numOfParams];
        Class[] parameterTypes=c.getParameterTypes();
        for (int i=0; i < parameterTypes.length; i++) {
          Class param=parameterTypes[i];
          if (param == String.class) {
            params[i]=model.get(attributes.get(i).getName()).asString();
          }
 else           if (param == Integer.class || param == int.class) {
            params[i]=model.get(attributes.get(i).getName()).asInt();
          }
 else           if (param == Long.class || param == long.class) {
            params[i]=model.get(attributes.get(i).getName()).asLong();
          }
 else           if (param == HttpHandler.class) {
            params[i]=next;
          }
        }
        return (HttpHandler)c.newInstance(params);
      }
    }
  }
 catch (  Throwable e) {
    throw UndertowMessages.MESSAGES.cannotCreateHttpHandler(handlerClass,model,e);
  }
  throw UndertowMessages.MESSAGES.cannotCreateHttpHandler(handlerClass,model,null);
}
