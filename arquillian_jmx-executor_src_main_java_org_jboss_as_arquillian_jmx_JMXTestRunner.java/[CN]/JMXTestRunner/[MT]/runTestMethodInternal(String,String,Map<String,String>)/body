{
  try {
    Class<?> testClass=getTestClassLoader().loadTestClass(className);
    ClassLoader testCl=SecurityActions.getClassLoader(testClass);
    ClassLoader serviceClassLoader=getTestClassLoader().getServiceClassLoader();
    TestRunner runner=TestRunners.getTestRunner(serviceClassLoader);
    ClassLoader tccl=SecurityActions.getThreadContextClassLoader();
    try {
      SecurityActions.setThreadContextClassLoader(testCl);
      TestResult testResult=runner.execute(testClass,methodName);
      return testResult;
    }
  finally {
      SecurityActions.setThreadContextClassLoader(tccl);
    }
  }
 catch (  Throwable th) {
    return new TestResult(Status.FAILED,th);
  }
}
