{
  TestResult result=runTestMethodInternal(className,methodName,props);
  try {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    ObjectOutputStream oos=new ObjectOutputStream(baos);
    oos.writeObject(result);
    oos.close();
    return new ByteArrayInputStream(baos.toByteArray());
  }
 catch (  IOException ex) {
    throw new IllegalStateException("Cannot marshall response",ex);
  }
}
