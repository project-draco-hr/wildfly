{
  final ServiceName serviceName=serviceController.getName();
  log.errorf(reason,"Service [%s] start failed",serviceName);
  serviceFailures.put(serviceName,reason);
  if (!expectedNonActiveServices.contains(serviceController.getName()) && countUpdater.decrementAndGet(this) == 0) {
    batchComplete();
  }
  serviceController.removeListener(this);
}
