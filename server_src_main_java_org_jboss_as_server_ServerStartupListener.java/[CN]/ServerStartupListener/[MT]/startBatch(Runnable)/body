{
  if (finished.get()) {
    throw new IllegalStateException("Listener is already finished");
  }
  if (!countUpdater.compareAndSet(this,0,1)) {
    throw new IllegalStateException("Listener already has a started batch");
  }
  this.batchCallback=batchCallback;
}
