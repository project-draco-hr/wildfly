{
  final String name=PathAddress.pathAddress(operation.get(ModelDescriptionConstants.ADDRESS)).getLastElement().getValue();
  final long hungTaskThreshold=ManagedScheduledExecutorServiceResourceDefinition.HUNG_TASK_THRESHOLD_AD.resolveModelAttribute(context,model).asLong();
  final boolean longRunningTasks=ManagedScheduledExecutorServiceResourceDefinition.LONG_RUNNING_TASKS_AD.resolveModelAttribute(context,model).asBoolean();
  final int coreThreads=ManagedScheduledExecutorServiceResourceDefinition.CORE_THREADS_AD.resolveModelAttribute(context,model).asInt();
  final long keepAliveTime=ManagedScheduledExecutorServiceResourceDefinition.KEEPALIVE_TIME_AD.resolveModelAttribute(context,model).asLong();
  final TimeUnit keepAliveTimeUnit=TimeUnit.MILLISECONDS;
  final long threadLifeTime=0L;
  final AbstractManagedExecutorService.RejectPolicy rejectPolicy=AbstractManagedExecutorService.RejectPolicy.valueOf(ManagedScheduledExecutorServiceResourceDefinition.REJECT_POLICY_AD.resolveModelAttribute(context,model).asString());
  final ManagedScheduledExecutorServiceService service=new ManagedScheduledExecutorServiceService(name,hungTaskThreshold,longRunningTasks,coreThreads,keepAliveTime,keepAliveTimeUnit,threadLifeTime,rejectPolicy);
  final ServiceBuilder serviceBuilder=context.getServiceTarget().addService(ConcurrentServiceNames.getManagedScheduledExecutorServiceServiceName(name),service);
  String contextService=null;
  if (model.hasDefined(ManagedScheduledExecutorServiceResourceDefinition.CONTEXT_SERVICE)) {
    contextService=ManagedScheduledExecutorServiceResourceDefinition.CONTEXT_SERVICE_AD.resolveModelAttribute(context,model).asString();
  }
  if (contextService != null) {
    serviceBuilder.addDependency(ConcurrentServiceNames.getContextServiceServiceName(contextService),ContextServiceImpl.class,service.getContextServiceInjector());
  }
  String threadFactory=null;
  if (model.hasDefined(ManagedScheduledExecutorServiceResourceDefinition.THREAD_FACTORY)) {
    threadFactory=ManagedScheduledExecutorServiceResourceDefinition.THREAD_FACTORY_AD.resolveModelAttribute(context,model).asString();
  }
  if (threadFactory != null) {
    serviceBuilder.addDependency(ConcurrentServiceNames.getManagedThreadFactoryServiceName(threadFactory),ManagedThreadFactoryImpl.class,service.getManagedThreadFactoryInjector());
  }
  if (verificationHandler != null) {
    serviceBuilder.addListener(verificationHandler);
  }
  if (newControllers != null) {
    newControllers.add(serviceBuilder.install());
  }
 else {
    serviceBuilder.install();
  }
}
