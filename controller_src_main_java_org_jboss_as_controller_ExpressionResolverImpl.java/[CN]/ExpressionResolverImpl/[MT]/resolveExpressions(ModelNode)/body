{
  ModelNode resolved=resolveExpressionsRecursively(node);
  try {
    return resolved.resolve();
  }
 catch (  SecurityException e) {
    throw new OperationFailedException(new ModelNode().set(ControllerMessages.MESSAGES.noPermissionToResolveExpression(resolved,e)));
  }
catch (  IllegalStateException e) {
    throw new OperationFailedException(new ModelNode().set(ControllerMessages.MESSAGES.cannotResolveExpression(resolved,e)));
  }
}
