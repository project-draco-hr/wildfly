{
  ModelNode resolved=node;
  try {
    resolved=resolveExpressionsRecursively(resolved);
    resolved=resolved.resolve();
  }
 catch (  SecurityException e) {
    throw new OperationFailedException(new ModelNode().set(ControllerMessages.MESSAGES.noPermissionToResolveExpression(resolved,e)));
  }
catch (  IllegalStateException e) {
    throw new OperationFailedException(new ModelNode().set(ControllerMessages.MESSAGES.cannotResolveExpression(resolved,e)));
  }
  return resolved;
}
