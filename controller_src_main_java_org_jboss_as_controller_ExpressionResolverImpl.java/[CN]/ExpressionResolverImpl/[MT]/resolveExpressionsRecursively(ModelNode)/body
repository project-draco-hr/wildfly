{
  if (!node.isDefined()) {
    return node;
  }
  ModelNode resolved=node.clone();
  if (resolved.getType() == ModelType.EXPRESSION) {
    resolvePluggableExpression(resolved);
  }
 else   if (resolved.getType() == ModelType.OBJECT) {
    for (    Property prop : resolved.asPropertyList()) {
      resolved.get(prop.getName()).set(resolveExpressionsRecursively(prop.getValue()));
    }
  }
 else   if (resolved.getType() == ModelType.LIST) {
    ModelNode list=new ModelNode();
    for (    ModelNode current : resolved.asList()) {
      list.add(resolveExpressionsRecursively(current));
    }
    resolved=list;
  }
 else   if (resolved.getType() == ModelType.PROPERTY) {
    resolved.set(resolved.asProperty().getName(),resolveExpressionsRecursively(resolved.asProperty().getValue()));
  }
  return resolved;
}
