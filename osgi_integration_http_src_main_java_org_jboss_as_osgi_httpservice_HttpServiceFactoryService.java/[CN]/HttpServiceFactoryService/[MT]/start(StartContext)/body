{
  ServerEnvironment serverEnvironment=injectedServerEnvironment.getValue();
  WebHost virtualHost=injectedVirtualHost.getValue();
  BundleContext syscontext=injectedSystemContext.getValue();
  CommonWebServer webServer=injectedWebServer.getValue();
  Hashtable<String,Object> props=new Hashtable<String,Object>();
  props.put("provider",getClass().getPackage().getName());
  ServiceFactory<HttpService> serviceFactory=new HttpServiceFactory(webServer,virtualHost,serverEnvironment);
  registration=syscontext.registerService(HttpService.class.getName(),serviceFactory,props);
}
