{
  HttpServiceFactoryService service=new HttpServiceFactoryService();
  ServiceBuilder<WebDeploymentController> builder=serviceTarget.addService(JBOSS_WEB_HTTPSERVICE_FACTORY,service);
  builder.addDependency(ServerEnvironmentService.SERVICE_NAME,ServerEnvironment.class,service.injectedServerEnvironment);
  builder.addDependency(PathManagerService.SERVICE_NAME,PathManager.class,service.injectedPathManager);
  builder.addDependency(WebHost.SERVICE_NAME.append(VIRTUAL_HOST),WebHost.class,service.injectedVirtualHost);
  builder.addDependency(CommonWebServer.SERVICE_NAME,CommonWebServer.class,service.injectedWebServer);
  builder.addDependency(UndertowHttpManagementService.SERVICE_NAME,HttpManagement.class,service.injectedHttpManagement);
  builder.addDependency(Services.FRAMEWORK_CREATE,BundleContext.class,service.injectedSystemContext);
  return builder.install();
}
