{
  super(description,ejbClassConfiguration);
  addComponentSystemInterceptorFactory(new ImmediateInterceptorFactory(new ComponentInstanceInterceptor()));
  if (description.getTransactionManagementType().equals(TransactionManagementType.BEAN)) {
    addComponentSystemInterceptorFactory(new ComponentInterceptorFactory(){
      @Override protected Interceptor create(      final Component component,      final InterceptorFactoryContext context){
        return new StatefulBMTInterceptor((StatefulSessionComponent)component);
      }
    }
);
  }
 else {
    addComponentInstanceSystemInterceptorFactory(new InterceptorFactory(){
      @Override public Interceptor create(      InterceptorFactoryContext context){
        return new StatefulSessionSynchronizationInterceptor();
      }
    }
);
  }
  setComponentCreateServiceFactory(StatefulSessionComponentCreateService.FACTORY);
}
