{
  TransactionConfiguration transaction=this.sessionCache.getCacheConfiguration().transaction();
  boolean pessimistic=transaction.transactionMode().isTransactional() && (transaction.lockingMode() == LockingMode.PESSIMISTIC);
  Cache<String,FineSessionCacheEntry<L>> cache=pessimistic ? this.sessionCache.getAdvancedCache().withFlags(Flag.FORCE_WRITE_LOCK) : this.sessionCache;
  FineSessionCacheEntry<L> value=cache.get(id);
  if (value == null)   return null;
  for (  Map.Entry<SessionAttributeCacheKey,MarshalledValue<Object,MarshallingContext>> entry : this.attributeCache.getAdvancedCache().getGroup(id).entrySet()) {
    try {
      this.marshaller.read(entry.getValue());
    }
 catch (    InvalidSerializedFormException e) {
      InfinispanWebLogger.ROOT_LOGGER.failedToActivateSessionAttribute(e,id,entry.getKey().getAttribute());
      this.remove(id);
      return null;
    }
  }
  return new MutableCacheEntry<>(value,new CacheEntryMutator<>(this.sessionCache,id,value));
}
