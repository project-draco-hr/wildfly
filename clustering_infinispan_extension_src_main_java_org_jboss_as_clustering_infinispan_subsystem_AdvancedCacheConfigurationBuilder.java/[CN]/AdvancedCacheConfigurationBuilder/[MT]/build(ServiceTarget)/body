{
  ServiceBuilder<Configuration> builder=this.builder.build(target).addDependency(CacheContainerServiceName.CACHE_CONTAINER.getServiceName(this.containerName),EmbeddedCacheManager.class,this.container).addDependency(Services.JBOSS_SERVICE_MODULE_LOADER,ModuleLoader.class,this.loader).addDependencies(this.names);
switch (this.txMode) {
case NONE:
{
      break;
    }
case BATCH:
{
    this.tm.inject(DummyTransactionManager.getInstance());
    break;
  }
case NON_XA:
{
  builder.addDependency(TxnServices.JBOSS_TXN_SYNCHRONIZATION_REGISTRY,TransactionSynchronizationRegistry.class,this.tsr);
}
default :
{
builder.addDependency(TxnServices.JBOSS_TXN_TRANSACTION_MANAGER,TransactionManager.class,this.tm);
}
}
for (Dependency dependency : this.dependencies) {
dependency.register(builder);
}
return builder.setInitialMode(ServiceController.Mode.PASSIVE);
}
