{
  final Integer startLevel=(operation.hasDefined(ModelConstants.STARTLEVEL) ? FrameworkCapabilityResource.STARTLEVEL.resolveModelAttribute(context,model).asInt() : null);
  String identifier=operation.get(ModelDescriptionConstants.OP_ADDR).asObject().get(ModelConstants.CAPABILITY).asString();
  OSGiCapability module=new OSGiCapability(identifier,startLevel);
  SubsystemState subsystemState=SubsystemState.getSubsystemState(context);
  if (subsystemState != null) {
    subsystemState.addCapability(module);
  }
}
