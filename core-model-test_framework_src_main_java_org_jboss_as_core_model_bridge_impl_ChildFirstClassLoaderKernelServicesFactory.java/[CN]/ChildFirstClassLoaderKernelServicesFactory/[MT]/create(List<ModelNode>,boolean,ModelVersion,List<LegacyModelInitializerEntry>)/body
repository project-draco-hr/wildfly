{
  TestModelType type=TestModelType.DOMAIN;
  XMLMapper xmlMapper=XMLMapper.Factory.create();
  TestParser testParser=TestParser.create(null,xmlMapper,type);
  ModelInitializer modelInitializer=null;
  if (modelInitializerEntries != null && modelInitializerEntries.size() > 0) {
    modelInitializer=new LegacyModelInitializer(modelInitializerEntries);
  }
  RunningModeControl runningModeControl=new HostRunningModeControl(RunningMode.ADMIN_ONLY,RestartMode.HC_ONLY);
  ExtensionRegistry extensionRegistry=new ExtensionRegistry(ProcessType.HOST_CONTROLLER,runningModeControl);
  return AbstractKernelServicesImpl.create(ProcessType.HOST_CONTROLLER,runningModeControl,validateOperations,bootOperations,testParser,legacyModelVersion,type,modelInitializer,extensionRegistry);
}
