{
  int length;
  if (operationParameter.isEncode()) {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    BufferedOutputStream out=new BufferedOutputStream(baos);
    modelNode.writeBase64(out);
    out.flush();
    length=baos.size();
    IoUtils.safeClose(out,baos);
  }
 else {
    String json=modelNode.toJSONString(!operationParameter.isPretty());
    length=json.length();
  }
  return length;
}
