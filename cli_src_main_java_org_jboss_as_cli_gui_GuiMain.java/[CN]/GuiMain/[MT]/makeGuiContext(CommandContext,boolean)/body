{
  CliGuiContext cliGuiCtx=new CliGuiContext(isEmbedded);
  CommandExecutor executor=new CommandExecutor(cliGuiCtx,cmdCtx);
  cliGuiCtx.setExecutor(executor);
  JTextPane output=new JTextPane();
  JPanel outputDisplay=makeOutputDisplay(output);
  JTabbedPane tabs=makeTabbedPane(cliGuiCtx,outputDisplay);
  cliGuiCtx.setTabs(tabs);
  DoOperationActionListener opListener=new DoOperationActionListener(cliGuiCtx,output,tabs);
  CommandLine cmdLine=new CommandLine(opListener);
  cliGuiCtx.setCommandLine(cmdLine);
  output.addMouseListener(new SelectPreviousOpMouseAdapter(cliGuiCtx,output,opListener));
  JPanel mainPanel=makeMainPanel(tabs,cmdLine);
  cliGuiCtx.setMainPanel(mainPanel);
  return cliGuiCtx;
}
