{
  RuntimeException toThrow=null;
  try {
    if (process != null) {
      process.stop();
      process.waitFor();
      process=null;
    }
  }
 catch (  Exception e) {
    toThrow=new RuntimeException("Could not stop container",e);
  }
 finally {
    closeConnection();
    final ExecutorService exec=executor;
    if (exec != null) {
      exec.shutdownNow();
      executor=null;
    }
    if (closeClientConfig) {
      try {
        clientConfiguration.close();
      }
 catch (      Exception e) {
        if (toThrow == null) {
          toThrow=new RuntimeException("Could not stop client configuration",e);
        }
      }
    }
  }
  if (toThrow != null) {
    throw toThrow;
  }
}
