{
  assertNotBuilt();
  built=true;
  final ModelNode add=new ModelNode();
  add.get(OP_ADDR).set(connectionAddress);
  add.get(OP).set(ADD);
  setNotNullParameter(add,URL,url);
  setNotNullParameter(add,SEARCH_DN,searchDn);
  setNotNullParameter(add,SEARCH_CREDENTIAL,searchCredential);
  setNotNullParameter(add,SECURITY_REALM,securityRealm);
  setNotNullParameter(add,INITIAL_CONTEXT_FACTORY,initialContextFactory);
  if (referrals != null) {
    add.get(REFERRALS).set(referrals.toString());
  }
  if (handlesReferralsFor != null) {
    for (    String current : handlesReferralsFor) {
      add.get(HANDLES_REFERRALS_FOR).add(current);
    }
  }
  return add;
}
