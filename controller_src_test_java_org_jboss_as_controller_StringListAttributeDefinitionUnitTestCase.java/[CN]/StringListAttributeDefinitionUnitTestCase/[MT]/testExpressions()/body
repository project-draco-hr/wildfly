{
  ListAttributeDefinition ld=new StringListAttributeDefinition.Builder("test").setAllowExpression(true).setElementValidator(new StringLengthValidator(1,false,true)).build();
  ModelNode op=new ModelNode();
  op.get("test").add("abc").add("${test:1}");
  ModelNode validated=ld.validateOperation(op);
  Assert.assertEquals(op.get("test").get(0),validated.get(0));
  Assert.assertEquals(new ModelNode().setExpression(op.get("test").get(1).asString()),validated.get(1));
  ModelNode model=new ModelNode();
  ld.validateAndSet(op,model);
  Assert.assertEquals(op.get("test").get(0),model.get("test").get(0));
  Assert.assertEquals(new ModelNode().setExpression(op.get("test").get(1).asString()),model.get("test").get(1));
}
