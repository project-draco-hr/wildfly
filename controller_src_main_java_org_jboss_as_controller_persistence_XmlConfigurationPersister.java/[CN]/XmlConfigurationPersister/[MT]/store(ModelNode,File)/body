{
  try {
    final FileOutputStream fos=new FileOutputStream(file);
    try {
      BufferedOutputStream output=new BufferedOutputStream(fos);
      marshallAsXml(model,output);
      output.close();
      fos.flush();
      fos.getFD().sync();
      fos.close();
    }
  finally {
      safeClose(fos);
    }
  }
 catch (  Exception e) {
    throw MESSAGES.failedToStoreConfiguration(e);
  }
}
