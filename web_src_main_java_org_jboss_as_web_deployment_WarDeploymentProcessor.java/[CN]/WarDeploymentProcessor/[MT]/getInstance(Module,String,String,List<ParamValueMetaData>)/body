{
  try {
    ClassLoader moduleClassLoader=null;
    if (moduleName == null) {
      moduleClassLoader=module.getClassLoader();
    }
 else {
      moduleClassLoader=module.getModule(ModuleIdentifier.create(moduleName)).getClassLoader();
    }
    Object instance=moduleClassLoader.loadClass(className).newInstance();
    if (params != null) {
      for (      ParamValueMetaData param : params) {
        IntrospectionUtils.setProperty(instance,param.getParamName(),param.getParamValue());
      }
    }
    return instance;
  }
 catch (  Throwable t) {
    throw new DeploymentUnitProcessingException(MESSAGES.failToCreateContainerComponentInstance(className),t);
  }
}
