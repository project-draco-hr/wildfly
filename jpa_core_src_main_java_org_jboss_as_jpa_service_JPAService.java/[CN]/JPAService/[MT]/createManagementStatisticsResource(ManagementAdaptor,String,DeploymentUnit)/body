{
synchronized (existingResourceDescriptionResolver) {
    final EntityManagerFactoryLookup entityManagerFactoryLookup=new EntityManagerFactoryLookup();
    final Statistics statistics=managementAdaptor.getStatistics();
    if (false == existingResourceDescriptionResolver.contains(managementAdaptor.getVersion())) {
      ResourceDescriptionResolver resourceDescriptionResolver=new StandardResourceDescriptionResolver(statistics.getResourceBundleKeyPrefix(),statistics.getResourceBundleName(),statistics.getClass().getClassLoader());
      ManagementResourceRegistration managementResourceRegistration=deploymentUnit.getAttachment(DeploymentModelUtils.MUTABLE_REGISTRATION_ATTACHMENT).getSubModel(PathAddress.pathAddress(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM,JPAExtension.SUBSYSTEM_NAME)));
      managementResourceRegistration.registerSubModel(new ManagementResourceDefinition(PathElement.pathElement(managementAdaptor.getIdentificationLabel()),resourceDescriptionResolver,statistics,entityManagerFactoryLookup));
      existingResourceDescriptionResolver.add(managementAdaptor.getVersion());
    }
    Resource result=new DynamicManagementStatisticsResource(statistics,scopedPersistenceUnitName,managementAdaptor.getIdentificationLabel(),entityManagerFactoryLookup);
    return result;
  }
}
