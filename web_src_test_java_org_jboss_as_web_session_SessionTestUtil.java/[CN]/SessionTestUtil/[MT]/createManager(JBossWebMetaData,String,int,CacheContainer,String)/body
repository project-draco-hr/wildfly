{
  if (cacheContainer == null) {
    throw new IllegalStateException("Failed to initialize distributedManagerFactory");
  }
  DistributedCacheManagerFactory factory=new DistributedCacheManagerFactory();
  factory.getSessionCacheInjector().inject(cacheContainer.getCache());
  factory.getJvmRouteCacheInjector().inject(cacheContainer.getCache(JVM_ROUTE_CACHE_NAME));
  try {
    DistributableSessionManager<OutgoingDistributableSessionData> manager=new DistributableSessionManager<OutgoingDistributableSessionData>(factory,mock(Container.class),metaData);
    setupContainer(warName,jvmRoute,manager);
    manager.setMaxInactiveInterval(maxInactiveInterval);
    return manager;
  }
 catch (  ClusteringNotSupportedException e) {
    throw new IllegalStateException(e);
  }
}
