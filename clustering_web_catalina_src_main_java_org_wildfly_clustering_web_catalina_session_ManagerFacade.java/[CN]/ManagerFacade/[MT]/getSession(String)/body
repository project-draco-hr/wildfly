{
  Batcher batcher=this.manager.getBatcher();
  boolean started=batcher.startBatch();
  try {
    Session session=this.manager.findSession(this.getSessionId(sessionId));
    if (session == null)     return null;
    HashMap<String,Object> attributes=new HashMap<>();
    for (    String name : session.getAttributes().getAttributeNames()) {
      attributes.put(name,session.getAttributes().getAttribute(name));
    }
    return attributes;
  }
  finally {
    if (started) {
      batcher.endBatch(false);
    }
  }
}
