{
  String id=(sessionId != null) ? this.getSessionId(sessionId) : this.manager.createSessionId();
  Batcher batcher=this.manager.getBatcher();
  boolean started=batcher.startBatch();
  try {
    return this.getSession(this.manager.createSession(id));
  }
 catch (  RuntimeException|Error e) {
    if (started) {
      batcher.endBatch(false);
    }
    throw e;
  }
}
