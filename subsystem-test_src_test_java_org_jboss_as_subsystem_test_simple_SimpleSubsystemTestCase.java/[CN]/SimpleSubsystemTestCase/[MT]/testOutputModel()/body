{
  String subsystemXml="<subsystem xmlns=\"" + SimpleSubsystemExtension.NAMESPACE + "\">"+ "</subsystem>";
  ModelNode testModel=new ModelNode();
  testModel.get(SUBSYSTEM).get(SimpleSubsystemExtension.SUBSYSTEM_NAME).setEmptyObject();
  String triggered=outputModel(testModel);
  KernelServices services=super.installInController(new AdditionalInitialization(){
    @Override protected Type getType(){
      return Type.MANAGEMENT;
    }
  }
,subsystemXml);
  services.readWholeModel();
  String marshalled=services.getPersistedSubsystemXml();
  Assert.assertEquals(marshalled,triggered);
  Assert.assertEquals(normalizeXML(marshalled),normalizeXML(triggered));
}
