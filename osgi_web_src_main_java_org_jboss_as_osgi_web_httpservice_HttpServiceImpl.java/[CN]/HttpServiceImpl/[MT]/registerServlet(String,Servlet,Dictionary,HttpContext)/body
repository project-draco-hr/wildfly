{
synchronized (registry) {
    String error=validateAlias(alias,false);
    if (error != null)     throw new NamespaceException(error);
    if (httpContext == null)     httpContext=createDefaultHttpContext();
    String wrapperName=alias.substring(1);
    Wrapper wrapper=context.createWrapper();
    wrapper.setName(wrapperName);
    wrapper.setServlet(servlet);
    wrapper.setServletClass(servlet.getClass().getName());
    if (initparams != null) {
      Enumeration keys=initparams.keys();
      while (keys.hasMoreElements()) {
        String key=(String)keys.nextElement();
        String val=(String)initparams.get(key);
        wrapper.addInitParameter(key,val);
      }
    }
    registerInternal(registry.register(alias,bundle,wrapper,Type.SERVLET));
  }
}
