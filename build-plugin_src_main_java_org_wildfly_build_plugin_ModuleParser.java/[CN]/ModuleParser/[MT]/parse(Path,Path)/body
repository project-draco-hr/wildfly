{
  ModuleParseResult result=new ModuleParseResult(moduleRoot,inputFile);
  InputStream in=new BufferedInputStream(new FileInputStream(inputFile.toFile()));
  try {
    XMLStreamReader reader=XMLInputFactory.newInstance().createXMLStreamReader(in);
    reader.require(START_DOCUMENT,null,null);
    boolean done=false;
    while (reader.hasNext()) {
      int type=reader.next();
switch (type) {
case START_ELEMENT:
        if (!done && reader.getLocalName().equals("module")) {
          parseModule(reader,result);
          done=true;
        }
 else         if (!done && reader.getLocalName().equals("module-alias")) {
          parseModuleAlias(reader,result);
          done=true;
        }
      break;
case END_DOCUMENT:
    return result;
}
}
}
 catch (Exception e) {
throw new RuntimeException("Error parsing " + inputFile,e);
}
 finally {
try {
in.close();
}
 catch (Exception ignore) {
}
}
return result;
}
