{
  if (!patchIds.remove(patchId)) {
    if (patchId.equals(cumulativeID)) {
      cumulativeID=null;
    }
 else     if (patchId.equals(releaseID)) {
      releaseID=Constants.BASE;
    }
 else {
      throw new IllegalStateException("cannot rollback not-applied patch " + patchId);
    }
  }
  modified=true;
}
