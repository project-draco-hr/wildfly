{
  if (patchType == Patch.PatchType.CUMULATIVE) {
    if (!patchIds.isEmpty()) {
      throw new IllegalStateException("cannot apply cumulative patch if there are one-off patches applied");
    }
    cumulative=patchId;
  }
 else {
    patchIds.add(0,patchId);
  }
}
