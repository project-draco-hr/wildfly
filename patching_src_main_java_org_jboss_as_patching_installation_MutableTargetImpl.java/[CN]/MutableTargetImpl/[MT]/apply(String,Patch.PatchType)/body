{
  if (patchType == Patch.PatchType.UPGRADE) {
    if (!patchIds.isEmpty()) {
      throw new IllegalStateException("cannot apply release patch if there are other patches applied");
    }
    releaseID=patchId;
  }
 else   if (patchType == Patch.PatchType.CUMULATIVE) {
    if (!patchIds.isEmpty()) {
      throw new IllegalStateException("cannot apply cumulative patch if there are other patches applied");
    }
    if (cumulativeID != null && !Constants.BASE.equals(cumulativeID)) {
      throw new IllegalStateException("cannot apply cumulative patch if there are other patches applied");
    }
    cumulativeID=patchId;
  }
 else {
    patchIds.add(0,patchId);
  }
  modified=true;
}
