{
  if (patchType == Patch.PatchType.CUMULATIVE) {
    if (!patchIds.isEmpty()) {
      throw new IllegalStateException("cannot apply cumulative patch if there are other patches applied " + patchIds);
    }
    cumulativeID=patchId;
  }
 else {
    patchIds.add(0,patchId);
  }
  modified=true;
}
