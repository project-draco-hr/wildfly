{
  if (patchType == Patch.PatchType.UPGRADE) {
    if (!patchIds.isEmpty()) {
      throw new IllegalStateException("cannot apply release patch if there are one-off patches applied");
    }
    releaseID=patchId;
  }
 else {
    patchIds.add(0,patchId);
  }
  modified=true;
}
