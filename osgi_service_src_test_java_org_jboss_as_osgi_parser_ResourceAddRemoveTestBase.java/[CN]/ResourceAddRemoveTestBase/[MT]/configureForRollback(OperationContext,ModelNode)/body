{
  Mockito.doAnswer(new Answer<Void>(){
    @Override public Void answer(    InvocationOnMock invocation) throws Throwable {
      Object[] args=invocation.getArguments();
      OperationContext.RollbackHandler handler=OperationContext.RollbackHandler.class.cast(args[0]);
      handler.handleRollback(context,operation);
      return null;
    }
  }
).when(context).completeStep(Mockito.any(OperationContext.RollbackHandler.class));
  Mockito.when(context.completeStep()).thenReturn(OperationContext.ResultAction.ROLLBACK);
}
