{
  model.initialize();
  final DeploymentUnit deploymentUnit=new DeploymentUnitImpl(parent,name,registry,model);
  deploymentUnit.putAttachment(Attachments.RUNTIME_NAME,name);
  deploymentUnit.putAttachment(Attachments.MANAGEMENT_NAME,managementName);
  deploymentUnit.putAttachment(Attachments.DEPLOYMENT_CONTENTS,contentsInjector.getValue());
  deploymentUnit.putAttachment(DeploymentModelUtils.KEY,model);
  deploymentUnit.putAttachment(Attachments.SERVER_DEPLOYMENT_REPOSITORY,serverDeploymentRepositoryInjector.getValue());
  return deploymentUnit;
}
