{
  final boolean value=operation.get(ModelDescriptionConstants.VALUE).asBoolean(false);
  boolean hasResource=context.readResource(PathAddress.EMPTY_ADDRESS).hasChild(ExposeModelResourceResolved.PATH_ELEMENT);
  if (value) {
    if (!hasResource) {
      OperationStepHandler handler=context.getResourceRegistration().getOperationEntry(PathAddress.pathAddress(ExposeModelResourceResolved.PATH_ELEMENT),ADD).getOperationHandler();
      ModelNode addOp=new ModelNode();
      addOp.get(OP).set(ADD);
      addOp.get(OP_ADDR).set(PathAddress.pathAddress(operation.get(OP_ADDR)).append(ExposeModelResourceResolved.PATH_ELEMENT).toModelNode());
      context.addStep(addOp,handler,Stage.MODEL,true);
    }
  }
 else {
    if (hasResource) {
      OperationStepHandler handler=context.getResourceRegistration().getOperationEntry(PathAddress.pathAddress(ExposeModelResourceResolved.PATH_ELEMENT),REMOVE).getOperationHandler();
      ModelNode addOp=new ModelNode();
      addOp.get(OP).set(REMOVE);
      addOp.get(OP_ADDR).set(PathAddress.pathAddress(operation.get(OP_ADDR)).append(ExposeModelResourceResolved.PATH_ELEMENT).toModelNode());
      context.addStep(addOp,handler,Stage.MODEL,true);
    }
  }
  context.stepCompleted();
}
