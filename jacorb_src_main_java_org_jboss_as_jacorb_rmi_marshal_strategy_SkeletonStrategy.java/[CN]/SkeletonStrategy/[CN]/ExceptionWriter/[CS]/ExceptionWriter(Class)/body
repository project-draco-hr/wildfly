{
  this.clz=clz;
  if (IDLEntity.class.isAssignableFrom(clz) && UserException.class.isAssignableFrom(clz)) {
    String helperClassName=clz.getName() + "Helper";
    try {
      Class helperClass=clz.getClassLoader().loadClass(helperClassName);
      Class[] paramTypes={org.omg.CORBA.portable.OutputStream.class,clz};
      writeMethod=helperClass.getMethod("write",paramTypes);
    }
 catch (    ClassNotFoundException e) {
      throw new RuntimeException("Error loading class " + helperClassName + ": "+ e);
    }
catch (    NoSuchMethodException e) {
      throw new RuntimeException("No write method in helper class " + helperClassName + ": "+ e);
    }
  }
 else {
    try {
      this.reposId=ExceptionAnalysis.getExceptionAnalysis(clz).getExceptionRepositoryId();
    }
 catch (    RMIIIOPViolationException e) {
      throw new RuntimeException("Cannot obtain " + "exception repository id for " + clz.getName() + ":\n"+ e);
    }
  }
}
