{
  final ServiceController<?> serviceController=context.getController();
  final ServiceContainer container=serviceController.getServiceContainer();
  final ModelControllerImpl controller=new ModelControllerImpl(container,context.getChildTarget(),ManagementResourceRegistration.Factory.create(rootDescriptionProvider),new ContainerStateMonitor(container,serviceController),configurationPersister,controllerType,prepareStep,processState);
  initModel(controller.getRootResource(),controller.getRootRegistration());
  this.controller=controller;
  final ServiceTarget target=context.getChildTarget();
  new Thread(new Runnable(){
    public void run(){
      try {
        boot(new BootContext(){
          public ServiceTarget getServiceTarget(){
            return target;
          }
        }
);
      }
 catch (      ConfigurationPersistenceException e) {
        throw new RuntimeException(e);
      }
 finally {
        processState.setRunning();
      }
    }
  }
,"Controller Boot Thread").start();
}
