{
  final VirtualFile deploymentRoot=getVirtualFileAttachment(context);
  if (deploymentRoot == null) {
    return;
  }
  final MountHandle mountHandle=context.getAttachment(MountHandle.ATTACHMENT_KEY);
  try {
    final ClassPathEntry[] entries=createResourceRoots(deploymentRoot,mountHandle);
    final DeploymentStructure structure=new DeploymentStructure(entries);
    context.putAttachment(DeploymentStructure.ATTACHMENT_KEY,structure);
  }
 catch (  IOException e) {
    throw new DeploymentUnitProcessingException(e);
  }
  context.putAttachment(WarMetaData.ATTACHMENT_KEY,new WarMetaData());
}
