{
  nameValidator.validate(operation);
  final String attributeName=operation.require(NAME).asString();
  final ModelNode newValue=operation.hasDefined(VALUE) ? operation.get(VALUE) : new ModelNode();
  final ModelNode submodel=context.readResourceForUpdate(PathAddress.EMPTY_ADDRESS).getModel();
  final AttributeDefinition attributeDefinition=ATTRIBUTES.get(attributeName);
  if (attributeDefinition != null) {
    final ModelNode syntheticOp=new ModelNode();
    syntheticOp.get(attributeName).set(newValue);
    attributeDefinition.validateAndSet(syntheticOp,submodel);
  }
 else {
    throw new OperationFailedException(new ModelNode().set(MESSAGES.unknownAttribute(attributeName)));
  }
  if (updateRuntime) {
    context.reloadRequired();
  }
  context.addStep(VERIFY_HANDLER,OperationContext.Stage.MODEL);
  OperationContext.RollbackHandler rollbackHandler=updateRuntime ? OperationContext.RollbackHandler.REVERT_RELOAD_REQUIRED_ROLLBACK_HANDLER : OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER;
  context.completeStep(rollbackHandler);
}
