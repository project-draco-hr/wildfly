{
  final String hostName="slave";
  File domains=getBaseDir(testName);
  File extraModules=getAddedModulesDir(testName);
  File overrideModules=getHostOverrideModulesDir(testName,hostName);
  ClassLoader tccl=Thread.currentThread().getContextClassLoader();
  final JBossAsManagedConfiguration slaveConfig=new JBossAsManagedConfiguration();
  configureModulePath(slaveConfig,overrideModules,extraModules);
  slaveConfig.setHostName(hostName);
  slaveConfig.setHostControllerManagementAddress(slaveAddress);
  slaveConfig.setHostControllerManagementPort(19999);
  slaveConfig.setHostCommandLineProperties("-Djboss.test.host.master.address=" + masterAddress + " -Djboss.test.host.slave.address="+ slaveAddress);
  URL url=tccl.getResource(hostConfigPath);
  slaveConfig.setHostConfigFile(new File(url.toURI()).getAbsolutePath());
  System.out.println(slaveConfig.getHostConfigFile());
  File slaveDir=new File(domains,hostName);
  new File(slaveDir,"configuration").mkdirs();
  slaveConfig.setDomainDirectory(slaveDir.getAbsolutePath());
  System.out.println(slaveConfig.getDomainDirectory());
  return slaveConfig;
}
