{
  String error=null;
  try {
    registry.registerChannel(hostId,getContext().getChannel(),new ProxyCreatedCallback(){
      @Override public void proxyCreated(      ManagementOperationHandler handler){
        proxyHandler=handler;
      }
    }
);
    ModelNode op=new ModelNode();
    op.get(OP).set(ReadMasterDomainModelHandler.OPERATION_NAME);
    op.get(OP_ADDR).setEmptyList();
    op.get(HOST).set(hostId);
    ModelNode result=controller.execute(op,OperationMessageHandler.logging,OperationTransactionControl.COMMIT,null);
    if (result.hasDefined(FAILURE_DESCRIPTION)) {
      error=result.get(FAILURE_DESCRIPTION).asString();
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    error=e.getMessage();
  }
  if (error != null) {
    output.write(NewDomainControllerProtocol.PARAM_ERROR);
    output.writeUTF(error);
  }
 else {
    output.write(NewDomainControllerProtocol.PARAM_OK);
  }
}
