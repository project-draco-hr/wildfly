{
  if (!found.add(prop.getName())) {
    throw new OperationFailedException(new ModelNode().set(DomainControllerLogger.ROOT_LOGGER.invalidRolloutPlanGroupAlreadyExists(prop.getName())));
  }
  ModelNode plan=prop.getValue();
  if (plan.hasDefined(MAX_FAILURE_PERCENTAGE)) {
    if (plan.has(MAX_FAILED_SERVERS)) {
      plan.remove(MAX_FAILED_SERVERS);
    }
    int max=plan.get(MAX_FAILURE_PERCENTAGE).asInt();
    if (max < 0 || max > 100) {
      throw new OperationFailedException(new ModelNode().set(DomainControllerLogger.ROOT_LOGGER.invalidRolloutPlanRange(prop.getName(),MAX_FAILURE_PERCENTAGE,max)));
    }
  }
  if (plan.hasDefined(MAX_FAILED_SERVERS)) {
    int max=plan.get(MAX_FAILED_SERVERS).asInt();
    if (max < 0) {
      throw new OperationFailedException(new ModelNode().set(DomainControllerLogger.ROOT_LOGGER.invalidRolloutPlanLess(prop.getName(),MAX_FAILED_SERVERS,max)));
    }
  }
}
