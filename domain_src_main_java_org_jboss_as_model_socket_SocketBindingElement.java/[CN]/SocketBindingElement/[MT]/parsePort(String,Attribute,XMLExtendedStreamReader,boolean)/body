{
  int legal;
  try {
    legal=Integer.parseInt(value);
    int min=allowEphemeral ? 0 : 1;
    if (legal < min || legal >= 65536) {
      throw new XMLStreamException("Illegal value " + value + " for attribute '"+ attribute.getLocalName()+ "' must be between "+ min+ " and 65536",reader.getLocation());
    }
  }
 catch (  NumberFormatException nfe) {
    throw new XMLStreamException("Illegal value " + value + " for attribute '"+ attribute.getLocalName()+ "' must be an integer",reader.getLocation(),nfe);
  }
  return legal;
}
