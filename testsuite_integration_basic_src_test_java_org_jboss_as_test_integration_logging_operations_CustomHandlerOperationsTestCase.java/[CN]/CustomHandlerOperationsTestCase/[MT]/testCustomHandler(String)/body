{
  final ModelNode address=createCustomHandlerAddress(profileName,"CONSOLE").toModelNode();
  final ModelNode addOp=Operations.createAddOperation(address);
  addOp.get("module").set("org.jboss.logmanager");
  addOp.get("class").set(ConsoleHandler.class.getName());
  executeOperation(addOp);
  testWrite(address,"level","INFO");
  testWrite(address,"enabled",true);
  testWrite(address,"encoding","utf-8");
  testWrite(address,"formatter","[test] %d{HH:mm:ss,SSS} %-5p [%c] %s%E%n");
  testWrite(address,"filter-spec","deny");
  final ModelNode properties=new ModelNode().setEmptyObject();
  properties.get("autoFlush").set(true);
  properties.get("target").set("SYSTEM_OUT");
  testWrite(address,"properties",properties);
  testUndefine(address,"level");
  testUndefine(address,"enabled");
  testUndefine(address,"encoding");
  testUndefine(address,"formatter");
  testUndefine(address,"filter-spec");
  testUndefine(address,"properties");
  executeOperation(Operations.createRemoveOperation(address));
  verifyRemoved(address);
}
