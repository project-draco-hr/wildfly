{
  final Iterator<TransformationRule> iterator=rules.iterator();
  final TransformationRule.OperationContext context=new TransformationRule.OperationContext(ctx){
    @Override void invokeNext(    OperationTransformer.TransformedOperation transformedOperation) throws OperationFailedException {
      recordTransformedOperation(transformedOperation);
      if (iterator.hasNext()) {
        final TransformationRule next=iterator.next();
        next.transformOperation(transformedOperation.getTransformedOperation(),address,this);
      }
    }
  }
;
  final TransformationRule first=new AttributeTransformationRule(attributeTransformations);
  first.transformOperation(operation,address,context);
  return context.createOp();
}
