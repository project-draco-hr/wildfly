{
  System.setProperty("jboss.as.test.disable.runtime","1");
  if (type == ModelType.STANDALONE) {
    initializer.initCoreModel(rootResource,rootRegistration);
  }
 else   if (type == ModelType.HOST) {
    final String hostName="master";
    final ExtensionRegistry extensionRegistry=new ExtensionRegistry(ProcessType.HOST_CONTROLLER,runningModeControl);
    final HostControllerEnvironment env=createHostControllerEnvironment();
    final LocalHostControllerInfoImpl info=createLocalHostControllerInfo(env);
    final IgnoredDomainResourceRegistry ignoredRegistry=new IgnoredDomainResourceRegistry(info);
    final HostControllerConfigurationPersister persister=new HostControllerConfigurationPersister(env,info,Executors.newCachedThreadPool(),extensionRegistry);
    HostModelUtil.createRootRegistry(rootRegistration,env,ignoredRegistry,new HostModelRegistrar(){
      @Override public void registerHostModel(      String hostName,      ManagementResourceRegistration root){
      }
    }
);
    HostModelUtil.createHostRegistry(hostName,rootRegistration,persister,env,(HostRunningModeControl)runningModeControl,createHostFileRepository(),info,null,null,createContentRepository(),createDomainController(env,info),extensionRegistry,null,ignoredRegistry,null,pathManagerService);
  }
 else   if (type == ModelType.DOMAIN) {
    final HostControllerEnvironment env=createHostControllerEnvironment();
    final LocalHostControllerInfoImpl info=createLocalHostControllerInfo(env);
    final IgnoredDomainResourceRegistry ignoredRegistry=new IgnoredDomainResourceRegistry(info);
    DomainModelUtil.initializeMasterDomainRegistry(rootRegistration,new NullConfigurationPersister(),createContentRepository(),createHostFileRepository(),createDomainController(env,info),new ExtensionRegistry(ProcessType.HOST_CONTROLLER,runningModeControl),pathManagerService);
    HostModelUtil.createRootRegistry(rootRegistration,env,ignoredRegistry,new HostModelRegistrar(){
      @Override public void registerHostModel(      String hostName,      ManagementResourceRegistration root){
      }
    }
);
  }
  if (modelInitializer != null) {
    modelInitializer.populateModel(rootResource);
  }
}
