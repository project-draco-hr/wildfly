{
  System.setProperty("jboss.as.test.disable.runtime","1");
  if (type == TestModelType.STANDALONE) {
    initializer.initCoreModel(rootResource,rootRegistration);
  }
 else   if (type == TestModelType.HOST) {
    initializer.initCoreModel(rootResource,rootRegistration);
  }
 else   if (type == TestModelType.DOMAIN) {
    final HostControllerEnvironment env=createHostControllerEnvironment();
    final LocalHostControllerInfoImpl info=createLocalHostControllerInfo(env);
    final IgnoredDomainResourceRegistry ignoredRegistry=new IgnoredDomainResourceRegistry(info);
    DomainModelUtil.initializeMasterDomainRegistry(rootRegistration,new NullConfigurationPersister(),injectedContentRepository.getValue(),createHostFileRepository(),createDomainController(env,info),new ExtensionRegistry(ProcessType.HOST_CONTROLLER,runningModeControl),pathManagerService);
    HostModelUtil.createRootRegistry(rootRegistration,env,ignoredRegistry,new HostModelRegistrar(){
      @Override public void registerHostModel(      String hostName,      ManagementResourceRegistration root){
      }
    }
);
  }
  if (modelInitializer != null) {
    modelInitializer.populateModel(rootResource);
  }
}
