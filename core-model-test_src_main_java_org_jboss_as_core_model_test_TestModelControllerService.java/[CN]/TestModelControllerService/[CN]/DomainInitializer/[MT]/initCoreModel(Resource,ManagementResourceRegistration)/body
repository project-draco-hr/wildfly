{
  final HostControllerEnvironment env=createHostControllerEnvironment();
  final LocalHostControllerInfoImpl info=createLocalHostControllerInfo(env);
  final IgnoredDomainResourceRegistry ignoredRegistry=new IgnoredDomainResourceRegistry(info);
  final ExtensibleConfigurationPersister persister=new NullConfigurationPersister();
  final HostFileRepository hostFIleRepository=createHostFileRepository();
  final ExtensionRegistry extensionRegistry=new ExtensionRegistry(ProcessType.HOST_CONTROLLER,runningModeControl);
  DomainRootDefinition domainDefinition=new DomainRootDefinition(env,persister,injectedContentRepository.getValue(),hostFIleRepository,true,info,extensionRegistry,null,pathManagerService);
  domainDefinition.initialize(rootRegistration);
  rootResourceDefinition.setDelegate(domainDefinition);
  DomainModelUtil.initializeDomainRegistry(rootRegistration,new NullConfigurationPersister(),injectedContentRepository.getValue(),hostFIleRepository,true,info,extensionRegistry,null,pathManagerService);
  HostModelUtil.createRootRegistry(rootRegistration,env,ignoredRegistry,new HostModelRegistrar(){
    @Override public void registerHostModel(    String hostName,    ManagementResourceRegistration root){
    }
  }
);
}
