{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final ModuleLoader moduleLoader=Module.getSystemModuleLoader();
  final ModuleSpecification moduleSpecification=deploymentUnit.getAttachment(Attachments.MODULE_SPECIFICATION);
  if (deploymentUnit.getAttachment(ArquillianConfig.KEY) != null) {
    addDepdenency(moduleSpecification,moduleLoader,ARQUILLIAN_JUNIT_ID);
    addDepdenency(moduleSpecification,moduleLoader,SHRINKWRAP_ID);
    addDepdenency(moduleSpecification,moduleLoader,JUNIT_ID);
  }
}
