{
  if (buffer == null) {
    return null;
  }
  if (buffer[offset] == NULL_VALUE) {
    return null;
  }
  ByteArrayInputStream bais=new ByteArrayInputStream(buffer,offset,length);
  bais.read();
  SwitchContext context=classLoaderSwitcher.getSwitchContext(this.getClass().getClassLoader());
  try {
    MarshalledValueInputStream mvis=new MarshalledValueInputStream(bais);
    return mvis.readObject();
  }
  finally {
    context.reset();
  }
}
