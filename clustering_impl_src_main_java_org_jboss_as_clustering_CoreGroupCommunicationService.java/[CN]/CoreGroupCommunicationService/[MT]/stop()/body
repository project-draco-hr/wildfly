{
  if (state != State.STARTED) {
    log.debug("Ignoring stop call; current state is " + this.state);
    return;
  }
  state=State.STOPPING;
  try {
    stopService();
    state=State.STOPPED;
  }
 catch (  InterruptedException e) {
    state=State.FAILED;
    Thread.currentThread().interrupt();
    log.warn("Exception in stop ",e);
  }
catch (  Exception e) {
    state=State.FAILED;
    log.warn("Exception in stop ",e);
  }
catch (  Error e) {
    state=State.FAILED;
    throw e;
  }
}
