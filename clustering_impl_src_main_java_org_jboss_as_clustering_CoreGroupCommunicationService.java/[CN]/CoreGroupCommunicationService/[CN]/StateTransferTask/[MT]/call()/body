{
synchronized (callMutex) {
    if (result != null)     return result;
    try {
      long start, stop;
      this.isStateSet=false;
      start=System.currentTimeMillis();
      try {
        CoreGroupCommunicationService.this.getChannel().getState(null,CoreGroupCommunicationService.this.getStateTransferTimeout());
synchronized (this) {
          while (!this.isStateSet) {
            if (this.setStateException != null) {
              throw this.setStateException;
            }
            try {
              wait();
            }
 catch (            InterruptedException iex) {
              Thread.currentThread().interrupt();
            }
          }
        }
        stop=System.currentTimeMillis();
        CoreGroupCommunicationService.this.log.debugf("serviceState was retrieved successfully (in %d milliseconds)",stop - start);
        return createStateTransferResult(true,state,null);
      }
 catch (      StateTransferException e) {
synchronized (CoreGroupCommunicationService.this.channelLock) {
          while (CoreGroupCommunicationService.this.getCurrentView().size() == 0) {
            CoreGroupCommunicationService.this.log.debug("waiting on viewAccepted()");
            try {
              CoreGroupCommunicationService.this.channelLock.wait();
            }
 catch (            InterruptedException iex) {
              Thread.currentThread().interrupt();
            }
          }
        }
        if (CoreGroupCommunicationService.this.isCurrentNodeCoordinator()) {
          CoreGroupCommunicationService.this.log.debugf("State could not be retrieved for service %s (we are the first member in group)",serviceName);
        }
 else {
          throw MESSAGES.initialTransferFailed("serviceState");
        }
      }
      return createStateTransferResult(false,state,null);
    }
 catch (    Exception e) {
      return createStateTransferResult(false,null,e);
    }
  }
}
