{
  IpAddress result=addressMap.get(a);
  if (result == null) {
    result=(IpAddress)channel.downcall(new Event(Event.GET_PHYSICAL_ADDRESS,a));
    if (result == null) {
      throw new IllegalStateException("Address " + a + "not registered in transport layer");
    }
    addressMap.put(a,result);
  }
  InetSocketAddress socketAddress=new InetSocketAddress(result.getIpAddress(),result.getPort());
  String id=channel.getName(a);
  if (id == null) {
    id=socketAddress.getAddress().getHostAddress() + ":" + socketAddress.getPort();
  }
  return new ClusterNodeImpl(id,a,socketAddress);
}
