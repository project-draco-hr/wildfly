{
  ContainerAnalysis ret;
synchronized (this) {
    ret=lookupDone(cls);
    if (ret != null)     return ret;
    final InProgress inProgress=(InProgress)workInProgress.get(cls);
    if (inProgress != null) {
      if (inProgress.thread == Thread.currentThread())       return inProgress.analysis;
    }
    ret=createWorkInProgress(cls);
  }
  doTheWork(cls,ret);
synchronized (this) {
    workInProgress.remove(cls);
    workDone.put(cls,new SoftReference(ret));
    notifyAll();
  }
  return ret;
}
