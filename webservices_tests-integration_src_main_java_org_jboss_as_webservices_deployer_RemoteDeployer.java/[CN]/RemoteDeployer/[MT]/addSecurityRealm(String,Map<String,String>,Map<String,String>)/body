{
  final ModelNode composite=Util.getEmptyOperation(COMPOSITE,new ModelNode());
  final ModelNode steps=composite.get(STEPS);
  ModelNode op=createOpNode("core-service=management/security-realm=" + realm,ADD);
  steps.add(op);
  if (!sslOptions.isEmpty()) {
    ModelNode ssl=createOpNode("core-service=management/security-realm=" + realm + "/server-identity=ssl",ADD);
    for (    final Entry<String,String> entry : sslOptions.entrySet()) {
      ssl.get(entry.getKey()).set(entry.getValue());
    }
    steps.add(ssl);
  }
  if (!truststoreOptions.isEmpty()) {
    ModelNode truststore=createOpNode("core-service=management/security-realm=" + realm + "/authentication=truststore",ADD);
    for (    final Entry<String,String> entry : truststoreOptions.entrySet()) {
      truststore.get(entry.getKey()).set(entry.getValue());
    }
    steps.add(truststore);
  }
  applyUpdate(composite);
}
