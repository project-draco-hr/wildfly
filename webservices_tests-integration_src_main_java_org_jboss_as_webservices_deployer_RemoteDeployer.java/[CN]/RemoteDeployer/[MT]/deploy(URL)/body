{
  final DeploymentPlanBuilder builder=deploymentManager.newDeploymentPlan().withRollback().add(archiveURL).andDeploy();
  final DeploymentPlan plan=builder.build();
  final DeploymentAction deployAction=builder.getLastAction();
  final String uniqueId=deployAction.getDeploymentUnitUniqueName();
  try {
    executeDeploymentPlan(plan,deployAction);
  }
  finally {
    url2Id.put(archiveURL,uniqueId);
  }
}
