{
synchronized (archiveCounters) {
    String k=archiveURL.toString();
    if (archiveCounters.containsKey(k)) {
      int count=archiveCounters.get(k);
      archiveCounters.put(k,(count + 1));
      return;
    }
 else {
      archiveCounters.put(k,1);
    }
    final ModelControllerClient client=newModelControllerClient();
    final ServerDeploymentManager deploymentManager=newDeploymentManager(client);
    final DeploymentPlanBuilder builder=deploymentManager.newDeploymentPlan().add(archiveURL).andDeploy();
    final DeploymentPlan plan=builder.build();
    final DeploymentAction deployAction=builder.getLastAction();
    final String uniqueId=deployAction.getDeploymentUnitUniqueName();
    executeDeploymentPlan(plan,deployAction,client,deploymentManager);
    url2Id.put(archiveURL,uniqueId);
  }
}
