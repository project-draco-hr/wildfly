{
  final PathAddress address=getCacheContainerAddressFromOperation(operation);
  final String containerName=address.getLastElement().getValue();
  context.removeService(KeyAffinityServiceFactoryService.getServiceName(containerName));
  ModelNode resolvedValue=null;
  final String jndiName=(resolvedValue=CacheContainerResourceDefinition.JNDI_NAME.resolveModelAttribute(context,model)).isDefined() ? resolvedValue.asString() : null;
  context.removeService(createCacheContainerBinding(jndiName,containerName).getBinderServiceName());
  context.removeService(EmbeddedCacheManagerService.getServiceName(containerName));
  context.removeService(EmbeddedCacheManagerConfigurationService.getServiceName(containerName));
  context.removeService(GlobalComponentRegistryService.getServiceName(containerName));
  final ServiceName channelServiceName=ChannelService.getServiceName(containerName);
  final ServiceController<?> channelServiceController=context.getServiceRegistry(false).getService(channelServiceName);
  if (channelServiceController != null) {
    for (    ChannelServiceProvider provider : ServiceLoader.load(ChannelServiceProvider.class,ChannelServiceProvider.class.getClassLoader())) {
      for (      ServiceName name : provider.getServiceNames(containerName)) {
        context.removeService(name);
      }
    }
    ChannelInstanceResourceDefinition.addChannelProtocolMetricsDeregistrationStep(context,containerName);
    context.removeService(createChannelBinding(containerName).getBinderServiceName());
    context.removeService(channelServiceName);
  }
}
