{
  InjectedValue<CacheContainer> container=new InjectedValue<>();
  ServiceBuilder<?> builder=AsynchronousService.addService(target,GlobalComponentRegistryService.getServiceName(containerName),new GlobalComponentRegistryService(container)).addDependency(EmbeddedCacheManagerService.getServiceName(containerName),CacheContainer.class,container).setInitialMode(ServiceController.Mode.ON_DEMAND);
  if (transport != null) {
    builder.addDependency(ChannelService.getServiceName(containerName));
  }
  return builder.install();
}
