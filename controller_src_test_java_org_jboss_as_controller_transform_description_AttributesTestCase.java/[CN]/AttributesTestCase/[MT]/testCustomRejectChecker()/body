{
  resourceModel.get("reject").set(new ValueExpression("${expr}"));
  DontRejectChecker dontRejectChecker=new DontRejectChecker();
  CustomRejectExpressionsChecker rejectAttributeChecker=new CustomRejectExpressionsChecker();
  final ResourceTransformationDescriptionBuilder builder=TransformationDescriptionBuilder.Factory.createInstance(PATH);
  builder.getAttributeBuilder().addRejectCheck(dontRejectChecker,"reject").addRejectCheck(rejectAttributeChecker,"reject").end();
  TransformationDescription.Tools.register(builder.build(),transformersSubRegistration);
  dontRejectChecker.called=false;
  rejectAttributeChecker.clear();
  ;
  final Resource resource=transformResource();
  Assert.assertNotNull(resource);
  final Resource toto=resource.getChild(PATH);
  Assert.assertNotNull(toto);
  final ModelNode model=toto.getModel();
  Assert.assertTrue(model.hasDefined("reject"));
  Assert.assertTrue(dontRejectChecker.called);
  Set<String> rejections=rejectAttributeChecker.getRejections();
  Assert.assertEquals(1,rejections.size());
  Assert.assertTrue(rejections.contains("reject"));
  dontRejectChecker.called=false;
  rejectAttributeChecker.clear();
  ;
  ModelNode add=Util.createAddOperation(PathAddress.pathAddress(PATH));
  add.get("reject").set(new ValueExpression("${expr}"));
  OperationTransformer.TransformedOperation transformedAdd=transformOperation(add);
  Assert.assertTrue(transformedAdd.rejectOperation(success()));
  Assert.assertTrue(dontRejectChecker.called);
  rejections=rejectAttributeChecker.getRejections();
  Assert.assertEquals(1,rejections.size());
  Assert.assertTrue(rejections.contains("reject"));
  dontRejectChecker.called=false;
  rejectAttributeChecker.clear();
  ModelNode write=Util.getWriteAttributeOperation(PathAddress.pathAddress(PATH),"reject",new ModelNode().set(new ValueExpression("${expr}")));
  OperationTransformer.TransformedOperation transformedWrite=transformOperation(write);
  Assert.assertTrue(transformedWrite.rejectOperation(success()));
  Assert.assertTrue(dontRejectChecker.called);
  rejections=rejectAttributeChecker.getRejections();
  Assert.assertEquals(1,rejections.size());
  Assert.assertTrue(rejections.contains("reject"));
}
