{
  cli.sendLine(":server-set-restart-required");
  CLIOpResult result=cli.readAllAsOpResult();
  assertTrue(result.isIsOutcomeSuccess());
  checkResponseHeadersForProcessState(result);
  cli.sendLine(":read-resource");
  result=cli.readAllAsOpResult();
  assertTrue(result.isIsOutcomeSuccess());
  checkResponseHeadersForProcessState(result);
  boolean sendLineResult=cli.sendLine(":reload",true);
  assertTrue(sendLineResult);
  if (cli.readOutput() != null) {
    result=cli.readAllAsOpResult();
    assertTrue(result.isIsOutcomeSuccess());
    assertNoProcessState(result);
  }
  while (!cli.sendConnect()) {
    TimeUnit.SECONDS.sleep(2);
  }
  cli.sendLine(":read-resource");
  result=cli.readAllAsOpResult();
  assertTrue(result.isIsOutcomeSuccess());
  checkResponseHeadersForProcessState(result);
}
