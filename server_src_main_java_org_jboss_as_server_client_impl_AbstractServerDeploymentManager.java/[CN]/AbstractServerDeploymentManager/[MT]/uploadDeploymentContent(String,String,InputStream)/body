{
  ModelNode op=new ModelNode();
  op.get("operation").set(DeploymentUploadStreamAttachmentHandler.OPERATION_NAME);
  op.get("address").setEmptyList();
  op.get("name").set(name);
  op.get("runtime-name").set(runtimeName);
  op.get("attachment").set(0);
  try {
    try {
      ExecutionContext ctx=ExecutionContextBuilder.Factory.create(op).addInputStream(stream).build();
      ModelNode response=executeOperation(ctx).get();
      return response.asBytes();
    }
 catch (    ExecutionException e) {
      throw e.getCause();
    }
  }
 catch (  InterruptedException e) {
    IOException ioe=new InterruptedIOException();
    ioe.initCause(e);
    throw ioe;
  }
catch (  RuntimeException e) {
    throw e;
  }
catch (  IOException e) {
    throw e;
  }
catch (  Error e) {
    throw e;
  }
catch (  Throwable e) {
    throw new RuntimeException(e);
  }
}
