{
  byte[] bytes=streamToByteArray(stream);
  ModelNode op=new ModelNode();
  op.get("operation").set(DeploymentUploadBytesHandler.OPERATION_NAME);
  op.get("address").setEmptyList();
  op.get("name").set(name);
  op.get("runtime-name").set(runtimeName);
  op.get("bytes").set(bytes);
  try {
    try {
      ModelNode response=executeOperation(op).get();
      return response.asBytes();
    }
 catch (    ExecutionException e) {
      throw e.getCause();
    }
  }
 catch (  InterruptedException e) {
    IOException ioe=new InterruptedIOException();
    ioe.initCause(e);
    throw ioe;
  }
catch (  RuntimeException e) {
    throw e;
  }
catch (  IOException e) {
    throw e;
  }
catch (  Error e) {
    throw e;
  }
catch (  Throwable e) {
    throw new RuntimeException(e);
  }
}
