{
  CalendarTimer calendarTimer=this.getTimer();
  if (calendarTimer.getNextExpiration() != null && !calendarTimer.isInRetry()) {
    calendarTimer.scheduleTimeout();
  }
  if (calendarTimer.isAutoTimer()) {
    TimedObjectInvoker invoker=this.timerService.getInvoker();
    if (!(invoker instanceof MultiTimeoutMethodTimedObjectInvoker)) {
      final String msg="Cannot invoke timeout method because timer: " + calendarTimer + " is an auto timer, but invoker is not of type"+ MultiTimeoutMethodTimedObjectInvoker.class;
      ROOT_LOGGER.failToInvokeTimeout(calendarTimer,MultiTimeoutMethodTimedObjectInvoker.class);
      throw MESSAGES.failToInvokeTimeout(calendarTimer,MultiTimeoutMethodTimedObjectInvoker.class);
    }
    ((MultiTimeoutMethodTimedObjectInvoker)invoker).callTimeout(calendarTimer,calendarTimer.getTimeoutMethod());
  }
 else {
    this.timerService.getInvoker().callTimeout(calendarTimer);
  }
}
