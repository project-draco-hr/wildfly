{
  theConsole=options.getConsoleWrapper();
  StateValues stateValues=new StateValues(options);
  if (realm != null) {
    stateValues.setRealm(realm);
    stateValues.setRealmMode(RealmMode.USER_SUPPLIED);
  }
  if (theConsole.hasConsole() == false) {
    throw DomainManagementLogger.ROOT_LOGGER.noConsoleAvailable();
  }
  if (options.getUserProperties() != null || options.getGroupProperties() != null) {
    nextState=new PropertyFileFinder(theConsole,stateValues);
  }
 else {
    nextState=new PropertyFilePrompt(theConsole,stateValues);
  }
}
