{
  for (  final ClassReflectionIndex<?> classIndex : classHierarchy) {
    final Collection<Method> methods=classIndex.getMethods(methodName,types);
    if (methods.size() == 1) {
      return methods.iterator().next();
    }
  }
  if (fail) {
    final String className=classHierarchy.get(0).getIndexedClass().getName();
    throw new IllegalStateException(noSuchMethod(className,methodName,types));
  }
 else {
    return null;
  }
}
