{
  if (persistence_xml.exists() && persistence_xml.isFile()) {
    InputStream is=null;
    try {
      is=persistence_xml.openStream();
      final XMLInputFactory inputFactory=XMLInputFactory.newInstance();
      inputFactory.setXMLResolver(NoopXMLResolver.create());
      XMLStreamReader xmlReader=inputFactory.createXMLStreamReader(is);
      PersistenceUnitMetadataHolder puHolder=PersistenceUnitXmlParser.parse(xmlReader);
      postParseSteps(persistence_xml,puHolder,deploymentUnit);
      listPUHolders.add(puHolder);
    }
 catch (    Exception e) {
      throw new DeploymentUnitProcessingException(MESSAGES.failedToParse(persistence_xml),e);
    }
 finally {
      try {
        if (is != null) {
          is.close();
        }
      }
 catch (      IOException e) {
      }
    }
  }
}
