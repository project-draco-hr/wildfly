{
  ModelNode op=Util.createEmptyOperation("block",null);
  op.get("fail").set(true);
  op.get("stop").set(true);
  Future<ModelNode> future=client.executeAsync(op,null);
  ModelNode response=future.get(20,TimeUnit.SECONDS);
  assertEquals(response.toString(),FAILED,response.get(OUTCOME).asString());
  assertTrue(response.toString(),response.get(FAILURE_DESCRIPTION).asString().contains("failfailfail"));
  assertEquals(ControlledProcessState.State.RESTART_REQUIRED,controllerService.getCurrentProcessState());
}
