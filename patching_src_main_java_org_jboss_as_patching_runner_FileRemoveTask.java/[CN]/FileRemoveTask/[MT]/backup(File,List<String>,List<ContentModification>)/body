{
  if (!root.exists()) {
  }
 else   if (root.isDirectory()) {
    final File[] files=root.listFiles();
    if (files.length == 0) {
      rollback.add(createRollbackItem(root.getName(),path,NO_CONTENT,true));
    }
 else {
      for (      File file : files) {
        final List<String> newPath=new ArrayList<String>(path);
        newPath.add(file.getName());
        backup(file,newPath,rollback);
      }
    }
  }
 else {
    final byte[] hash=copy(root,backup);
    rollback.add(createRollbackItem(root.getName(),path,hash,false));
  }
}
