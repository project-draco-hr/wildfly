{
  if (root.isDirectory()) {
    final File[] files=root.listFiles();
    for (    File file : files) {
      final List<String> newPath=new ArrayList<String>(path);
      newPath.add(file.getName());
      backup(file,newPath,rollback);
    }
  }
 else {
    final byte[] hash=copy(root,getTarget(backup,root.getName(),path));
    rollback.add(createRollbackItem(root.getName(),path,hash));
  }
}
