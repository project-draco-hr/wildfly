{
  if (!root.exists()) {
  }
 else   if (root.isDirectory()) {
    final File[] files=root.listFiles();
    final String rootName=root.getName();
    if (files == null || files.length == 0) {
      rollback.add(createRollbackItem(rootName,path,NO_CONTENT,true));
    }
 else {
      final List<String> newPath=new ArrayList<String>(path);
      newPath.add(rootName);
      for (      File file : files) {
        final String name=file.getName();
        final File newBackupLocation=new File(backupLocation,name);
        backup(file,newBackupLocation,newPath,rollback,context);
      }
    }
  }
 else {
    final byte[] hash=copy(root,backupLocation);
    rollback.add(createRollbackItem(root.getName(),path,hash,false));
  }
}
