{
  SubsystemRegistration subsystem=context.registerSubsystem(SUBSYSTEM_NAME,MANAGEMENT_API_MAJOR_VERSION,MANAGEMENT_API_MINOR_VERSION,MANAGEMENT_API_MICRO_VERSION);
  final ResolvePathHandler resolvePathHandler;
  if (context.getProcessType().isServer()) {
    resolvePathHandler=ResolvePathHandler.Builder.of(context.getPathManager()).setPathAttribute(FileStoreResourceDefinition.RELATIVE_PATH).setRelativeToAttribute(FileStoreResourceDefinition.RELATIVE_TO).build();
  }
 else {
    resolvePathHandler=null;
  }
  subsystem.registerSubsystemModel(new InfinispanSubsystemResourceDefinition(resolvePathHandler,context.isRuntimeOnlyRegistrationValid()));
  subsystem.registerXMLElementWriter(new InfinispanSubsystemXMLWriter());
  if (context.isRegisterTransformers()) {
    InfinispanTransformers.registerTransformers(subsystem);
  }
}
