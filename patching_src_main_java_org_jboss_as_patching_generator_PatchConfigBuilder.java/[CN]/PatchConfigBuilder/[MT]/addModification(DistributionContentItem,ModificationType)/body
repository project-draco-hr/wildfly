{
  Map<ModificationType,SortedSet<DistributionContentItem>> typeMap;
  DistributionContentItem.Type itemType=item.getType();
switch (itemType) {
case MODULE_ROOT:
case BUNDLE_ROOT:
case MISC:
    typeMap=modifications.get(itemType);
  if (typeMap == null) {
    typeMap=new HashMap<ModificationType,SortedSet<DistributionContentItem>>();
    modifications.put(itemType,typeMap);
  }
break;
default :
throw new IllegalArgumentException(itemType + " is not a valid content item type for a modification");
}
SortedSet<DistributionContentItem> items=typeMap.get(modificationType);
if (items == null) {
items=new TreeSet<DistributionContentItem>();
typeMap.put(modificationType,items);
}
items.add(item);
return this;
}
