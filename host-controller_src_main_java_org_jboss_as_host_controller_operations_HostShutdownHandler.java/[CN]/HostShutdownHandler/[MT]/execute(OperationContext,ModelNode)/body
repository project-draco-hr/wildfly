{
  final boolean restart=operation.hasDefined(RESTART) ? operation.get(RESTART).asBoolean() : false;
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      if (restart) {
        domainController.stopLocalHost(ExitCodes.RESTART_PROCESS_FROM_STARTUP_SCRIPT);
      }
 else {
        domainController.stopLocalHost();
      }
      context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
    }
  }
,OperationContext.Stage.RUNTIME);
  context.stepCompleted();
}
