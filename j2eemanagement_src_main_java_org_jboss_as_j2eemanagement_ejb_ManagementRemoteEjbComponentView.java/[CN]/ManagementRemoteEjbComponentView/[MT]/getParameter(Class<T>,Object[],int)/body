{
  if (index >= params.length) {
    throw new IllegalArgumentException("Expected at least " + index + " elements in parameter array with size"+ params.length);
  }
  Object o=params[index];
  if (o == null) {
    return null;
  }
  try {
    return clazz.cast(o);
  }
 catch (  Exception e) {
    throw new IllegalArgumentException("Bad type for parameter at " + index + ". Expected "+ clazz.getName()+ ", but was "+ o.getClass().getName());
  }
}
