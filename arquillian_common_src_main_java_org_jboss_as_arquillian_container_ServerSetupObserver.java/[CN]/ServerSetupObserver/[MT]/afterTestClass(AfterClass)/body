{
  if (current.isEmpty()) {
    return;
  }
  final Iterator<Map.Entry<String,Integer>> it=deployed.entrySet().iterator();
  while (it.hasNext()) {
    Map.Entry<String,Integer> container=it.next();
    if (container.getValue() == 0) {
      if (active.containsKey(container.getKey())) {
        ManagementClient client=active.get(container.getKey());
        for (int i=current.size() - 1; i >= 0; i--) {
          current.get(i).tearDown(client,container.getKey());
        }
        active.remove(container.getKey());
        it.remove();
      }
    }
  }
  afterClassRun=true;
  if (deployed.isEmpty()) {
    deployed=null;
    current.clear();
    afterClassRun=false;
  }
}
