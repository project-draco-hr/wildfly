{
  context.removeResource(PathAddress.EMPTY_ADDRESS);
  context.addStep(new OperationStepHandler(){
    public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      final boolean wasReadOnly=auditLogger.isLogReadOnly();
      final AuditLogger.Status oldStatus=auditLogger.getLoggerStatus();
      auditLogger.setLoggerStatus(AuditLogger.Status.DISABLE_NEXT);
      context.completeStep(new OperationContext.RollbackHandler(){
        @Override public void handleRollback(        OperationContext context,        ModelNode operation){
          auditLogger.setLogReadOnly(wasReadOnly);
          auditLogger.setLoggerStatus(oldStatus);
        }
      }
);
    }
  }
,OperationContext.Stage.RUNTIME);
  context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
}
