{
  executor.execute(new Runnable(){
    @Override public void run(){
      final ProtocolChannel channel=channelStrategy.getChannel();
      FlushableDataOutputImpl output=null;
      try {
        channel.getReceiver(ManagementChannelReceiver.class).registerResponseHandler(currentRequestId,new DelegatingResponseHandler());
        output=FlushableDataOutputImpl.create(channel.writeMessage());
        final ManagementRequestHeader managementRequestHeader=new ManagementRequestHeader(ManagementProtocol.VERSION,currentRequestId);
        managementRequestHeader.write(output);
        writeRequestBody(channel,output);
        output.writeByte(ManagementProtocol.REQUEST_END);
      }
 catch (      Exception e) {
        future.failed(e);
      }
 finally {
        IoUtils.safeClose(output);
      }
    }
  }
);
  return future;
}
