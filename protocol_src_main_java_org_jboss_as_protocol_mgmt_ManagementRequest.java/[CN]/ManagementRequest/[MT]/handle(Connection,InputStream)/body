{
  try {
    expectHeader(input,ManagementProtocol.RESPONSE_START);
    byte responseCode=StreamUtils.readByte(input);
    if (responseCode != getResponseCode()) {
      throw new IOException("Invalid response code.  Expecting '" + getResponseCode() + "' received '"+ responseCode+ "'");
    }
    connection.setMessageHandler(responseBodyHandler);
  }
 catch (  Exception e) {
    future.setException(e);
  }
}
