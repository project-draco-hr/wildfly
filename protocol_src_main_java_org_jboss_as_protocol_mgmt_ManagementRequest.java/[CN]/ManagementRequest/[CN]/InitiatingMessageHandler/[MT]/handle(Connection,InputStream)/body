{
  final ManagementResponseHeader responseHeader;
  ByteDataInput input=null;
  try {
    input=new SimpleByteDataInput(inputStream);
    responseHeader=new ManagementResponseHeader(input);
    if (requestId != responseHeader.getResponseId()) {
      throw new IOException("Invalid request ID expecting " + requestId + " received "+ responseHeader.getResponseId());
    }
    connection.setMessageHandler(ManagementRequest.this);
    sendRequest(responseHeader.getVersion(),connection);
  }
  finally {
    safeClose(input);
  }
}
