{
  if (obj == null)   return null;
  if (stubClass.isAssignableFrom(obj.getClass()))   return (EJBObject)obj;
  if (stubClass == EJBObject.class)   return (EJBObject)PortableRemoteObject.narrow(obj,EJBObject.class);
  try {
    Stub stub=(Stub)stubClass.newInstance();
    stub._set_delegate(((org.omg.CORBA.portable.ObjectImpl)obj)._get_delegate());
    return (EJBObject)stub;
  }
 catch (  Exception e) {
    throw new RemoteException("Error creating stub",e);
  }
}
