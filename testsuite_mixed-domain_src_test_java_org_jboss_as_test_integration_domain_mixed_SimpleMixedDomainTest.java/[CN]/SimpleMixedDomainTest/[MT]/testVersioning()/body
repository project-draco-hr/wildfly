{
  DomainClient masterClient=getSupport().getDomainMasterLifecycleUtil().createDomainClient();
  ModelNode masterModel;
  try {
    masterModel=readDomainModelForVersions(masterClient);
  }
  finally {
    IoUtils.safeClose(masterClient);
  }
  DomainClient slaveClient=getSupport().getDomainSlaveLifecycleUtil().createDomainClient();
  ModelNode slaveModel;
  try {
    slaveModel=readDomainModelForVersions(slaveClient);
  }
  finally {
    IoUtils.safeClose(slaveClient);
  }
  cleanupKnownDifferencesInModelsForVersioningCheck(masterModel,slaveModel);
  assertEquals(masterModel,slaveModel);
}
