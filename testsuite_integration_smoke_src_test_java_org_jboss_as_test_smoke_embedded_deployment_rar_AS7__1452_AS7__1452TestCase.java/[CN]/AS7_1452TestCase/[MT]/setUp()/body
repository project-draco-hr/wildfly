{
  final ModelNode address=new ModelNode();
  address.add("subsystem","resource-adapters");
  address.add("resource-adapter","as7_1452.rar");
  address.protect();
  final ModelNode operation=new ModelNode();
  operation.get(OP).set("add");
  operation.get(OP_ADDR).set(address);
  operation.get("archive").set("as7_1452.rar");
  operation.get("transaction-support").set("NoTransaction");
  final ModelNode result=getModelControllerClient().execute(operation);
  Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
  final ModelNode addressConfigRes=address.clone();
  addressConfigRes.add("config-properties","Property");
  addressConfigRes.protect();
  final ModelNode operationConfigRes=new ModelNode();
  operationConfigRes.get(OP).set("add");
  operationConfigRes.get(OP_ADDR).set(addressConfigRes);
  operationConfigRes.get("value").set("A");
  final ModelNode result1=getModelControllerClient().execute(operationConfigRes);
  Assert.assertEquals(SUCCESS,result1.get(OUTCOME).asString());
  final ModelNode addressAdmin=address.clone();
  addressAdmin.add("admin-objects","java:jboss/ConfigPropertyAdminObjectInterface1");
  addressAdmin.protect();
  final ModelNode operationAdmin=new ModelNode();
  operationAdmin.get(OP).set("add");
  operationAdmin.get(OP_ADDR).set(addressAdmin);
  operationAdmin.get("class-name").set("org.jboss.as.test.smoke.embedded.deployment.rar.AS7_1452.ConfigPropertyAdminObjectImpl");
  operationAdmin.get("jndi-name").set(AO_JNDI_NAME);
  final ModelNode result2=getModelControllerClient().execute(operationAdmin);
  Assert.assertEquals(SUCCESS,result2.get(OUTCOME).asString());
  final ModelNode addressConfigAdm=addressAdmin.clone();
  addressConfigAdm.add("config-properties","Property");
  addressConfigAdm.protect();
  final ModelNode operationConfigAdm=new ModelNode();
  operationConfigAdm.get(OP).set("add");
  operationConfigAdm.get(OP_ADDR).set(addressConfigAdm);
  operationConfigAdm.get("value").set("C");
  final ModelNode result3=getModelControllerClient().execute(operationConfigAdm);
  Assert.assertEquals(SUCCESS,result3.get(OUTCOME).asString());
  final ModelNode addressConn=address.clone();
  addressConn.add("connection-definitions","java:jboss/ConfigPropertyConnectionFactory1");
  addressConn.protect();
  final ModelNode operationConn=new ModelNode();
  operationConn.get(OP).set("add");
  operationConn.get(OP_ADDR).set(addressConn);
  operationConn.get("class-name").set("org.jboss.as.test.smoke.embedded.deployment.rar.AS7_1452.ConfigPropertyManagedConnectionFactory");
  operationConn.get("jndi-name").set(CF_JNDI_NAME);
  operationConn.get("pool-name").set("ConfigPropertyConnectionFactory");
  final ModelNode result4=getModelControllerClient().execute(operationConn);
  Assert.assertEquals(SUCCESS,result4.get(OUTCOME).asString());
  final ModelNode addressConfigConn=addressConn.clone();
  addressConfigConn.add("config-properties","Property");
  addressConfigConn.protect();
  final ModelNode operationConfigConn=new ModelNode();
  operationConfigConn.get(OP).set("add");
  operationConfigConn.get(OP_ADDR).set(addressConfigConn);
  operationConfigConn.get("value").set("B");
  final ModelNode result5=getModelControllerClient().execute(operationConfigConn);
  Assert.assertEquals(SUCCESS,result5.get(OUTCOME).asString());
  final ModelNode operationReload=new ModelNode();
  operationReload.get(OP).set("reload");
  final ModelNode result6=getModelControllerClient().execute(operationReload);
  Assert.assertEquals(SUCCESS,result6.get(OUTCOME).asString());
  Thread.sleep(10000);
}
