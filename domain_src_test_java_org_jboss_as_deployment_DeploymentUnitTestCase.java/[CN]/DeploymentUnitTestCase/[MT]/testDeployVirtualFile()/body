{
  final VirtualFile virtualFile=VFS.getChild(getResource("/test/serviceDeployment.jar"));
  final String expectedDeploymentName=virtualFile.getPathName() + ":";
  final DeploymentResult.Future resultFuture=new DeploymentUnitElement(null,virtualFile.getPathName(),new byte[0],true,true).activate(serviceContainer);
  final DeploymentResult deploymentResult=resultFuture.getDeploymentResult();
  assertNotNull(deploymentResult);
  assertEquals(DeploymentResult.Result.SUCCESS,deploymentResult.getResult());
  final ServiceController<?> serviceController=serviceContainer.getService(DeploymentService.SERVICE_NAME.append(expectedDeploymentName));
  assertNotNull(serviceController);
  assertEquals(ServiceController.State.UP,serviceController.getState());
  ServiceController<?> mountServiceController=serviceContainer.getService(ServiceName.JBOSS.append("mounts").append(expectedDeploymentName));
  assertNotNull(mountServiceController);
  assertEquals(ServiceController.State.UP,mountServiceController.getState());
  assertNull(mountServiceController.getValue());
}
