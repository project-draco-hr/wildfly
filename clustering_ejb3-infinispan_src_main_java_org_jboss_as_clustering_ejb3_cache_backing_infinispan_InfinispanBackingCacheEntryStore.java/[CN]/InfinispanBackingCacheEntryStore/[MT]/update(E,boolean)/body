{
  final K id=entry.getId();
  this.trace("update(%s, %s)",id,modified);
  try {
    if (modified) {
      final MarshalledValue<E,C> value=this.marshalEntry(entry);
      Operation<Void> operation=new Operation<Void>(){
        @Override public Void invoke(        Cache<K,MarshalledValue<E,C>> cache){
          cache.getAdvancedCache().withFlags(Flag.SKIP_REMOTE_LOOKUP).put(id,value);
          return null;
        }
      }
;
      this.invoke(operation);
    }
  }
  finally {
    this.releaseSessionOwnership(id,false);
  }
}
