{
  MarshallerFactory marshallerFactory=mock(MarshallerFactory.class);
  LocalDistributableSessionManager manager=mock(LocalDistributableSessionManager.class);
  SessionAttributeMarshallerFactory factory=new SessionAttributeMarshallerFactoryImpl(marshallerFactory);
  when(manager.getApplicationClassLoader()).thenReturn(Thread.currentThread().getContextClassLoader());
  SessionAttributeMarshaller marshaller=factory.createMarshaller(manager);
  assertNotNull(marshaller);
  assertTrue(marshaller instanceof SessionAttributeMarshallerImpl);
}
