{
  NamingException namingExeption;
  try {
    return super.lookup(name);
  }
 catch (  NamingException ex) {
    namingExeption=ex;
  }
  InputStream stream=getClass().getClassLoader().getResourceAsStream(name);
  if (stream == null)   throw namingExeption;
  if (name.equals("/WEB-INF/juddi.properties")) {
    try {
      Properties props=new Properties();
      props.load(stream);
      JAXRConfiguration config=JAXRConfiguration.INSTANCE;
      props.setProperty("juddi.dataSource",config.getDataSourceUrl());
      ByteArrayOutputStream out=new ByteArrayOutputStream();
      props.store(out,"jUDDI Registry Properties");
      stream=new ByteArrayInputStream(out.toByteArray());
    }
 catch (    IOException ex) {
      NamingException namingException=new NamingException("Cannot append jUDDI datasource");
      namingException.initCause(ex);
      throw namingException;
    }
  }
  return new Resource(stream);
}
