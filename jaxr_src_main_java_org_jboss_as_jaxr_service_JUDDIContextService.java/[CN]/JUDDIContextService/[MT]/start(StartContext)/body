{
  HttpManagement httpManagement=httpManagementInjector.getOptionalValue();
  try {
    context.setPath("/juddi");
    context.addLifecycleListener(new ContextConfig());
    context.setDocBase("");
    final Loader loader=new WebCtxLoader(this.getClass().getClassLoader());
    Host host=hostInjector.getValue().getHost();
    loader.setContainer(host);
    context.setLoader(loader);
    context.setInstanceManager(new LocalInstanceManager(httpManagement));
    HttpServlet servlet=new JUDDIServlet();
    Wrapper wrapper=context.createWrapper();
    wrapper.setName("JUDDIServlet");
    wrapper.setServlet(servlet);
    wrapper.setServletClass(servlet.getClass().getName());
    context.addChild(wrapper);
    context.addServletMapping("/publish","JUDDIServlet");
    context.addServletMapping("/inquiry","JUDDIServlet");
    servlet=new RegistryServlet();
    wrapper=context.createWrapper();
    wrapper.setName("JUDDIRegistryServlet");
    wrapper.setServlet(servlet);
    wrapper.setServletClass(servlet.getClass().getName());
    wrapper.setLoadOnStartup(1);
    context.addChild(wrapper);
    host.addChild(context);
    context.create();
  }
 catch (  Exception e) {
    throw new StartException("failed to create context",e);
  }
  try {
    context.start();
  }
 catch (  LifecycleException e) {
    throw new StartException("failed to start context",e);
  }
}
