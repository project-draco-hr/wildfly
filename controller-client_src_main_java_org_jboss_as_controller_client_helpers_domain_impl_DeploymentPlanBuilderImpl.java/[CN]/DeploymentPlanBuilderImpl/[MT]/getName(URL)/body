{
  if ("file".equals(url.getProtocol())) {
    try {
      File f=new File(url.toURI());
      return f.getName();
    }
 catch (    URISyntaxException e) {
      throw MESSAGES.invalidUri(e,url);
    }
  }
  String path=url.getPath();
  int idx=path.lastIndexOf('/');
  while (idx == path.length() - 1) {
    path=path.substring(0,idx);
    idx=path.lastIndexOf('/');
  }
  if (idx == -1) {
    throw MESSAGES.cannotDeriveDeploymentName(url);
  }
  return path.substring(idx + 1);
}
