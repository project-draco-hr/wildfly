{
  if (name == null && subject != null) {
    Set<AccountPrincipal> accounts=subject.getPrincipals(AccountPrincipal.class);
    if (accounts.size() != 1) {
      throw MESSAGES.unexpectedAccountPrincipalCount(accounts.size());
    }
    name=accounts.iterator().next().getName();
  }
  return name;
}
