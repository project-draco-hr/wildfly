{
  final File appClient=new File(jbossHome,APP_CLIENT);
  final File bundles=new File(jbossHome,BUNDLES);
  final File domain=new File(jbossHome,DOMAIN);
  final File modules=new File(jbossHome,MODULES);
  final File installation=new File(jbossHome,Constants.INSTALLATION);
  final File patches=new File(modules,PATCHES);
  final File standalone=new File(jbossHome,STANDALONE);
  return new LegacyDirectoryStructure(new InstalledImage(){
    @Override public File getJbossHome(){
      return jbossHome;
    }
    @Override public File getBundlesDir(){
      return bundles;
    }
    @Override public File getModulesDir(){
      return modules;
    }
    @Override public File getInstallationMetadata(){
      return installation;
    }
    @Override public File getLayersConf(){
      return new File(getModulesDir(),Constants.LAYERS_CONF);
    }
    @Override public File getPatchesDir(){
      return patches;
    }
    @Override public File getPatchHistoryDir(    String patchId){
      return newFile(getInstallationMetadata(),PATCHES,patchId);
    }
    @Override public File getAppClientDir(){
      return appClient;
    }
    @Override public File getDomainDir(){
      return domain;
    }
    @Override public File getStandaloneDir(){
      return standalone;
    }
  }
);
}
