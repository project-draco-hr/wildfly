{
  context.removeService(new ProtocolDefaultsBuilder().getServiceName());
  String defaultChannel=ModelNodes.asString(DEFAULT_CHANNEL.getDefinition().resolveModelAttribute(context,model),GroupServiceNameFactory.DEFAULT_GROUP);
  if ((defaultChannel != null) && !defaultChannel.equals(GroupServiceNameFactory.DEFAULT_GROUP)) {
    for (    GroupBuilderProvider provider : ServiceLoader.load(DistributedGroupBuilderProvider.class,DistributedGroupBuilderProvider.class.getClassLoader())) {
      for (      Builder<?> builder : provider.getBuilders(GroupServiceNameFactory.DEFAULT_GROUP,null)) {
        context.removeService(builder.getServiceName());
      }
    }
    context.removeService(JGroupsBindingFactory.createChannelFactoryBinding(GroupServiceNameFactory.DEFAULT_GROUP).getBinderServiceName());
    context.removeService(ProtocolStackServiceName.CHANNEL_FACTORY.getServiceName(GroupServiceNameFactory.DEFAULT_GROUP));
    context.removeService(JGroupsBindingFactory.createChannelBinding(GroupServiceNameFactory.DEFAULT_GROUP).getBinderServiceName());
    for (    ChannelServiceNameFactory factory : ChannelServiceName.values()) {
      context.removeService(factory.getServiceName());
    }
  }
}
