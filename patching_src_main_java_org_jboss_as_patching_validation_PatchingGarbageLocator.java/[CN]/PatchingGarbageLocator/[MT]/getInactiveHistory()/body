{
  if (validHistory == null) {
    walk();
  }
  final File[] inactiveDirs=installedIdentity.getInstalledImage().getPatchesDir().listFiles(new FileFilter(){
    @Override public boolean accept(    File pathname){
      return pathname.isDirectory() && !validHistory.contains(pathname.getName());
    }
  }
);
  return inactiveDirs == null ? Collections.<File>emptyList() : Arrays.asList(inactiveDirs);
}
