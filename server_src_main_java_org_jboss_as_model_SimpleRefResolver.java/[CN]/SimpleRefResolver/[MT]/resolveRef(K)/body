{
  if (ref == null)   throw new IllegalArgumentException("ref is null");
synchronized (map) {
    return map.get(ref);
  }
}
