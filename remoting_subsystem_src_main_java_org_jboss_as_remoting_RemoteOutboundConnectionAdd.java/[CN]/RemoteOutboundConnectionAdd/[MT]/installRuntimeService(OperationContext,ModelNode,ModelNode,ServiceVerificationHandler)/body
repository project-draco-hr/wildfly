{
  final PathAddress address=PathAddress.pathAddress(operation.require(ModelDescriptionConstants.OP_ADDR));
  final String connectionName=address.getLastElement().getValue();
  final String outboundSocketBindingRef=RemoteOutboundConnectionResourceDefinition.OUTBOUND_SOCKET_BINDING_REF.resolveModelAttribute(context,operation).asString();
  final String protocol=RemoteOutboundConnectionResourceDefinition.PROTOCOL.resolveModelAttribute(context,operation).asString();
  final ServiceName outboundSocketBindingDependency=OutboundSocketBinding.OUTBOUND_SOCKET_BINDING_BASE_SERVICE_NAME.append(outboundSocketBindingRef);
  final OptionMap connectionCreationOptions=ConnectorUtils.getOptions(context,fullModel.get(CommonAttributes.PROPERTY));
  final String username=fullModel.hasDefined(CommonAttributes.USERNAME) ? fullModel.require(CommonAttributes.USERNAME).asString() : null;
  final String securityRealm=fullModel.hasDefined(CommonAttributes.SECURITY_REALM) ? fullModel.require(CommonAttributes.SECURITY_REALM).asString() : null;
  final RemoteOutboundConnectionService outboundConnectionService=new RemoteOutboundConnectionService(connectionName,connectionCreationOptions,username,protocol);
  final ServiceName serviceName=AbstractOutboundConnectionService.OUTBOUND_CONNECTION_BASE_SERVICE_NAME.append(connectionName);
  final ServiceName aliasServiceName=RemoteOutboundConnectionService.REMOTE_OUTBOUND_CONNECTION_BASE_SERVICE_NAME.append(connectionName);
  final ServiceBuilder<RemoteOutboundConnectionService> svcBuilder=context.getServiceTarget().addService(serviceName,outboundConnectionService).addAliases(aliasServiceName).addDependency(RemotingServices.SUBSYSTEM_ENDPOINT,Endpoint.class,outboundConnectionService.getEndpointInjector()).addDependency(outboundSocketBindingDependency,OutboundSocketBinding.class,outboundConnectionService.getDestinationOutboundSocketBindingInjector());
  if (securityRealm != null) {
    SecurityRealm.ServiceUtil.addDependency(svcBuilder,outboundConnectionService.getSecurityRealmInjector(),securityRealm,false);
  }
  if (verificationHandler != null) {
    svcBuilder.addListener(verificationHandler);
  }
  return svcBuilder.install();
}
