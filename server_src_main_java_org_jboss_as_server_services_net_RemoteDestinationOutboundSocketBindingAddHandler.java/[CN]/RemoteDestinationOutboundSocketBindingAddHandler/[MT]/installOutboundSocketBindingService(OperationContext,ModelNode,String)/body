{
  final ServiceTarget serviceTarget=context.getServiceTarget();
  final String destinationHost=RemoteDestinationOutboundSocketBindingResourceDefinition.HOST.resolveModelAttribute(context,model).asString();
  final int destinationPort=RemoteDestinationOutboundSocketBindingResourceDefinition.PORT.resolveModelAttribute(context,model).asInt();
  final ModelNode sourceInterfaceModelNode=OutboundSocketBindingResourceDefinition.SOURCE_INTERFACE.resolveModelAttribute(context,model);
  final String sourceInterfaceName=sourceInterfaceModelNode.isDefined() ? sourceInterfaceModelNode.asString() : null;
  final ModelNode sourcePortModelNode=OutboundSocketBindingResourceDefinition.SOURCE_PORT.resolveModelAttribute(context,model);
  final Integer sourcePort=sourcePortModelNode.isDefined() ? sourcePortModelNode.asInt() : null;
  final ModelNode fixedSourcePortModelNode=OutboundSocketBindingResourceDefinition.FIXED_SOURCE_PORT.resolveModelAttribute(context,model);
  final boolean fixedSourcePort=fixedSourcePortModelNode.isDefined() ? fixedSourcePortModelNode.asBoolean() : false;
  final OutboundSocketBindingService outboundSocketBindingService=new RemoteDestinationOutboundSocketBindingService(outboundSocketName,destinationHost,destinationPort,sourcePort,fixedSourcePort);
  final ServiceBuilder<OutboundSocketBinding> serviceBuilder=serviceTarget.addService(OutboundSocketBinding.OUTBOUND_SOCKET_BINDING_BASE_SERVICE_NAME.append(outboundSocketName),outboundSocketBindingService);
  if (sourceInterfaceName != null) {
    serviceBuilder.addDependency(NetworkInterfaceService.JBOSS_NETWORK_INTERFACE.append(sourceInterfaceName),NetworkInterfaceBinding.class,outboundSocketBindingService.getSourceNetworkInterfaceBindingInjector());
  }
  serviceBuilder.addDependency(SocketBindingManager.SOCKET_BINDING_MANAGER,SocketBindingManager.class,outboundSocketBindingService.getSocketBindingManagerInjector());
  return serviceBuilder.setInitialMode(ServiceController.Mode.ON_DEMAND).install();
}
