{
  final ServiceTarget serviceTarget=context.getServiceTarget();
  final String destinationHost=RemoteDestinationOutboundSocketBindingResourceDefinition.HOST.validateResolvedOperation(model).asString();
  final InetAddress destinationHostAddress=InetAddress.getByName(destinationHost);
  final int destinationPort=RemoteDestinationOutboundSocketBindingResourceDefinition.PORT.validateResolvedOperation(model).asInt();
  final ModelNode sourceInterfaceModelNode=OutboundSocketBindingResourceDefinition.SOURCE_INTERFACE.validateResolvedOperation(model);
  final String sourceInterfaceName=sourceInterfaceModelNode.isDefined() ? sourceInterfaceModelNode.asString() : null;
  final ModelNode sourcePortModelNode=OutboundSocketBindingResourceDefinition.SOURCE_PORT.validateResolvedOperation(model);
  final Integer sourcePort=sourcePortModelNode.isDefined() ? sourcePortModelNode.asInt() : null;
  final ModelNode fixedSourcePortModelNode=OutboundSocketBindingResourceDefinition.FIXED_SOURCE_PORT.validateResolvedOperation(model);
  final boolean fixedSourcePort=fixedSourcePortModelNode.isDefined() ? fixedSourcePortModelNode.asBoolean() : false;
  final OutboundSocketBindingService outboundSocketBindingService=new RemoteDestinationOutboundSocketBindingService(outboundSocketName,destinationHostAddress,destinationPort,sourcePort,fixedSourcePort);
  final ServiceBuilder<OutboundSocketBinding> serviceBuilder=serviceTarget.addService(OutboundSocketBinding.OUTBOUND_SOCKET_BINDING_BASE_SERVICE_NAME.append(outboundSocketName),outboundSocketBindingService);
  if (sourceInterfaceName != null) {
    serviceBuilder.addDependency(NetworkInterfaceService.JBOSS_NETWORK_INTERFACE.append(sourceInterfaceName),NetworkInterfaceBinding.class,outboundSocketBindingService.getSourceNetworkInterfaceBindingInjector());
  }
  serviceBuilder.addDependency(SocketBindingManager.SOCKET_BINDING_MANAGER,SocketBindingManager.class,outboundSocketBindingService.getSocketBindingManagerInjector());
  return serviceBuilder.setInitialMode(ServiceController.Mode.ON_DEMAND).install();
}
