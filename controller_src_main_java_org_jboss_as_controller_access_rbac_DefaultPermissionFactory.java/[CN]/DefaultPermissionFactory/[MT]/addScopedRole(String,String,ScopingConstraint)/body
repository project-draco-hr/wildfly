{
  String officialForm=getOfficialForm(roleName);
  if (permissionsByRole.containsKey(officialForm)) {
    throw ControllerMessages.MESSAGES.roleIsAlreadyRegistered(roleName);
  }
  String officialBase=getOfficialForm(baseName);
  if (rolePermissionsConfigured && !permissionsByRole.containsKey(officialBase)) {
    throw ControllerMessages.MESSAGES.unknownBaseRole(baseName);
  }
  addConstraintFactory(constraint.getFactory());
  scopedBaseMap.put(officialForm,new ScopedBase(StandardRole.valueOf(officialBase),constraint));
  rolePermissionsConfigured=false;
}
