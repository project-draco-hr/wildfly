{
  Map<String,ManagementPermissionCollection> result=new HashMap<String,ManagementPermissionCollection>();
  for (  StandardRole standardRole : StandardRole.values()) {
    ManagementPermissionCollection rolePerms=new ManagementPermissionCollection(SimpleManagementPermission.class);
    for (    Action.ActionEffect actionEffect : Action.ActionEffect.values()) {
      if (standardRole.isActionEffectAllowed(actionEffect)) {
        Constraint[] constraints=new Constraint[constraintFactories.size()];
        int i=0;
        for (        ConstraintFactory factory : this.constraintFactories) {
          constraints[i]=factory.getStandardUserConstraint(standardRole,actionEffect);
          i++;
        }
        rolePerms.add(new SimpleManagementPermission(actionEffect,constraints));
      }
    }
    result.put(getOfficialForm(standardRole),rolePerms);
  }
  return result;
}
