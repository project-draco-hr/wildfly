{
  WebArchive war=ShrinkWrap.create(WebArchive.class);
  JavaArchive libJar=ShrinkWrap.create(JavaArchive.class);
  libJar.addClasses(WebInfLibClass.class,EarClassPath2TestCase.class);
  libJar.addManifestResource(new ByteArrayAsset("Class-Path: ../../../cp.jar\n".getBytes()),"MANIFEST.MF");
  war.addLibraries(libJar);
  EnterpriseArchive ear=ShrinkWrap.create(EnterpriseArchive.class);
  ear.addModule(war);
  JavaArchive earLib=ShrinkWrap.create(JavaArchive.class,"cp.jar");
  earLib.addClass(EarLibClass.class);
  ear.addModule(earLib);
  return ear;
}
