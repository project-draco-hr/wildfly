{
  if (ignoreApply) {
    return;
  }
  final PatchContentLoader contentLoader=description.getLoader();
  final ContentModification original=description.getModification();
  final boolean skip=skipExecution | context.isExcluded(contentItem);
  final byte[] contentHash;
  if (skip) {
    contentHash=backupHash;
  }
 else {
    contentHash=apply(context,contentLoader);
  }
  final ContentModification rollbackAction=createRollbackEntry(original,contentHash,backupHash);
  context.recordChange(description.getModification(),rollbackAction);
  if (!Arrays.equals(contentHash,contentItem.getContentHash()) && failOnContentMismatch(context)) {
    throw new SyncFailedException("copied content does not match expected hash for item: " + contentItem);
  }
}
