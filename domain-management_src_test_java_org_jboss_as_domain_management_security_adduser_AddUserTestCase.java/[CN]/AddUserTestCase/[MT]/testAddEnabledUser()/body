{
  values.setUserName("Donny.Donowitz");
  values.setGroups(ROLES);
  values.getOptions().setDisable(false);
  AddUserState addUserState=new AddUserState(consoleMock,values);
  AssertConsoleBuilder consoleBuilder=new AssertConsoleBuilder().expectedDisplayText(MESSAGES.addedUser(values.getUserName(),values.getUserFiles().get(0).getCanonicalPath())).expectedDisplayText(AddUser.NEW_LINE).expectedDisplayText(MESSAGES.addedGroups(values.getUserName(),values.getGroups(),values.getGroupFiles().get(0).getCanonicalPath())).expectedDisplayText(AddUser.NEW_LINE);
  consoleMock.setResponses(consoleBuilder);
  addUserState.update(values);
  assertRolePropertyFile(values.getUserName());
  assertUserPropertyFile(values.getUserName());
  consoleBuilder.validate();
}
