{
  try {
    final ServerMessage serverMessage=new ServerMessage(message);
    ByteArrayOutputStream baos=new ByteArrayOutputStream(1024);
    Checksum chksum=new Adler32();
    CheckedOutputStream cos=new CheckedOutputStream(baos,chksum);
    ObjectOutputStream oos=null;
    try {
      oos=new ObjectOutputStream(cos);
      oos.writeObject(serverMessage);
      oos.close();
      oos=null;
      serverCommunicationHandler.sendMessage(baos.toByteArray(),chksum.getValue());
    }
  finally {
      if (oos != null) {
        try {
          oos.close();
        }
 catch (        IOException ignored) {
        }
      }
    }
  }
 catch (  IOException e) {
    log.error("Failed to send message to Server Manager [" + message + "]",e);
  }
}
