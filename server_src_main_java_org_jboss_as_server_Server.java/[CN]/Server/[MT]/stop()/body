{
  if (stopping.getAndSet(true))   return;
  state=ServerState.STOPPING;
  super.stop();
  sendMessage(ServerManagerProtocolCommand.SERVER_STOPPED);
  state=ServerState.STOPPED;
  log.info("Server stopped");
  serverCommunicationHandler.shutdown();
  processManagerCommunicationHandler.shutdown();
}
