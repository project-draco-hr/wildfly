{
  this.config=config;
  logger.info("Starting server with config: " + config.getServerName());
  serviceContainer=ServiceContainer.Factory.create();
  final BatchBuilder batchBuilder=serviceContainer.batchBuilder();
  final TimingServiceListener listener=new TimingServiceListener(new Runnable(){
    @Override public void run(){
      logger.info("Server started");
      sendMessage("STARTED");
    }
  }
);
  batchBuilder.addListener(listener);
  try {
    final ServiceActivatorContext serviceActivatorContext=new ServiceActivatorContextImpl(batchBuilder);
    config.activate(serviceActivatorContext);
    batchBuilder.install();
    listener.finishBatch();
  }
 catch (  Throwable t) {
    sendMessage("START FAILED");
    throw new ServerStartException("Failed to start server",t);
  }
}
