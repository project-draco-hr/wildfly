{
  final DeploymentUnit unit=phaseContext.getDeploymentUnit();
  final CompositeIndex compositeIndex=unit.getAttachment(Attachments.COMPOSITE_ANNOTATION_INDEX);
  if (compositeIndex == null) {
    return;
  }
  if (isCompensationAnnotationPresent(compositeIndex)) {
    addXTSModuleDependency(unit);
    addTXFModuleDependency(unit);
  }
 else   if (isTransactionalEndpointPresent(compositeIndex)) {
    addXTSModuleDependency(unit);
  }
}
