{
  final DeploymentUnit unit=phaseContext.getDeploymentUnit();
  if (DeploymentTypeMarker.isType(DeploymentType.EAR,unit)) {
    return;
  }
  final CompositeIndex index=unit.getAttachment(Attachments.COMPOSITE_ANNOTATION_INDEX);
  if (index == null) {
    if (logger.isTraceEnabled()) {
      logger.trace("Skipping WS annotation processing since no composite annotation index found in unit: " + unit);
    }
  }
 else {
    final EEModuleDescription moduleDescription=getRequiredAttachment(unit,EE_MODULE_DESCRIPTION);
    final EEApplicationClasses applicationClasses=getRequiredAttachment(unit,EE_APPLICATION_CLASSES_DESCRIPTION);
    for (    final DotName dotName : dotNames) {
      final List<AnnotationInstance> wsAnnotations=index.getAnnotations(dotName);
      if (!wsAnnotations.isEmpty()) {
        for (        final AnnotationInstance wsAnnotation : wsAnnotations) {
          final AnnotationTarget target=wsAnnotation.target();
          if (target instanceof ClassInfo) {
            final ClassInfo classInfo=(ClassInfo)target;
            if (matches(classInfo,index)) {
              processWSAnnotation(unit,classInfo,wsAnnotation,index,moduleDescription,applicationClasses);
            }
          }
        }
      }
    }
  }
}
