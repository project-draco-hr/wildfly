{
  ZipFile zipFile=null;
  try {
    zipFile=new ZipFile(file);
    for (Enumeration<? extends ZipEntry> en=zipFile.entries(); en.hasMoreElements(); ) {
      final ZipEntry entry=en.nextElement();
      final File output=new File(targetOldVersions,entry.getName());
      if (entry.isDirectory()) {
        if (!output.exists()) {
          if (!output.mkdirs() && !output.exists()) {
            throw new RuntimeException("Could not make dir " + output.getAbsolutePath());
          }
        }
      }
 else {
        inputStreamToFile(zipFile.getInputStream(entry),output);
      }
    }
  }
  finally {
    IoUtils.safeClose(zipFile);
  }
}
