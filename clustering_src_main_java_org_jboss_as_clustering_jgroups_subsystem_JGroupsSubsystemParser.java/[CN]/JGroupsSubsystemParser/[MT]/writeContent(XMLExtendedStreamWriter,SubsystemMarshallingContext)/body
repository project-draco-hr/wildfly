{
  context.startSubsystemElement(Namespace.CURRENT.getUri(),false);
  ModelNode model=context.getModelNode();
  if (model.isDefined()) {
    if (model.hasDefined(ModelKeys.DEFAULT_STACK)) {
      writer.writeAttribute(Attribute.DEFAULT_STACK.getLocalName(),model.get(ModelKeys.DEFAULT_STACK).asString());
    }
    for (    Property property : model.get(ModelKeys.STACK).asPropertyList()) {
      writer.writeStartElement(Element.STACK.getLocalName());
      writer.writeAttribute(Attribute.NAME.getLocalName(),property.getName());
      ModelNode stack=property.getValue();
      this.writeProtocol(writer,stack.get(ModelKeys.TRANSPORT),Element.TRANSPORT);
      for (      ModelNode protocol : stack.get(ModelKeys.PROTOCOL).asList()) {
        this.writeProtocol(writer,protocol,Element.PROTOCOL);
      }
      writer.writeEndElement();
    }
  }
  writer.writeEndElement();
}
