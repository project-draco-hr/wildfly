{
  ByteDataInput input=null;
  try {
    input=new SimpleByteDataInput(inputStream);
    final int workingVersion=readResponseHeader(input);
    connection.setMessageHandler(request);
    request.sendRequest(workingVersion,connection);
  }
  finally {
    safeClose(input);
  }
}
