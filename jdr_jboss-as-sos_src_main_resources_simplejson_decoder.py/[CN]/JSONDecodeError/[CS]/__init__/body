def __init__(self, msg, doc, pos, end=None):
    ValueError.__init__(self, errmsg(msg, doc, pos, end=end))
    self.msg = msg
    self.doc = doc
    self.pos = pos
    self.end = end
    (self.lineno, self.colno) = linecol(doc, pos)
    if (end is not None):
        (self.endlineno, self.endcolno) = linecol(doc, end)
    else:
        (self.endlineno, self.endcolno) = (None, None)
