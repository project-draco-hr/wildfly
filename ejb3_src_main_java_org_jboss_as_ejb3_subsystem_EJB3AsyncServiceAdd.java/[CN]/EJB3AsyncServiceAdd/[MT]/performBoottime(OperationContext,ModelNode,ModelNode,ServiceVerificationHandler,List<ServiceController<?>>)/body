{
  final String threadPoolName=EJB3AsyncResourceDefinition.THREAD_POOL_NAME.resolveModelAttribute(context,model).asString();
  final ServiceName threadPoolServiceName=EJB3ThreadPoolAdd.BASE_SERVICE_NAME.append(threadPoolName);
  context.addStep(new AbstractDeploymentChainStep(){
    protected void execute(    DeploymentProcessorTarget processorTarget){
      logger.debug("Adding EJB @Asynchronous support");
      processorTarget.addDeploymentProcessor(Phase.POST_MODULE,Phase.POST_MODULE_EJB_ASYNCHRONOUS_MERGE,new AsynchronousMergingProcessor(threadPoolServiceName));
    }
  }
,OperationContext.Stage.RUNTIME);
}
