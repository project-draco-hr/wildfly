{
  OperationContext context=mock(OperationContext.class);
  Resource resource=mock(Resource.class);
  ModelNode model=new ModelNode();
  when(context.createResource(PathAddress.EMPTY_ADDRESS)).thenReturn(resource);
  when(resource.getModel()).thenReturn(model);
  new InfinispanSubsystemAdd().execute(context,operations.get(0));
  model.get(ModelKeys.CACHE_CONTAINER).setEmptyList();
  for (  ModelNode operation : operations.subList(1,operations.size())) {
    String name=PathAddress.pathAddress(operation.get(OP_ADDR)).getLastElement().getValue();
    ModelNode container=new ModelNode();
    when(context.createResource(PathAddress.EMPTY_ADDRESS)).thenReturn(resource);
    when(resource.getModel()).thenReturn(container);
    new CacheContainerAdd().execute(context,operation);
    model.get(ModelKeys.CACHE_CONTAINER).add(name,container);
  }
  return model;
}
