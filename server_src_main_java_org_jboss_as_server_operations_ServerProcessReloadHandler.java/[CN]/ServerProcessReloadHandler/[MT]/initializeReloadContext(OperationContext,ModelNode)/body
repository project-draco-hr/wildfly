{
  final boolean unmanaged=context.getProcessType() != ProcessType.DOMAIN_SERVER;
  final boolean adminOnly=unmanaged && ADMIN_ONLY.resolveModelAttribute(context,operation).asBoolean(false);
  final boolean useCurrentConfig=unmanaged && USE_CURRENT_SERVER_CONFIG.resolveModelAttribute(context,operation).asBoolean(true);
  return new ReloadContext<RunningModeControl>(){
    @Override public void reloadInitiated(    RunningModeControl runningModeControl){
    }
    @Override public void doReload(    RunningModeControl runningModeControl){
      runningModeControl.setRunningMode(adminOnly ? RunningMode.ADMIN_ONLY : RunningMode.NORMAL);
      runningModeControl.setReloaded();
      runningModeControl.setUseCurrentConfig(useCurrentConfig);
    }
  }
;
}
