{
  reader.next();
  while (true) {
switch (reader.getEventType()) {
case START_ELEMENT:
      if (reader.getLocalName().equals("subsystem")) {
        String supplement=null;
        String systemProperty=null;
        for (int i=0; i < reader.getAttributeCount(); i++) {
          String attr=reader.getAttributeLocalName(i);
          if (attr.equals("supplement")) {
            supplement=reader.getAttributeValue(i);
          }
 else           if (attr.equals("include-if-set")) {
            systemProperty=reader.getAttributeValue(i);
          }
 else {
            throw new XMLStreamException("Unknown attribute " + attr,reader.getLocation());
          }
        }
        String text=reader.getElementText();
        if (systemProperty != null) {
          if (System.getProperty(systemProperty) != null) {
            subsystems.add(new SubsystemConfig(text,supplement));
          }
        }
 else {
          subsystems.add(new SubsystemConfig(text,supplement));
        }
      }
 else {
        throw new XMLStreamException("Invalid element " + reader.getLocalName(),reader.getLocation());
      }
    break;
case END_ELEMENT:
  if (reader.getLocalName().equals("subsystems")) {
    return;
  }
default :
reader.next();
}
}
}
