{
  final ModelNode model=context.readResourceForUpdate(PathAddress.EMPTY_ADDRESS).getModel();
  final ManagementResourceRegistration registration=context.getResourceRegistrationForUpdate();
  model.get(LogStoreConstans.LOG_STORE_TYPE.getName()).set("xxx");
  final ModelNode transactionAddress=operation.get("address").clone();
  final ModelNode transactionOperation=new ModelNode();
  operation.get(OP).set(ADD);
  transactionAddress.add(LogStoreConstans.TRANSACTIONS,"1");
  transactionAddress.protect();
  transactionOperation.get(OP_ADDR).set(transactionAddress);
  transactionOperation.get(LogStoreConstans.TRANSACTION_ID.getName()).set(1);
  transactionOperation.get(LogStoreConstans.TRANSACTION_AGE.getName()).set(100);
  context.addStep(transactionOperation,LogStoreTransactionAddHandler.INSTANCE,OperationContext.Stage.MODEL);
  final ModelNode partecipantAddress=transactionAddress.clone();
  final ModelNode partecipantOperation=new ModelNode();
  operation.get(OP).set(ADD);
  final String jndiName="java:/MyJndi";
  partecipantAddress.add(LogStoreConstans.PARTECIPANTS,jndiName);
  partecipantAddress.protect();
  partecipantOperation.get(OP_ADDR).set(partecipantAddress);
  partecipantOperation.get(LogStoreConstans.PARTECIPANT_STATUS.getName()).set(LogStoreConstans.PartecipatnStatus.Heuristic.name());
  partecipantOperation.get(LogStoreConstans.PARTECIPANT_JNDI_NAME.getName()).set(jndiName);
  context.addStep(partecipantOperation,LogStorePartecipantAddHandler.INSTANCE,OperationContext.Stage.MODEL);
  context.completeStep();
}
