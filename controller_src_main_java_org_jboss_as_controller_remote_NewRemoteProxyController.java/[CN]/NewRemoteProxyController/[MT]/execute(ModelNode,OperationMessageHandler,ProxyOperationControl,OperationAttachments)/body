{
  final int batchId=ManagementBatchIdManager.DEFAULT.createBatchId();
  ExecuteRequest request=new ExecuteRequest(batchId,getOperationForProxy(operation),handler,new ProxyOperationControl(){
    @Override public void operationPrepared(    OperationTransaction transaction,    ModelNode result){
      control.operationPrepared(transaction,result);
    }
    @Override public void operationFailed(    ModelNode response){
      control.operationFailed(response);
    }
    @Override public void operationCompleted(    ModelNode response){
      control.operationCompleted(response);
    }
  }
,attachments);
  try {
    request.executeForResult(executorService,getChannelStrategy());
  }
 catch (  Exception e) {
    try {
      ManagementBatchIdManager.DEFAULT.freeBatchId(batchId);
    }
 catch (    Exception ignore) {
    }
    throw new RuntimeException(e);
  }
}
