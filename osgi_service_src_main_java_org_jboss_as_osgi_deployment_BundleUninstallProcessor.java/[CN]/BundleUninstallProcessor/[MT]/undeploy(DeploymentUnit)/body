{
  XBundleRevision brev=depUnit.getAttachment(OSGiConstants.BUNDLE_REVISION_KEY);
  if (brev == null)   return;
  XBundle bundle=brev.getBundle();
  BundleManager bundleManager=depUnit.getAttachment(OSGiConstants.BUNDLE_MANAGER_KEY);
  if (uninstallRequired(depUnit,brev)) {
    try {
      int options=getUninstallOptions(bundleManager);
      bundleManager.uninstallBundle(bundle,options);
    }
 catch (    BundleException ex) {
      LOGGER.debugf(ex,"Cannot uninstall bundle: %s",bundle);
    }
  }
}
