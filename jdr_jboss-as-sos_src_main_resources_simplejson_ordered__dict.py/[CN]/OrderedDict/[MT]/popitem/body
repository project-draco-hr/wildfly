def popitem(self, last=True):
    if (not self):
        raise KeyError('dictionary is empty')
    if last:
        key = reversed(self).next()
    else:
        key = iter(self).next()
    value = self.pop(key)
    return (key, value)
