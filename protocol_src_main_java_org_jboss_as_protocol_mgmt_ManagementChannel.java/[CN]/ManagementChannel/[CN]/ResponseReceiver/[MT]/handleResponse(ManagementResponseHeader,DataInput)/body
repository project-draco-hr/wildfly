{
  ROOT_LOGGER.tracef("%s handling response %d",ManagementChannel.this,header.getResponseId());
  ManagementResponseHandler<?> responseHandler=responseHandlers.remove(header.getResponseId());
  if (responseHandler == null) {
    throw MESSAGES.responseHandlerNotFound(header.getResponseId());
  }
  try {
    responseHandler.setContextInfo(header,ManagementChannel.this);
    responseHandler.readResponse(input);
    expectHeader(input,ManagementProtocol.RESPONSE_END);
  }
 catch (  Exception e) {
    throwFormattedException(e);
  }
 finally {
    responseHandler.removeCloseHandler();
    ROOT_LOGGER.tracef("%s handled response %d",ManagementChannel.this,header.getResponseId());
  }
}
