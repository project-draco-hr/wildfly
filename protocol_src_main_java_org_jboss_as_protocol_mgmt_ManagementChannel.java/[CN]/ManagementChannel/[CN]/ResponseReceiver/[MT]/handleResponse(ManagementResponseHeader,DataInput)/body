{
  ManagementResponseHandler<?> responseHandler=responseHandlers.get(header.getResponseId());
  if (responseHandler == null) {
    throw new IOException("No response handler for request " + header.getResponseId());
  }
  try {
    expectHeader(input,ManagementProtocol.RESPONSE_START);
    expectHeader(input,ManagementProtocol.RESPONSE_BODY);
    responseHandler.readResponse(input);
    expectHeader(input,ManagementProtocol.RESPONSE_END);
  }
 catch (  Exception e) {
    if (e instanceof IOException) {
      throw (IOException)e;
    }
    if (e instanceof RuntimeException) {
      throw (RuntimeException)e;
    }
    throw new IOException(e);
  }
}
