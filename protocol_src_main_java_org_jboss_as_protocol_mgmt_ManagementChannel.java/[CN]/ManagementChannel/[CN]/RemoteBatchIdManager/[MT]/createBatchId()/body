{
  try {
    return new ManagementRequest<Integer>(){
      @Override protected byte getRequestCode(){
        return ManagementProtocol.CREATE_BATCH_ID_REQUEST;
      }
      @Override protected Integer readResponse(      DataInput input) throws IOException {
        ProtocolUtils.expectHeader(input,ManagementProtocol.PARAM_BATCH_ID);
        return input.readInt();
      }
    }
.executeForResult(executor,ManagementClientChannelStrategy.create(ManagementChannel.this));
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
