{
  final SimpleDataInput input=new SimpleDataInput(Marshalling.createByteInput(message)){
  }
;
  try {
    ManagementProtocolHeader header=ManagementProtocolHeader.parse(input);
    if (header.isRequest()) {
      requestReceiver.handleRequest((ManagementRequestHeader)header,input);
    }
 else {
      responseReceiver.handleResponse((ManagementResponseHeader)header,input);
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
    IoUtils.safeClose(input);
    IoUtils.safeClose(message);
  }
}
