{
  ManagementBatchIdManager batchIdManager=this.batchIdManager;
  if (batchIdManager == null) {
    batchIdManager=new RemoteBatchIdManager();
  }
  batchIdManager.freeBatchId(id);
  outgoingBatches.remove(id);
  if ((getClosed() || getWritesShutdown()) && outgoingBatches.size() == 0) {
    completedActiveRequestsLatch.countDown();
  }
}
