{
  List<BindingConfiguration> bindings=new ArrayList<BindingConfiguration>();
  final EnvironmentEntriesMetaData entries=environment.getEnvironment().getEnvironmentEntries();
  if (entries == null) {
    return bindings;
  }
  for (  EnvironmentEntryMetaData envEntry : entries) {
    final String name;
    if (envEntry.getName().startsWith("java:")) {
      name=envEntry.getName();
    }
 else {
      name=environment.getDefaultContext() + envEntry.getEnvEntryName();
    }
    Class<?> classType=null;
    if (envEntry.getType() != null) {
      try {
        classType=classLoader.loadClass(envEntry.getType());
      }
 catch (      ClassNotFoundException e) {
        throw new DeploymentUnitProcessingException("Could not load " + envEntry.getType() + " referenced in env-entry ",e);
      }
    }
    LookupInjectionSource injectionSource=new LookupInjectionSource(name);
    classType=processInjectionTargets(moduleDescription,injectionSource,classLoader,deploymentReflectionIndex,envEntry,classType);
    if (classType == null) {
      throw new DeploymentUnitProcessingException("Could not determine type for <env-entry> " + name + " please specify the <env-entry-type>.");
    }
    final String value=envEntry.getValue();
    if (isEmpty(value)) {
      continue;
    }
    final String type=classType.getName();
    BindingConfiguration bindingConfiguration=null;
    if (type.equals(String.class.getName())) {
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(value));
    }
 else     if (type.equals(Integer.class.getName())) {
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(Integer.valueOf(value)));
    }
 else     if (type.equals(Short.class.getName())) {
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(Short.valueOf(value)));
    }
 else     if (type.equals(Long.class.getName())) {
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(Long.valueOf(value)));
    }
 else     if (type.equals(Byte.class.getName())) {
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(Byte.valueOf(value)));
    }
 else     if (type.equals(Double.class.getName())) {
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(Double.valueOf(value)));
    }
 else     if (type.equals(Float.class.getName())) {
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(Float.valueOf(value)));
    }
 else     if (type.equals(Boolean.class.getName())) {
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(Boolean.valueOf(value)));
    }
 else     if (type.equals(Character.class.getName())) {
      if (value.length() != 1) {
        throw new DeploymentUnitProcessingException("env-entry of type java.lang.Character is not exactly one character long " + value);
      }
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(value.charAt(0)));
    }
 else     if (type.equals(Class.class.getName())) {
      try {
        bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(classLoader.loadClass(value)));
      }
 catch (      ClassNotFoundException e) {
        throw new DeploymentUnitProcessingException("Could not load class " + value + " specified in env-entry");
      }
    }
 else     if (classType.isEnum() || (classType.getEnclosingClass() != null && classType.getEnclosingClass().isEnum())) {
      bindingConfiguration=new BindingConfiguration(name,new EnvEntryInjectionSource(Enum.valueOf((Class)classType,value)));
    }
 else {
      throw new DeploymentUnitProcessingException("Unkown env-entry type " + type);
    }
    bindings.add(bindingConfiguration);
  }
  return bindings;
}
