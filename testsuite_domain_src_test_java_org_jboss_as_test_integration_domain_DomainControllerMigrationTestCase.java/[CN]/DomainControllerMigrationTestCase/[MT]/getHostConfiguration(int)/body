{
  final String testName=DomainControllerMigrationTestCase.class.getSimpleName();
  File domains=new File("target" + File.separator + "domains"+ File.separator+ testName);
  final File hostDir=new File(domains,"failover" + String.valueOf(host));
  final File hostConfigDir=new File(hostDir,"configuration");
  hostConfigDir.mkdirs();
  ClassLoader tccl=Thread.currentThread().getContextClassLoader();
  final JBossAsManagedConfiguration hostConfig=new JBossAsManagedConfiguration();
  hostConfig.setHostControllerManagementAddress(host == 1 ? masterAddress : slaveAddress);
  hostConfig.setHostCommandLineProperties("-Djboss.test.host.master.address=" + masterAddress + " -Djboss.test.host.slave.address="+ slaveAddress);
  URL url=tccl.getResource("domain-configs/domain-standard.xml");
  hostConfig.setDomainConfigFile(new File(url.toURI()).getAbsolutePath());
  System.out.println(hostConfig.getDomainConfigFile());
  url=tccl.getResource("host-configs/host-failover" + String.valueOf(host) + ".xml");
  hostConfig.setHostConfigFile(new File(url.toURI()).getAbsolutePath());
  System.out.println(hostConfig.getHostConfigFile());
  hostConfig.setDomainDirectory(hostDir.getAbsolutePath());
  hostConfig.setHostName("failover-h" + String.valueOf(host));
  hostConfig.setHostControllerManagementPort(MGMT_PORTS[host - 1]);
  hostConfig.setStartupTimeoutInSeconds(120);
  File usersFile=new File(hostConfigDir,"mgmt-users.properties");
  FileOutputStream fos=new FileOutputStream(usersFile);
  PrintWriter pw=new PrintWriter(fos);
  pw.println("slave=" + new UsernamePasswordHashUtil().generateHashedHexURP("slave","ManagementRealm","slave_user_password".toCharArray()));
  pw.close();
  fos.close();
  return hostConfig;
}
