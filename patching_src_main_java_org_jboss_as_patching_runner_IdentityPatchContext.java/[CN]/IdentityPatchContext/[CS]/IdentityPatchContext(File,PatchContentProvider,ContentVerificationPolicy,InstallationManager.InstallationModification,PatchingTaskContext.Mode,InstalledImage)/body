{
  this.miscTargetRoot=installedImage.getJbossHome();
  this.mode=mode;
  this.contentProvider=contentProvider;
  this.contentPolicy=contentPolicy;
  this.modification=modification;
  this.installedImage=installedImage;
  this.history=PatchingHistory.Factory.getHistory(modification.getUnmodifiedInstallationState());
  if (backup != null) {
    this.miscBackup=new File(backup,PatchContentLoader.MISC);
    this.configBackup=new File(backup,Constants.CONFIGURATION);
  }
 else {
    this.miscBackup=null;
    this.configBackup=null;
  }
  this.identityEntry=new IdentityEntry(modification,null);
}
