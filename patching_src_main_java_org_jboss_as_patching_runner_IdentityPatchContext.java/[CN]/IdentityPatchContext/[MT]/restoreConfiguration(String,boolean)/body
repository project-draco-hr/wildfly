{
  File backupConfigurationDir=new File(installedImage.getPatchHistoryDir(rollingBackPatchID),Constants.CONFIGURATION);
  final File ba=new File(backupConfigurationDir,Constants.APP_CLIENT);
  final File bd=new File(backupConfigurationDir,Constants.DOMAIN);
  final File bs=new File(backupConfigurationDir,Constants.STANDALONE);
  final String configuration;
  if (resetConfiguration) {
    configuration=Constants.CONFIGURATION;
  }
 else {
    configuration=Constants.CONFIGURATION + File.separator + Constants.RESTORED_CONFIGURATION;
  }
  if (ba.exists()) {
    final File a=new File(installedImage.getAppClientDir(),configuration);
    backupDirectory(ba,a);
  }
  if (bd.exists()) {
    final File d=new File(installedImage.getDomainDir(),configuration);
    backupDirectory(bd,d);
  }
  if (bs.exists()) {
    final File s=new File(installedImage.getStandaloneDir(),configuration);
    backupDirectory(bs,s);
  }
}
