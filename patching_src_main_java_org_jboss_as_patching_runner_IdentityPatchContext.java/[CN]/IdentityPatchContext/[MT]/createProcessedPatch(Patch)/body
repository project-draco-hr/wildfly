{
  final List<PatchElement> elements=new ArrayList<PatchElement>();
  for (  final PatchEntry entry : getLayers()) {
    final PatchElement element=createPatchElement(entry,entry.element.getId(),entry.modifications);
    elements.add(element);
  }
  for (  final PatchEntry entry : getAddOns()) {
    final PatchElement element=createPatchElement(entry,entry.element.getId(),entry.modifications);
    elements.add(element);
  }
  return new PatchImpl(original.getPatchId(),original.getDescription(),original.getPatchType(),original.getIdentity(),original.getResultingVersion(),original.getAppliesTo(),original.getIncompatibleWith(),elements,original.getModifications());
}
