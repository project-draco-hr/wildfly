{
  this.nameValidator.validate(operation);
  final String attributeName=operation.require(NAME).asString();
  ModelNode newValue=operation.hasDefined(VALUE) ? operation.get(VALUE) : new ModelNode();
  final ModelNode submodel=context.readResourceForUpdate(PathAddress.EMPTY_ADDRESS).getModel();
  final AttributeDefinition attributeDefinition=this.attributeDefinitions.get(attributeName);
  if (attributeDefinition != null) {
    final ModelNode syntheticOp=new ModelNode();
    syntheticOp.get(attributeName).set(newValue);
    attributeDefinition.validateAndSet(syntheticOp,submodel);
  }
 else {
    submodel.get(attributeName).set(newValue);
  }
  if (requiresRuntime(context)) {
    context.addStep(new OperationStepHandler(){
      @Override public void execute(      OperationContext context,      ModelNode operation){
        context.reloadRequired();
        context.completeStep(OperationContext.RollbackHandler.REVERT_RELOAD_REQUIRED_ROLLBACK_HANDLER);
      }
    }
,OperationContext.Stage.RUNTIME);
  }
  context.stepCompleted();
}
