{
  List<RunningProcess> original=waitForAllProcessesFullyStarted();
  executeReloadOperation(false,true);
  long timeout=System.currentTimeMillis() + TIMEOUT;
  long minCheckPeriod=System.currentTimeMillis() + 5000;
  while (true) {
    Thread.sleep(500);
    if (lookupServerInModel(MASTER,SERVER_ONE) || lookupServerInModel(MASTER,SERVER_TWO)) {
      if (System.currentTimeMillis() >= timeout) {
        Assert.fail("Should not have servers in restarted admin-only HC model");
      }
    }
 else     if (System.currentTimeMillis() >= minCheckPeriod) {
      break;
    }
  }
  executeReloadOperation(false,false);
  readHostControllerServers();
  List<RunningProcess> reloaded=waitForAllProcesses();
  Assert.assertEquals(original.size(),reloaded.size());
  for (  RunningProcess reloadedProc : reloaded) {
    RunningProcess orig=findProcess(original,reloadedProc.getProcess());
    Assert.assertTrue(reloadedProc.getProcessId().equals(orig.getProcessId()));
  }
}
