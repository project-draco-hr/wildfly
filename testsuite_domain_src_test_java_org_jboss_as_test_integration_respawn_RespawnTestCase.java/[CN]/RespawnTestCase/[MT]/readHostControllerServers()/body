{
  final ModelNode operation=new ModelNode();
  operation.get(OP).set(READ_RESOURCE_OPERATION);
  operation.get(OP_ADDR).set(PathAddress.pathAddress(PathElement.pathElement(HOST,"master")).toModelNode());
  operation.get(RECURSIVE).set(true);
  final long time=System.currentTimeMillis() + TIMEOUT;
  boolean hasOne=false;
  boolean hasTwo=false;
  do {
    hasOne=lookupServerInModel(MASTER,SERVER_ONE);
    hasTwo=lookupServerInModel(MASTER,SERVER_TWO);
    if (hasOne && hasTwo) {
      break;
    }
    Thread.sleep(200);
  }
 while (System.currentTimeMillis() < time);
  Assert.assertTrue(hasOne);
  Assert.assertTrue(hasTwo);
}
