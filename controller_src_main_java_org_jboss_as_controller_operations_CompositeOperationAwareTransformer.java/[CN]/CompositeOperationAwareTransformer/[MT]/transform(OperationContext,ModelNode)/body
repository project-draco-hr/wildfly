{
  if (operation.get(OP).asString().equals(COMPOSITE)) {
    ModelNode ret=operation.clone();
    final List<ModelNode> list=new ArrayList<ModelNode>();
    ListIterator<ModelNode> it=ret.get(STEPS).asList().listIterator();
    while (it.hasNext()) {
      final ModelNode subOperation=it.next();
      list.add(transform(context,subOperation));
    }
    ret.get(STEPS).set(list);
    return ret;
  }
 else {
    if (matches(operation,newOperation)) {
      return newOperation;
    }
 else {
      return operation;
    }
  }
}
