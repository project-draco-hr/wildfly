{
  HttpOpenListener openListener=new HttpOpenListener(new ByteBufferSlicePool(BufferAllocator.DIRECT_BYTE_BUFFER_ALLOCATOR,4096,10 * 4096),4096);
  int secureRedirectPort=secureBindAddress != null ? secureBindAddress.getPort() : -1;
  boolean redirectSupported=(bindAddress == null || secureBindAddress == null || bindAddress.getAddress().equals(secureBindAddress.getAddress()));
  if (!redirectSupported && secureRedirectPort > 0) {
    HttpServerLogger.ROOT_LOGGER.httpsRedirectNotSupported(bindAddress.getAddress(),secureBindAddress.getAddress());
    secureRedirectPort=-1;
  }
  setupOpenListener(openListener,modelController,consoleMode,consoleSlot,controlledProcessStateService,secureRedirectPort,securityRealm,upgradeHandler);
  return new ManagementHttpServer(openListener,bindAddress,secureBindAddress,securityRealm);
}
