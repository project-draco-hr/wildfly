{
  final KernelServices kernelServices=boot();
  final ModelNode address=SUBSYSTEM_ADDRESS.toModelNode();
  final ModelNode op=SubsystemOperations.createOperation("list-log-files",address);
  ModelNode result=executeOperation(kernelServices,op);
  List<ModelNode> logFiles=SubsystemOperations.readResult(result).asList();
  boolean found=false;
  boolean foundProfile=false;
  for (  ModelNode fileInfo : logFiles) {
    final String fileName=fileInfo.get("file-name").asString();
    if ("simple.log".equals(fileName)) {
      found=true;
    }
    if ("profile-simple.log".equals(fileName)) {
      foundProfile=true;
    }
    if ("ignore.log".equals(fileName)) {
      fail("Found ignore.log, but the file should not be listed.");
    }
    if ("profile-ignore.log".equals(fileName)) {
      fail("Found profile-ignore.log, but the file should not be listed.");
    }
  }
  assertTrue("simple.log file was not found",found);
  assertTrue("profile-simple.log file was not found",foundProfile);
  final File file=new File(LoggingTestEnvironment.get().getLogDir(),"simple.log");
  assertTrue("File does not exist",file.exists());
  if (file.setReadable(false)) {
    result=executeOperation(kernelServices,op);
    logFiles=SubsystemOperations.readResult(result).asList();
    assertEquals("Read permission was found to be true on the file.",1,logFiles.size());
    assertTrue("Could not reset file permissions",file.setReadable(true));
  }
}
