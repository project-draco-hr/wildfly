{
  final KernelServices kernelServices=boot();
  final ModelNode address=SUBSYSTEM_ADDRESS.toModelNode();
  final ModelNode op=SubsystemOperations.createOperation("list-log-files",address);
  ModelNode result=executeOperation(kernelServices,op);
  List<ModelNode> logFiles=SubsystemOperations.readResult(result).asList();
  boolean found=false;
  for (  ModelNode fileInfo : logFiles) {
    if ("simple.log".equals(fileInfo.get("file-name").asString())) {
      found=true;
      break;
    }
  }
  assertTrue("simple.log file was not found",found);
  final File file=new File(LoggingTestEnvironment.get().getLogDir(),"simple.log");
  assertTrue("File does not exist",file.exists());
  if (file.setReadable(false)) {
    result=executeOperation(kernelServices,op);
    logFiles=SubsystemOperations.readResult(result).asList();
    assertTrue("Read permission was found to be true on the file.",logFiles.isEmpty());
    assertTrue("Could not reset file permissions",file.setReadable(true));
  }
}
