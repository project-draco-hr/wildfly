{
  ProtocolChannelClient client;
  try {
    final InetSocketAddress socketAddress=hcAddressInjector.getValue();
    final String hostName=InetAddress.getByName(socketAddress.getHostName()).getHostName();
    final ProtocolChannelClient.Configuration configuration=new ProtocolChannelClient.Configuration();
    configuration.setEndpoint(endpointInjector.getValue());
    configuration.setConnectionTimeout(15000);
    configuration.setUri(new URI("remote://" + hostName + ":"+ socketAddress.getPort()));
    OptionMap original=configuration.getOptionMap();
    Builder builder=OptionMap.builder();
    builder.addAll(original);
    builder.set(Options.SASL_DISALLOWED_MECHANISMS,Sequence.of(JBOSS_LOCAL_USER));
    configuration.setOptionMap(builder.getMap());
    client=ProtocolChannelClient.create(configuration);
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
  try {
    connection=client.connectSync(new ClientCallbackHandler());
    channel=connection.openChannel(ManagementRemotingServices.SERVER_CHANNEL,OptionMap.EMPTY).get();
  }
 catch (  IOException e) {
    throw ServerMessages.MESSAGES.failedToConnectToHC(e);
  }
}
