{
  AccessController.doPrivileged(new PrivilegedAction<Integer>(){
    public Integer run(){
      return Security.insertProviderAt(saslProvider,1);
    }
  }
);
  ProtocolChannelClient<ManagementChannel> client;
  try {
    ProtocolChannelClient.Configuration<ManagementChannel> configuration=new ProtocolChannelClient.Configuration<ManagementChannel>();
    configuration.setEndpoint(endpointInjector.getValue());
    configuration.setUri(new URI("remote://" + hcAddressInjector.getValue().getHostName() + ":"+ hcAddressInjector.getValue().getPort()));
    configuration.setChannelFactory(new ManagementChannelFactory());
    client=ProtocolChannelClient.create(configuration);
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
  try {
    client.connect(new ClientCallbackHandler());
    channel=client.openChannel(RemotingServices.SERVER_CHANNEL);
    channel.startReceiving();
  }
 catch (  IOException e) {
    throw new StartException("Failed to start remote Host Controller connection",e);
  }
}
