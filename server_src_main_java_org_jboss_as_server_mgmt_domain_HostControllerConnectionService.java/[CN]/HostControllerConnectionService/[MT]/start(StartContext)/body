{
  ProtocolChannelClient client;
  try {
    ProtocolChannelClient.Configuration configuration=new ProtocolChannelClient.Configuration();
    configuration.setEndpoint(endpointInjector.getValue());
    configuration.setUri(new URI("remote://" + hcAddressInjector.getValue().getHostName() + ":"+ hcAddressInjector.getValue().getPort()));
    client=ProtocolChannelClient.create(configuration);
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
  try {
    connection=client.connect(new ClientCallbackHandler()).get();
    channel=connection.openChannel(ManagementRemotingServices.SERVER_CHANNEL,OptionMap.EMPTY).get();
  }
 catch (  IOException e) {
    throw new StartException("Failed to start remote Host Controller connection",e);
  }
}
