{
  krbServer1.stop();
  ldapServer1.stop();
  directoryService1.shutdown();
  KRB5_CONF_FILE.delete();
  FileUtils.deleteDirectory(directoryService1.getInstanceLayout().getInstanceDirectory());
  Utils.setSystemProperty("java.security.krb5.conf",origKrb5Conf);
  Utils.setSystemProperty("sun.security.krb5.debug",origKrbDebug);
  if (removeBouncyCastle) {
    try {
      Security.removeProvider(BouncyCastleProvider.PROVIDER_NAME);
    }
 catch (    SecurityException ex) {
      LOGGER.warn("Cannot deregister BouncyCastleProvider",ex);
    }
  }
}
