{
  final List<InputStream> streams=operation.getInputStreams();
  if (streams.isEmpty()) {
    return Collections.emptyList();
  }
  final List<InputStreamEntry> entries=new ArrayList<InputStreamEntry>();
  final boolean autoClose=operation.isAutoCloseStreams();
  for (  final InputStream stream : streams) {
    if (stream instanceof InputStreamEntry) {
      entries.add((InputStreamEntry)stream);
    }
 else {
      entries.add(new InputStreamEntry.InMemoryEntry(stream,autoClose));
    }
  }
  return entries;
}
