{
  final ContentRepository contentRepository=null;
  final DeploymentAddHandler handler=new DeploymentAddHandler(contentRepository);
  final NewOperationContext context=Mockito.mock(NewOperationContext.class);
  Mockito.when(context.getResult()).thenReturn(new ModelNode());
  Mockito.when(context.readModelForUpdate(PathAddress.EMPTY_ADDRESS)).thenReturn(new ModelNode());
  Mockito.when(context.getType()).thenReturn(NewOperationContext.Type.SERVER);
  final ModelNode operation=new ModelNode();
  operation.get("address").get(0).setExpression("deployment","test.war");
  operation.get("content").get(0).get("archive").set(true);
  operation.get("content").get(0).get("path").set("test.war");
  handler.execute(context,operation);
  Mockito.verify(context).addStep(Mockito.any(NewStepHandler.class),NewOperationContext.Stage.RUNTIME);
  Mockito.verify(context).completeStep();
}
