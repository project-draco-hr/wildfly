{
  DomainXml domainXml=new DomainXml(Module.getBootModuleLoader(),executorService,extensionRegistry);
  File file=new File(configDir,CACHED_DOMAIN_XML);
  ExtensibleConfigurationPersister persister=new BackupRemoteDomainXmlPersister(file,new QName(Namespace.CURRENT.getUriString(),"domain"),domainXml,domainXml);
  extensionRegistry.setWriterRegistry(persister);
  return persister;
}
