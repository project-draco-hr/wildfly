{
  try {
    CurrentSynchronizationCallback.set(CurrentSynchronizationCallback.CallbackType.BEFORE_COMPLETION);
synchronized (threadLock) {
      try {
        if (!componentInstance.isRemoved() && !componentInstance.isDiscarded() && componentInstance.getPrimaryKey() != null) {
          componentInstance.store();
        }
      }
 catch (      Throwable t) {
        lock.pushOwner(lockOwner);
        try {
          handleThrowableInTxSync(componentInstance,t);
        }
  finally {
          lock.popOwner();
        }
      }
    }
  }
  finally {
    CurrentSynchronizationCallback.clear();
  }
}
