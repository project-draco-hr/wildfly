{
  Service<Cache<Object,Object>> service=new CacheService<>(cacheName,cacheDependencies);
  ServiceBuilder<?> builder=AsynchronousService.addService(target,CacheService.getServiceName(containerName,cacheName),service).addDependency(GlobalComponentRegistryService.getServiceName(containerName)).addDependency(CacheConfigurationService.getServiceName(containerName,cacheName)).addDependency(EmbeddedCacheManagerService.getServiceName(containerName),EmbeddedCacheManager.class,cacheDependencies.getCacheContainerInjector()).setInitialMode(initialMode);
  if (defaultCache) {
    builder.addAliases(CacheService.getServiceName(containerName,null));
  }
  if (initialMode == ServiceController.Mode.ACTIVE) {
    builder.addListener(verificationHandler);
  }
  return builder.install();
}
