{
  final ManagementChannelHandler handler=new ManagementChannelHandler(ManagementClientChannelStrategy.create(channel),getExecutor());
  UserInfo userInfo=channel.getConnection().getUserInfo();
  if (userInfo instanceof SubjectUserInfo) {
    handler.addHandlerFactory(new ModelControllerClientOperationHandler(getController(),handler,((SubjectUserInfo)userInfo).getSubject()));
  }
 else {
    handler.addHandlerFactory(new ModelControllerClientOperationHandler(getController(),handler));
  }
  channel.receiveMessage(handler.getReceiver());
  return handler;
}
