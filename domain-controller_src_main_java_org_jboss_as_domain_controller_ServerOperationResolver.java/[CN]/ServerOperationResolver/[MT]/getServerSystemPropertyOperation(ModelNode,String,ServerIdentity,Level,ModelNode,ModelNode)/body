{
  ModelNode result=null;
  String opName=operation.get(OP).asString();
  if (ADD.equals(opName) || REMOVE.equals(opName)) {
    ModelNode value=null;
switch (level) {
case SERVER:
{
        value=getSystemPropertyValue(host,propName);
        if (value == null) {
          value=getSystemPropertyValue(domain.get(SERVER_GROUP,server.getServerGroupName()),propName);
        }
        if (value == null) {
          value=getSystemPropertyValue(domain,propName);
        }
        break;
      }
case HOST:
{
      value=getSystemPropertyValue(domain.get(SERVER_GROUP,server.getServerGroupName()),propName);
      if (value == null) {
        value=getSystemPropertyValue(domain,propName);
      }
      break;
    }
case SERVER_GROUP:
{
    value=getSystemPropertyValue(domain,propName);
    break;
  }
default :
{
  break;
}
}
if (value != null) {
if (ADD.equals(opName)) {
value=operation.has(VALUE) ? operation.get(VALUE) : new ModelNode();
}
ModelNode addr=new ModelNode();
addr.add(SYSTEM_PROPERTY,propName);
result=Util.getEmptyOperation(WRITE_ATTRIBUTE_OPERATION,addr);
result.get(NAME).set(VALUE);
if (value.isDefined()) {
result.get(VALUE).set(value);
}
}
}
if (result == null) {
result=operation.clone();
ModelNode addr=new ModelNode();
addr.add(SYSTEM_PROPERTY,propName);
result.get(OP_ADDR).set(addr);
}
return result;
}
