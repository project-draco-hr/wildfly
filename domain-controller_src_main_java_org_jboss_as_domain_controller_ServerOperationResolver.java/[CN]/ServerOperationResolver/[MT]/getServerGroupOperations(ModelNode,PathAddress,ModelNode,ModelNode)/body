{
  Map<Set<ServerIdentity>,ModelNode> result=null;
  if (address.size() > 1) {
    String type=address.getElement(1).getKey();
    if (JVM.equals(type)) {
      result=Collections.emptyMap();
    }
 else     if (DEPLOYMENT.equals(type)) {
      String groupName=address.getElement(0).getValue();
      Set<ServerIdentity> servers=getServersForGroup(groupName,host);
      ModelNode serverOp=operation.clone();
      PathAddress serverAddress=address.subAddress(1);
      serverOp.get(OP_ADDR).set(serverAddress.toModelNode());
      result=Collections.singletonMap(servers,serverOp);
    }
  }
  if (result == null) {
    String opName=operation.require(OP).asString();
    if (SystemPropertyAddHandler.OPERATION_NAME.equals(opName) || SystemPropertyRemoveHandler.OPERATION_NAME.equals(opName)) {
      String propName=operation.require(NAME).asString();
      Set<ServerIdentity> servers=null;
      if (!hasSystemProperty(host,propName)) {
        if (host.hasDefined(SERVER_CONFIG)) {
          servers=new HashSet<ServerIdentity>();
          String groupName=address.getElement(0).getValue();
          for (          Property serverProp : host.get(SERVER_CONFIG).asPropertyList()) {
            ModelNode server=serverProp.getValue();
            if (groupName.equals(server.require(GROUP).asString()) && !hasSystemProperty(server,propName) && (!server.hasDefined(START) || server.get(START).asBoolean())) {
              servers.add(new ServerIdentity(localHostName,groupName,serverProp.getName()));
            }
          }
        }
      }
      if (servers != null && servers.size() > 0) {
        ModelNode serverOp=operation.clone();
        serverOp.get(OP_ADDR).setEmptyList();
        result=Collections.singletonMap(servers,serverOp);
      }
    }
  }
  if (result == null) {
    result=Collections.emptyMap();
  }
  return result;
}
