{
  Session session=sessionFactory.openSession();
  Planet planet=new Planet();
  planet.setPlanetId(id);
  planet.setPlanetName(planetName);
  planet.setGalaxy(galaxyName);
  planet.setStar(starName);
  Transaction trans=session.beginTransaction();
  try {
    session.save(planet);
    if (satellites != null && satellites.size() > 0) {
      Iterator<Satellite> itrSat=satellites.iterator();
      while (itrSat.hasNext()) {
        Satellite sat=itrSat.next();
        session.save(sat);
      }
      planet.setSatellites(new HashSet<Satellite>());
      planet.getSatellites().addAll(satellites);
    }
    session.saveOrUpdate(planet);
  }
 catch (  Exception e) {
    e.printStackTrace();
    throw new RuntimeException("transactional failure while persisting planet entity",e);
  }
  trans.commit();
  return planet;
}
