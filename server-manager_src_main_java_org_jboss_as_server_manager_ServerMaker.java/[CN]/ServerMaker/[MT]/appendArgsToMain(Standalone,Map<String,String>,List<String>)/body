{
  if (environment.getProcessManagerAddress() != null) {
    command.add("-interprocess-address");
    command.add(environment.getProcessManagerAddress().getHostAddress());
    command.add("-interprocess-port");
    command.add(environment.getProcessManagerPort().toString());
  }
  Map<String,String> sysProps=null;
  PropertiesElement propsEl=serverConfig.getSystemProperties();
  if (propsEl == null) {
    sysProps=Collections.emptyMap();
  }
 else {
    sysProps=propsEl.getProperties();
  }
  StringBuilder sb=new StringBuilder("-D");
  sb.append(ServerManagerEnvironment.HOME_DIR);
  sb.append('=');
  sb.append(getPropertyValue(ServerManagerEnvironment.HOME_DIR,jvmProps,sysProps,environment.getHomeDir().getAbsolutePath()));
  String key="jboss.server.base.dir";
  sb=new StringBuilder("-D");
  sb.append(key);
  sb.append('=');
  File serverBaseDir=new File(environment.getDomainServersDir(),serverConfig.getServerName());
  sb.append(getPropertyValue(key,jvmProps,sysProps,serverBaseDir.getAbsolutePath()));
  String[] keys={"jboss.server.config.dir","jboss.server.config.dir","jboss.server.data.dir","jboss.server.log.dir","jboss.server.temp.dir"};
  for (  String propkey : keys)   if (sysProps.containsKey(propkey)) {
    sb=new StringBuilder("-D");
    sb.append(propkey);
    sb.append('=');
    sb.append(sysProps.get(propkey));
  }
}
