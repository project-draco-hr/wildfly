{
  String heap=jvm.getHeapSize();
  String max=jvm.getMaxHeap();
  if (max == null && heap != null) {
    max=heap;
  }
  if (heap == null && max != null) {
    heap=max;
  }
  if (heap != null) {
    command.add("-Xms" + heap);
  }
  if (max != null) {
    command.add("-Xmx" + max);
  }
  PropertiesElement propsEl=jvm.getSystemProperties();
  Map<String,String> sysProps=propsEl == null ? new HashMap<String,String>() : propsEl.getProperties();
  addStandardProperties(sysProps);
  for (  Map.Entry<String,String> prop : sysProps.entrySet()) {
    StringBuilder sb=new StringBuilder("-D");
    sb.append(prop.getKey());
    sb.append('=');
    sb.append(prop.getValue() == null ? "true" : prop.getValue());
    command.add(sb.toString());
  }
  return sysProps;
}
