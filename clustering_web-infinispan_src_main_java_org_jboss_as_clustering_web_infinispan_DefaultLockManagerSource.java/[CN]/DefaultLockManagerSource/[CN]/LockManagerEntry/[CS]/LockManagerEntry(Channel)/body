{
  this.service=new CoreGroupCommunicationService();
  this.service.setChannel(channel);
  this.service.setScopeId(SCOPE_ID);
  try {
    this.service.start();
  }
 catch (  Exception e) {
    throw new IllegalStateException(String.format("Unexpected exception while starting group communication service for %s",channel.getClusterName()));
  }
  this.lockManager=new SharedLocalYieldingClusterLockManager(SERVICE_NAME,this.service,this.service);
  try {
    this.lockManager.start();
  }
 catch (  Exception e) {
    this.service.stop();
    throw new IllegalStateException(String.format("Unexpected exception while starting lock manager for %s",channel.getClusterName()));
  }
}
