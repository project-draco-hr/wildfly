{
  if (useServerLog) {
    logReceiver=new JBossLoggingAccessLogReceiver();
  }
 else {
    if (pathRelativeTo != null) {
      callbackHandle=pathManager.getValue().registerCallback(pathRelativeTo,PathManager.ReloadServerCallback.create(),PathManager.Event.UPDATED,PathManager.Event.REMOVED);
    }
    directory=new File(pathManager.getValue().resolveRelativePathEntry(path,pathRelativeTo));
    if (!directory.exists()) {
      if (!directory.mkdirs()) {
        throw UndertowLogger.ROOT_LOGGER.couldNotCreateLogDirectory(directory);
      }
    }
    try {
      logReceiver=new DefaultAccessLogReceiver(worker.getValue(),directory,filePrefix,fileSuffix);
    }
 catch (    IllegalStateException e) {
      throw new StartException(e);
    }
  }
}
