{
  final ParsedCommandLine parsedCmd=ctx.getParsedCommandLine();
  if (!name.isPresent(parsedCmd)) {
    throw new CommandFormatException("Required argument " + name.getFullName() + " is missing.");
  }
  final String deploymentName=name.getValue(parsedCmd);
  final ModelNode request=new ModelNode();
  if (ctx.isDomainMode()) {
    request.get(Util.OPERATION).set(Util.COMPOSITE);
    request.get(Util.ADDRESS).setEmptyList();
    final ModelNode steps=request.get(Util.STEPS);
    ModelNode step=new ModelNode();
    ModelNode address=step.get(Util.ADDRESS);
    address.add(Util.DEPLOYMENT,deploymentName);
    step.get(Util.OPERATION).set(Util.READ_RESOURCE);
    steps.add(step);
    serverGroups=Util.getServerGroups(ctx.getModelControllerClient());
    for (    String serverGroup : serverGroups) {
      step=new ModelNode();
      step.get(Util.ADDRESS).setEmptyList();
      step.get(Util.OPERATION).set(Util.VALIDATE_ADDRESS);
      final ModelNode value=step.get(Util.VALUE);
      value.add(Util.SERVER_GROUP,serverGroup);
      value.add(Util.DEPLOYMENT,deploymentName);
      steps.add(step);
    }
  }
 else {
    final ModelNode address=request.get(Util.ADDRESS);
    address.add(Util.DEPLOYMENT,deploymentName);
    request.get(Util.OPERATION).set(Util.READ_RESOURCE);
    request.get(Util.INCLUDE_RUNTIME).set(true);
  }
  return request;
}
