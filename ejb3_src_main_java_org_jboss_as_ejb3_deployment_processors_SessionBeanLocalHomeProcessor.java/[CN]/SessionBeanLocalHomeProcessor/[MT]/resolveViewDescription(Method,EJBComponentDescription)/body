{
  if (componentDescription.getEjbLocalView() != null) {
    return componentDescription.getEjbLocalView();
  }
  final Set<ViewDescription> local=new HashSet<ViewDescription>();
  for (  final ViewDescription view : componentDescription.getViews()) {
    if (view instanceof EJBViewDescription) {
      final EJBViewDescription ejbView=(EJBViewDescription)view;
      if (ejbView.getMethodIntf() == MethodIntf.LOCAL) {
        if (ejbView.getViewClassName().equals(method.getReturnType().getName())) {
          return ejbView;
        }
        local.add(view);
      }
    }
  }
  if (local.size() == 1) {
    return local.iterator().next();
  }
  throw new DeploymentUnitProcessingException("Could not determine correct local view to create for EJB Home 'create' method " + method);
}
