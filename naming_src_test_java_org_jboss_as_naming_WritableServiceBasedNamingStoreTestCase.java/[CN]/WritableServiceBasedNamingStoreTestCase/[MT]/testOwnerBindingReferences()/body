{
  final Name name=new CompositeName("test");
  final ServiceName serviceName=store.buildServiceName(name);
  final Object value=new Object();
  try {
    store.lookup(name);
    fail("Should have thrown name not found");
  }
 catch (  NameNotFoundException expect) {
  }
  final Set<ServiceName> duBindingReferences=(Set<ServiceName>)container.getService(JndiNamingDependencyProcessor.serviceName(OWNER_FOO)).getValue();
  assertFalse(duBindingReferences.contains(serviceName));
  WritableServiceBasedNamingStore.pushOwner(OWNER_FOO);
  try {
    store.bind(name,value);
    assertTrue(duBindingReferences.contains(serviceName));
    store.rebind(name,value);
    assertTrue(duBindingReferences.contains(serviceName));
    store.unbind(name);
    assertFalse(duBindingReferences.contains(serviceName));
  }
  finally {
    WritableServiceBasedNamingStore.popOwner();
  }
}
