{
  DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  EjbJarMetaData ejbJarMetaData=deploymentUnit.getAttachment(EjbDeploymentAttachmentKeys.EJB_JAR_METADATA);
  if (ejbJarMetaData == null) {
    return;
  }
  AssemblyDescriptorMetaData assemblyDescriptor=ejbJarMetaData.getAssemblyDescriptor();
  if (assemblyDescriptor != null) {
    final EjbJarDescription ejbJarDescription=deploymentUnit.getAttachment(EjbDeploymentAttachmentKeys.EJB_JAR_DESCRIPTION);
    ApplicationExceptionsMetaData applicationExceptions=assemblyDescriptor.getApplicationExceptions();
    if (applicationExceptions != null && !applicationExceptions.isEmpty()) {
      for (      ApplicationExceptionMetaData applicationException : applicationExceptions) {
        String exceptionClassName=applicationException.getExceptionClass();
        boolean rollback=applicationException.isRollback();
        boolean inherited=applicationException.isInherited() == null ? true : applicationException.isInherited();
        ejbJarDescription.addApplicationException(exceptionClassName,rollback,inherited);
      }
    }
  }
}
