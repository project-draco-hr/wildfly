{
  if (value != null) {
    DEPLOYMENT_CONNECTOR_LOGGER.debugf("Undeploying: %s",value.getDeployment() != null ? value.getDeployment().getDeploymentName() : "");
    if (registry != null && registry.getValue() != null) {
      registry.getValue().unregisterResourceAdapterDeployment(value);
    }
    if (mdr != null && mdr.getValue() != null) {
      try {
        mdr.getValue().unregisterResourceAdapter(value.getDeployment().getDeploymentName());
      }
 catch (      Throwable t) {
        DEPLOYMENT_CONNECTOR_LOGGER.debug("Exception during unregistering deployment",t);
      }
    }
    if (mdr != null && mdr.getValue() != null && value.getDeployment() != null && value.getDeployment().getCfs() != null && value.getDeployment().getCfJndiNames() != null) {
      for (int i=0; i < value.getDeployment().getCfs().length; i++) {
        try {
          String cf=value.getDeployment().getCfs()[i].getClass().getName();
          String jndi=value.getDeployment().getCfJndiNames()[i];
          mdr.getValue().unregisterJndiMapping(value.getDeployment().getURL().toExternalForm(),cf,jndi);
        }
 catch (        Throwable nfe) {
          DEPLOYMENT_CONNECTOR_LOGGER.debug("Exception during JNDI unbinding",nfe);
        }
      }
    }
    if (mdr != null && mdr.getValue() != null && value.getDeployment().getAos() != null && value.getDeployment().getAoJndiNames() != null) {
      for (int i=0; i < value.getDeployment().getAos().length; i++) {
        try {
          String ao=value.getDeployment().getAos()[i].getClass().getName();
          String jndi=value.getDeployment().getAoJndiNames()[i];
          mdr.getValue().unregisterJndiMapping(value.getDeployment().getURL().toExternalForm(),ao,jndi);
        }
 catch (        Throwable nfe) {
          DEPLOYMENT_CONNECTOR_LOGGER.debug("Exception during JNDI unbinding",nfe);
        }
      }
    }
    if (value.getDeployment() != null && value.getDeployment().getResourceAdapter() != null) {
      value.getDeployment().getResourceAdapter().stop();
    }
  }
}
