{
  OperationContext context=mock(OperationContext.class);
  Resource resource=mock(Resource.class);
  ModelNode model=new ModelNode();
  when(context.createResource(PathAddress.EMPTY_ADDRESS)).thenReturn(resource);
  when(resource.getModel()).thenReturn(model);
  new JGroupsSubsystemAdd().execute(context,operations.get(0));
  model.get(ModelKeys.STACK).setEmptyList();
  for (  ModelNode operation : operations.subList(1,operations.size())) {
    String name=PathAddress.pathAddress(operation.get(OP_ADDR)).getLastElement().getValue();
    ModelNode stack=new ModelNode();
    when(context.createResource(PathAddress.EMPTY_ADDRESS)).thenReturn(resource);
    when(resource.getModel()).thenReturn(stack);
    new ProtocolStackAdd().execute(context,operation);
    model.get(ModelKeys.STACK).add(name,stack);
  }
  return model;
}
