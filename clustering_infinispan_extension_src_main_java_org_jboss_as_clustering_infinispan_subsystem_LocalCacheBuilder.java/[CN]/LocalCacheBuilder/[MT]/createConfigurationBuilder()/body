{
  ConfigurationBuilder builder=super.createConfigurationBuilder();
  builder.clustering().cacheMode(CacheMode.LOCAL);
  TransactionConfiguration transaction=this.transaction.getValue();
  LockingConfiguration locking=this.locking.getValue();
  PersistenceConfiguration persistence=this.persistence.getValue();
  final boolean simpleCache=!transaction.transactionMode().isTransactional() && !persistence.usingStores();
  builder.simpleCache(simpleCache);
  if (InfinispanLogger.ROOT_LOGGER.isTraceEnabled()) {
    InfinispanLogger.ROOT_LOGGER.tracef("LocalCacheBuilder is creating configuration builder for container '%s', cache '%s', simpleCache '%b'",containerName,cacheName,simpleCache);
  }
  if ((transaction.lockingMode() == LockingMode.OPTIMISTIC) && (locking.isolationLevel() == IsolationLevel.REPEATABLE_READ)) {
    builder.locking().writeSkewCheck(true);
    builder.versioning().enable().scheme(VersioningScheme.SIMPLE);
  }
  return builder;
}
