{
  if (processName == null) {
    throw new IllegalArgumentException("processName is null");
  }
  if (addr == null) {
    throw new IllegalArgumentException("addr is null");
  }
  if (port == null) {
    throw new IllegalArgumentException("port is null");
  }
  if (handler == null) {
    throw new IllegalArgumentException("handler is null");
  }
  try {
    this.socket=new Socket(addr,port);
    this.input=new BufferedInputStream(socket.getInputStream());
    this.output=new BufferedOutputStream(socket.getOutputStream());
    this.handler=handler;
    logger.infof("%s connected to process manager on port %d",processName,socket.getLocalPort());
    StringBuilder sb=new StringBuilder(256);
    sb.append("STARTED");
    sb.append('\0');
    sb.append(processName);
    sb.append('\n');
synchronized (output) {
      StreamUtils.writeString(output,sb.toString());
      output.flush();
    }
  }
 catch (  IOException e) {
    closeSocket();
    throw new RuntimeException(e);
  }
}
