{
  String defaultQueryManager=JAXRConstants.DEFAULT_QUERYMANAGER;
  String defaultLifeCycleManager=JAXRConstants.DEFAULT_LIFECYCLEMANAGER;
  if (jaxrFactory.getClass().getName().equals(JAXRConstants.DEFAULT_JAXR_FACTORY_IMPL)) {
    String version=properties.getProperty(JAXRConstants.UDDI_VERSION_PROPERTY_NAME,JAXRConstants.UDDI_V2_VERSION);
    if (version.equals(JAXRConstants.UDDI_V2_VERSION)) {
      properties.setProperty(JAXRConstants.UDDI_VERSION_PROPERTY_NAME,JAXRConstants.UDDI_V2_VERSION);
      properties.setProperty(JAXRConstants.UDDI_NAMESPACE_PROPERTY_NAME,JAXRConstants.UDDI_V2_NAMESPACE);
      if (!properties.containsKey(JAXRConstants.SCOUT_TRANSPORT)) {
        properties.setProperty(JAXRConstants.SCOUT_TRANSPORT,JAXRConstants.SCOUT_SAAJ_TRANSPORT);
      }
    }
 else {
      properties.setProperty(JAXRConstants.UDDI_VERSION_PROPERTY_NAME,JAXRConstants.UDDI_V3_VERSION);
      properties.setProperty(JAXRConstants.UDDI_NAMESPACE_PROPERTY_NAME,JAXRConstants.UDDI_V3_NAMESPACE);
      defaultQueryManager=JAXRConstants.DEFAULT_V3_QUERYMANAGER;
      defaultLifeCycleManager=JAXRConstants.DEFAULT_V3_LIFECYCLEMANAGER;
      if (!properties.containsKey(JAXRConstants.SECURITYMANAGER)) {
        properties.setProperty(JAXRConstants.SECURITYMANAGER,JAXRConstants.DEFAULT_V3_SECURITYMANAGER);
      }
      if (!properties.containsKey(JAXRConstants.SCOUT_TRANSPORT)) {
        properties.setProperty(JAXRConstants.SCOUT_TRANSPORT,JAXRConstants.SCOUT_JAXWS_TRANSPORT);
      }
      if (!properties.containsKey(JAXRConstants.SCOUT_JUDDI_CLIENT_CONFIG)) {
        properties.setProperty(JAXRConstants.SCOUT_JUDDI_CLIENT_CONFIG,JAXRConstants.DEFAULT_JUDDI_CLIENT_CONFIG);
      }
    }
  }
  if (!properties.containsKey(JAXRConstants.QUERYMANAGER)) {
    properties.setProperty(JAXRConstants.QUERYMANAGER,defaultQueryManager);
  }
  if (!properties.containsKey(JAXRConstants.LIFECYCLEMANAGER)) {
    properties.setProperty(JAXRConstants.LIFECYCLEMANAGER,defaultLifeCycleManager);
  }
  if (log.isDebugEnabled()) {
    log.debug("JAXR is using the " + jaxrFactory.getClass().getName() + " implementation");
    log.debug("By default the following JAXR Properties are set:");
    Enumeration<?> propertyNames=properties.propertyNames();
    while (propertyNames.hasMoreElements()) {
      String key=(String)propertyNames.nextElement();
      log.debug(key + "=" + properties.getProperty(key));
    }
  }
  jaxrFactory.setProperties(properties);
}
