{
  EnterpriseArchive ear=ShrinkWrap.create(EnterpriseArchive.class,"managedbean-example.ear");
  JavaArchive jar=ShrinkWrap.create(JavaArchive.class,"managedbean-example.jar");
  final URL manifestURL=ManagedBeanTestCase.class.getClassLoader().getResource("archives/managedbean-example.jar/META-INF/MANIFEST.MF");
  jar.addAsManifestResource(new UrlAsset(manifestURL),"MANIFEST.MF");
  final URL serviceActivatorURL=ManagedBeanTestCase.class.getClassLoader().getResource("archives/managedbean-example.jar/META-INF/services/org.jboss.msc.service.ServiceActivator");
  jar.addAsManifestResource(new UrlAsset(serviceActivatorURL),"services/org.jboss.msc.service.ServiceActivator");
  jar.addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
  jar.addPackage(SimpleManagedBean.class.getPackage());
  jar.addPackage(ManagedBeanTestCase.class.getPackage());
  jar.addPackage(BeanWithSimpleInjected.class.getPackage());
  jar.addClass(PollingUtils.class);
  ear.add(jar,"/",ZipExporter.class);
  return ear;
}
