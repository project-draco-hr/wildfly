{
  final FileInputStream is=new FileInputStream(file);
  try {
    final String entryName=parent == null ? file.getName() : parent + "/" + file.getName();
    zos.putNextEntry(new ZipEntry(entryName));
    final BufferedInputStream bis=new BufferedInputStream(is);
    try {
      copyStream(bis,zos);
    }
  finally {
      safeClose(bis);
    }
    zos.closeEntry();
  }
  finally {
    safeClose(is);
  }
}
