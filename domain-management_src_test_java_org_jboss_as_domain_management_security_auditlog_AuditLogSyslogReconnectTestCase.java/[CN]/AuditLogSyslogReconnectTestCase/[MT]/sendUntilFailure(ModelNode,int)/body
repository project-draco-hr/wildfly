{
  int expectedFailures=existingFailures + 1;
  for (int i=0; i < 1000; i++) {
    ModelNode result=executeForResult(readResource);
    if (expectedFailures == result.get(ModelDescriptionConstants.SYSLOG_HANDLER,"syslog").get(AuditLogHandlerResourceDefinition.FAILURE_COUNT.getName()).asInt()) {
      System.out.println("Number of messages sent until the TCP buffer was full " + i);
      return result;
    }
  }
  throw new AssertionError("Failure count never got incremented");
}
