{
  connectionOnlyProperties=new Properties();
  connectionOnlyProperties.put(Context.SECURITY_AUTHENTICATION,"simple");
  String initialContextFactory=DEFAULT_INITIAL_CONTEXT;
  if (ldapConnection.has(INITIAL_CONTEXT_FACTORY)) {
    initialContextFactory=ldapConnection.require(INITIAL_CONTEXT_FACTORY).asString();
  }
  connectionOnlyProperties.put(Context.INITIAL_CONTEXT_FACTORY,initialContextFactory);
  String url=ldapConnection.require(URL).asString();
  connectionOnlyProperties.put(Context.PROVIDER_URL,url);
  fullProperties=(Properties)connectionOnlyProperties.clone();
  String searchDN=ldapConnection.require(SEARCH_DN).asString();
  String searchCredential=ldapConnection.require(SEARCH_CREDENTIAL).asString();
  fullProperties.put(Context.SECURITY_PRINCIPAL,searchDN);
  fullProperties.put(Context.SECURITY_CREDENTIALS,searchCredential);
}
