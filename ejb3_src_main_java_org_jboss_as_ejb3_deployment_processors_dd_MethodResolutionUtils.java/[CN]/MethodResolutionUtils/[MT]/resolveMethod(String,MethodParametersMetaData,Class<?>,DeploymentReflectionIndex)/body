{
  Class<?> clazz=componentClass;
  while (clazz != Object.class && clazz != null) {
    final ClassReflectionIndex<?> classIndex=reflectionIndex.getClassIndex(clazz);
    if (parameters == null) {
      final Collection<Method> methods=classIndex.getAllMethods(methodName);
      if (methods.size() > 1) {
        for (        final Method method : methods) {
          if (method.getParameterTypes().length == 0) {
            return method;
          }
        }
        throw new DeploymentUnitProcessingException("More than one method " + methodName + "found on class"+ componentClass.getName()+ " referenced in ejb-jar.xml. Specify the parameter types to resolve the ambiguity");
      }
 else       if (methods.size() == 1) {
        return methods.iterator().next();
      }
    }
 else {
      final Collection<Method> methods=classIndex.getAllMethods(methodName,parameters.size());
      for (      final Method method : methods) {
        boolean match=true;
        for (int i=0; i < method.getParameterTypes().length; ++i) {
          if (!method.getParameterTypes()[i].getName().equals(parameters.get(i))) {
            match=false;
            break;
          }
        }
        if (match) {
          return method;
        }
      }
    }
    clazz=clazz.getSuperclass();
  }
  throw new DeploymentUnitProcessingException("Could not find method" + componentClass.getName() + "."+ methodName+ " referenced in ejb-jar.xml");
}
