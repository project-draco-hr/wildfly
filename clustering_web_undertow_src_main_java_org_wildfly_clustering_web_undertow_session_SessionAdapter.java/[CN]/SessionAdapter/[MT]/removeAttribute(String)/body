{
  if (AUTHENTICATED_SESSION_ATTRIBUTE_NAME.equals(name)) {
    Account account=(Account)this.getSession().getAttributes().removeAttribute(name);
    if (account != null) {
      return new AuthenticatedSession(account,HttpServletRequest.FORM_AUTH);
    }
    LocalSessionContext context=this.getSession().getLocalContext();
    AuthenticatedSession old=context.getAuthenticatedSession();
    context.setAuthenticatedSession(null);
    return old;
  }
  Object old=this.getSession().getAttributes().removeAttribute(name);
  if (old != null) {
    this.manager.getSessionListeners().attributeRemoved(this,name,old);
  }
  return old;
}
