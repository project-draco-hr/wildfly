{
  Session<Void> oldSession=this.getSession();
  SessionManager<Void> manager=this.manager.getSessionManager();
  String id=manager.createSessionId();
  Session<Void> newSession=manager.createSession(id);
  for (  String name : oldSession.getAttributes().getAttributeNames()) {
    newSession.getAttributes().setAttribute(name,oldSession.getAttributes().getAttribute(name));
  }
  newSession.getMetaData().setMaxInactiveInterval(oldSession.getMetaData().getMaxInactiveInterval(TimeUnit.MILLISECONDS),TimeUnit.MILLISECONDS);
  newSession.getMetaData().setLastAccessedTime(oldSession.getMetaData().getLastAccessedTime());
  config.setSessionId(exchange,this.manager.format(id,manager.locate(id)));
  this.entry=new SimpleImmutableEntry<>(newSession,config);
  oldSession.invalidate();
  return id;
}
