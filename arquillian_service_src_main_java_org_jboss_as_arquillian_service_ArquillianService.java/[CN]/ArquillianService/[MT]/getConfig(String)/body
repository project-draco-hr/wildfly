{
  CountDownLatch latch=null;
synchronized (deployedTests) {
    ArquillianConfig config=deployedTests.get(className);
    if (config != null) {
      return config;
    }
    latch=new CountDownLatch(1);
    waitingTests.put(className,latch);
  }
  long end=System.currentTimeMillis() + 3000;
  while (true) {
    try {
      latch.await(end - System.currentTimeMillis(),TimeUnit.MILLISECONDS);
      break;
    }
 catch (    InterruptedException e) {
    }
  }
synchronized (deployedTests) {
    waitingTests.remove(className);
    return deployedTests.get(className);
  }
}
