{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  if (!JaxrsDeploymentMarker.isJaxrsDeployment(deploymentUnit)) {
    return;
  }
  final WarMetaData warMetaData=deploymentUnit.getAttachment(WarMetaData.ATTACHMENT_KEY);
  final Module module=deploymentUnit.getAttachment(Attachments.MODULE);
  final ServiceController<ModuleIndexService> serviceController=(ServiceController<ModuleIndexService>)phaseContext.getServiceRegistry().getRequiredService(Services.JBOSS_MODULE_INDEX_SERVICE);
  try {
    scan(deploymentUnit,warMetaData.getMergedJBossWebMetaData(),module.getClassLoader(),serviceController.getValue());
  }
 catch (  ModuleLoadException e) {
    throw new DeploymentUnitProcessingException(e);
  }
}
