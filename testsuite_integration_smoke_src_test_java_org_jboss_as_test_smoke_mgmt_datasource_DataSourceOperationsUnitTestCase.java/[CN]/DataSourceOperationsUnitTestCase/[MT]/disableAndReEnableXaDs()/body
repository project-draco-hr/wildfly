{
  final String dsName="XaDsNameDisEn";
  final String jndiDsName="XaJndiDsNameDisEn";
  final ModelNode address=new ModelNode();
  address.add("subsystem","datasources");
  address.add("xa-data-source",dsName);
  address.protect();
  final ModelNode operation=new ModelNode();
  operation.get(OP).set("add");
  operation.get(OP_ADDR).set(address);
  operation.get("name").set(dsName);
  operation.get("jndi-name").set("java:jboss/datasources/" + jndiDsName);
  operation.get("enabled").set(false);
  operation.get("driver-name").set("h2");
  operation.get("pool-name").set(dsName + "_Pool");
  operation.get("user-name").set("sa");
  operation.get("password").set("sa");
  final ModelNode enableOperation=new ModelNode();
  enableOperation.get(OP).set("enable");
  enableOperation.get(OP_ADDR).set(address);
  final ModelNode disableOperation=new ModelNode();
  disableOperation.get(OPERATION_HEADERS).get(ALLOW_RESOURCE_SERVICE_RESTART).set(true);
  disableOperation.get(OP).set("disable");
  disableOperation.get(OP_ADDR).set(address);
  executeOperation(operation);
  final ModelNode xaDatasourcePropertiesAddress=address.clone();
  xaDatasourcePropertiesAddress.add("xa-datasource-properties","URL");
  xaDatasourcePropertiesAddress.protect();
  final ModelNode xaDatasourcePropertyOperation=new ModelNode();
  xaDatasourcePropertyOperation.get(OP).set("add");
  xaDatasourcePropertyOperation.get(OP_ADDR).set(xaDatasourcePropertiesAddress);
  xaDatasourcePropertyOperation.get("value").set("jdbc:h2:mem:test");
  executeOperation(xaDatasourcePropertyOperation);
  executeOperation(enableOperation);
  testConnectionXA(dsName);
  executeOperation(disableOperation);
  executeOperation(enableOperation);
  testConnectionXA(dsName);
  remove(address);
}
