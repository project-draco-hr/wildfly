{
  String requestMessage=DOMWriter.printNode(request,true);
  log.debugf("Request message: %s\n%s",endpointURL,requestMessage);
  Element response=null;
  try {
    SOAPMessage message=this.createSOAPMessage(request);
    SOAPConnectionFactory soapConnectionFactory=SOAPConnectionFactory.newInstance();
    SOAPConnection connection=soapConnectionFactory.createConnection();
    SOAPMessage soapResponse=connection.call(message,endpointURL.toURL());
    SOAPBody soapBody=soapResponse.getSOAPBody();
    boolean hasFault=soapBody.hasFault();
    if (hasFault) {
      SOAPFault soapFault=soapBody.getFault();
      String faultStr=soapFault.getFaultCode() + "::" + soapFault.getFaultString();
      throw new RegistryException(faultStr);
    }
    response=getFirstChildElement(soapBody);
  }
 catch (  Exception ex) {
    log.errorf(ex,"Exception::");
    throw new TransportException(ex);
  }
  log.debugf("Response message: %s",DOMWriter.printNode(response,true));
  return response;
}
