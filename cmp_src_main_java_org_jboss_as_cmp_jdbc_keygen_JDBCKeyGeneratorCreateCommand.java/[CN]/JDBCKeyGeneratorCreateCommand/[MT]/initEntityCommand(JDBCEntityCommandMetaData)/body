{
  super.initEntityCommand(entityCommand);
  String factoryName=entityCommand.getAttribute("key-generator-factory");
  if (factoryName == null) {
    throw MESSAGES.entityMustHaveKeyFactory(factoryName);
  }
  try {
    KeyGeneratorFactory keyGeneratorFactory=entity.getManager().getKeyGeneratorFactory(factoryName);
    if (keyGeneratorFactory == null) {
      throw MESSAGES.invalidKeyFactory(factoryName);
    }
    keyGenerator=keyGeneratorFactory.getKeyGenerator();
  }
 catch (  Exception e) {
    throw MESSAGES.errorCreatingKeyFactory(factoryName,e);
  }
}
