{
  writer.writeStartElement(Element.DISCOVERY_OPTIONS.getLocalName());
  for (  Property property : discoveryOptionsOrdering.asPropertyList()) {
    final Element element=Element.forName(property.getName());
    final String optionName=property.getValue().asString();
switch (element) {
case STATIC_DISCOVERY:
{
        final ModelNode staticDiscoveryOption=staticDiscoveryOptions.get(optionName);
        writer.writeStartElement(element.getLocalName());
        writeAttribute(writer,Attribute.NAME,optionName);
        StaticDiscoveryResourceDefinition.HOST.marshallAsAttribute(staticDiscoveryOption,writer);
        StaticDiscoveryResourceDefinition.PORT.marshallAsAttribute(staticDiscoveryOption,writer);
        writer.writeEndElement();
        break;
      }
case DISCOVERY_OPTION:
{
      final ModelNode discoveryOption=discoveryOptions.get(optionName);
      writer.writeStartElement(element.getLocalName());
      writeAttribute(writer,Attribute.NAME,optionName);
      DiscoveryOptionResourceDefinition.CODE.marshallAsAttribute(discoveryOption,writer);
      DiscoveryOptionResourceDefinition.MODULE.marshallAsAttribute(discoveryOption,writer);
      if (discoveryOption.hasDefined(PROPERTIES)) {
        writeDiscoveryOptionProperties(writer,discoveryOption.get(PROPERTIES));
      }
      writer.writeEndElement();
      break;
    }
default :
  throw new RuntimeException(MESSAGES.unknownChildType(element.getLocalName()));
}
}
writer.writeEndElement();
}
