{
  ModelNode deployment=context.readResource(PathAddress.EMPTY_ADDRESS).getModel();
  if (ENABLED.resolveModelAttribute(context,deployment).asBoolean()) {
    String runtimeName=getRuntimeName(deploymentName,deployment);
    Resource root=context.readResourceFromRoot(PathAddress.EMPTY_ADDRESS);
    for (    Resource.ResourceEntry re : root.getChildren(DEPLOYMENT)) {
      String reName=re.getName();
      if (!deploymentName.equals(reName)) {
        ModelNode otherDepl=re.getModel();
        if (ENABLED.resolveModelAttribute(context,otherDepl).asBoolean()) {
          String otherRuntimeName=getRuntimeName(reName,otherDepl);
          if (runtimeName.equals(otherRuntimeName)) {
            throw ServerMessages.MESSAGES.runtimeNameMustBeUnique(reName,runtimeName);
          }
        }
      }
    }
  }
  context.stepCompleted();
}
