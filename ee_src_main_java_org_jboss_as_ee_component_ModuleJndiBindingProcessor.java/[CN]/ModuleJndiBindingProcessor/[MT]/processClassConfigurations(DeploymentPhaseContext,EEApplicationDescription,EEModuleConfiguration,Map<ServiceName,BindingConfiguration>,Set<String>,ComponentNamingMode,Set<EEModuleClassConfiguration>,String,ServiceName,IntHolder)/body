{
  for (  final EEModuleClassConfiguration classConfiguration : classConfigurations) {
    new ClassDescriptionTraversal(classConfiguration,applicationDescription){
      @Override protected void handle(      final EEModuleClassConfiguration configuration,      final EEModuleClassDescription classDescription) throws DeploymentUnitProcessingException {
        if (classDescription.isInvalid()) {
          throw new DeploymentUnitProcessingException("Component class " + classDescription.getClassName() + " for component "+ componentName+ " has errors: \n "+ classDescription.getInvalidMessage());
        }
        if (handledClasses.contains(classDescription.getClassName())) {
          return;
        }
        handledClasses.add(classDescription.getClassName());
        final Set<BindingConfiguration> classLevelBindings=new HashSet(configuration.getBindingConfigurations());
        for (        BindingConfiguration binding : classLevelBindings) {
          final String bindingName=binding.getName();
          final boolean compBinding=bindingName.startsWith("java:comp") || !bindingName.startsWith("java:");
          if (namingMode == ComponentNamingMode.CREATE && compBinding) {
            continue;
          }
          final ServiceName serviceName=ContextNames.serviceNameOfEnvEntry(moduleConfiguration.getApplicationName(),moduleConfiguration.getModuleName(),null,false,binding.getName());
          logger.tracef("Binding %s using service %s",binding.getName(),serviceName);
          if (deploymentDescriptorBindings.containsKey(serviceName)) {
            continue;
          }
          addJndiBinding(moduleConfiguration,binding,phaseContext,serviceName,ownerName,handleCount);
        }
      }
    }
.run();
  }
}
