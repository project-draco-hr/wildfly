{
  final HttpServletRequestImpl request=HttpServletRequestImpl.getRequestImpl(exchange.getAttachment(HttpServletRequestImpl.ATTACHMENT_KEY));
  String requestedId=request.getServletContext().getSessionCookieConfig().findSessionId(exchange);
  HttpServletRequestImpl req=(HttpServletRequestImpl)exchange.getAttachment(HttpServletRequestImpl.ATTACHMENT_KEY);
  HttpSession session=req.getSession(false);
  if (session != null) {
    String sessionId=session.getId();
    String jvmRoute=manager.getJvmRoute();
    if (log.isTraceEnabled()) {
      log.tracef("checkJvmRoute(): check if need to re-route based on JvmRoute. Session id: %s jvmRoute: %s",sessionId,jvmRoute);
    }
    if (jvmRoute != null) {
      boolean setCookie=!req.isRequestedSessionIdFromURL();
      handleJvmRoute(requestedId,sessionId,jvmRoute,exchange,setCookie);
    }
  }
}
