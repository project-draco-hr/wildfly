{
  try {
    server.stopServerProcess();
  }
 catch (  IOException e) {
    log.errorf(e,"Error stopping server %s before respawning",server.getServerProcessName());
  }
  RespawnPolicy respawnPolicy=server.getRespawnPolicy();
  long timeout=respawnPolicy.getTimeOutMs(server.incrementAndGetRespawnCount());
  if (timeout < 0) {
    server.setState(ServerState.MAX_FAILED);
    try {
      server.removeServerProcess();
    }
 catch (    IOException e) {
      log.errorf(e,"Error removing server %s before respawning",server.getServerProcessName());
    }
    return;
  }
  try {
    server.startServerProcess();
  }
 catch (  IOException e) {
    log.errorf(e,"Error respawning server %s",server.getServerProcessName());
  }
}
