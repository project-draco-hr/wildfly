{
  try {
    processManagerSlave.stopProcess(server.getServerProcessName());
  }
 catch (  IOException e) {
    log.errorf(e,"Error respawning server %s",server.getServerProcessName());
  }
  RespawnPolicy respawnPolicy=server.getRespawnPolicy();
  long timeout=respawnPolicy.getTimeOutMs(server.incrementAndGetRespawnCount());
  if (timeout < 0) {
    server.setState(ServerState.MAX_FAILED);
    try {
      processManagerSlave.removeProcess(server.getServerProcessName());
    }
 catch (    IOException e) {
      log.errorf(e,"Error stopping respawned server %s",server.getServerProcessName());
    }
    return;
  }
  try {
    server.setState(ServerState.BOOTING);
    processManagerSlave.startProcess(server.getServerProcessName());
  }
 catch (  IOException e) {
    log.errorf(e,"Error respawning server %s",server.getServerProcessName());
  }
}
