{
  Server server=servers.get(serverName);
  if (server == null) {
    DirectServerCommunicationHandler handler=directServerCommunicationListener.getHandlerWaitingForReconnect(serverName);
    if (handler == null) {
      log.errorf("No server and no connection found for reconnected server %s",serverName);
      return;
    }
    ServerElement svr=null;
    for (    ServerElement serverEl : hostConfig.getServers()) {
      if (getServerProcessName(serverEl.getName()).equals(serverName)) {
        svr=serverEl;
        break;
      }
    }
    if (svr == null) {
      log.errorf("No config found for reconnected server %s");
      return;
    }
    ServerModel serverConf=new ServerModel(domainConfig,hostConfig,svr.getName());
    JvmElement jvmElement=getServerJvmElement(domainConfig,hostConfig,svr.getName());
    CommunicationVariables variables=new CommunicationVariables(environment,directServerCommunicationListener);
    ServerMaker serverMaker=new ServerMaker(environment,processManagerSlave,messageHandler,variables);
    try {
      server=serverMaker.makeServer(serverConf,jvmElement,getRespawnPolicy(serverConf));
    }
 catch (    IOException e) {
      log.errorf(e,"Could not create a Server instance for reconnected server %s",serverName);
      return;
    }
    servers.put(getServerProcessName(serverConf),server);
    server.setCommunicationHandler(handler);
  }
  server.setState(state);
}
