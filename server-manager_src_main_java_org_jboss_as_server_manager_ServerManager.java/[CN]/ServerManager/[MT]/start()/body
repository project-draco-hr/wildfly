{
  this.hostConfig=parseHost();
  launchDirectServerCommunicationHandler();
  launchProcessManagerSlave();
  final BatchBuilder batchBuilder=serviceContainer.batchBuilder();
  batchBuilder.addListener(new AbstractServiceListener<Object>(){
    @Override public void serviceFailed(    ServiceController<?> serviceController,    StartException reason){
      log.errorf(reason,"Service [%s] failed.",serviceController.getName());
    }
  }
);
  final ServiceActivatorContext serviceActivatorContext=new ServiceActivatorContextImpl(batchBuilder);
  activateManagementCommunication(serviceActivatorContext);
  if (hostConfig.getLocalDomainControllerElement() != null) {
    activateLocalDomainController(serviceActivatorContext);
  }
 else {
    activateRemoteDomainControllerConnection(serviceActivatorContext);
  }
  try {
    batchBuilder.install();
  }
 catch (  ServiceRegistryException e) {
    throw new RuntimeException(e);
  }
}
