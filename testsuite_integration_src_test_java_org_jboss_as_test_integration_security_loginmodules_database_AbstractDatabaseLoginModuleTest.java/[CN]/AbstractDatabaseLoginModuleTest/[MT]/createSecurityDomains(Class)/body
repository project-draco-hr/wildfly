{
  final ModelControllerClient client=ModelControllerClient.Factory.create(InetAddress.getByName("localhost"),9999);
  List<ModelNode> updates=new ArrayList<ModelNode>();
  ModelNode op=new ModelNode();
  op.get(OP).set(ADD);
  op.get(OP_ADDR).add(SUBSYSTEM,"security");
  op.get(OP_ADDR).add(SECURITY_DOMAIN,"database-login-module");
  ModelNode loginModule=op.get(Constants.AUTHENTICATION).add();
  loginModule.get(CODE).set(DatabaseServerLoginModule.class.getName());
  loginModule.get(FLAG).set("required");
  ModelNode moduleOptions=loginModule.get("module-options");
  Map<String,String> optionsMap=classModuleOptionsMap.get(caller);
  assertNotNull(optionsMap);
  for (  Map.Entry<String,String> entry : optionsMap.entrySet()) {
    moduleOptions.get(entry.getKey()).set(entry.getValue());
  }
  updates.add(op);
  applyUpdates(updates,client);
}
