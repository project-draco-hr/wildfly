{
  if (childrenUpdater.putIfAbsent(this,type,provider) != null) {
    throw new IllegalStateException();
  }
}
