{
  Operation<IncomingDistributableSessionData> operation=new Operation<IncomingDistributableSessionData>(){
    @Override public IncomingDistributableSessionData invoke(    Cache<String,Map<Object,Object>> cache){
      Map<Object,Object> map=cache.get(sessionId);
      if (map == null)       return null;
      Integer version=SessionMapEntry.VERSION.get(map);
      Long timestamp=SessionMapEntry.TIMESTAMP.get(map);
      DistributableSessionMetadata metadata=SessionMapEntry.METADATA.get(map);
      IncomingDistributableSessionDataImpl result=new IncomingDistributableSessionDataImpl(version,timestamp,metadata);
      if (includeAttributes) {
        try {
          result.setSessionAttributes(DistributedCacheManager.this.attributeStorage.load(map));
        }
 catch (        Exception e) {
          throw MESSAGES.failedToStoreSessionAttributes(e,sessionId);
        }
      }
      return result;
    }
  }
;
  try {
    return this.invoke(operation);
  }
 catch (  Exception e) {
    ROOT_LOGGER.errorAccessingSession(e,sessionId,e.getLocalizedMessage());
    ROOT_LOGGER.errorAccessingSession(sessionId,e.getLocalizedMessage());
    this.removeSessionLocal(sessionId);
    return null;
  }
}
