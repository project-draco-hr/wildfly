{
  SubsystemRegistration subsystem=context.registerSubsystem(SUBSYSTEM_NAME,MANAGEMENT_API_MAJOR_VERSION,MANAGEMENT_API_MINOR_VERSION);
  subsystem.registerXMLElementWriter(new JGroupsSubsystemXMLWriter());
  ManagementResourceRegistration registration=subsystem.registerSubsystemModel(JGroupsSubsystemProviders.SUBSYSTEM);
  registration.registerOperationHandler(ModelDescriptionConstants.ADD,JGroupsSubsystemAdd.INSTANCE,JGroupsSubsystemProviders.SUBSYSTEM_ADD,false);
  registration.registerOperationHandler(ModelDescriptionConstants.REMOVE,JGroupsSubsystemRemove.INSTANCE,JGroupsSubsystemProviders.SUBSYSTEM_REMOVE,false);
  registration.registerOperationHandler(ModelDescriptionConstants.DESCRIBE,JGroupsSubsystemDescribe.INSTANCE,JGroupsSubsystemProviders.SUBSYSTEM_DESCRIBE,false,EntryType.PRIVATE);
  SubsystemWriteAttributeHandler.INSTANCE.registerAttributes(registration);
  ManagementResourceRegistration stacks=registration.registerSubModel(stacksPath,JGroupsSubsystemProviders.STACK);
  stacks.registerOperationHandler(ModelDescriptionConstants.ADD,ProtocolStackAdd.INSTANCE,JGroupsSubsystemProviders.STACK_ADD,false);
  stacks.registerOperationHandler(ModelDescriptionConstants.REMOVE,ProtocolStackRemove.INSTANCE,JGroupsSubsystemProviders.STACK_REMOVE,false);
  stacks.registerOperationHandler(ModelKeys.ADD_PROTOCOL,StackConfigOperationHandlers.PROTOCOL_ADD,JGroupsSubsystemProviders.PROTOCOL_ADD);
  stacks.registerOperationHandler(ModelKeys.REMOVE_PROTOCOL,StackConfigOperationHandlers.PROTOCOL_REMOVE,JGroupsSubsystemProviders.PROTOCOL_REMOVE);
  if (context.isRuntimeOnlyRegistrationValid()) {
    final EnumSet<OperationEntry.Flag> readOnly=EnumSet.of(OperationEntry.Flag.READ_ONLY);
    stacks.registerOperationHandler(ModelKeys.EXPORT_NATIVE_CONFIGURATION,StackConfigOperationHandlers.EXPORT_NATIVE_CONFIGURATION,JGroupsSubsystemProviders.EXPORT_NATIVE_CONFIGURATION,readOnly);
  }
  final ManagementResourceRegistration transport=stacks.registerSubModel(transportPath,JGroupsSubsystemProviders.TRANSPORT);
  transport.registerOperationHandler(ADD,StackConfigOperationHandlers.TRANSPORT_ADD,JGroupsSubsystemProviders.TRANSPORT_ADD);
  transport.registerOperationHandler(REMOVE,StackConfigOperationHandlers.REMOVE,JGroupsSubsystemProviders.TRANSPORT_REMOVE);
  StackConfigOperationHandlers.TRANSPORT_ATTR.registerAttributes(transport);
  createPropertyRegistration(transport);
  final ManagementResourceRegistration protocol=stacks.registerSubModel(protocolPath,JGroupsSubsystemProviders.PROTOCOL);
  StackConfigOperationHandlers.PROTOCOL_ATTR.registerAttributes(protocol);
  JGroupsExtension.createPropertyRegistration(protocol);
}
