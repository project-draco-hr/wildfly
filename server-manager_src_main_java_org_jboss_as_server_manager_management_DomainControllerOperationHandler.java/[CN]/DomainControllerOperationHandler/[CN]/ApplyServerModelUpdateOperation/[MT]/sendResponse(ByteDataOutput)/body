{
  UpdateResultHandlerResponse<?> response=processUpdate();
  try {
    output.writeByte(ManagementProtocol.PARAM_APPLY_UPDATE_RESULT);
    if (response.getFailureResult() != null) {
      output.writeByte(ManagementProtocol.PARAM_APPLY_UPDATE_RESULT_EXCEPTION);
      marshal(output,response.getFailureResult());
    }
 else     if (response.isCancelled()) {
      output.writeByte(ManagementProtocol.PARAM_APPLY_SERVER_MODEL_UPDATE_CANCELLED);
    }
 else     if (response.isTimedOut()) {
      output.writeByte(ManagementProtocol.PARAM_APPLY_SERVER_MODEL_UPDATE_TIMED_OUT);
    }
 else {
      output.writeByte(ManagementProtocol.PARAM_APPLY_SERVER_MODEL_UPDATE_RESULT_RETURN);
      marshal(output,response.getSuccessResult());
    }
  }
 catch (  Exception e) {
    throw new ManagementException("Unable to send domain model update response.",e);
  }
}
