{
  try {
    expectHeader(input,ManagementProtocol.REQUEST_START);
    readRequest(serverManagerId,input);
    expectHeader(input,ManagementProtocol.REQUEST_END);
  }
 catch (  IOException e) {
    throw new ManagementOperationException("Domain controller request failed.  Unable to read request.",e);
  }
  try {
    output.writeByte(ManagementProtocol.RESPONSE_START);
    output.writeByte(getResponseCode());
    sendResponse(serverManagerId,output);
    output.writeByte(ManagementProtocol.RESPONSE_END);
    output.flush();
  }
 catch (  IOException e) {
    throw new ManagementOperationException("Failed to send response",e);
  }
}
