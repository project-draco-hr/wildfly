{
  if (nonLoopBackInterfaces.size() < 1 || loopbackInterfaces.size() < 1) {
    return;
  }
  Map<NetworkInterface,Set<InetAddress>> correct=new HashMap<NetworkInterface,Set<InetAddress>>();
  for (  NetworkInterface ni : loopbackInterfaces) {
    correct.put(ni,allCandidates.get(ni));
  }
  String target=null;
  for (  NetworkInterface ni : nonLoopBackInterfaces) {
    Set<InetAddress> addresses=allCandidates.get(ni);
    if (addresses.size() > 0) {
      correct.put(ni,addresses);
      target=ni.getName();
      break;
    }
  }
  if (target == null) {
    return;
  }
  Set<InterfaceCriteria> criterias=new HashSet<InterfaceCriteria>();
  criterias.add(new NicInterfaceCriteria(target));
  criterias.add(LoopbackInterfaceCriteria.INSTANCE);
  AnyInterfaceCriteria testee=new AnyInterfaceCriteria(criterias);
  Map<NetworkInterface,Set<InetAddress>> result=testee.getAcceptableAddresses(allCandidates);
  assertNotNull(result);
  assertEquals(correct,result);
}
