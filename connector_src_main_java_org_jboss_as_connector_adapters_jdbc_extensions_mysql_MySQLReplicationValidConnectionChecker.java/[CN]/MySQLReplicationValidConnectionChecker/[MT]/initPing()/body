{
  driverHasIsValidMethod=false;
  driverHasPingMethod=false;
  log=Logger.getLogger(MySQLReplicationValidConnectionChecker.class);
  Class<?> mysqlConnection=Thread.currentThread().getContextClassLoader().loadClass(CONNECTION_CLASS);
  try {
    isValid=mysqlConnection.getMethod("isValid",new Class<?>[]{});
    driverHasIsValidMethod=true;
  }
 catch (  NoSuchMethodException e) {
    log.info("Cannot resolve com.mysq.jdbc.ReplicationConnection.isValid method. Fallback to ping.",e);
  }
catch (  SecurityException e) {
    log.info("Cannot resolve com.mysq.jdbc.ReplicationConnection.isValid method. Fallback to ping.",e);
  }
  if (!driverHasIsValidMethod) {
    try {
      ping=mysqlConnection.getMethod("ping",new Class<?>[]{});
      driverHasPingMethod=true;
    }
 catch (    NoSuchMethodException e) {
      log.warn("Cannot resolve com.mysq.jdbc.ReplicationConnection.ping method. Will use 'SELECT 1' instead.",e);
    }
catch (    SecurityException e) {
      log.info("Cannot resolve com.mysq.jdbc.ReplicationConnection.ping method. Will use 'SELECT 1' instead.",e);
    }
  }
}
