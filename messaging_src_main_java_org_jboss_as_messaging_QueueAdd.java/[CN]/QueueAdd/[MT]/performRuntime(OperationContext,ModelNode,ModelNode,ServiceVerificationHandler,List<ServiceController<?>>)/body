{
  ServiceRegistry registry=context.getServiceRegistry(true);
  ServiceController<?> hqService=registry.getService(MessagingServices.JBOSS_MESSAGING);
  if (hqService != null) {
    PathAddress address=PathAddress.pathAddress(operation.get(OP_ADDR));
    final String queueName=address.getLastElement().getValue();
    final CoreQueueConfiguration queueConfiguration=createCoreQueueConfiguration(queueName,model);
    final QueueService service=new QueueService(queueConfiguration,false);
    newControllers.add(context.getServiceTarget().addService(MessagingServices.CORE_QUEUE_BASE.append(queueName),service).addDependency(MessagingServices.JBOSS_MESSAGING,HornetQServer.class,service.getHornetQService()).addListener(verificationHandler).setInitialMode(Mode.ACTIVE).install());
  }
}
