{
  streamWriter.writeStartElement(ResourceAdapters.Tag.RESOURCE_ADAPTER.getLocalName());
  if (ra.hasDefined(ARCHIVE.getName())) {
    streamWriter.writeStartElement(ARCHIVE.getXmlName());
    String archive=ra.get(ARCHIVE.getName()).asString();
    if (archive.contains("#")) {
      streamWriter.writeCharacters(archive.substring(0,archive.indexOf("#")));
    }
 else {
      streamWriter.writeCharacters(archive);
    }
    streamWriter.writeEndElement();
  }
  BOOTSTRAPCONTEXT.marshallAsElement(ra,streamWriter);
  if (ra.hasDefined(BEANVALIDATIONGROUPS.getName())) {
    streamWriter.writeStartElement(ResourceAdapter.Tag.BEAN_VALIDATION_GROUPS.getLocalName());
    for (    ModelNode bvg : ra.get(BEANVALIDATIONGROUPS.getName()).asList()) {
      streamWriter.writeStartElement(BEANVALIDATIONGROUPS.getXmlName());
      streamWriter.writeCharacters(bvg.asString());
      streamWriter.writeEndElement();
    }
    streamWriter.writeEndElement();
  }
  TRANSACTIONSUPPORT.marshallAsElement(ra,streamWriter);
  writeNewConfigProperties(streamWriter,ra);
  TransactionSupportEnum transactionSupport=ra.hasDefined(TRANSACTIONSUPPORT.getName()) ? TransactionSupportEnum.valueOf(ra.get(TRANSACTIONSUPPORT.getName()).asString()) : null;
  boolean isXa=false;
  if (transactionSupport == TransactionSupportEnum.XATransaction) {
    isXa=true;
  }
  if (ra.hasDefined(CONNECTIONDEFINITIONS_NAME)) {
    streamWriter.writeStartElement(ResourceAdapter.Tag.CONNECTION_DEFINITIONS.getLocalName());
    for (    Property conDef : ra.get(CONNECTIONDEFINITIONS_NAME).asPropertyList()) {
      writeConDef(streamWriter,conDef.getValue(),conDef.getName(),isXa);
    }
    streamWriter.writeEndElement();
  }
  if (ra.hasDefined(ADMIN_OBJECTS_NAME)) {
    streamWriter.writeStartElement(ResourceAdapter.Tag.ADMIN_OBJECTS.getLocalName());
    for (    Property adminObject : ra.get(ADMIN_OBJECTS_NAME).asPropertyList()) {
      writeAdminObject(streamWriter,adminObject.getValue(),adminObject.getName());
    }
    streamWriter.writeEndElement();
  }
  streamWriter.writeEndElement();
}
