{
  streamWriter.writeStartElement(ResourceAdapter.Tag.CONNECTION_DEFINITION.getLocalName());
  CLASS_NAME.marshallAsAttribute(conDef,false,streamWriter);
  JNDINAME.marshallAsAttribute(conDef,false,streamWriter);
  ENABLED.marshallAsAttribute(conDef,false,streamWriter);
  USE_JAVA_CONTEXT.marshallAsAttribute(conDef,false,streamWriter);
  POOL_NAME.marshallAsAttribute(conDef,false,streamWriter);
  USE_CCM.marshallAsAttribute(conDef,false,streamWriter);
  writeConfigProperties(streamWriter,conDef);
  if (conDef.hasDefined(MAX_POOL_SIZE.getName()) || conDef.hasDefined(MIN_POOL_SIZE.getName()) || conDef.hasDefined(POOL_USE_STRICT_MIN.getName())|| conDef.hasDefined(POOL_PREFILL.getName())) {
    if (conDef.hasDefined(INTERLEAVING.getName()) || conDef.hasDefined(WRAP_XA_RESOURCE.getName()) || conDef.hasDefined(NOTXSEPARATEPOOL.getName())|| conDef.hasDefined(PAD_XID.getName())|| conDef.hasDefined(SAME_RM_OVERRIDE.getName())) {
      streamWriter.writeStartElement(CommonConnDef.Tag.XA_POOL.getLocalName());
      MIN_POOL_SIZE.marshallAsElement(conDef,false,streamWriter);
      MAX_POOL_SIZE.marshallAsElement(conDef,false,streamWriter);
      POOL_PREFILL.marshallAsElement(conDef,false,streamWriter);
      POOL_FLUSH_STRATEGY.marshallAsElement(conDef,false,streamWriter);
      POOL_USE_STRICT_MIN.marshallAsElement(conDef,false,streamWriter);
      SAME_RM_OVERRIDE.marshallAsElement(conDef,false,streamWriter);
      INTERLEAVING.marshallAsElement(conDef,false,streamWriter);
      NOTXSEPARATEPOOL.marshallAsElement(conDef,false,streamWriter);
      PAD_XID.marshallAsElement(conDef,false,streamWriter);
      WRAP_XA_RESOURCE.marshallAsElement(conDef,false,streamWriter);
      streamWriter.writeEndElement();
    }
 else {
      streamWriter.writeStartElement(CommonConnDef.Tag.POOL.getLocalName());
      MIN_POOL_SIZE.marshallAsElement(conDef,false,streamWriter);
      MAX_POOL_SIZE.marshallAsElement(conDef,false,streamWriter);
      POOL_PREFILL.marshallAsElement(conDef,false,streamWriter);
      POOL_USE_STRICT_MIN.marshallAsElement(conDef,false,streamWriter);
      streamWriter.writeEndElement();
    }
  }
  if (conDef.hasDefined(APPLICATION.getName()) || conDef.hasDefined(SECURITY_DOMAIN.getName()) || conDef.hasDefined(SECURITY_DOMAIN_AND_APPLICATION.getName())) {
    streamWriter.writeStartElement(CommonConnDef.Tag.SECURITY.getLocalName());
    APPLICATION.marshallAsElement(conDef,false,streamWriter);
    SECURITY_DOMAIN.marshallAsElement(conDef,false,streamWriter);
    SECURITY_DOMAIN_AND_APPLICATION.marshallAsElement(conDef,false,streamWriter);
    streamWriter.writeEndElement();
  }
  if (conDef.hasDefined(BLOCKING_TIMEOUT_WAIT_MILLIS.getName()) || conDef.hasDefined(IDLETIMEOUTMINUTES.getName()) || conDef.hasDefined(ALLOCATION_RETRY.getName())|| conDef.hasDefined(ALLOCATION_RETRY_WAIT_MILLIS.getName())|| conDef.hasDefined(XA_RESOURCE_TIMEOUT.getName())) {
    streamWriter.writeStartElement(CommonConnDef.Tag.TIMEOUT.getLocalName());
    BLOCKING_TIMEOUT_WAIT_MILLIS.marshallAsElement(conDef,false,streamWriter);
    IDLETIMEOUTMINUTES.marshallAsElement(conDef,false,streamWriter);
    ALLOCATION_RETRY.marshallAsElement(conDef,false,streamWriter);
    ALLOCATION_RETRY_WAIT_MILLIS.marshallAsElement(conDef,false,streamWriter);
    XA_RESOURCE_TIMEOUT.marshallAsElement(conDef,false,streamWriter);
    streamWriter.writeEndElement();
  }
  if (conDef.hasDefined(BACKGROUNDVALIDATION.getName()) || conDef.hasDefined(BACKGROUNDVALIDATIONMILLIS.getName()) || conDef.hasDefined(USE_FAST_FAIL.getName())) {
    streamWriter.writeStartElement(CommonConnDef.Tag.VALIDATION.getLocalName());
    BACKGROUNDVALIDATION.marshallAsElement(conDef,false,streamWriter);
    BACKGROUNDVALIDATIONMILLIS.marshallAsElement(conDef,false,streamWriter);
    USE_FAST_FAIL.marshallAsElement(conDef,false,streamWriter);
    streamWriter.writeEndElement();
  }
  if (conDef.hasDefined(RECOVERY_USERNAME.getName()) || conDef.hasDefined(RECOVERY_PASSWORD.getName()) || conDef.hasDefined(RECOVERY_SECURITY_DOMAIN.getName())|| conDef.hasDefined(RECOVERLUGIN_CLASSNAME.getName())|| conDef.hasDefined(RECOVERLUGIN_PROPERTIES.getName())|| conDef.hasDefined(NO_RECOVERY.getName())) {
    streamWriter.writeStartElement(CommonConnDef.Tag.RECOVERY.getLocalName());
    if (conDef.hasDefined(RECOVERY_USERNAME.getName()) || conDef.hasDefined(RECOVERY_PASSWORD.getName()) || conDef.hasDefined(RECOVERY_SECURITY_DOMAIN.getName())) {
      streamWriter.writeStartElement(Recovery.Tag.RECOVER_CREDENTIAL.getLocalName());
      RECOVERY_USERNAME.marshallAsElement(conDef,false,streamWriter);
      RECOVERY_PASSWORD.marshallAsElement(conDef,false,streamWriter);
      RECOVERY_SECURITY_DOMAIN.marshallAsElement(conDef,false,streamWriter);
      streamWriter.writeEndElement();
    }
    if (conDef.hasDefined(RECOVERLUGIN_CLASSNAME.getName()) || conDef.hasDefined(RECOVERLUGIN_PROPERTIES.getName())) {
      streamWriter.writeStartElement(Recovery.Tag.RECOVER_PLUGIN.getLocalName());
      RECOVERLUGIN_CLASSNAME.marshallAsAttribute(conDef,false,streamWriter);
      if (conDef.hasDefined(RECOVERLUGIN_PROPERTIES.getName())) {
        for (        Property property : conDef.get(RECOVERLUGIN_PROPERTIES.getName()).asPropertyList()) {
          writeProperty(streamWriter,conDef,property.getName(),property.getValue().asString(),org.jboss.jca.common.api.metadata.common.Extension.Tag.CONFIG_PROPERTY.getLocalName());
        }
      }
      streamWriter.writeEndElement();
    }
    NO_RECOVERY.marshallAsAttribute(conDef,false,streamWriter);
  }
  streamWriter.writeEndElement();
}
