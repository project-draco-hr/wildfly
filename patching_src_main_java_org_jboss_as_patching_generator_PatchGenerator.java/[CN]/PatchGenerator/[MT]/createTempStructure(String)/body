{
  File tmpDir=new File(System.getProperty("java.io.tmpdir"));
  int count=0;
  while (tmp == null || tmp.exists()) {
    count++;
    tmp=new File(tmpDir,"jboss-as-patch-" + patchId + "-"+ count);
  }
  if (!tmp.mkdirs()) {
    throw processingError("Cannot create tmp dir for patch create at %s",tmp.getAbsolutePath());
  }
  tmp.deleteOnExit();
  File metaInf=new File(tmp,"META-INF");
  metaInf.mkdir();
  metaInf.deleteOnExit();
  File misc=new File(tmp,"misc");
  misc.mkdir();
  misc.deleteOnExit();
}
