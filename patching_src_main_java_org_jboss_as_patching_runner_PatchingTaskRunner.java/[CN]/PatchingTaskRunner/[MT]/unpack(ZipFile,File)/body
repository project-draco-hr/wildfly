{
  final Enumeration<? extends ZipEntry> entries=zip.entries();
  while (entries.hasMoreElements()) {
    final ZipEntry entry=entries.nextElement();
    final String name=entry.getName();
    final File current=new File(patchDir,name);
    if (entry.isDirectory()) {
      continue;
    }
 else {
      if (!current.getParentFile().exists()) {
        current.getParentFile().mkdirs();
      }
      final InputStream eis=zip.getInputStream(entry);
      try {
        final FileOutputStream eos=new FileOutputStream(current);
        try {
          PatchUtils.copyStream(eis,eos);
          eis.close();
          eos.close();
        }
  finally {
          PatchUtils.safeClose(eos);
        }
      }
  finally {
        PatchUtils.safeClose(eis);
      }
    }
  }
}
