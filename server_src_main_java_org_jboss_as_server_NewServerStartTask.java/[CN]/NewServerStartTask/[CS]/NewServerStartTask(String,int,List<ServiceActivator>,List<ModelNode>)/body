{
  if (serverName == null || serverName.length() == 0) {
    throw new IllegalArgumentException("Server name " + serverName + " is invalid; cannot be null or blank");
  }
  this.serverName=serverName;
  this.portOffset=portOffset;
  this.startServices=startServices;
  this.updates=updates;
  final Properties properties=System.getProperties();
  properties.setProperty("jboss.server.name",serverName);
  properties.setProperty("jboss.server.deploy.dir",properties.getProperty("jboss.home.dir") + "/domain/content");
  providedEnvironment=new ServerEnvironment(properties,System.getenv(),false);
}
