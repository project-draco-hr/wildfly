{
  final String trimmed=value == null ? null : value.trim();
  ModelNode node;
  if (trimmed != null) {
    if (attribute.isAllowExpression()) {
      node=ParseUtils.parsePossibleExpression(trimmed);
    }
 else {
      node=new ModelNode().set(trimmed);
    }
    if (node.getType() != ModelType.EXPRESSION) {
switch (attribute.getType()) {
case BIG_DECIMAL:
        node.set(node.asBigDecimal());
      break;
case BIG_INTEGER:
    node.set(node.asBigInteger());
  break;
case BOOLEAN:
node.set(node.asBoolean());
break;
case BYTES:
node.set(node.asBytes());
break;
case DOUBLE:
node.set(node.asDouble());
break;
case INT:
node.set(node.asInt());
break;
case LONG:
node.set(node.asLong());
break;
}
}
}
 else {
node=new ModelNode();
}
final ParameterValidator validator;
if (attribute instanceof ListAttributeDefinition) {
validator=((ListAttributeDefinition)attribute).getElementValidator();
}
 else if (attribute instanceof MapAttributeDefinition) {
validator=((MapAttributeDefinition)attribute).getElementValidator();
}
 else {
validator=attribute.getValidator();
}
validator.validateParameter(attribute.getXmlName(),node);
return node;
}
