{
  if (!WSHelper.isJaxwsJseDeployment(dep)) {
    final JBossWebMetaData jbossWebMD=WSHelper.getOptionalAttachment(dep,JBossWebMetaData.class);
    final String contextRoot=getContextRoot(dep,jbossWebMD);
    if (contextRoot != null) {
      final JSEArchiveMetaData jseArchiveMD=new JSEArchiveMetaData();
      jseArchiveMD.setContextRoot(contextRoot);
      dep.addAttachment(JSEArchiveMetaData.class,jseArchiveMD);
    }
  }
  final DeploymentJaxws ejb3Deployment=WSHelper.getRequiredAttachment(dep,DeploymentJaxws.class);
  final List<EJBMetaData> wsEjbsMD=new LinkedList<EJBMetaData>();
  for (  final EndpointJaxwsEjb jbossEjbMD : ejb3Deployment.getEjbEndpoints()) {
    this.buildEnterpriseBeanMetaData(wsEjbsMD,jbossEjbMD);
  }
  ejbArchiveMD.setEnterpriseBeans(wsEjbsMD);
}
