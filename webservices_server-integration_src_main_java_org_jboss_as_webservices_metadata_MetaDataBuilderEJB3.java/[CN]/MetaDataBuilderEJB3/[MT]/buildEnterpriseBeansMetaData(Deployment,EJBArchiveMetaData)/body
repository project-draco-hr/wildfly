{
  if (!WSHelper.isJaxwsJseDeployment(dep)) {
    final JBossWebMetaData jbossWebMD=WSHelper.getOptionalAttachment(dep,JBossWebMetaData.class);
    final String contextRoot=getContextRoot(dep,jbossWebMD);
    if (contextRoot != null) {
      final JSEArchiveMetaData jseArchiveMD=new JSEArchiveMetaData();
      jseArchiveMD.setContextRoot(contextRoot);
      dep.addAttachment(JSEArchiveMetaData.class,jseArchiveMD);
    }
  }
  final WebServiceDeployment ejb3Deployment=WSHelper.getRequiredAttachment(dep,WebServiceDeployment.class);
  final List<EJBMetaData> wsEjbsMD=new LinkedList<EJBMetaData>();
  for (  final WebServiceDeclaration jbossEjbMD : ejb3Deployment.getServiceEndpoints()) {
    this.buildEnterpriseBeanMetaData(wsEjbsMD,jbossEjbMD);
  }
  ejbArchiveMD.setEnterpriseBeans(wsEjbsMD);
}
