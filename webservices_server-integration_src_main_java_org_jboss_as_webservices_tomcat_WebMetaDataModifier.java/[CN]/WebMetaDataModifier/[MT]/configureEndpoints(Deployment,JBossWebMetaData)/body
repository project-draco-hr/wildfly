{
  final String transportClassName=this.getTransportClassName(dep);
  this.log.trace("Modifying servlets");
  final Set<String> epNames=new HashSet<String>();
  for (  Endpoint ep : dep.getService().getEndpoints()) {
    epNames.add(ep.getTargetBeanName());
  }
  for (  final ServletMetaData servletMD : jbossWebMD.getServlets()) {
    final String endpointClassName=ASHelper.getEndpointName(servletMD);
    if (endpointClassName != null && endpointClassName.length() > 0) {
      if (epNames.contains(endpointClassName)) {
        servletMD.setServletClass(WSFServlet.class.getName());
        this.log.debug("Setting transport class: " + transportClassName + " for servlet: "+ endpointClassName);
        final List<ParamValueMetaData> initParams=WebMetaDataHelper.getServletInitParams(servletMD);
        WebMetaDataHelper.newParamValue(WSFServlet.STACK_SERVLET_DELEGATE_CLASS,transportClassName,initParams);
        WebMetaDataHelper.newParamValue(Endpoint.SEPID_DOMAIN_ENDPOINT,endpointClassName,initParams);
      }
    }
  }
}
