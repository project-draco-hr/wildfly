{
  Stack<E> st=stack.get();
  if (st == null) {
    throw new EmptyStackException();
  }
  E val=st.pop();
  if (st.isEmpty()) {
    stack.remove();
  }
  return val;
}
