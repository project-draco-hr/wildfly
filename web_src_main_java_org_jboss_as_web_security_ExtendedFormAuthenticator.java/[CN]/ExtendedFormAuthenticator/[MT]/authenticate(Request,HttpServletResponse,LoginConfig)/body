{
  boolean didPopulate=false;
  boolean alreadyAuthenticated=super.authenticate(request,response,config);
  Session session=request.getSessionInternal(false);
  if (session != null) {
    Boolean b=(Boolean)session.getNote(DID_POPULATE);
    if (b != null)     didPopulate=b.booleanValue();
  }
  if (!alreadyAuthenticated && !didPopulate) {
    populateSession(request);
  }
  if (session != null)   session.removeNote(DID_POPULATE);
  return alreadyAuthenticated;
}
