{
  DeploymentUnit depUnit=phaseContext.getDeploymentUnit();
  OSGiMetaData metadata=depUnit.getAttachment(OSGiConstants.OSGI_METADATA_KEY);
  if (metadata != null)   return;
  Deployment dep=BundleLifecycleIntegration.getDeployment(depUnit.getName());
  if (dep != null)   return;
  Manifest manifest=WebBundleURIParser.parse(depUnit.getName());
  if (manifest != null) {
    metadata=OSGiMetaDataBuilder.load(manifest);
    depUnit.putAttachment(OSGiConstants.OSGI_METADATA_KEY,metadata);
    depUnit.putAttachment(Attachments.OSGI_MANIFEST,manifest);
  }
}
