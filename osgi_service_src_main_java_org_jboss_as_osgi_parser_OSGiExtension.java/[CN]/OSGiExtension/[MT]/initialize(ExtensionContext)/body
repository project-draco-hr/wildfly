{
  final SubsystemRegistration subsystem=context.registerSubsystem(SUBSYSTEM_NAME);
  final ManagementResourceRegistration registration=subsystem.registerSubsystemModel(OSGiSubsystemProviders.SUBSYSTEM);
  registration.registerOperationHandler(ModelDescriptionConstants.ADD,OSGiSubsystemAdd.INSTANCE,OSGiSubsystemAdd.DESCRIPTION,false);
  registration.registerReadWriteAttribute(ModelConstants.ACTIVATION,null,new ActivationAttributeHandler(),Storage.CONFIGURATION);
  registration.registerReadWriteAttribute(ModelConstants.STARTLEVEL,StartLevelHandler.READ_HANDLER,StartLevelHandler.WRITE_HANDLER,Storage.RUNTIME);
  registration.registerOperationHandler(ModelDescriptionConstants.DESCRIBE,OSGiSubsystemDescribeHandler.INSTANCE,OSGiSubsystemAdd.DESCRIPTION,false,OperationEntry.EntryType.PRIVATE);
  ManagementResourceRegistration configuration=registration.registerSubModel(PathElement.pathElement(ModelConstants.CONFIGURATION),OSGiSubsystemProviders.CONFIGURATION_DESCRIPTION);
  configuration.registerOperationHandler(ModelDescriptionConstants.ADD,OSGiConfigurationAdd.INSTANCE,OSGiConfigurationAdd.DESCRIPTION,false);
  configuration.registerOperationHandler(ModelDescriptionConstants.REMOVE,OSGiConfigurationRemove.INSTANCE,OSGiConfigurationRemove.DESCRIPTION,false);
  ManagementResourceRegistration properties=registration.registerSubModel(PathElement.pathElement(ModelConstants.PROPERTY),OSGiSubsystemProviders.FRAMEWORK_PROPERTY_DESCRIPTION);
  properties.registerOperationHandler(ModelDescriptionConstants.ADD,OSGiFrameworkPropertyAdd.INSTANCE,OSGiFrameworkPropertyAdd.DESCRIPTION,false);
  properties.registerOperationHandler(ModelDescriptionConstants.REMOVE,OSGiFrameworkPropertyRemove.INSTANCE,OSGiFrameworkPropertyRemove.DESCRIPTION,false);
  ManagementResourceRegistration capabilities=registration.registerSubModel(PathElement.pathElement(ModelConstants.CAPABILITY),OSGiSubsystemProviders.CAPABILITY_DESCRIPTION);
  capabilities.registerOperationHandler(ModelDescriptionConstants.ADD,OSGiCapabilityAdd.INSTANCE,OSGiCapabilityAdd.DESCRIPTION,false);
  capabilities.registerOperationHandler(ModelDescriptionConstants.REMOVE,OSGiCapabilityRemove.INSTANCE,OSGiCapabilityRemove.DESCRIPTION,false);
  if (context.getProcessType().isServer()) {
    ManagementResourceRegistration bundles=registration.registerSubModel(PathElement.pathElement(ModelConstants.BUNDLE),OSGiSubsystemProviders.BUNDLE_DESCRIPTION);
    BundleRuntimeHandler.INSTANCE.register(bundles);
  }
  subsystem.registerXMLElementWriter(OSGiSubsystemWriter.INSTANCE);
}
