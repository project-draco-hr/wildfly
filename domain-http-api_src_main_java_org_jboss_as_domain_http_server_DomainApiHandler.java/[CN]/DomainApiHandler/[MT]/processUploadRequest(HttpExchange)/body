{
  ModelNode response=null;
  try {
    SeekResult result=seekToDeployment(http);
    final ModelNode dmr=new ModelNode();
    dmr.get("operation").set("upload-deployment-stream");
    dmr.get("address").setEmptyList();
    dmr.get("input-stream-index").set(0);
    OperationBuilder operation=new OperationBuilder(dmr);
    operation.addInputStream(result.stream);
    response=modelController.execute(operation.build());
    drain(http.getRequestBody());
  }
 catch (  Throwable t) {
    ROOT_LOGGER.uploadError(t);
    http.sendResponseHeaders(INTERNAL_SERVER_ERROR,-1);
    return;
  }
  writeResponse(http,false,false,response,OK,false,TEXT_HTML);
}
