{
  final ModelNode request=new ModelNode();
  request.get(Util.OPERATION).set(operation);
  final ModelNode addressNode=request.get(Util.ADDRESS);
  if (address.isEmpty()) {
    addressNode.setEmptyList();
  }
 else {
    if (address.endsOnType()) {
      throw new CommandFormatException("The address ends on a type: " + address.getNodeType());
    }
    for (    OperationRequestAddress.Node node : address) {
      addressNode.add(node.getType(),node.getName());
    }
  }
  return request;
}
