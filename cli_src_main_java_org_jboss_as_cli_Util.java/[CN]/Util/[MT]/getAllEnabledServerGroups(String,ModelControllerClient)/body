{
  List<String> serverGroups=getServerGroups(client);
  if (serverGroups.isEmpty()) {
    return Collections.emptyList();
  }
  List<String> result=new ArrayList<String>();
  for (  String serverGroup : serverGroups) {
    DefaultOperationRequestBuilder builder=new DefaultOperationRequestBuilder();
    ModelNode request;
    try {
      builder.setOperationName(Util.READ_CHILDREN_NAMES);
      builder.addNode(Util.SERVER_GROUP,serverGroup);
      builder.addProperty(Util.CHILD_TYPE,Util.DEPLOYMENT);
      request=builder.buildRequest();
    }
 catch (    OperationFormatException e) {
      throw new IllegalStateException("Failed to build operation",e);
    }
    try {
      ModelNode outcome=client.execute(request);
      if (isSuccess(outcome)) {
        if (!listContains(outcome,deploymentName)) {
          continue;
        }
      }
 else {
        continue;
      }
    }
 catch (    Exception e) {
      continue;
    }
    builder=new DefaultOperationRequestBuilder();
    builder.addNode(SERVER_GROUP,serverGroup);
    builder.addNode(DEPLOYMENT,deploymentName);
    builder.setOperationName(READ_ATTRIBUTE);
    builder.addProperty(NAME,ENABLED);
    try {
      request=builder.buildRequest();
    }
 catch (    OperationFormatException e) {
      throw new IllegalStateException("Failed to build operation",e);
    }
    try {
      ModelNode outcome=client.execute(request);
      if (isSuccess(outcome)) {
        if (!outcome.hasDefined("result")) {
          continue;
        }
        if (outcome.get("result").asBoolean()) {
          result.add(serverGroup);
        }
      }
    }
 catch (    Exception e) {
      continue;
    }
  }
  return result;
}
