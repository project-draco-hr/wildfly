{
  Duration maxInactiveInterval=session.getMetaData().getMaxInactiveInterval();
  if (!maxInactiveInterval.isZero()) {
    Instant lastAccessed=session.getMetaData().getLastAccessedTime();
    Duration delay=Duration.between(Instant.now(),lastAccessed.plus(maxInactiveInterval));
    String id=session.getId();
    Runnable task=new ExpirationTask(id);
    InfinispanWebLogger.ROOT_LOGGER.tracef("Session %s will expire in %d sec",id,maxInactiveInterval.getSeconds());
synchronized (task) {
      this.expirationFutures.put(id,this.executor.schedule(task,!delay.isNegative() ? delay.getSeconds() : 0,TimeUnit.SECONDS));
    }
  }
}
