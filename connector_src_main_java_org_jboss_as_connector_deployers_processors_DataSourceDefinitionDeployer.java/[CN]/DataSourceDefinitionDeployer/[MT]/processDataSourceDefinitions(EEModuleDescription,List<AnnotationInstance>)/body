{
  for (  AnnotationInstance annotation : datasourceDefinitions) {
    final AnnotationTarget annotationTarget=annotation.target();
    if (annotationTarget instanceof ClassInfo == false) {
      throw new DeploymentUnitProcessingException("@DataSourceDefinition can only be applied " + "on class. " + annotationTarget + " is not a class");
    }
    final BindingConfiguration bindingConfiguration=this.getBindingConfiguration(annotation);
    ClassInfo targetClass=(ClassInfo)annotationTarget;
    EEModuleClassDescription classDescription=eeModuleDescription.getOrAddClassByName(targetClass.name().toString());
    classDescription.getConfigurators().add(new ClassConfigurator(){
      @Override public void configure(      DeploymentPhaseContext context,      EEModuleClassDescription description,      EEModuleClassConfiguration configuration) throws DeploymentUnitProcessingException {
        configuration.getBindingConfigurations().add(bindingConfiguration);
      }
    }
);
  }
}
