{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final ModuleSpecification moduleSpecification=deploymentUnit.getAttachment(Attachments.MODULE_SPECIFICATION);
  if (!WeldDeploymentMarker.isWeldDeployment(deploymentUnit)) {
    return;
  }
  final ModuleLoader moduleLoader=Module.getBootModuleLoader();
  addDepdenency(moduleSpecification,moduleLoader,JAVAX_PERSISTENCE_API_ID);
  addDepdenency(moduleSpecification,moduleLoader,JAVAEE_API_ID);
  addDepdenency(moduleSpecification,moduleLoader,JBOSS_INTERCEPTOR_ID);
  addDepdenency(moduleSpecification,moduleLoader,JBOSS_LOGGING_ID);
  addDepdenency(moduleSpecification,moduleLoader,JAVASSIST_ID);
  addDepdenency(moduleSpecification,moduleLoader,WELD_CORE_ID);
  addDepdenency(moduleSpecification,moduleLoader,WELD_API_ID);
  addDepdenency(moduleSpecification,moduleLoader,WELD_SPI_ID);
  if (DeploymentTypeMarker.isType(DeploymentType.WAR,deploymentUnit)) {
    ModuleDependency dep=new ModuleDependency(moduleLoader,JBOSS_AS_WELD_ID,false,false,false);
    dep.addImportFilter(PathFilters.getMetaInfFilter(),true);
    dep.addExportFilter(PathFilters.getMetaInfFilter(),true);
    moduleSpecification.addDependency(dep);
  }
}
