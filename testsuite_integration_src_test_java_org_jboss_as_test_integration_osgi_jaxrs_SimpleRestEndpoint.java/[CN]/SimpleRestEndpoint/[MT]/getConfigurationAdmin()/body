{
  if (service == null) {
    if (context == null) {
      log.warnf("BundleContext not injected");
      context=getBundleContextFromClass(ConfigurationAdmin.class);
    }
    ServiceTracker tracker=new ServiceTracker(context,ConfigurationAdmin.class.getName(),null){
      @Override public Object addingService(      ServiceReference sref){
        service=(ConfigurationAdmin)super.addingService(sref);
        log.infof("Adding service: %s",service);
        return service;
      }
      @Override public void removedService(      ServiceReference sref,      Object instance){
        super.removedService(sref,service);
        log.infof("Removing service: %s",service);
        service=null;
      }
    }
;
    tracker.open();
  }
  return service;
}
