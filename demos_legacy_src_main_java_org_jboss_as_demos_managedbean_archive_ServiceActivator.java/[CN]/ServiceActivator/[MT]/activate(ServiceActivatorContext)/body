{
  System.out.println("Running");
  final ServiceTarget serviceTarget=serviceActivatorContext.getServiceTarget();
  final LookupService rebindService=new LookupService("BeanWithSimpleInjected");
  final Injector<Context> injector=rebindService.getLookupContextInjector();
  serviceTarget.addService(ServiceName.JBOSS.append("BeanWithSimpleInjected","rebind"),rebindService).addDependency(ServiceName.JBOSS.append("deployment","subunit","managedbean-example.ear","managedbean-example.jar","component","BeanWithSimpleInjected","START")).addDependency(ContextNames.contextServiceNameOfModule("managedbean-example","managedbean-example"),NamingStore.class,new Injector<NamingStore>(){
    public void inject(    final NamingStore value) throws InjectionException {
      try {
        injector.inject((Context)value.lookup(new CompositeName()));
      }
 catch (      NamingException e) {
        throw new InjectionException(e);
      }
    }
    public void uninject(){
      injector.uninject();
    }
  }
).setInitialMode(ServiceController.Mode.ACTIVE).install();
}
