{
  final ChannelStrategy strategy=new ChannelStrategy(executorService);
  final ManagementChannelHandler handler=strategy.handler;
  final DomainTestClient client=new DomainTestClient(){
    @Override Connection getConnection(){
      return connection;
    }
    @Override protected ManagementChannelAssociation getChannelAssociation() throws IOException {
      return handler;
    }
    @Override Channel getChannel(){
      return strategy.channel;
    }
    @Override public void close() throws IOException {
      strategy.close();
    }
  }
;
  handler.addHandlerFactory(client);
  return client;
}
