{
  while (timeout > 0) {
    ModelNode node=OSGiManagementOperations.getBundleInfo(getControllerClient(),bundleId);
    if (state.equals(node.get(ModelConstants.STATE).asString())) {
      return true;
    }
    timeout-=500;
    Thread.sleep(500);
  }
  ;
  return false;
}
