{
  Throwable error=null;
  final boolean readOnly=true;
  boolean shouldLog=false;
  try {
    int i=0;
    if (delegates.size() > 0) {
      for (      MBeanServerPlugin delegate : delegates) {
        if (!delegate.shouldAuthorize() || authorizeSensitiveOperation(true,false)) {
          i+=delegate.getMBeanCount();
          if (delegate.shouldAuditLog()) {
            shouldLog=true;
          }
        }
      }
    }
    if (!rootMBeanServer.shouldAuthorize() || authorizeSensitiveOperation(true,false)) {
      i+=rootMBeanServer.getMBeanCount();
      shouldLog=true;
    }
    return i;
  }
 catch (  Exception e) {
    error=e;
    throw makeRuntimeException(e);
  }
 finally {
    if (error != null || shouldLog) {
      new MBeanServerAuditLogRecordFormatter(this,error,readOnly).getMBeanCount();
    }
  }
}
