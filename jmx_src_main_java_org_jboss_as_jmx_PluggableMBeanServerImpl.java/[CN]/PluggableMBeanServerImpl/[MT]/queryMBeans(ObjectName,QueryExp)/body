{
  Set<ObjectInstance> result=new HashSet<ObjectInstance>();
  if (delegates.size() > 0) {
    for (    MBeanServerPlugin delegate : delegates) {
      if (name == null || (name.getDomain() != null && delegate.accepts(name))) {
        result.addAll(delegate.queryMBeans(name,query));
      }
    }
  }
  result.addAll(rootMBeanServer.queryMBeans(name,query));
  return result;
}
