{
  if (component == null) {
synchronized (this) {
      if (component == null) {
        component=((ServiceController<WebComponent>)serviceRegistry.getRequiredService(serviceName)).getValue();
      }
    }
  }
  return new ManagedReference(){
    private final ComponentInstance instance=component.createInstance();
    private boolean destroyed;
    @Override public synchronized void release(){
      if (!destroyed) {
        instance.getComponent().destroyInstance(instance);
        destroyed=true;
      }
    }
    @Override public Object getInstance(){
      return instance.getInstance();
    }
  }
;
}
