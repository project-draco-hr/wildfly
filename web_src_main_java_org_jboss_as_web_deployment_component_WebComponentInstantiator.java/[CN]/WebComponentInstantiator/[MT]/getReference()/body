{
  setupComponent();
  return new ManagedReference(){
    private final ComponentInstance instance=component.createInstance();
    private boolean destroyed;
    @Override public synchronized void release(){
      if (!destroyed) {
        instance.destroy();
        destroyed=true;
      }
    }
    @Override public Object getInstance(){
      return instance.getInstance();
    }
  }
;
}
