{
  final MarshallingConfiguration marshallingConfiguration=new MarshallingConfiguration();
  marshallingConfiguration.setVersion(2);
  marshallingConfiguration.setClassTable(new ProtocolV1ClassTable());
  marshallingConfiguration.setClassResolver(new LazyClassLoaderClassResolver(classLoaderProvider));
  org.jboss.marshalling.MarshallerFactory factory=Marshalling.getProvidedMarshallerFactory(marshallerType);
  this.delegate=factory.createUnmarshaller(marshallingConfiguration);
  final InputStream is=new InputStream(){
    @Override public int read() throws IOException {
      try {
        final int b=input.readByte();
        return b & 0xff;
      }
 catch (      EOFException eof) {
        return -1;
      }
    }
  }
;
  final ByteInput byteInput=Marshalling.createByteInput(is);
  this.delegate.start(byteInput);
}
