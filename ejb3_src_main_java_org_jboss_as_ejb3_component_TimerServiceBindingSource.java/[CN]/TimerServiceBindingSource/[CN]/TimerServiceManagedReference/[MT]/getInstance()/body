{
  final InvocationContext currentInvocationContext=CurrentInvocationContext.get();
  final EJBComponent ejbComponent=currentInvocationContext.getComponent();
  if (ejbComponent == null) {
    throw new IllegalStateException("EJBComponent has not been set in the current invocation context " + currentInvocationContext);
  }
  return ejbComponent.getTimerService();
}
