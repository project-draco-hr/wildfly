{
  if (o == null) {
    return new ModelNode();
  }
  boolean possibleExpression=false;
  if (o instanceof String) {
    possibleExpression=isPossibleExpression((String)o);
  }
  if (expressions) {
    if (possibleExpression) {
      return new ModelNode().setExpression((String)o);
    }
    return valueAccessor.toModelNodeFromString((String)o);
  }
 else {
    if (possibleExpression) {
      if (valueAccessor != StringValueAccessor.INSTANCE) {
        throw MESSAGES.expressionCannotBeConvertedIntoTargeteType(valueAccessor.getOpenType());
      }
      return new ModelNode().setExpression((String)o);
    }
    return valueAccessor.toModelNode(o);
  }
}
