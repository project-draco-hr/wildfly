{
  if (clazz == null)   throw new IllegalArgumentException("Null clazz");
  if (command == null)   throw new IllegalArgumentException("Null command");
  if (command.getData() == null || command.getData().length == 0)   throw new IllegalArgumentException("No data in command ");
  final ByteArrayInputStream byteArrayInputStream=new ByteArrayInputStream(command.getData());
  final Unmarshaller unmarshaller=MARSHALLER_FACTORY.createUnmarshaller(CONFIG);
  try {
    unmarshaller.start(Marshalling.createByteInput(byteArrayInputStream));
    final T obj=unmarshaller.readObject(clazz);
    unmarshaller.finish();
    unmarshaller.close();
    return obj;
  }
  finally {
    safeClose(unmarshaller);
  }
}
