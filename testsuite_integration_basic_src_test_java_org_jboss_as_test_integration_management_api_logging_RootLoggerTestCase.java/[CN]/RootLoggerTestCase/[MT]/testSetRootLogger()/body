{
  File logFile=new File(tempDir,"test-fh.log");
  if (logFile.exists())   assertTrue(logFile.delete());
  addFileHandler("test-logger","TRACE",logFile,false);
  ModelNode op=createOpNode("subsystem=logging","read-attribute");
  op.get("name").set("root-logger");
  ModelNode rootLogger=executeOperation(op);
  List<String> handlers=ModelUtil.modelNodeAsStingList(rootLogger.get("handlers"));
  op=createOpNode("subsystem=logging","set-root-logger");
  op.get("level").set(rootLogger.get("level"));
  for (  String handler : handlers)   op.get("handlers").add(handler);
  op.get("handlers").add("test-logger");
  executeOperation(op);
  String response=HttpRequest.get(url.toString() + "/LoggingServlet",10,TimeUnit.SECONDS);
  assertTrue(response.contains("Logging servlet."));
  op=createOpNode("subsystem=logging","set-root-logger");
  op.get("level").set(rootLogger.get("level"));
  op.get("handlers").set(rootLogger.get("handlers"));
  executeOperation(op);
  removeFileHandler("test-logger",false);
  String log=FileUtils.readFileToString(logFile);
  assertTrue(log.contains("Logging servlet."));
  assertTrue(logFile.delete());
}
