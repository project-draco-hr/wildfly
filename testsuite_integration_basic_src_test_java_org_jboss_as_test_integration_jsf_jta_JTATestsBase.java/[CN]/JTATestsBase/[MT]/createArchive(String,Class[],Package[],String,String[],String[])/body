{
  final WebArchive archive=ShrinkWrap.create(WebArchive.class,deploymentName);
  if (classes != null)   archive.addClasses(classes);
  archive.addClass(JTATestsBase.class);
  if (packages != null)   archive.addPackages(true,packages);
  if (resources != null)   for (  String resource : resources) {
    archive.addAsWebResource((resourceBase + "/" + resource),resource);
  }
  if (webInfResources != null)   for (  String webInfResource : webInfResources) {
    archive.addAsWebInfResource((resourceBase + "/WEB-INF/" + webInfResource),webInfResource);
  }
  return archive;
}
