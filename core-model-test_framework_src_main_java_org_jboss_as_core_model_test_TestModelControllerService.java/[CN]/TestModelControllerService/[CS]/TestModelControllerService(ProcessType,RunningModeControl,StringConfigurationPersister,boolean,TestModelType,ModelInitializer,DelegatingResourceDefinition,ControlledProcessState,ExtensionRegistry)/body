{
  super(processType,runningModeControl,null,persister,validateOps,rootResourceDefinition,processState);
  this.type=type;
  this.runningModeControl=runningModeControl;
  this.pathManagerService=type == TestModelType.STANDALONE ? new ServerPathManagerService() : new HostPathManagerService();
  this.modelInitializer=modelInitializer;
  this.rootResourceDefinition=rootResourceDefinition;
  this.processState=processState;
  this.extensionRegistry=extensionRegistry;
  if (type == TestModelType.STANDALONE) {
    initializer=new ServerInitializer();
  }
 else   if (type == TestModelType.HOST) {
    for (Iterator<ModelNode> it=persister.getBootOperations().iterator(); it.hasNext(); ) {
      ModelNode op=it.next();
      if (op.get(OP).asString().equals("write-local-domain-controller")) {
        System.out.println("WARNING: Test framework is removing the 'write-local-domain-controller' operation. If you are comparing xml results use a " + "ModelWriteSanitizer to add the \"domain-controller\" => {\"local\" => {}} part (See ShippedConfigurationsModelTestCase.testHostXml() for an example)");
        it.remove();
        break;
      }
    }
    initializer=new HostInitializer();
  }
 else   if (type == TestModelType.DOMAIN) {
    initializer=new DomainInitializer();
  }
}
