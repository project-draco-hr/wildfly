{
  Class<?> factoryCls;
  try {
    factoryCls=WildFlySecurityManager.getCurrentContextClassLoaderPrivileged().loadClass(DEFAULT_FACTORY_CLASS);
  }
 catch (  ClassNotFoundException e) {
    throw new CliInitializationException("Failed to load " + DEFAULT_FACTORY_CLASS,e);
  }
  try {
    return (CommandContextFactory)factoryCls.newInstance();
  }
 catch (  Exception e) {
    throw new CliInitializationException("Failed to create an instance of " + factoryCls,e);
  }
}
