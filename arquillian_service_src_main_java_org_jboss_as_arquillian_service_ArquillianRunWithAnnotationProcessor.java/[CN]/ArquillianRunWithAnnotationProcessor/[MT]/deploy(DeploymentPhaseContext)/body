{
  final Map<ResourceRoot,Index> indexes=AnnotationIndexUtils.getAnnotationIndexes(phaseContext.getDeploymentUnit());
  final List<AnnotationInstance> instances=new ArrayList<AnnotationInstance>();
  final DotName runWithName=DotName.createSimple(RunWith.class.getName());
  for (  Index index : indexes.values()) {
    final List<AnnotationInstance> annotations=index.getAnnotations(runWithName);
    if (annotations != null) {
      instances.addAll(annotations);
    }
  }
  if (instances.isEmpty())   return;
  final DeploymentUnit deploymentUnitContext=phaseContext.getDeploymentUnit();
  ArquillianConfig arqConfig=new ArquillianConfig(deploymentUnitContext);
  deploymentUnitContext.putAttachment(ArquillianConfig.KEY,arqConfig);
  for (  AnnotationInstance instance : instances) {
    final AnnotationTarget target=instance.target();
    if (target instanceof ClassInfo) {
      final ClassInfo classInfo=(ClassInfo)target;
      final String testClassName=classInfo.name().toString();
      arqConfig.addTestClass(testClassName);
    }
  }
}
