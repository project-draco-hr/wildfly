{
  InetSocketAddress socketAddress=getServerSocketAddress(server);
  props.setProperty(getHostKey(protocol),socketAddress.getAddress().getHostName());
  props.setProperty(getPortKey(protocol),String.valueOf(socketAddress.getPort()));
  if (server.isSslEnabled()) {
    props.setProperty(getPropKey(protocol,"ssl.enable"),"true");
  }
 else   if (server.isTlsEnabled()) {
    props.setProperty(getPropKey(protocol,"starttls.enable"),"true");
  }
  if (server.getCredentials() != null) {
    props.setProperty(getPropKey(protocol,"auth"),"true");
    props.setProperty(getPropKey(protocol,"user"),server.getCredentials().getUsername());
  }
  props.setProperty(getPropKey(protocol,"debug"),String.valueOf(config.isDebug()));
}
