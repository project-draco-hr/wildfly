{
  Properties props=new Properties();
  props.put("mail.transport.protocol","smtp");
  if (sessionConfig.getSmtpServer() != null) {
    props.put("mail.smtp.host",sessionConfig.getSmtpServer().getAddress());
    props.put("mail.smtp.port",sessionConfig.getSmtpServer().getPort());
  }
  if (sessionConfig.getImapServer() != null) {
    props.put("mail.imap.host",sessionConfig.getImapServer().getAddress());
    props.put("mail.imap.port",sessionConfig.getImapServer().getPort());
  }
  if (sessionConfig.getPop3Server() != null) {
    props.put("mail.pop3.host",sessionConfig.getPop3Server().getAddress());
    props.put("mail.pop3.port",sessionConfig.getPop3Server().getPort());
  }
  props.put("mail.user",sessionConfig.getUsername());
  props.put("mail.debug",sessionConfig.isDebug());
  log.trace("props: " + props);
  return props;
}
