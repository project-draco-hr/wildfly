{
  Properties props=new Properties();
  if (config.getSmtpServer() != null) {
    props.put("mail.transport.protocol","smtp");
    InetSocketAddress socketAddress=getServerSocketAddress(config.getSmtpServer());
    props.put(getHostKey("smtp"),socketAddress.getAddress().getHostName());
    props.put(getPortKey("smtp"),socketAddress.getPort());
  }
  if (config.getImapServer() != null) {
    InetSocketAddress socketAddress=getServerSocketAddress(config.getImapServer());
    props.put(getHostKey("imap"),socketAddress.getAddress().getHostName());
    props.put(getPortKey("imap"),socketAddress.getPort());
  }
  if (config.getPop3Server() != null) {
    InetSocketAddress socketAddress=getServerSocketAddress(config.getPop3Server());
    props.put(getHostKey("pop3"),socketAddress.getAddress().getHostName());
    props.put(getPortKey("pop3"),socketAddress.getPort());
  }
  props.put("mail.debug",config.isDebug());
  log.tracef("props: %s",props);
  return props;
}
