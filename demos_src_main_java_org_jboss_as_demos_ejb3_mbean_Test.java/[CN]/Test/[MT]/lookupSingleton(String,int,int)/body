{
  CountDownLatch latch=new CountDownLatch(numThreads);
  ExecutorService executor=Executors.newFixedThreadPool(numThreads);
  Thread[] threads=new Thread[numThreads];
  for (int i=0; i < numThreads; i++) {
    SingletonBeanLookupThread singletonBeanLookupThread=new SingletonBeanLookupThread(latch,jndiName,numTimes);
    executor.submit(singletonBeanLookupThread);
  }
  latch.await();
  Context ctx=new InitialContext();
  SimpleSingletonLocal bean=(SimpleSingletonLocal)ctx.lookup(jndiName);
  System.out.println("Getting instance count");
  return bean.getBeanInstanceCount();
}
