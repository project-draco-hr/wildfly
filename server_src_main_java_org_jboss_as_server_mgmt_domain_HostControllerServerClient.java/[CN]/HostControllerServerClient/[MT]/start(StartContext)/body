{
  final ModelController controller=this.controller.getValue();
  final Channel channel=hcChannel.getValue();
  handler=new ManagementChannelHandler(channel,executor);
  handler.addHandlerFactory(new TransactionalModelControllerOperationHandler(controller,handler));
  context.asynchronous();
  try {
    this.handler.executeRequest(new ServerRegisterRequest(),null,new ActiveOperation.CompletedCallback<Void>(){
      @Override public void completed(      Void result){
        remoteFileRepositoryValue.getValue().setRemoteFileRepositoryExecutor(new RemoteFileRepositoryExecutorImpl());
        context.complete();
      }
      @Override public void failed(      Exception e){
        context.failed(ServerMessages.MESSAGES.failedToConnectToHC(e));
      }
      @Override public void cancelled(){
        context.failed(ServerMessages.MESSAGES.cancelledHCConnect());
      }
    }
);
  }
 catch (  Exception e) {
    throw ServerMessages.MESSAGES.failedToConnectToHC(e);
  }
  channel.receiveMessage(handler.getReceiver());
}
