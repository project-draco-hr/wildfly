{
  DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  String deploymentName=deploymentUnit.getName().toLowerCase(Locale.ENGLISH);
  Manifest manifest=deploymentUnit.getAttachment(Attachments.OSGI_MANIFEST);
  if (deploymentName.endsWith(".war") || deploymentName.endsWith(".wab")) {
    DeploymentTypeMarker.setType(DeploymentType.WAR,deploymentUnit);
  }
 else   if (manifest != null && deploymentName.endsWith(".jar")) {
    Attributes mainAttributes=manifest.getMainAttributes();
    if (mainAttributes.getValue("Web-ContextPath") != null) {
      DeploymentTypeMarker.setType(DeploymentType.WAR,deploymentUnit);
    }
  }
}
