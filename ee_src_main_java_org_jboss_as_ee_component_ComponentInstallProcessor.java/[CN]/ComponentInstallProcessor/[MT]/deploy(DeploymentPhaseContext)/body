{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final Module module=deploymentUnit.getAttachment(MODULE);
  if (module == null) {
    return;
  }
  final EEModuleConfiguration moduleDescription=deploymentUnit.getAttachment(EE_MODULE_CONFIGURATION);
  final DeploymentUnit parent=deploymentUnit.getParent() == null ? deploymentUnit : deploymentUnit.getParent();
  final Set<ServiceName> dependencies=parent.getAttachment(org.jboss.as.server.deployment.Attachments.JNDI_DEPENDENCIES);
  for (  ComponentConfiguration configuration : moduleDescription.getComponentConfigurations()) {
    try {
      logger.tracef("Installing component %s",configuration.getComponentClass().getName());
      deployComponent(phaseContext,configuration,dependencies);
    }
 catch (    RuntimeException e) {
      throw new DeploymentUnitProcessingException("Failed to install component " + configuration,e);
    }
  }
}
