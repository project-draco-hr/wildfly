{
  MailSessionConfig cfg=new MailSessionConfig();
  cfg.setJndiName(model.require(JNDI_NAME).asString());
  cfg.setDebug(model.get(DEBUG).asBoolean(false));
  if (model.hasDefined(SMTP_SERVER)) {
    cfg.setSmtpServer(readServerConfig(model.get(SMTP_SERVER)));
  }
  if (model.hasDefined(POP3_SERVER)) {
    cfg.setPop3Server(readServerConfig(model.get(POP3_SERVER)));
  }
  if (model.hasDefined(IMAP_SERVER)) {
    cfg.setPop3Server(readServerConfig(model.get(IMAP_SERVER)));
  }
  return cfg;
}
