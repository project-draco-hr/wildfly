{
  ResourceDefinition deploymentsDef=new SimpleResourceDefinition(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM,SUBSYSTEM_NAME),getResourceDescriptionResolver("deployed"));
  final ManagementResourceRegistration deploymentsRegistration=registration.registerDeploymentModel(deploymentsDef);
  final ManagementResourceRegistration dataSources=deploymentsRegistration.registerSubModel(PathElement.pathElement(DATA_SOURCE),DATA_SOURCE_DESC);
  dataSources.registerOperationHandler("flush-idle-connection-in-pool",PoolOperations.FlushIdleConnectionInPool.DS_INSTANCE,FLUSH_IDLE_CONNECTION_DESC,false);
  dataSources.registerOperationHandler("flush-all-connection-in-pool",PoolOperations.FlushAllConnectionInPool.DS_INSTANCE,FLUSH_ALL_CONNECTION_DESC,false);
  dataSources.registerOperationHandler("test-connection-in-pool",PoolOperations.TestConnectionInPool.DS_INSTANCE,TEST_CONNECTION_DESC,false);
  final ManagementResourceRegistration configAdapter=dataSources.registerSubModel(PathElement.pathElement(CONNECTION_PROPERTIES.getName()),CONNECTION_PROPERTIES_DESC);
  configAdapter.registerReadOnlyAttribute(Constants.CONNECTION_PROPERTY_VALUE.getName(),XMLDataSourceRuntimeHandler.INSTANCE,Storage.RUNTIME);
  for (  final SimpleAttributeDefinition attribute : DataSourcesSubsystemProviders.DATASOURCE_ATTRIBUTE) {
    dataSources.registerReadOnlyAttribute(attribute.getName(),XMLDataSourceRuntimeHandler.INSTANCE,Storage.RUNTIME);
  }
  final ManagementResourceRegistration xaDataSources=deploymentsRegistration.registerSubModel(PathElement.pathElement(XA_DATASOURCE),XA_DATA_SOURCE_DESC);
  xaDataSources.registerOperationHandler("flush-idle-connection-in-pool",PoolOperations.FlushIdleConnectionInPool.DS_INSTANCE,FLUSH_IDLE_CONNECTION_DESC,false);
  xaDataSources.registerOperationHandler("flush-all-connection-in-pool",PoolOperations.FlushAllConnectionInPool.DS_INSTANCE,FLUSH_ALL_CONNECTION_DESC,false);
  xaDataSources.registerOperationHandler("test-connection-in-pool",PoolOperations.TestConnectionInPool.DS_INSTANCE,TEST_CONNECTION_DESC,false);
  final ManagementResourceRegistration xadatasourcePropertyAdapter=xaDataSources.registerSubModel(PathElement.pathElement(XADATASOURCE_PROPERTIES.getName()),XADATASOURCE_PROPERTIES_DESC);
  xadatasourcePropertyAdapter.registerReadOnlyAttribute(Constants.CONNECTION_PROPERTY_VALUE.getName(),XMLXaDataSourceRuntimeHandler.INSTANCE,Storage.RUNTIME);
  for (  final SimpleAttributeDefinition attribute : DataSourcesSubsystemProviders.XA_DATASOURCE_ATTRIBUTE) {
    xaDataSources.registerReadOnlyAttribute(attribute.getName(),XMLXaDataSourceRuntimeHandler.INSTANCE,Storage.RUNTIME);
  }
}
