{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  if (!isWarDeployment(deploymentUnit)) {
    return;
  }
  if (deploymentUnit.getAttachment(ATTACHMENT_KEY) != null) {
    return;
  }
  final VirtualFile deploymentRoot=deploymentUnit.getAttachment(Attachments.DEPLOYMENT_ROOT).getRoot();
  final WarAnnotationIndex index=WarAnnotationIndex.create(deploymentRoot);
  deploymentUnit.putAttachment(ATTACHMENT_KEY,index);
}
