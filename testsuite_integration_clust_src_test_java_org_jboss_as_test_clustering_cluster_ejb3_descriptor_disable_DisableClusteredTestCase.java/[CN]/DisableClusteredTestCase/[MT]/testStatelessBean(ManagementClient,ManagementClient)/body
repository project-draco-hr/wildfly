{
  String hostName=node1Running ? client1.getRemoteEjbURL().getHost() : client2.getRemoteEjbURL().getHost();
  int port=node1Running ? client1.getRemoteEjbURL().getPort() : client2.getRemoteEjbURL().getPort();
  Properties property=new Properties();
  property.setProperty("remote.connection.default.host",hostName);
  property.setProperty("remote.connection.default.port",Integer.toString(port));
  EJBClientContextSelector.setup(PROPERTIES_FILENAME,property);
  DisableClusteredRemote stateless=directory.lookupStateless("DisableClusteredAnnotationStateless",DisableClusteredRemote.class);
  if (!node1Running) {
    start(CONTAINER_1);
    node1Running=true;
  }
  if (!node2Running) {
    start(CONTAINER_2);
    node2Running=true;
  }
  String node1=stateless.getNodeState();
  Assert.assertNotNull(node1);
  log.info("Called node name: " + node1);
  for (int i=0; i < 20; i++) {
    Assert.assertEquals(node1,stateless.getNodeState());
  }
}
