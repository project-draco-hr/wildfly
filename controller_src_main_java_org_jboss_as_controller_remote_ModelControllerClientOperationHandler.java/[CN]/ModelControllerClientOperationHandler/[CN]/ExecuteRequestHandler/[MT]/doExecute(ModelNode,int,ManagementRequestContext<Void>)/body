{
  final ManagementRequestHeader header=ManagementRequestHeader.class.cast(context.getRequestHeader());
  final int batchId=header.getBatchId();
  final ModelNode result=new ModelNode();
  final AbstractModelControllerOperationHandler.OperationAttachmentsProxy attachmentsProxy=new AbstractModelControllerOperationHandler.OperationAttachmentsProxy(context.getChannel(),batchId,attachmentsLength);
  try {
    ROOT_LOGGER.tracef("Executing client request %d(%d)",batchId,header.getRequestId());
    result.set(controller.execute(operation,new AbstractModelControllerOperationHandler.OperationMessageHandlerProxy(context.getChannel(),batchId),ModelController.OperationTransactionControl.COMMIT,attachmentsProxy));
  }
 catch (  Exception e) {
    final ModelNode failure=new ModelNode();
    failure.get(OUTCOME).set(FAILED);
    failure.get(FAILURE_DESCRIPTION).set(e.getClass().getName() + ":" + e.getMessage());
    result.set(failure);
    attachmentsProxy.shutdown(e);
  }
 finally {
    ROOT_LOGGER.tracef("Executed client request %d",batchId);
  }
  return result;
}
