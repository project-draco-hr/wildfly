{
  ServerIdentity result=null;
  SortedMap<String,ServerIdentity> servers=getValidServers(valid,alsoValid);
  if (servers.size() == 0) {
    StringBuilder sb=new StringBuilder("No servers are in a valid state to perform this operation. Servers must have status ");
    sb.append(valid);
    if (alsoValid != null) {
      for (      ServerStatus status : alsoValid) {
        sb.append(", ");
        sb.append(status);
      }
    }
    stdout.println(sb.toString());
  }
 else {
    stdout.println("Choose a Server:");
    Map<String,Object> choices=writeMenuBody(new ArrayList<String>(servers.keySet()));
    stdout.println("[C]   Cancel");
    String choice=readStdIn();
    if (!"C".equals(choice.toUpperCase())) {
      Object sm=choices.get(choice);
      if (sm != null) {
        result=servers.get(sm.toString());
      }
 else {
        stdout.println(choice + " is not a valid selection");
        result=chooseServer(valid,alsoValid);
      }
    }
  }
  return result;
}
