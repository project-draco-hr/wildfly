{
  TreeSet<String> deployments=new TreeSet<String>(deployedContent);
  if (domainModel.hasDefined("server-group")) {
    for (    Property serverGroupProp : domainModel.get("server-group").asPropertyList()) {
      ModelNode serverGroup=serverGroupProp.getValue();
      if (serverGroup.hasDefined("deployment")) {
        for (        Property deploymentProp : serverGroup.get("deployment").asPropertyList()) {
          ModelNode deployment=deploymentProp.getValue();
          if (!deployment.hasDefined("auto-start") || deployment.get("auto-start").asBoolean()) {
            deployments.add(deploymentProp.getName());
          }
        }
      }
    }
  }
  deployments.removeAll(undeployedContent);
  String deployment=chooseDeployment(deployments,message);
  return deployment;
}
