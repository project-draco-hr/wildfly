{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final EEModuleDescription moduleDescription=deploymentUnit.getAttachment(org.jboss.as.ee.component.Attachments.EE_MODULE_DESCRIPTION);
  final String applicationName=deploymentUnit.getParent() == null ? deploymentUnit.getName() : deploymentUnit.getParent().getName();
  final CompositeIndex compositeIndex=deploymentUnit.getAttachment(Attachments.COMPOSITE_ANNOTATION_INDEX);
  if (compositeIndex == null) {
    return;
  }
  addBindings(deploymentUnit,PERSISTENCE_CONTEXT_ANNOTATION_NAME,compositeIndex,moduleDescription,applicationName,phaseContext);
  addBindings(deploymentUnit,PERSISTENCE_UNIT_ANNOTATION_NAME,compositeIndex,moduleDescription,applicationName,phaseContext);
}
