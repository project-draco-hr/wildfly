{
  if (componentDescription instanceof StatefulComponentDescription && isExtendedPersistenceContext(annotation)) {
    componentDescription.getConfigurators().add(new ComponentConfigurator(){
      @Override public void configure(      DeploymentPhaseContext context,      ComponentDescription description,      ComponentConfiguration configuration) throws DeploymentUnitProcessingException {
        configuration.getPostConstructInterceptors().add(new SFSBCreateInterceptorFactory());
        configuration.getPreDestroyInterceptors().add(new SFSBDestroyInterceptorFactory());
      }
    }
);
    List<ViewDescription> views=componentDescription.getViews();
    for (    ViewDescription view : views) {
      view.getConfigurators().add(new ViewConfigurator(){
        @Override public void configure(        DeploymentPhaseContext context,        ComponentConfiguration componentConfiguration,        ViewDescription description,        ViewConfiguration configuration) throws DeploymentUnitProcessingException {
          Method[] viewMethods=configuration.getProxyFactory().getCachedMethods();
          for (          Method viewMethod : viewMethods) {
            configuration.getViewInterceptorDeque(viewMethod).add(SFSBInvocationInterceptorFactory.getInstance());
          }
        }
      }
);
    }
  }
  if (!isExtendedPersistenceContext(annotation) && (componentDescription instanceof StatefulComponentDescription || componentDescription instanceof StatelessComponentDescription)) {
    componentDescription.addInterceptorFactory(SBInvocationInterceptorFactory.getInstance());
  }
}
