{
  final List<AnnotationInstance> instances=compositeIndex.getAnnotations(annotationName);
  if (instances != null) {
    for (    AnnotationInstance instance : instances) {
      final BindingDescription binding=getResourceConfiguration(deploymentUnit,instance,phaseContext);
      final String componentName=getComponentName(instance);
      final AbstractComponentDescription componentDescription=moduleDescription.getComponentByClassName(componentName);
      if (null == componentDescription) {
        final Collection<AbstractComponentDescription> descriptions=moduleDescription.getComponentDescriptions();
        String componentDetails="{";
        String separator="";
        if (descriptions != null) {
          for (          AbstractComponentDescription description : descriptions) {
            componentDetails=componentDetails + separator + description.getComponentName();
            separator=",";
          }
        }
        componentDetails=componentDetails + "}";
        throw new DeploymentUnitProcessingException("Application " + applicationName + ": is missing component "+ componentName+ " (components="+ componentDetails+ ") for annotation "+ instance.target().toString());
      }
      componentDescription.getBindings().add(binding);
    }
  }
}
