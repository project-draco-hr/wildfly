{
  RuntimeOperationContext runtimeContext=context.getRuntimeContext();
  if (runtimeContext != null) {
    runtimeContext.setRuntimeTask(new RuntimeTask(){
      public void execute(      final RuntimeTaskContext context) throws OperationFailedException {
        ServiceController<?> service=context.getServiceRegistry().getRequiredService(Services.JBOSS_AS);
        service.addListener(new AbstractServiceListener<Object>(){
          public void listenerAdded(          final ServiceController<?> controller){
            controller.setMode(ServiceController.Mode.NEVER);
          }
          public void transition(          final ServiceController<? extends Object> controller,          final ServiceController.Transition transition){
            if (transition == ServiceController.Transition.STOPPING_to_DOWN) {
              controller.removeListener(this);
              controller.setMode(ServiceController.Mode.ACTIVE);
            }
          }
        }
);
      }
    }
);
  }
  return new BasicOperationResult(null);
}
