{
  for (  VirtualFile file : files) {
    if (file.isFile() && file.getName().toLowerCase().endsWith(TLD)) {
      String pathNameRelativeToRoot;
      try {
        pathNameRelativeToRoot=file.getPathNameRelativeTo(root);
      }
 catch (      IllegalArgumentException e) {
        throw new DeploymentUnitProcessingException(MESSAGES.tldFileNotContainedInRoot(file.getPathName(),root.getPathName()),e);
      }
      tlds.put("/" + pathNameRelativeToRoot,parseTLD(file));
    }
 else     if (file.isDirectory()) {
      processTlds(root,file.getChildren(),tlds);
    }
  }
}
