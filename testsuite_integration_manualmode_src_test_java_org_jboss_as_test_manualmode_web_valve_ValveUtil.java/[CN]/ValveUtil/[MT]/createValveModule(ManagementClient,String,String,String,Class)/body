{
  log.info("Creating a valve module " + modulename);
  String path=ValveUtil.readASPath(managementClient.getControllerClient());
  File file=new File(path);
  if (file.exists()) {
    file=new File(path + baseModulePath);
    file.mkdirs();
    file=new File(path + baseModulePath + "/"+ jarName);
    if (file.exists()) {
      file.delete();
    }
    createJar(file,valveClass);
    file=new File(path + baseModulePath + "/module.xml");
    if (file.exists()) {
      file.delete();
    }
    FileWriter fstream=new FileWriter(path + baseModulePath + "/module.xml");
    BufferedWriter out=new BufferedWriter(fstream);
    out.write("<module xmlns=\"urn:jboss:module:1.1\" name=\"" + modulename + "\">\n");
    out.write("    <properties>\n");
    out.write("        <property name=\"jboss.api\" value=\"private\"/>\n");
    out.write("    </properties>\n");
    out.write("    <resources>\n");
    out.write("        <resource-root path=\"" + jarName + "\"/>\n");
    out.write("    </resources>\n");
    out.write("    <dependencies>\n");
    out.write("        <module name=\"sun.jdk\"/>\n");
    out.write("        <module name=\"javax.servlet.api\"/>\n");
    out.write("        <module name=\"org.jboss.as.web\"/>\n");
    out.write("       <module name=\"org.jboss.logging\"/>\n");
    out.write("    </dependencies>\n");
    out.write("</module>");
    out.close();
  }
}
