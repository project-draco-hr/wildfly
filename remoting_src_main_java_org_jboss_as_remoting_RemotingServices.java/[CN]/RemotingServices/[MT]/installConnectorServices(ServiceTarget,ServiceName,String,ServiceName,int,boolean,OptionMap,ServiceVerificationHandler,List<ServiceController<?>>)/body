{
  final ServiceName authProviderName=RealmAuthenticationProviderService.createName(connectorName);
  final ServiceName optionMapName=RealmOptionMapService.createName(connectorName);
  if (isNetworkInterfaceBinding) {
    final InjectedNetworkBindingStreamServerService streamServerService=new InjectedNetworkBindingStreamServerService(connectorPropertiesOptionMap,port);
    addController(newControllers,verificationHandler,serviceTarget.addService(serverServiceName(connectorName),streamServerService).addDependency(authProviderName,ServerAuthenticationProvider.class,streamServerService.getAuthenticationProviderInjector()).addDependency(optionMapName,OptionMap.class,streamServerService.getOptionMapInjectedValue()).addDependency(endpointName,Endpoint.class,streamServerService.getEndpointInjector()).addDependency(bindingName,NetworkInterfaceBinding.class,streamServerService.getInterfaceBindingInjector()).addDependency(ServiceBuilder.DependencyType.OPTIONAL,SocketBindingManager.SOCKET_BINDING_MANAGER,SocketBindingManager.class,streamServerService.getSocketBindingManagerInjector()));
  }
 else {
    final InjectedSocketBindingStreamServerService streamServerService=new InjectedSocketBindingStreamServerService(connectorPropertiesOptionMap);
    addController(newControllers,verificationHandler,serviceTarget.addService(serverServiceName(connectorName),streamServerService).addDependency(authProviderName,ServerAuthenticationProvider.class,streamServerService.getAuthenticationProviderInjector()).addDependency(optionMapName,OptionMap.class,streamServerService.getOptionMapInjectedValue()).addDependency(endpointName,Endpoint.class,streamServerService.getEndpointInjector()).addDependency(bindingName,SocketBinding.class,streamServerService.getSocketBindingInjector()).addDependency(SocketBindingManager.SOCKET_BINDING_MANAGER,SocketBindingManager.class,streamServerService.getSocketBindingManagerInjector()));
  }
}
