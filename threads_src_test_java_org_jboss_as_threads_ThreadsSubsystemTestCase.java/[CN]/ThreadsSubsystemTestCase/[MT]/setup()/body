{
  model=new ModelNode();
  controller=new TestController();
  model.get("profile","test","subsystem");
  final ModelNodeRegistration testProfileRegistration=controller.getRegistry().registerSubModel(PathElement.pathElement("profile","*"),new DescriptionProvider(){
    @Override public ModelNode getModelDescription(    Locale locale){
      ModelNode node=new ModelNode();
      node.get(DESCRIPTION).set("A named set of subsystem configs");
      node.get(ATTRIBUTES,NAME,TYPE).set(ModelType.STRING);
      node.get(ATTRIBUTES,NAME,DESCRIPTION).set("The name of the profile");
      node.get(ATTRIBUTES,NAME,REQUIRED).set(true);
      node.get(ATTRIBUTES,NAME,MIN_LENGTH).set(1);
      node.get(CHILDREN,SUBSYSTEM,DESCRIPTION).set("The subsystems that make up the profile");
      node.get(CHILDREN,SUBSYSTEM,MIN_OCCURS).set(1);
      node.get(CHILDREN,SUBSYSTEM,MODEL_DESCRIPTION);
      return node;
    }
  }
);
  TestNewExtensionContext context=new TestNewExtensionContext(testProfileRegistration);
  ThreadsExtension extension=new ThreadsExtension();
  extension.initialize(context);
  Assert.assertNotNull(context.createdRegistration);
}
