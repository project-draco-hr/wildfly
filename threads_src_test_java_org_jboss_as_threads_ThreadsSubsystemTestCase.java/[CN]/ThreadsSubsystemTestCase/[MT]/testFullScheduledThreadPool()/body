{
  List<ModelNode> updates=createSubSystem("<scheduled-thread-pool name=\"test-pool\">" + "   <max-threads count=\"100\" per-cpu=\"5\"/>" + "   <keepalive-time time=\"1000\" unit=\"MILLISECONDS\"/>"+ "   <thread-factory name=\"test-factory\"/>"+ "   <properties>"+ "      <property name=\"propA\" value=\"valueA\"/>"+ "      <property name=\"propB\" value=\"valueB\"/>"+ "   </properties>"+ "</scheduled-thread-pool>");
  TestResultHandler handler=new TestResultHandler();
  controller.execute(updates.get(0));
  controller.execute(updates.get(1),handler);
  checkFullScheduledThreadPool();
  ModelNode compensating=handler.getCompensatingOperation();
  assertNotNull(compensating);
  handler.clear();
  controller.execute(compensating,handler);
  assertFalse(model.require("profile").require("test").require("subsystem").require("threads").require("scheduled-thread-pool").require("test-pool").isDefined());
  compensating=handler.getCompensatingOperation();
  assertNotNull(compensating);
  handler.clear();
  controller.execute(compensating,handler);
  checkFullScheduledThreadPool();
}
