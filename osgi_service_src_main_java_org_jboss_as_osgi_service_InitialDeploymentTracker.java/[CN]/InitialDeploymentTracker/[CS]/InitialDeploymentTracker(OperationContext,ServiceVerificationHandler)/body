{
  serviceTarget=context.getServiceTarget();
  deploymentNames=getDeploymentNames(context);
  for (  Phase phase : Arrays.asList(Phase.REGISTER,Phase.INSTALL)) {
    HashSet<ServiceName> serviceNames=new HashSet<ServiceName>();
    deploymentPhaseServices.put(phase.toString(),serviceNames);
    deploymentPhaseCounts.put(phase.toString(),new AtomicInteger(deploymentNames.size()));
    for (    String deploymentName : deploymentNames) {
      ServiceName serviceName=Services.deploymentUnitName(deploymentName);
      serviceNames.add(serviceName.append(phase.toString()));
    }
  }
  if (deploymentNames.isEmpty() == false) {
    ServiceRegistry serviceRegistry=context.getServiceRegistry(false);
    listenerTarget=serviceRegistry.getService(JBOSS_SERVER_CONTROLLER).getServiceContainer();
    listenerTarget.addListener(Inheritance.ALL,this);
  }
  checkAndComplete();
}
