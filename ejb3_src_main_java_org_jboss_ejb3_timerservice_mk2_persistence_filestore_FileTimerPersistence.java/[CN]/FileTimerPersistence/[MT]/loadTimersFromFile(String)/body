{
  final Map<String,TimerEntity> timers=new HashMap<String,TimerEntity>();
  try {
    final File file=new File(getDirectory(timedObjectId));
    if (!file.exists()) {
      return timers;
    }
 else     if (!file.isDirectory()) {
      logger.error(file + " is not a directory, could not restore timers");
      return timers;
    }
    Unmarshaller unmarshaller=factory.createUnmarshaller(configuration);
    for (    File timerFile : file.listFiles()) {
      FileInputStream in=null;
      try {
        in=new FileInputStream(timerFile);
        unmarshaller.start(new InputStreamByteInput(in));
        final TimerEntity entity=unmarshaller.readObject(TimerEntity.class);
        timers.put(entity.getId(),entity);
        unmarshaller.finish();
      }
 catch (      Exception e) {
        logger.error("Could not restore timer from " + timerFile,e);
      }
 finally {
        if (in != null) {
          try {
            in.close();
          }
 catch (          IOException e) {
            logger.error("error closing file ",e);
          }
        }
      }
    }
  }
 catch (  Exception e) {
    logger.error("Could not restore timers for " + timedObjectId,e);
  }
  return timers;
}
