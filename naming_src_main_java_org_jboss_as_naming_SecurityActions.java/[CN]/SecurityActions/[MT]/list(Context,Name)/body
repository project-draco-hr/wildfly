{
  if (System.getSecurityManager() == null) {
    return context.list(name);
  }
 else {
    try {
      return AccessController.doPrivileged(new PrivilegedExceptionAction<NamingEnumeration<NameClassPair>>(){
        @Override public NamingEnumeration<NameClassPair> run() throws Exception {
          return context.list(name);
        }
      }
);
    }
 catch (    PrivilegedActionException e) {
      Throwable cause=e.getCause();
      throw rethrowTypedOrUnchecked(NamingException.class,cause,MESSAGES.unexpectedExceptionDuringPrivilegedList(cause));
    }
  }
}
