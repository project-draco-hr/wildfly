{
  final Map<String,PathElement> pathMap;
  if (node.isDefined()) {
    final List<Property> props=node.asPropertyList();
    if (props.size() == 0) {
      return EMPTY_ADDRESS;
    }
 else {
      pathMap=new LinkedHashMap<String,PathElement>();
      for (      final Property prop : props) {
        final String name=prop.getName();
        if (pathMap.put(name,new PathElement(name,prop.getValue().asString())) != null) {
          throw duplicateElement(name);
        }
      }
    }
  }
 else {
    return EMPTY_ADDRESS;
  }
  return new PathAddress(Collections.unmodifiableList(new ArrayList<PathElement>(pathMap.values())));
}
