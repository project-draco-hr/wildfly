{
  if (event.isPre() && event.isOriginLocal() && (event.getKey() instanceof String)) {
    String id=event.getKey();
    this.activeSessions.remove(id);
    if (event.isOriginLocal()) {
      InfinispanWebLogger.ROOT_LOGGER.tracef("Session %s will be removed",id);
      ImmutableSession session=this.factory.createImmutableSession(id,this.factory.findValue(id));
      ImmutableSessionAttributes attributes=session.getAttributes();
      HttpSession httpSession=new ImmutableHttpSessionAdapter(session);
      HttpSessionEvent sessionEvent=new HttpSessionEvent(httpSession);
      for (      HttpSessionListener listener : this.context.getSessionListeners()) {
        listener.sessionDestroyed(sessionEvent);
      }
      for (      String attribute : attributes.getAttributeNames()) {
        Object value=attributes.getAttribute(attribute);
        if (value instanceof HttpSessionBindingListener) {
          HttpSessionBindingListener listener=(HttpSessionBindingListener)value;
          listener.valueUnbound(new HttpSessionBindingEvent(httpSession,attribute,value));
        }
      }
    }
  }
}
