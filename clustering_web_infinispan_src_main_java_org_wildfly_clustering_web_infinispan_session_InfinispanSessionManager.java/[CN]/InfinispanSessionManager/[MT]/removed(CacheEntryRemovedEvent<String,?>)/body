{
  if (event.isPre()) {
    String id=event.getKey();
    InfinispanWebLogger.ROOT_LOGGER.tracef("Session %s will be removed",id);
    V value=this.factory.findValue(id);
    if (value != null) {
      ImmutableSession session=this.factory.createImmutableSession(id,value);
      ImmutableSessionAttributes attributes=session.getAttributes();
      HttpSession httpSession=new ImmutableHttpSessionAdapter(session);
      HttpSessionEvent sessionEvent=new HttpSessionEvent(httpSession);
      for (      HttpSessionListener listener : this.context.getSessionListeners()) {
        listener.sessionDestroyed(sessionEvent);
      }
      for (      String name : attributes.getAttributeNames()) {
        Object attribute=attributes.getAttribute(name);
        if (attribute instanceof HttpSessionBindingListener) {
          HttpSessionBindingListener listener=(HttpSessionBindingListener)attribute;
          listener.valueUnbound(new HttpSessionBindingEvent(httpSession,name,attribute));
        }
      }
    }
  }
}
