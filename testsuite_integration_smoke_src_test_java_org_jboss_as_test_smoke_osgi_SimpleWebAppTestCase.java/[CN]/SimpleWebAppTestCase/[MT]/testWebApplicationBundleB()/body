{
  ModelNode info=getBundleInfo(getControllerClient(),WEB_APPLICATION_BUNDLE_B);
  Assert.assertEquals("ACTIVE",info.get(ModelConstants.STATE).asString());
  Assert.assertEquals(WEB_APPLICATION_BUNDLE_B,info.get(ModelConstants.SYMBOLIC_NAME).asString());
  String result=performCall("osgi-webapp","simple","Hello");
  Assert.assertEquals("Simple Servlet called with input=Hello",result);
  Assert.assertTrue("Bundle stopped",bundleStop(getControllerClient(),WEB_APPLICATION_BUNDLE_B));
  Assert.assertEquals("RESOLVED",getBundleState(getControllerClient(),WEB_APPLICATION_BUNDLE_B));
  try {
    performCall("osgi-webapp","simple","Hello");
    Assert.fail("IOException expected");
  }
 catch (  IOException ex) {
  }
  Assert.assertTrue("Bundle started",bundleStart(getControllerClient(),WEB_APPLICATION_BUNDLE_B));
  Assert.assertEquals("ACTIVE",getBundleState(getControllerClient(),WEB_APPLICATION_BUNDLE_B));
  result=performCall("osgi-webapp","simple","Hello");
  Assert.assertEquals("Simple Servlet called with input=Hello",result);
}
