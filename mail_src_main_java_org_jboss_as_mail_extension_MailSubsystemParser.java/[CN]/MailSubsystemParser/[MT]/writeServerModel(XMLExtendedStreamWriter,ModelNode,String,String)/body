{
  ModelNode server=sessionData.get(name);
  boolean credentials=server.hasDefined(MailSubsystemModel.USER_NAME);
  if (credentials) {
    writer.writeStartElement(Element.forName(elementName).getLocalName());
  }
 else {
    writer.writeEmptyElement(Element.forName(elementName).getLocalName());
  }
  boolean sslDefined=server.get(MailSubsystemModel.SSL).asBoolean(false);
  if (sslDefined) {
    writer.writeAttribute(Attribute.SSL.getLocalName(),server.get(MailSubsystemModel.SSL).asString());
  }
  writer.writeAttribute(Attribute.OUTBOUND_SOCKET_BINDING_REF.getLocalName(),server.get(MailSubsystemModel.OUTBOUND_SOCKET_BINDING_REF).asString());
  if (credentials) {
    writer.writeEmptyElement(Element.LOGIN.getLocalName());
    writer.writeAttribute(Attribute.USERNAME.getLocalName(),server.get(MailSubsystemModel.USER_NAME).asString());
    writer.writeAttribute(Attribute.PASSWORD.getLocalName(),server.get(MailSubsystemModel.PASSWORD).asString());
    writer.writeEndElement();
  }
}
