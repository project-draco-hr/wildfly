{
  final DataSource dataSourceConfig;
  try {
    dataSourceConfig=from(operation);
  }
 catch (  ValidateException e) {
    e.printStackTrace();
    throw new OperationFailedException(e,new ModelNode().set("Failed to create DataSource instance for [" + operation + "]\n reason:"+ e.getLocalizedMessage()));
  }
  final ServiceName dataSourceCongServiceName=DataSourceConfigService.SERVICE_NAME_BASE.append(jndiName);
  final DataSourceConfigService configService=new DataSourceConfigService(dataSourceConfig);
  serviceTarget.addService(dataSourceCongServiceName,configService).setInitialMode(Mode.ACTIVE).install();
  dataSourceServiceBuilder.addDependency(dataSourceCongServiceName,DataSource.class,((LocalDataSourceService)dataSourceService).getDataSourceConfigInjector());
}
