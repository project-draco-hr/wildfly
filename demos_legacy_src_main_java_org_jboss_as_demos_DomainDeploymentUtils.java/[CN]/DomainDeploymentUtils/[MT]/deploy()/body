{
  ModelNode op=new ModelNode();
  NewOperationBuilder builder=new NewOperationBuilder(op);
  op.get(ClientConstants.OP).set("composite");
  op.get(ClientConstants.OP_ADDR).setEmptyList();
  ModelNode steps=op.get("steps");
  for (  Deployment deployment : deployments) {
    steps.add(deployment.addDeployment(builder));
  }
  op.get(ClientConstants.OPERATION_HEADERS,ClientConstants.ROLLBACK_ON_RUNTIME_FAILURE).set(getRolloutPlan());
  execute(builder.build());
}
