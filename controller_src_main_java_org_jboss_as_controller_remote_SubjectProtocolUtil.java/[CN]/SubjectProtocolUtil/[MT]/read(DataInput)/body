{
  ProtocolUtils.expectHeader(input,ModelControllerProtocol.PARAM_SUBJECT_LENGTH);
  final int size=input.readInt();
  final Subject subject;
  if (size == 1) {
    subject=new Subject();
    Collection<Principal> principals=subject.getPrincipals();
    ProtocolUtils.expectHeader(input,PRINCIPALS_PARAM);
    int principalCount=input.readInt();
    for (int i=0; i < principalCount; i++) {
      byte type=input.readByte();
      PrincipalReader reader=findReader(type);
      if (reader == null) {
        throw ControllerLogger.ROOT_LOGGER.unsupportedPrincipalType(type);
      }
      principals.add(reader.read(input));
    }
  }
 else {
    subject=null;
  }
  return subject;
}
