{
  try {
    InitialContext ctx=new InitialContext();
    Context enc=(Context)ctx.lookup("java:comp/env");
    StatelessSessionHome home=(StatelessSessionHome)enc.lookup("ejb/OptimizedEJB");
    StatelessSession bean=home.create();
    bean.noop();
    Object homeRef=enc.lookup("ejb/OptimizedEJB");
    home=(StatelessSessionHome)PortableRemoteObject.narrow(homeRef,StatelessSessionHome.class);
    bean=home.create();
    bean.noop();
    bean.getData();
    StatelessSessionLocalHome localHome=(StatelessSessionLocalHome)enc.lookup("ejb/local/OptimizedEJB");
    StatelessSessionLocal localBean=localHome.create();
    localBean.noop();
  }
 catch (  Exception e) {
    throw new ServletException("Failed to call OptimizedEJB through remote and local interfaces",e);
  }
  response.setContentType("text/html");
  PrintWriter out=response.getWriter();
  out.println("<html>");
  out.println("<head><title>EJBServlet</title></head>");
  out.println("<body>Tests passed<br>Time:" + new Date().toString() + "</body>");
  out.println("</html>");
  out.close();
}
