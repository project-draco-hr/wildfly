{
  try {
    if (this.tm.getTransaction().getStatus() != Status.STATUS_MARKED_ROLLBACK) {
      this.tm.commit();
    }
 else {
      ROOT_LOGGER.debug("endBatch(): rolling back batch");
      this.tm.rollback();
    }
  }
 catch (  RollbackException e) {
    ROOT_LOGGER.rollingBackTransaction(e,"endBatch()");
  }
catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    throw MESSAGES.caughtExceptionEndingBatch(e,"endTransaction()");
  }
}
