{
  HttpServiceFactoryService service=new HttpServiceFactoryService();
  ServiceBuilder<StandardContext> builder=serviceTarget.addService(JBOSS_WEB_HTTPSERVICE_FACTORY,service);
  builder.addDependency(ServerEnvironmentService.SERVICE_NAME,ServerEnvironment.class,service.injectedServerEnvironment);
  builder.addDependency(PathManagerService.SERVICE_NAME,PathManager.class,service.injectedPathManager);
  builder.addDependency(WebSubsystemServices.JBOSS_WEB_HOST.append(VIRTUAL_HOST),VirtualHost.class,service.injectedVirtualHost);
  builder.addDependency(WebSubsystemServices.JBOSS_WEB,WebServer.class,service.injectedWebServer);
  builder.addDependency(DependencyType.OPTIONAL,HttpManagementService.SERVICE_NAME,HttpManagement.class,service.injectedHttpManagement);
  builder.addDependency(Services.SYSTEM_CONTEXT,BundleContext.class,service.injectedSystemContext);
  builder.addDependency(Services.FRAMEWORK_ACTIVE);
  builder.addListener(verificationHandler);
  builder.setInitialMode(Mode.PASSIVE);
  return builder.install();
}
