{
  final RemotingConnectorService service=new RemotingConnectorService();
  final ServiceBuilder<RemotingConnectorServer> builder=target.addService(SERVICE_NAME,service);
  builder.addDependency(MBeanServerService.SERVICE_NAME,MBeanServer.class,service.mBeanServer);
  if (useManagementEndpoint) {
    builder.addDependency(ManagementRemotingServices.MANAGEMENT_ENDPOINT,Endpoint.class,service.endpoint);
  }
 else {
    builder.addDependency(RemotingServices.SUBSYSTEM_ENDPOINT,Endpoint.class,service.endpoint);
  }
  if (verificationHandler != null) {
    builder.addListener(verificationHandler);
  }
  return builder.install();
}
