{
  if (!isDone()) {
    wait(unit.toMillis(timeout));
    if (!isDone()) {
      throw MESSAGES.failToCompleteTaskBeforeTimeOut(timeout,unit);
    }
  }
  if (cancelledFlag.get()) {
    throw MESSAGES.taskWasCancelled();
  }
 else   if (failed != null) {
    throw new ExecutionException(failed);
  }
  return result;
}
