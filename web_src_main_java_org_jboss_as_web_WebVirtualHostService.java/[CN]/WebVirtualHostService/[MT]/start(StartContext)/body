{
  final StandardHost host=new StandardHost();
  host.setAppBase(tempPathInjector.getValue());
  host.setName(name);
  for (  final String alias : aliases) {
    host.addAlias(alias);
  }
  if (accessLog != null) {
    host.addValve(createAccessLogValve(host,accessLogPathInjector.getValue(),accessLog));
  }
  if (rewrite != null) {
    host.addValve(createRewriteValve(host,rewrite));
  }
  if (sso != null) {
    host.addValve(createSsoValve(host,sso));
  }
  if (defaultWebModule != null) {
    host.setDefaultWebapp(defaultWebModule);
  }
  try {
    final WebServer server=webServer.getValue();
    server.addHost(host);
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
  this.host=new VirtualHost(host,hasWelcomeRoot);
}
