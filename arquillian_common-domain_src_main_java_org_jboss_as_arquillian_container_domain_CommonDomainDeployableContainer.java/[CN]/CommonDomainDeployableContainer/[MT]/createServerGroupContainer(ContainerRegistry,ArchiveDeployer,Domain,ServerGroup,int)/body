{
  ContainerDef def=new ContainerDefImpl("arquillian").container(serverGroup.getContainerName()).setMode("suite");
  return registry.create(def,new ServiceLoader(){
    @Override public <X>X onlyOne(    Class<X> serviceClass,    Class<? extends X> defaultServiceClass){
      return serviceLoaderInstance.get().onlyOne(serviceClass,defaultServiceClass);
    }
    @Override public <X>X onlyOne(    Class<X> serviceClass){
      if (serviceClass == DeployableContainer.class) {
        return serviceClass.cast(injectorInst.get().inject(new ServerGroupContainer(managementClient,archiveDeployer,domain,serverGroup,operationTimeout)));
      }
      return serviceLoaderInstance.get().onlyOne(serviceClass);
    }
    @Override public <X>Collection<X> all(    Class<X> serviceClass){
      return serviceLoaderInstance.get().all(serviceClass);
    }
  }
);
}
