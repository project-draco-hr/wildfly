{
  File workDir=null;
  int count=0;
  while (workDir == null || workDir.exists()) {
    count++;
    workDir=new File(parent == null ? TEMP_DIR : parent,DIRECTORY_SUFFIX + count);
  }
  if (!workDir.mkdirs()) {
    throw new PatchingException(PatchMessages.MESSAGES.cannotCreateDirectory(workDir.getAbsolutePath()));
  }
  return workDir;
}
