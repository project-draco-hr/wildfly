{
  final String subsystem=operation.get(ModelDescriptionConstants.SUBSYSTEM).asString();
  final int major=operation.get(ModelDescriptionConstants.MANAGEMENT_MAJOR_VERSION).asInt();
  final int minor=operation.get(ModelDescriptionConstants.MANAGEMENT_MINOR_VERSION).asInt();
  final int micro=operation.get(ModelDescriptionConstants.MANAGEMENT_MICRO_VERSION).asInt();
  final ModelVersion version=ModelVersion.create(major,minor,micro);
  final ModelNode readResourceResult=new ModelNode();
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      ModelNode transformed=transformReadResourceResult(context,readResourceResult,subsystem,version);
      context.getResult().set(transformed);
      context.stepCompleted();
    }
  }
,OperationContext.Stage.IMMEDIATE);
  final ModelNode op=new ModelNode();
  op.get(OP).set(READ_RESOURCE_OPERATION);
  op.get(OP_ADDR).set(PathAddress.EMPTY_ADDRESS.toModelNode());
  op.get(RECURSIVE).set(true);
  context.addStep(readResourceResult,op,GlobalOperationHandlers.READ_RESOURCE,OperationContext.Stage.IMMEDIATE);
  context.stepCompleted();
}
