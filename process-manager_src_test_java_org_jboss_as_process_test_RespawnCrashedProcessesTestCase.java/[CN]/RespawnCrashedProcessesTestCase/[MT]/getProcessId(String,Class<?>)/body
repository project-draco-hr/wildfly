{
  String classname=clazz.getName();
  MonitoredHost local=MonitoredHost.getMonitoredHost("localhost");
  Set<Object> vmList=local.activeVms();
  Object found=null;
  for (  Object id : vmList) {
    MonitoredVm vm=local.getMonitoredVm(new VmIdentifier("//" + id));
    String main=MonitoredVmUtil.mainClass(vm,true);
    if (main.equals(classname)) {
      String args=MonitoredVmUtil.mainArgs(vm);
      if (args.contains(processName)) {
        if (found != null)         fail("Found more than one process");
        found=id;
      }
    }
  }
  if (found != null)   return found;
  fail("Could not find process");
  return null;
}
