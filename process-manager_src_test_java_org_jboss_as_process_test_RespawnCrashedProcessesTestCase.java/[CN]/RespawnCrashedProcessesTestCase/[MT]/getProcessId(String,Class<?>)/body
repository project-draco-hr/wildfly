{
  String classname=clazz.getName();
  MonitoredHost local=MonitoredHost.getMonitoredHost("localhost");
  @SuppressWarnings("unchecked") Set vmList=local.activeVms();
  Object found=null;
  for (  Object id : vmList) {
    MonitoredVm vm;
    try {
      vm=local.getMonitoredVm(new VmIdentifier("//" + id));
    }
 catch (    Exception e) {
      continue;
    }
    String main=MonitoredVmUtil.mainClass(vm,true);
    if (main.equals(classname)) {
      String args=MonitoredVmUtil.mainArgs(vm);
      if (args.contains(processName)) {
        if (found != null)         fail("Found more than one process");
        found=id;
      }
    }
  }
  if (found != null)   return found;
  fail("Could not find process");
  return null;
}
