{
  addProcess("Main",CrashingProcess.class,new TestRespawnPolicy());
  TestProcessListenerStream listener=startTestProcessListenerAndWait("Main");
  ProcessExitCodeAndShutDownLatch stopLatch=getStopTestProcessListenerLatch("Main");
  detachTestProcessListener("Main");
  listener.exitProcess(0);
  assertEquals("Main-Exit0",listener.readMessage());
  assertTrue(stopLatch.await(1000,TimeUnit.MILLISECONDS));
  assertEquals(0,stopLatch.getExitCode());
  assertNull(getTestProcessListener("Main",1000));
}
