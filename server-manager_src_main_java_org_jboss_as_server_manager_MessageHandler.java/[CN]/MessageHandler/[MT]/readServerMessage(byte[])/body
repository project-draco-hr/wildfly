{
  final ByteArrayInputStream byteArrayInputStream=new ByteArrayInputStream(message);
  ObjectInputStream objectInputStream=null;
  try {
    objectInputStream=new ObjectInputStream(byteArrayInputStream);
    final ServerMessage serverMessage=(ServerMessage)objectInputStream.readObject();
    return serverMessage;
  }
  finally {
    if (objectInputStream != null)     objectInputStream.close();
  }
}
