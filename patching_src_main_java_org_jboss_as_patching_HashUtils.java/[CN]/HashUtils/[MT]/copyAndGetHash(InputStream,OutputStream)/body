{
  byte[] sha1Bytes;
synchronized (DIGEST) {
    DIGEST.reset();
    BufferedInputStream bis=new BufferedInputStream(is);
    DigestOutputStream dos=new DigestOutputStream(os,DIGEST);
    IoUtils.copyStream(bis,dos);
    sha1Bytes=DIGEST.digest();
  }
  return sha1Bytes;
}
