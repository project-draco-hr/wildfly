{
  final boolean coordinatorEnableStatistics=operation.get(ENABLE_STATISTICS).asBoolean(true);
  final boolean transactionStatusManagerEnable=operation.get(ENABLE_TSM_STATUS).asBoolean(false);
  final int coordinatorDefaultTimeout=operation.get(DEFAULT_TIMEOUT).asInt(300);
  final ArjunaTransactionManagerService transactionManagerService=new ArjunaTransactionManagerService(coordinatorEnableStatistics,coordinatorDefaultTimeout,transactionStatusManagerEnable);
  controllers.add(context.getServiceTarget().addService(TxnServices.JBOSS_TXN_ARJUNA_TRANSACTION_MANAGER,transactionManagerService).addDependency(ServiceBuilder.DependencyType.OPTIONAL,ServiceName.JBOSS.append("iiop","orb"),ORB.class,transactionManagerService.getOrbInjector()).addDependency(TxnServices.JBOSS_TXN_XA_TERMINATOR,JBossXATerminator.class,transactionManagerService.getXaTerminatorInjector()).addDependency(TxnServices.JBOSS_TXN_CORE_ENVIRONMENT).addDependency(TxnServices.JBOSS_TXN_ARJUNA_OBJECTSTORE_ENVIRONMENT).addDependency(TxnServices.JBOSS_TXN_ARJUNA_RECOVERY_MANAGER).addListener(verificationHandler).setInitialMode(ServiceController.Mode.ACTIVE).install());
}
