{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final ModuleSpecification moduleSpecification=deploymentUnit.getAttachment(Attachments.MODULE_SPECIFICATION);
  if (globalModules.isDefined()) {
    for (    final ModelNode module : globalModules.asList()) {
      final String name=module.get(CommonAttributes.NAME).asString();
      String slot=module.get(CommonAttributes.SLOT).asString();
      if (slot == null) {
        slot="main";
      }
      final ModuleIdentifier identifier=ModuleIdentifier.create(name,slot);
      moduleSpecification.addDependency(new ModuleDependency(Module.getBootModuleLoader(),identifier,false,false,true));
    }
  }
}
