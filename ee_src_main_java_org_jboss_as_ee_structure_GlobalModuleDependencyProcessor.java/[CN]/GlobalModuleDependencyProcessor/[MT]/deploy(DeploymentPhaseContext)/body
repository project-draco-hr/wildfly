{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final ModuleSpecification moduleSpecification=deploymentUnit.getAttachment(Attachments.MODULE_SPECIFICATION);
  final ModelNode globalMods=this.globalModules;
  if (globalMods.isDefined()) {
    for (    final ModelNode module : globalMods.asList()) {
      final String name=module.get(CommonAttributes.NAME).asString();
      String slot=module.hasDefined(CommonAttributes.SLOT) ? module.get(CommonAttributes.SLOT).asString() : GlobalModulesDefinition.DEFAULT_SLOT;
      final ModuleIdentifier identifier=ModuleIdentifier.create(name,slot);
      moduleSpecification.addSystemDependency(new ModuleDependency(Module.getBootModuleLoader(),identifier,false,false,true));
    }
  }
}
