{
  try {
    Runtime.getRuntime().exec(getKillCommand(process));
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  final long time=System.currentTimeMillis() + TIMEOUT;
  do {
    try {
      Thread.sleep(200);
    }
 catch (    InterruptedException e) {
      throw new RuntimeException(e);
    }
    List<RunningProcess> runningProcesses=processUtil.getRunningProcesses();
    if (processUtil.getProcessById(runningProcesses,process.getProcessId()) == null) {
      return;
    }
  }
 while (System.currentTimeMillis() < time);
  Assert.fail("Did not kill process " + process + " "+ processUtil.getRunningProcesses());
}
