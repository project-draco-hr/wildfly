{
  final BatchBuilder batchBuilder=context.getBatchBuilder();
  final OptionMap.Builder builder=OptionMap.builder();
  if (saslElement != null)   saslElement.applyTo(builder);
  final ConnectorService connectorService=new ConnectorService();
  connectorService.setOptionMap(builder.getMap());
  final ServiceName connectorName=JBOSS_REMOTING_CONNECTOR.append(name);
  final BatchServiceBuilder<ChannelListener<ConnectedStreamChannel<InetSocketAddress>>> serviceBuilder=batchBuilder.addService(connectorName,connectorService);
  serviceBuilder.addDependency(connectorName.append("auth-provider"),ServerAuthenticationProvider.class,connectorService.getAuthenticationProviderInjector());
  serviceBuilder.addDependency(RemotingSubsystemElement.JBOSS_REMOTING_ENDPOINT,Endpoint.class,connectorService.getEndpointInjector());
  serviceBuilder.setInitialMode(ServiceController.Mode.IMMEDIATE);
}
