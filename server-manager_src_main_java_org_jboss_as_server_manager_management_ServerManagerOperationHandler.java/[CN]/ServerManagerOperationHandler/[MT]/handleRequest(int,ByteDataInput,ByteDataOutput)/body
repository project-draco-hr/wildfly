{
  final byte commandCode;
  try {
    expectHeader(input,ManagementProtocol.REQUEST_OPERATION);
    commandCode=input.readByte();
  }
 catch (  IOException e) {
    throw new ManagementException("Request failed to read command code",e);
  }
  final ManagementOperation operation=operationFor(commandCode);
  if (operation == null) {
    throw new ManagementException("Invalid command code " + commandCode + " received.");
  }
  try {
    operation.handle(input,output);
  }
 catch (  Exception e) {
    throw new ManagementException("Failed to execute server manager operation",e);
  }
}
