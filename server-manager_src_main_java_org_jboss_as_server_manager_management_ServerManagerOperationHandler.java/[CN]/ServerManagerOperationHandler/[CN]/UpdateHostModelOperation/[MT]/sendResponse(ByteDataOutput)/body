{
  List<ModelUpdateResponse<?>> responses=new ArrayList<ModelUpdateResponse<?>>(updates.size());
  for (  AbstractHostModelUpdate<?> update : updates) {
    responses.add(processUpdate(update));
  }
  try {
    final Marshaller marshaller=getMarshaller();
    marshaller.start(output);
    marshaller.writeByte(ManagementProtocol.PARAM_MODEL_UPDATE_RESPONSE_COUNT);
    marshaller.writeInt(responses.size());
    for (    ModelUpdateResponse<?> response : responses) {
      marshaller.writeByte(ManagementProtocol.PARAM_MODEL_UPDATE_RESPONSE);
      marshaller.writeObject(response);
    }
    marshaller.finish();
  }
 catch (  Exception e) {
    throw new ManagementException("Unable to send host model update response.",e);
  }
}
