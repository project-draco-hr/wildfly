{
  if (args == null)   throw new IllegalArgumentException("Null args");
  if (args.length < 5)   throw new IllegalArgumentException("Invalid args: " + Arrays.asList(args));
  int index=0;
  if (args[index] == null || args[index].isEmpty()) {
    throw new IllegalArgumentException("No input file");
  }
  File inputFile=new File(args[index++]);
  if (args[index] == null) {
    throw new IllegalArgumentException("No profile");
  }
  String profile=args[index++];
  if (args[index] == null || args[index].isEmpty()) {
    throw new IllegalArgumentException("No resources dir");
  }
  File resourcesDir=new File(args[index++]);
  String[] staticModules=new String[]{};
  if (args[index] != null && !args[index].isEmpty()) {
    staticModules=args[index].trim().split(SPLIT_PATTERN);
  }
  index++;
  if (args[index] == null || args[index].isEmpty()) {
    throw new IllegalArgumentException("No output file");
  }
  File outputFile=new File(args[index]);
  new GenerateModulesDefinition(inputFile,profile,resourcesDir,staticModules,outputFile).process();
}
