{
  Set<Element> visited=EnumSet.noneOf(Element.class);
  boolean locationSpecified=false;
  while (reader.hasNext()) {
switch (reader.nextTag()) {
case XMLStreamConstants.END_ELEMENT:
{
        return;
      }
case XMLStreamConstants.START_ELEMENT:
{
      final Element element=Element.of(reader.getName());
      if (visited.contains(element)) {
        throw unexpectedContent(reader);
      }
      visited.add(element);
switch (element) {
case PATH:
        if (locationSpecified) {
          throw new XMLStreamException("<server> can only have a single <path> or <artifact> element");
        }
      locationSpecified=true;
    result.setPath(parseName(reader));
  break;
case ARTIFACT:
if (locationSpecified) {
  throw new XMLStreamException("<server> can only have a single <path> or <artifact> element");
}
locationSpecified=true;
result.setArtifact(parseName(reader));
break;
case FILES:
parseFiles(reader,result);
break;
case MODULES:
parseModules(reader,result);
break;
default :
throw unexpectedContent(reader);
}
break;
}
default :
{
throw unexpectedContent(reader);
}
}
}
throw endOfDocument(reader.getLocation());
}
