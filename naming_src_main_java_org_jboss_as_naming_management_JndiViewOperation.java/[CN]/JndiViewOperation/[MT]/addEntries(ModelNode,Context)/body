{
  final NamingEnumeration<NameClassPair> entries=context.list("");
  while (entries.hasMore()) {
    final NameClassPair pair=entries.next();
    final ModelNode node=current.get(pair.getName());
    node.get("class-name").set(pair.getClassName());
    try {
      final Object value;
      if (context instanceof NamingContext) {
        value=((NamingContext)context).lookup(pair.getName(),false);
      }
 else {
        value=context.lookup(pair.getName());
      }
      if (value instanceof Context) {
        addEntries(node.get("children"),Context.class.cast(value));
      }
 else       if (value instanceof Reference) {
      }
 else {
        final String jndiViewValue;
        if (value instanceof JndiViewManagedReferenceFactory) {
          jndiViewValue=JndiViewManagedReferenceFactory.class.cast(value).getJndiViewInstanceValue();
        }
 else {
          if (value instanceof ManagedReferenceFactory) {
            jndiViewValue=JndiViewManagedReferenceFactory.DEFAULT_JNDI_VIEW_INSTANCE_VALUE;
          }
 else {
            jndiViewValue=String.valueOf(value);
          }
        }
        node.get("value").set(jndiViewValue);
      }
    }
 catch (    NamingException e) {
    }
  }
}
