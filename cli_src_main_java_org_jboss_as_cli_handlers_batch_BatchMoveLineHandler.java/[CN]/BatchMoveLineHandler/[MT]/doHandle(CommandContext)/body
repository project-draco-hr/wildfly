{
  BatchManager batchManager=ctx.getBatchManager();
  if (!batchManager.isBatchActive()) {
    throw new CommandFormatException("No active batch.");
  }
  Batch batch=batchManager.getActiveBatch();
  final int batchSize=batch.size();
  if (batchSize == 0) {
    throw new CommandFormatException("The batch is empty.");
  }
  List<String> arguments=ctx.getParsedCommandLine().getOtherProperties();
  if (arguments.isEmpty()) {
    throw new CommandFormatException("Missing line number.");
  }
  if (arguments.size() != 2) {
    throw new CommandFormatException("Expected two arguments but received: " + arguments);
  }
  String intStr=arguments.get(0);
  final int lineNumber;
  try {
    lineNumber=Integer.parseInt(intStr);
  }
 catch (  NumberFormatException e) {
    throw new CommandFormatException("Failed to parse line number '" + intStr + "': "+ e.getLocalizedMessage());
  }
  if (lineNumber < 1 || lineNumber > batchSize) {
    throw new CommandFormatException(lineNumber + " isn't in range [1.." + batchSize+ "].");
  }
  intStr=arguments.get(1);
  final int toLineNumber;
  try {
    toLineNumber=Integer.parseInt(intStr);
  }
 catch (  NumberFormatException e) {
    throw new CommandFormatException("Failed to parse line number '" + intStr + "': "+ e.getLocalizedMessage());
  }
  if (toLineNumber < 1 || toLineNumber > batchSize) {
    throw new CommandFormatException(toLineNumber + " isn't in range [1.." + batchSize+ "].");
  }
  batch.move(lineNumber - 1,toLineNumber - 1);
}
