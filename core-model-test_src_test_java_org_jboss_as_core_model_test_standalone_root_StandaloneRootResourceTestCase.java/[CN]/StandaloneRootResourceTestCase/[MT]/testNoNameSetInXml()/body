{
  String originalXml="<server xmlns=\"" + Namespace.CURRENT.getUriString() + "\"/>";
  KernelServices kernelServices=createKernelServicesBuilder().setXml(originalXml).build();
  Assert.assertTrue(kernelServices.isSuccessfulBoot());
  ModelNode read=Util.createOperation(READ_ATTRIBUTE_OPERATION,PathAddress.EMPTY_ADDRESS);
  read.get(NAME).set(NAME);
  Assert.assertEquals(getDefaultServerName(),kernelServices.executeForResult(read).asString());
  ModelNode add=Util.createAddOperation(PathAddress.pathAddress(PathElement.pathElement(ModelDescriptionConstants.SYSTEM_PROPERTY,"test")));
  add.get(VALUE).set("123");
  ModelTestUtils.checkOutcome(kernelServices.executeOperation(add));
  ModelNode remove=Util.createRemoveOperation(PathAddress.pathAddress(PathElement.pathElement(ModelDescriptionConstants.SYSTEM_PROPERTY,"test")));
  ModelTestUtils.checkOutcome(kernelServices.executeOperation(remove));
  String persistedXml=kernelServices.getPersistedSubsystemXml();
  ModelTestUtils.compareXml(originalXml,persistedXml);
}
