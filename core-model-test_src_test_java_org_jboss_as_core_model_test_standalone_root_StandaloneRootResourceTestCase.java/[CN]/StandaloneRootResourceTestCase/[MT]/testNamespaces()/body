{
  KernelServices kernelServices=createEmptyRoot();
  ModelNode read=Util.createOperation(READ_ATTRIBUTE_OPERATION,PathAddress.EMPTY_ADDRESS);
  read.get(NAME).set(ModelDescriptionConstants.NAMESPACES);
  Assert.assertEquals(new ModelNode().setEmptyList(),kernelServices.executeForResult(read));
  ModelNode add=Util.createOperation(NamespaceAddHandler.OPERATION_NAME,PathAddress.EMPTY_ADDRESS);
  add.get(ModelDescriptionConstants.NAMESPACE).set("one");
  add.get(ModelDescriptionConstants.URI).set("urn:uno");
  ModelTestUtils.checkOutcome(kernelServices.executeOperation(add));
  ModelNode result=kernelServices.executeForResult(read);
  List<ModelNode> list=result.asList();
  Assert.assertEquals(1,list.size());
  Property prop=list.get(0).asProperty();
  Assert.assertEquals("one",prop.getName());
  Assert.assertEquals("urn:uno",prop.getValue().asString());
  add.get(ModelDescriptionConstants.NAMESPACE).set("two");
  add.get(ModelDescriptionConstants.URI).set("urn:dos");
  ModelTestUtils.checkOutcome(kernelServices.executeOperation(add));
  result=kernelServices.executeForResult(read);
  list=result.asList();
  Assert.assertEquals(2,list.size());
  prop=list.get(0).asProperty();
  Assert.assertEquals("one",prop.getName());
  Assert.assertEquals("urn:uno",prop.getValue().asString());
  prop=list.get(1).asProperty();
  Assert.assertEquals("two",prop.getName());
  Assert.assertEquals("urn:dos",prop.getValue().asString());
  ModelNode remove=Util.createOperation(NamespaceRemoveHandler.OPERATION_NAME,PathAddress.EMPTY_ADDRESS);
  remove.get(ModelDescriptionConstants.NAMESPACE).set("one");
  ModelTestUtils.checkOutcome(kernelServices.executeOperation(remove));
  result=kernelServices.executeForResult(read);
  list=result.asList();
  Assert.assertEquals(1,list.size());
  prop=list.get(0).asProperty();
  Assert.assertEquals("two",prop.getName());
  Assert.assertEquals("urn:dos",prop.getValue().asString());
  remove.get(ModelDescriptionConstants.NAMESPACE).set("two");
  ModelTestUtils.checkOutcome(kernelServices.executeOperation(remove));
  result=kernelServices.executeForResult(read);
  Assert.assertEquals(new ModelNode().setEmptyList(),result);
  remove.get(ModelDescriptionConstants.NAMESPACE).set("blah");
  kernelServices.executeForFailure(remove);
}
