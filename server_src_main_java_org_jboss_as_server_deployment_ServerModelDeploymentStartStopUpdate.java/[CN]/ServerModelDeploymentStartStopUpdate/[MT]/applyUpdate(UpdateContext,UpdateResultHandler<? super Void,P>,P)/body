{
  final ServiceName deploymentUnitServiceName=Services.JBOSS_DEPLOYMENT_UNIT.append(deploymentUnitName);
  final ServiceRegistry serviceRegistry=updateContext.getServiceRegistry();
  final ServiceController<?> controller=serviceRegistry.getService(deploymentUnitServiceName);
  if (deploymentElement != null) {
    if (isStart) {
      if (controller != null) {
        controller.setMode(ServiceController.Mode.ACTIVE);
      }
 else {
        final ServiceTarget serviceTarget=updateContext.getServiceTarget();
        final DeploymentUnitService service=new DeploymentUnitService(deploymentUnitName,null);
        serviceTarget.addService(deploymentUnitServiceName,service).addDependency(Services.JBOSS_DEPLOYMENT_CHAINS,DeployerChains.class,service.getDeployerChainsInjector()).setInitialMode(ServiceController.Mode.ACTIVE);
      }
    }
 else     if (controller != null) {
      controller.setMode(ServiceController.Mode.NEVER);
    }
  }
 else   if (resultHandler != null) {
    resultHandler.handleSuccess(null,param);
  }
}
