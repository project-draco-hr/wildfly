{
  try {
    final Marshaller marshaller=getMarshaller();
    marshaller.start(output);
    marshaller.writeByte(Protocol.PARAM_DEPLOYMENT_PLAN);
    marshaller.writeObject(deploymentPlan);
    marshaller.finish();
  }
 catch (  Exception e) {
    throw new RuntimeException("Failed to send deployment plan",e);
  }
}
