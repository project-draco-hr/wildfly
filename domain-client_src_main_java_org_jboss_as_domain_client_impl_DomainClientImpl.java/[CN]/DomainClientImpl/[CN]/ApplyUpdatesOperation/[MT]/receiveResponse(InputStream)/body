{
  final Unmarshaller unmarshaller=getUnmarshaller();
  unmarshaller.start(createByteInput(input));
  expectHeader(unmarshaller,DomainClientProtocol.RETURN_APPLY_UPDATES_RESULT_COUNT);
  final int updateCount=unmarshaller.readInt();
  final List<DomainUpdateResult<?>> results=new ArrayList<DomainUpdateResult<?>>(updateCount);
  for (int i=0; i < updateCount; i++) {
    expectHeader(unmarshaller,DomainClientProtocol.RETURN_APPLY_UPDATE);
    DomainUpdateResult<?> updateResult=unmarshal(unmarshaller,DomainUpdateResult.class);
    results.add(updateResult);
  }
  unmarshaller.finish();
  return results;
}
