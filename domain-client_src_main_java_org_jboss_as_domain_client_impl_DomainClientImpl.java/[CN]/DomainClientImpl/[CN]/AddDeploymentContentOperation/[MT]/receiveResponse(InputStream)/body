{
  ByteDataInput input=null;
  try {
    input=new SimpleByteDataInput(inputStream);
    expectHeader(input,DomainClientProtocol.PARAM_DEPLOYMENT_HASH_LENGTH);
    int length=input.readInt();
    byte[] hash=new byte[length];
    expectHeader(input,DomainClientProtocol.PARAM_DEPLOYMENT_HASH);
    input.readFully(hash);
    return hash;
  }
 catch (  Exception e) {
    throw new RuntimeException("Failed to read deployment hash from response",e);
  }
 finally {
    safeClose(input);
  }
}
