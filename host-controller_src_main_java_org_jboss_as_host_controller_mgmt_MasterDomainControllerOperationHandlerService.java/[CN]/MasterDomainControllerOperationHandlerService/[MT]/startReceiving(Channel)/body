{
  final ManagementChannelHandler handler=new ManagementChannelHandler(ManagementClientChannelStrategy.create(channel),getExecutor());
  handler.getAttachments().attach(ManagementChannelHandler.TEMP_DIR,tempDir);
  handler.addHandlerFactory(new HostControllerRegistrationHandler(handler,domainController,operationExecutor,getExecutor(),runtimeIgnoreTransformationRegistry));
  handler.addHandlerFactory(new ModelControllerClientOperationHandler(getController(),handler));
  handler.addHandlerFactory(new MasterDomainControllerOperationHandlerImpl(domainController,getExecutor()));
  handler.addHandlerFactory(pongRequestHandler);
  handler.addHandlerFactory(new DomainTransactionalProtocolOperationHandler(txOperationExecutor,handler));
  channel.receiveMessage(handler.getReceiver());
  return handler;
}
