{
  final AtomicReference<ManagedReference> targetReference=(AtomicReference<ManagedReference>)context.getContextData().get(BasicComponentInstance.INSTANCE_KEY);
  final Map<Class<?>,AtomicReference<ManagedReference>> interceptors=new HashMap<Class<?>,AtomicReference<ManagedReference>>();
  for (  Class<?> clazz : interceptorClasses) {
    final AtomicReference<ManagedReference> interceptor=(AtomicReference<ManagedReference>)context.getContextData().get(clazz);
    if (interceptor != null) {
      interceptors.put(clazz,interceptor);
    }
  }
  WeldManagedReferenceFactory managedReferenceFactory=null;
  if (configuration.getInstanceFactory() instanceof WeldManagedReferenceFactory) {
    managedReferenceFactory=(WeldManagedReferenceFactory)configuration.getInstanceFactory();
  }
  return new WeldInjectionInterceptor(targetReference,interceptors,managedReferenceFactory);
}
