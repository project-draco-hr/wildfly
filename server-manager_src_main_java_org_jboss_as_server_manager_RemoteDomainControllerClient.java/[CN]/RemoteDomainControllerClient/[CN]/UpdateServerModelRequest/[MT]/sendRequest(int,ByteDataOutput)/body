{
  try {
    final Marshaller marshaller=getMarshaller();
    marshaller.start(output);
    marshaller.writeByte(ManagementProtocol.PARAM_SERVER_NAME);
    marshaller.writeChars(serverName);
    marshaller.writeByte(ManagementProtocol.PARAM_SERVER_MODEL_UPDATE_COUNT);
    marshaller.writeInt(updates.size());
    for (    AbstractServerModelUpdate<?> update : updates) {
      marshaller.writeByte(ManagementProtocol.PARAM_SERVER_MODEL_UPDATE);
      marshaller.writeObject(update);
    }
    marshaller.finish();
  }
 catch (  Exception e) {
    throw new ManagementException("Failed to write host model updates",e);
  }
}
