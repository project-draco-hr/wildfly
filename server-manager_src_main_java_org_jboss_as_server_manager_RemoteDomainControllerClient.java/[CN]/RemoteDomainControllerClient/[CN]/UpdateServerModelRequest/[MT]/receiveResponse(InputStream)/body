{
  try {
    final Unmarshaller unmarshaller=getUnmarshaller();
    unmarshaller.start(createByteInput(input));
    expectHeader(unmarshaller,ManagementProtocol.PARAM_MODEL_UPDATE_RESPONSE_COUNT);
    int responseCount=unmarshaller.readInt();
    if (responseCount != updates.size()) {
      throw new ManagementException("Invalid host model update response.  Response count not equal to update count.");
    }
    final List<ModelUpdateResponse<?>> responses=new ArrayList<ModelUpdateResponse<?>>(responseCount);
    for (int i=0; i < responseCount; i++) {
      expectHeader(unmarshaller,ManagementProtocol.PARAM_MODEL_UPDATE_RESPONSE);
      final ModelUpdateResponse<?> response=unmarshaller.readObject(ModelUpdateResponse.class);
      responses.add(response);
    }
    unmarshaller.finish();
    return responses;
  }
 catch (  Exception e) {
    throw new ManagementException("Failed to receive server model update responses.",e);
  }
}
