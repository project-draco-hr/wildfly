{
  try {
    expectHeader(input,ManagementProtocol.PARAM_MODEL_UPDATE_RESPONSE_COUNT);
    int responseCount=input.readInt();
    if (responseCount != updates.size()) {
      throw new ManagementException("Invalid domain model update response.  Response count not equal to update count.");
    }
    final List<ModelUpdateResponse<List<ServerIdentity>>> responses=new ArrayList<ModelUpdateResponse<List<ServerIdentity>>>(responseCount);
    for (int i=0; i < responseCount; i++) {
      expectHeader(input,ManagementProtocol.PARAM_MODEL_UPDATE_RESPONSE);
      @SuppressWarnings("unchecked") final ModelUpdateResponse<List<ServerIdentity>> response=unmarshal(input,ModelUpdateResponse.class);
      responses.add(response);
    }
    return responses;
  }
 catch (  Exception e) {
    throw new ManagementException("Failed to receive domain model update responses.",e);
  }
}
