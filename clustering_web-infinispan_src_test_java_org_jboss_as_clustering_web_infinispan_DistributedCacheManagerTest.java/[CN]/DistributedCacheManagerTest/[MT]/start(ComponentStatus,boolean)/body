{
  EmbeddedCacheManager container=mock(EmbeddedCacheManager.class);
  Address address=mock(Address.class);
  Cache<Address,String> jvmRouteCache=mock(Cache.class);
  String jvmRoute="node0";
  when(this.cache.getAdvancedCache()).thenReturn(this.cache);
  when(this.cache.getStatus()).thenReturn(status);
  when(this.cache.getCacheManager()).thenReturn(container);
  when(this.sessionManager.getJvmRoute()).thenReturn(jvmRoute);
  when(container.getAddress()).thenReturn(address);
  when(jvmRouteCache.putIfAbsent(same(address),same(jvmRoute))).thenReturn(null);
  this.manager.start();
  verify(this.cache).addListener(same(this.manager));
  reset(this.cache);
}
