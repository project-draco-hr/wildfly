{
  EmbeddedCacheManager container=mock(EmbeddedCacheManager.class);
  DistributionManager distManager=mock(DistributionManager.class);
  Address localAddress=mock(Address.class);
  Address remoteAddress=mock(Address.class);
  String localSessionId="ABC123";
  String remoteSessionId="CBA321";
  when(this.cache.getAdvancedCache()).thenReturn(this.cache);
  when(this.cache.getDistributionManager()).thenReturn(distManager);
  when(this.cache.getCacheManager()).thenReturn(container);
  when(container.getAddress()).thenReturn(localAddress);
  when(distManager.getPrimaryLocation(localSessionId)).thenReturn(localAddress);
  when(distManager.getPrimaryLocation(remoteSessionId)).thenReturn(remoteAddress);
  assertTrue(this.manager.isLocal(localSessionId));
  assertFalse(this.manager.isLocal(remoteSessionId));
}
