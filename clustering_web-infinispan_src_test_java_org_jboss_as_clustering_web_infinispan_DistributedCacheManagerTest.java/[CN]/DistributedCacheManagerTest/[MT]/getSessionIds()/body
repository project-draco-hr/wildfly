{
  String sessionId="abc";
  @SuppressWarnings("rawtypes") ArgumentCaptor<CacheInvoker.Operation> capturedOperation=ArgumentCaptor.forClass(CacheInvoker.Operation.class);
  when(this.invoker.invoke(same(this.cache),capturedOperation.capture(),same(Flag.SKIP_LOCKING),same(Flag.SKIP_REMOTE_LOOKUP),same(Flag.SKIP_CACHE_LOAD))).thenReturn(Collections.singleton(sessionId));
  Map<String,String> result=this.manager.getSessionIds();
  assertNotNull(result);
  assertEquals(1,result.size());
  assertTrue(result.containsKey(sessionId));
  assertNull(result.get(sessionId));
  CacheInvoker.Operation<String,Map<Object,Object>,Set<String>> operation=capturedOperation.getValue();
  when(this.cache.keySet()).thenReturn(Collections.singleton(sessionId));
  Set<String> operationResult=operation.invoke(this.cache);
  assertNotNull(operationResult);
  assertEquals(1,operationResult.size());
  assertTrue(operationResult.contains(sessionId));
}
