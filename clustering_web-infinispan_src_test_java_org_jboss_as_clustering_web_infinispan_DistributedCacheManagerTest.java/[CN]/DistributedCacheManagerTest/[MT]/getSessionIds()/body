{
  SessionKey ourKey=mock(SessionKey.class);
  SessionKey foreignKey=mock(SessionKey.class);
  String sessionId="abc";
  when(this.sessionCache.keySet()).thenReturn(new LinkedHashSet<SessionKey>(Arrays.asList(ourKey,foreignKey)));
  when(this.keyFactory.ours(ourKey)).thenReturn(true);
  when(ourKey.getSessionId()).thenReturn(sessionId);
  when(this.keyFactory.ours(foreignKey)).thenReturn(false);
  Map<String,String> result=this.manager.getSessionIds();
  assertNotNull(result);
  assertEquals(1,result.size());
  assertTrue(result.containsKey(sessionId));
  assertNull(result.get(sessionId));
}
