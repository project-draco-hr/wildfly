{
  this.manager.setForceSynchronous(forceSynchronous);
  AdvancedCache<String,Map<Object,Object>> syncCache=mock(AdvancedCache.class);
  String sessionId="abc";
  @SuppressWarnings("rawtypes") ArgumentCaptor<DistributedCacheManager.Operation> capturedOperation=ArgumentCaptor.forClass(DistributedCacheManager.Operation.class);
  when(this.cache.getAdvancedCache()).thenReturn(this.cache);
  when(this.cache.withFlags(Flag.FORCE_SYNCHRONOUS)).thenReturn(syncCache);
  when(this.invoker.invoke(same(forceSynchronous ? syncCache : this.cache),capturedOperation.capture())).thenReturn(null);
  this.manager.removeSession(sessionId);
}
