{
  final ModelNode address=PathAddress.pathAddress(PathElement.pathElement(PROFILE,"default"),PathElement.pathElement(SUBSYSTEM,VersionedExtensionCommon.SUBSYSTEM_NAME)).toModelNode();
  final DomainClient client=master.getDomainClient();
  final ModelNode extensionAdd=new ModelNode();
  extensionAdd.get(OP).set(ADD);
  extensionAdd.get(OP_ADDR).add(EXTENSION,VersionedExtensionCommon.EXTENSION_NAME);
  executeForResult(extensionAdd,client);
  final ModelNode subsystemAdd=new ModelNode();
  subsystemAdd.get(OP).set(ADD);
  subsystemAdd.get(OP_ADDR).set(address);
  executeForResult(subsystemAdd,client);
  final ModelNode mExt=new ModelNode();
  mExt.get(OP).set(READ_RESOURCE_OPERATION);
  mExt.get(OP_ADDR).add(EXTENSION,VersionedExtensionCommon.EXTENSION_NAME).add(SUBSYSTEM,VersionedExtensionCommon.SUBSYSTEM_NAME);
  assertVersion(executeForResult(mExt,client),ModelVersion.create(2));
  final ModelNode update=new ModelNode();
  update.get(OP).set("update");
  update.get(OP_ADDR).set(address);
  executeForResult(update,client);
}
