{
  boolean segmentExpression=false;
  if (model.has(ModelKeys.SEGMENTS)) {
    if (model.hasDefined(ModelKeys.SEGMENTS)) {
      ModelNode segments=model.get(ModelKeys.SEGMENTS);
      segmentExpression=isExpression(segments);
      if (!segmentExpression) {
        model.get(ModelKeys.VIRTUAL_NODES).set(segmentsToVirtualNodes(segments.toString()));
      }
 else {
        model.get(ModelKeys.VIRTUAL_NODES).set(segments);
      }
    }
    model.remove(ModelKeys.SEGMENTS);
  }
  return segmentExpression;
}
