{
  if (!isTransactionActive()) {
    return createInstance(key);
  }
  prepareCache();
  final Map<Object,EntityBeanComponentInstance> map=cache.get();
  EntityBeanComponentInstance instance=map.get(key);
  if (instance == null) {
    instance=createInstance(key);
    map.put(key,instance);
  }
  return instance;
}
