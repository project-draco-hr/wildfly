{
  if (!isTransactionActive()) {
    return createInstance(key);
  }
  final Map<Object,CacheEntry> cache=prepareCache();
  if (!cache.containsKey(key)) {
    final EntityBeanComponentInstance instance=createInstance(key);
    realCreate(instance,false);
  }
  final CacheEntry cacheEntry=cache.get(key);
  cacheEntry.referenceCount.incrementAndGet();
  return cacheEntry.instance;
}
