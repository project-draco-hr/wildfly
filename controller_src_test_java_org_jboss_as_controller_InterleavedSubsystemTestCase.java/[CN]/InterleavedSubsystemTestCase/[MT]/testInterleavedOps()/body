{
  container=ServiceContainer.Factory.create("test");
  ServiceTarget target=container.subTarget();
  TestModelControllerService svc=new InterleavedSubsystemModelControllerService();
  ServiceBuilder<ModelController> builder=target.addService(ServiceName.of("ModelController"),svc);
  builder.install();
  svc.awaitStartup(30,TimeUnit.SECONDS);
  ModelController controller=svc.getValue();
  final ModelNode op=Util.getEmptyOperation(READ_RESOURCE_OPERATION,new ModelNode());
  op.get(RECURSIVE).set(true);
  ModelNode result=controller.execute(op,null,null,null);
  assertTrue(result.hasDefined(OUTCOME));
  assertEquals(SUCCESS,result.get(OUTCOME).asString());
  assertTrue(result.hasDefined(RESULT));
  assertTrue(result.get(RESULT).hasDefined(EXTENSION));
  assertTrue(result.get(RESULT,EXTENSION).hasDefined("a"));
  assertTrue(result.get(RESULT,EXTENSION,"a").hasDefined(MODULE));
  assertEquals("a",result.get(RESULT,EXTENSION,"a",MODULE).asString());
  assertTrue(result.get(RESULT,EXTENSION).hasDefined("b"));
  assertTrue(result.get(RESULT,EXTENSION,"b").hasDefined(MODULE));
  assertEquals("b",result.get(RESULT,EXTENSION,"b",MODULE).asString());
  assertTrue(result.get(RESULT,EXTENSION).hasDefined("c"));
  assertTrue(result.get(RESULT,EXTENSION,"c").hasDefined(MODULE));
  assertEquals("c",result.get(RESULT,EXTENSION,"c",MODULE).asString());
  assertTrue(result.get(RESULT).hasDefined(SUBSYSTEM));
  assertTrue(result.get(RESULT,SUBSYSTEM).hasDefined("a"));
  assertTrue(result.get(RESULT,SUBSYSTEM,"a").hasDefined("attribute"));
  assertTrue(result.get(RESULT,SUBSYSTEM,"a","attribute").asBoolean());
  assertTrue(result.get(RESULT,SUBSYSTEM).hasDefined("b"));
  assertTrue(result.get(RESULT,SUBSYSTEM,"b").hasDefined("attribute"));
  assertTrue(result.get(RESULT,SUBSYSTEM,"b","attribute").asBoolean());
  assertTrue(result.get(RESULT,SUBSYSTEM).hasDefined("c"));
  assertTrue(result.get(RESULT,SUBSYSTEM,"c").hasDefined("attribute"));
  assertTrue(result.get(RESULT,SUBSYSTEM,"c","attribute").asBoolean());
}
