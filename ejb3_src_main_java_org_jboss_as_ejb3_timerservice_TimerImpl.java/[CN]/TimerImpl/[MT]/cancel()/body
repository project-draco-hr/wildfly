{
  this.assertTimerState();
  if (timerState != TimerState.EXPIRED) {
    setTimerState(TimerState.CANCELED);
  }
  final Transaction currentTx=this.timerService.getTransaction();
  if (currentTx == null) {
    this.cancelTimeout();
    timerService.persistTimer(this);
  }
 else {
    this.registerTimerCancellationWithTx(currentTx);
  }
}
