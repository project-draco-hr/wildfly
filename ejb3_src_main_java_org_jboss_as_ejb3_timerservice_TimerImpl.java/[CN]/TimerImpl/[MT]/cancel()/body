{
  this.assertTimerState();
  if (timerState != TimerState.EXPIRED) {
    setTimerState(TimerState.CANCELED);
  }
  if (timerService.transactionActive()) {
    final Transaction currentTx=this.timerService.getTransaction();
    this.registerTimerCancellationWithTx(currentTx);
  }
 else {
    this.cancelTimeout();
    timerService.persistTimer(this);
  }
}
