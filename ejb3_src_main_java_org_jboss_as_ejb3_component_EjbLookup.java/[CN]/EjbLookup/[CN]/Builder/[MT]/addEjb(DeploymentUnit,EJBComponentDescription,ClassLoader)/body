{
  final Map<Class<?>,ServiceName> views=new HashMap<Class<?>,ServiceName>();
  for (  final ViewDescription view : componentDescription.getViews()) {
    try {
      final Class<?> viewClass=classLoader.loadClass(view.getViewClassName());
      views.put(viewClass,view.getServiceName());
    }
 catch (    ClassNotFoundException e) {
      log.warn("Could not load view class " + view.getViewClassName() + " for ejb "+ componentDescription.getEJBClassName());
    }
  }
  boolean deployedInCurrentModule=ejbDeploymentUnit.equals(deploymentUnit);
  final EjbDescription description=new EjbDescription(views,deployedInCurrentModule,componentDescription.getEJBName());
  if (deployedInCurrentModule || !ejbs.containsKey(componentDescription.getEJBName())) {
    ejbs.put(componentDescription.getEJBName(),description);
  }
  final ResourceRoot deploymentRoot=ejbDeploymentUnit.getAttachment(Attachments.DEPLOYMENT_ROOT);
  if (deploymentRoot != null) {
    ejbs.put("../" + deploymentRoot.getRoot().getPathNameRelativeTo(jarRoot) + "#"+ componentDescription.getEJBName(),description);
  }
}
