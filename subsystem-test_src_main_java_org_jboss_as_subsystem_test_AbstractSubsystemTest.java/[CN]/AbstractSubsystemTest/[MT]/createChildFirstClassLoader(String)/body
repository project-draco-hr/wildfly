{
  URL[] urls=new URL[resources.length];
  int i=0;
  for (  String resource : resources) {
    URL url=this.getClass().getResource(resource);
    if (url == null) {
      ClassLoader cl=this.getClass().getClassLoader();
      if (cl == null) {
        cl=ClassLoader.getSystemClassLoader();
      }
      url=cl.getResource(resource);
      if (url == null) {
        File file=new File(resource);
        if (file.exists()) {
          url=file.toURI().toURL();
        }
      }
    }
    if (url == null) {
      throw new IllegalArgumentException("Could not find resource " + resource);
    }
    urls[i++]=url;
  }
  return new ChildFirstClassLoader(this.getClass().getClassLoader(),urls);
}
