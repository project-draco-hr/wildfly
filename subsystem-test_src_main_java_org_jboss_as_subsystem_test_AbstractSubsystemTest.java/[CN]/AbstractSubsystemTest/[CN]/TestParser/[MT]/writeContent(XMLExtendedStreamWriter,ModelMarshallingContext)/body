{
  String defaultNamespace=writer.getNamespaceContext().getNamespaceURI(XMLConstants.DEFAULT_NS_PREFIX);
  try {
    ModelNode subsystem=context.getModelNode().get(SUBSYSTEM,mainSubsystemName);
    XMLElementWriter<SubsystemMarshallingContext> subsystemWriter=context.getSubsystemWriter(mainSubsystemName);
    if (subsystemWriter != null) {
      subsystemWriter.writeContent(writer,new SubsystemMarshallingContext(subsystem,writer));
    }
  }
  finally {
    writer.setDefaultNamespace(defaultNamespace);
  }
  writer.writeEndDocument();
}
