{
  if (value != null) {
    try {
      mdr.getValue().unregisterResourceAdapter(value.getURL().toExternalForm());
    }
 catch (    Throwable t) {
      log.warn("Exception during unregistering deployment",t);
    }
  }
  log.debug("Undeploying: " + value.getDeploymentName());
  if (mdr != null && mdr.getValue() != null && value.getCfs() != null && value.getJndiNames() != null) {
    for (int i=0; i < value.getCfs().length; i++) {
      try {
        String cf=value.getCfs()[i].getClass().getName();
        String jndi=value.getJndiNames()[i];
        mdr.getValue().unregisterJndiMapping(value.getURL().toExternalForm(),cf,jndi);
      }
 catch (      NotFoundException nfe) {
        log.warn("Exception during JNDI unbinding",nfe);
      }
    }
  }
  if (value.getCfs() != null && value.getJndiNames() != null) {
    try {
      (new SimpleJndiStrategy()).unbindConnectionFactories(value.getDeploymentName(),value.getCfs(),value.getJndiNames());
    }
 catch (    Throwable t) {
      log.warn("Exception during JNDI unbinding",t);
    }
  }
  if (value != null && value.getResourceAdapter() != null) {
    value.getResourceAdapter().stop();
  }
}
