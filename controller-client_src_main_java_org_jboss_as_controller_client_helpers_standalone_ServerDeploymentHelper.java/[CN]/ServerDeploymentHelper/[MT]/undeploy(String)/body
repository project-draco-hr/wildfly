{
  ServerDeploymentActionResult actionResult;
  try {
    DeploymentPlanBuilder builder=deploymentManager.newDeploymentPlan();
    builder=builder.undeploy(runtimeName).andRemoveUndeployed();
    DeploymentPlan plan=builder.build();
    DeploymentAction action=builder.getLastAction();
    Future<ServerDeploymentPlanResult> future=deploymentManager.execute(plan);
    ServerDeploymentPlanResult planResult=future.get();
    actionResult=planResult.getDeploymentActionResult(action.getId());
  }
 catch (  Exception ex) {
    throw new ServerDeploymentException(ex);
  }
  if (actionResult.getDeploymentException() != null)   throw new ServerDeploymentException(actionResult);
}
