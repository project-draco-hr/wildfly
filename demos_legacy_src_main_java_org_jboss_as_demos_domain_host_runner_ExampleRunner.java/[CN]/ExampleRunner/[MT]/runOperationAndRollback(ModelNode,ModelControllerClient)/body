{
  System.out.println("Executing operation:\n" + operation);
  final ModelNode result=client.execute(operation);
  try {
    checkSuccess(result);
    final ModelNode readResource=new ModelNode();
    readResource.get(OP).set(READ_RESOURCE_OPERATION);
    readResource.get(OP_ADDR).set(operation.require(OP_ADDR));
    final ModelNode readResult=client.execute(readResource);
    checkSuccess(readResult);
    System.out.println("Effect on resource is \n" + readResult.get(RESULT));
  }
  finally {
    final ModelNode compensating=result.get(COMPENSATING_OPERATION);
    System.out.println("Reverting change via \n" + compensating);
    checkSuccess(client.execute(compensating));
  }
}
