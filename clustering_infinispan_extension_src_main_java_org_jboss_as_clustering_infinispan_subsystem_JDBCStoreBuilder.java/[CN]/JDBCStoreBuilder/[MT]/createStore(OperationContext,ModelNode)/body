{
  String dataSource=DATA_SOURCE.resolveModelAttribute(context,model).asString();
  this.dataSourceDepencency=new InjectedValueDependency<>(CommonUnaryRequirement.DATA_SOURCE.getServiceName(context,dataSource),DataSource.class);
  B storeBuilder=new ConfigurationBuilder().persistence().addStore(this.builderClass).dialect(ModelNodes.asEnum(DIALECT.resolveModelAttribute(context,model),DatabaseType.class));
  storeBuilder.connectionFactory(DataSourceConnectionFactoryConfigurationBuilder.class).setDataSourceDependency(this.dataSourceDepencency);
  return storeBuilder;
}
