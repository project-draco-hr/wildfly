{
  String dataSource=DATA_SOURCE.getDefinition().resolveModelAttribute(context,model).asString();
  this.dataSourceDepencency=new CapabilityDependency<>(context,RequiredCapability.DATA_SOURCE,dataSource,DataSource.class);
  B storeBuilder=new ConfigurationBuilder().persistence().addStore(this.builderClass).dialect(ModelNodes.asEnum(DIALECT.getDefinition().resolveModelAttribute(context,model),DatabaseType.class));
  storeBuilder.connectionFactory(DataSourceConnectionFactoryConfigurationBuilder.class).setDataSourceDependency(this.dataSourceDepencency);
  return storeBuilder;
}
