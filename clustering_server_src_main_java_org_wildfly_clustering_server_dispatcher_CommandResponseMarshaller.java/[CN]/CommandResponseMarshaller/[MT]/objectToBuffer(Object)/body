{
  int version=this.context.getCurrentVersion();
  try (ByteArrayOutputStream output=new ByteArrayOutputStream()){
    output.write(version);
    try (Marshaller marshaller=this.context.createMarshaller(version)){
      marshaller.start(Marshalling.createByteOutput(output));
      marshaller.writeObject(object);
      marshaller.flush();
    }
     return new Buffer(output.toByteArray());
  }
 }
