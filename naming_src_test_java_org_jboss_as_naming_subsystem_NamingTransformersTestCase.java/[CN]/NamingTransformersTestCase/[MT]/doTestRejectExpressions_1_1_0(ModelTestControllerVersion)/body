{
  if (controllerVersion.isEap()) {
    ignoreThisTestIfEAPRepositoryIsNotReachable();
  }
  KernelServicesBuilder builder=createKernelServicesBuilder(AdditionalInitialization.MANAGEMENT);
  builder.createLegacyKernelServicesBuilder(null,controllerVersion,VERSION_1_1_0).addMavenResourceURL("org.jboss.as:jboss-as-naming:" + controllerVersion.getMavenGavVersion());
  KernelServices mainServices=builder.build();
  assertTrue(mainServices.isSuccessfulBoot());
  KernelServices legacyServices=mainServices.getLegacyServices(VERSION_1_1_0);
  Assert.assertNotNull(legacyServices);
  assertTrue(legacyServices.isSuccessfulBoot());
  ModelTestUtils.checkFailedTransformedBootOperations(mainServices,VERSION_1_1_0,parse(getSubsystemXml("subsystem_with_expressions_compatible_1.2.0.xml")),new FailedOperationTransformationConfig().addFailedAttribute(PathAddress.pathAddress(NamingExtension.SUBSYSTEM_PATH,NamingSubsystemModel.BINDING_PATH),new FailedOperationTransformationConfig.NewAttributesConfig(NamingSubsystemModel.ENVIRONMENT)));
}
