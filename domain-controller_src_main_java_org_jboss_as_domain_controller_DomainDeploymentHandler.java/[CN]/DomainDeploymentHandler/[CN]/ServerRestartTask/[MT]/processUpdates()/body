{
  UpdateResultHandlerResponse<?> urhr;
  ServerStatus status=domainController.restartServer(serverId.getHostName(),serverId.getServerName(),gracefulTimeout);
switch (status) {
case STARTED:
case STARTING:
    urhr=UpdateResultHandlerResponse.createRestartResponse();
default :
{
    UpdateFailedException ufe=new UpdateFailedException("Server " + serverId.getServerName() + " did not restart. Server status is "+ status);
    urhr=UpdateResultHandlerResponse.createFailureResponse(ufe);
  }
}
List<UpdateResultHandlerResponse<?>> rsps=Collections.<UpdateResultHandlerResponse<?>>singletonList(urhr);
updates.serverResults.put(serverId,rsps);
updatePolicy.recordServerResult(serverId,rsps);
for (ActionUpdates au : updates.actionUpdates) {
sendServerUpdateResult(au.action.getId(),urhr);
if (Thread.interrupted()) {
  break;
}
}
}
