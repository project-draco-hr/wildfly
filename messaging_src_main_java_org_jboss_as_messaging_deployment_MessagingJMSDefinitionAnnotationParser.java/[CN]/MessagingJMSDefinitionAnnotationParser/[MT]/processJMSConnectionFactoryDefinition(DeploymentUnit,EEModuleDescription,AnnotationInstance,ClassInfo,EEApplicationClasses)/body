{
  final AnnotationValue nameValue=connectionFactoryDefinition.value(NAME);
  if (nameValue == null || nameValue.asString().isEmpty()) {
    throw MESSAGES.annotationAttributeMissing(JMS_CONNECTION_FACTORY_DEFINITION.toString(),NAME);
  }
  DirectJMSConnectionFactoryInjectionSource source=new DirectJMSConnectionFactoryInjectionSource(nameValue.asString());
  source.setInterfaceName(asString(connectionFactoryDefinition,"interfaceName",ConnectionFactory.class.getName()));
  source.setResourceAdapter(asString(connectionFactoryDefinition,"resourceAdapter"));
  source.setUser(asString(connectionFactoryDefinition,"user"));
  source.setPassword(asString(connectionFactoryDefinition,"password"));
  source.setClientId(asString(connectionFactoryDefinition,"clientId"));
  for (  String fullProp : asArray(connectionFactoryDefinition,"properties")) {
    String[] prop=fullProp.split("=",2);
    source.addProperty(prop[0],prop[1]);
  }
  source.setTransactional(asBoolean(connectionFactoryDefinition,"transactional"));
  source.setMaxPoolSize(asInt(connectionFactoryDefinition,"maxPoolSize",MAX_POOL_SIZE.getDefaultValue().asInt()));
  source.setMinPoolSize(asInt(connectionFactoryDefinition,"minPoolSize",MIN_POOL_SIZE.getDefaultValue().asInt()));
  final BindingConfiguration config=new BindingConfiguration(nameValue.asString(),source);
  if (DeploymentTypeMarker.isType(WAR,deploymentUnit) || DeploymentTypeMarker.isType(APPLICATION_CLIENT,deploymentUnit)) {
    eeModuleDescription.getBindingConfigurations().add(config);
  }
  EEModuleClassDescription classDescription=eeModuleDescription.addOrGetLocalClassDescription(target.name().toString());
  classDescription.getBindingConfigurations().add(config);
}
