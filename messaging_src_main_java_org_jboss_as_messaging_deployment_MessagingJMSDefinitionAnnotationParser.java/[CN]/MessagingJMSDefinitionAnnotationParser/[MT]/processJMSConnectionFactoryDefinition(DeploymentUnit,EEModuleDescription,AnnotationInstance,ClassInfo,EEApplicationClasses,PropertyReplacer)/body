{
  final AnnotationValue nameValue=connectionFactoryDefinition.value(NAME);
  if (nameValue == null || nameValue.asString().isEmpty()) {
    throw EeLogger.ROOT_LOGGER.annotationAttributeMissing(JMS_CONNECTION_FACTORY_DEFINITION.toString(),NAME);
  }
  DirectJMSConnectionFactoryInjectionSource source=new DirectJMSConnectionFactoryInjectionSource(nameValue.asString());
  source.setInterfaceName(asString(connectionFactoryDefinition,"interfaceName",ConnectionFactory.class.getName(),propertyReplacer));
  source.setResourceAdapter(asString(connectionFactoryDefinition,"resourceAdapter",propertyReplacer));
  source.setUser(asString(connectionFactoryDefinition,"user",propertyReplacer));
  source.setPassword(asString(connectionFactoryDefinition,"password",propertyReplacer));
  source.setClientId(asString(connectionFactoryDefinition,"clientId",propertyReplacer));
  for (  String fullProp : asArray(connectionFactoryDefinition,"properties")) {
    String[] prop=fullProp.split("=",2);
    String name=propertyReplacer.replaceProperties(prop[0]);
    String value=propertyReplacer.replaceProperties(prop[1]);
    source.addProperty(name,value);
  }
  source.setTransactional(asBoolean(connectionFactoryDefinition,"transactional"));
  source.setMaxPoolSize(asInt(connectionFactoryDefinition,"maxPoolSize",MAX_POOL_SIZE.getDefaultValue().asInt()));
  source.setMinPoolSize(asInt(connectionFactoryDefinition,"minPoolSize",MIN_POOL_SIZE.getDefaultValue().asInt()));
  final BindingConfiguration config=new BindingConfiguration(nameValue.asString(),source);
  if (DeploymentTypeMarker.isType(WAR,deploymentUnit) || DeploymentTypeMarker.isType(APPLICATION_CLIENT,deploymentUnit)) {
    eeModuleDescription.getBindingConfigurations().add(config);
  }
  EEModuleClassDescription classDescription=eeModuleDescription.addOrGetLocalClassDescription(target.name().toString());
  classDescription.getBindingConfigurations().add(config);
}
