{
  ModelControllerClient client=null;
  try {
    System.out.println("Connecting");
    client=ModelControllerClient.Factory.create(InetAddress.getByName("localhost"),9999);
    System.out.println("Connected");
    System.out.println("Dumping resource tree\n");
    ModelNode request=new ModelNode();
    request.get("operation").set("read-resource");
    request.get("address").setEmptyList();
    request.get("recursive").set(true);
    ModelNode r=client.execute(OperationBuilder.Factory.create(request).build());
    System.out.println(r);
    System.out.println("Dumping resource description tree\n");
    request=new ModelNode();
    request.get("operation").set("read-resource-description");
    request.get("address").setEmptyList();
    request.get("operations").set(true);
    request.get("recursive").set(true);
    r=client.execute(OperationBuilder.Factory.create(request).build());
    System.out.println(r);
  }
  finally {
    StreamUtils.safeClose(client);
    System.out.println("Closed");
  }
}
