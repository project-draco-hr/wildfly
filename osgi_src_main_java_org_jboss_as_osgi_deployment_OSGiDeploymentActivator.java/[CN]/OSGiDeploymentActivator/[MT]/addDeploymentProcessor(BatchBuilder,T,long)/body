{
  final DeploymentUnitProcessorService<T> deploymentUnitProcessorService=new DeploymentUnitProcessorService<T>(deploymentUnitProcessor);
  ServiceName serviceName=DeploymentUnitProcessor.SERVICE_NAME_BASE.append(deploymentUnitProcessor.getClass().getName());
  BatchServiceBuilder<T> serviceBuilder=batchBuilder.addService(serviceName,deploymentUnitProcessorService);
  DeploymentChainProcessorInjector<T> injector=new DeploymentChainProcessorInjector<T>(deploymentUnitProcessorService,priority);
  return serviceBuilder.addDependency(DeploymentChain.SERVICE_NAME,DeploymentChain.class,injector);
}
