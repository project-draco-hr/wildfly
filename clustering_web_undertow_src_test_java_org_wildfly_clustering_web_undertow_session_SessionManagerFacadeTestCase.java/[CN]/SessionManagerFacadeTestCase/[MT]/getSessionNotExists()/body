{
  HttpServerExchange exchange=new HttpServerExchange(null);
  Batcher batcher=mock(Batcher.class);
  SessionConfig config=mock(SessionConfig.class);
  String requestedSessionId="session.route1";
  String sessionId="session";
  when(config.findSessionId(exchange)).thenReturn(requestedSessionId);
  when(this.manager.findSession(sessionId)).thenReturn(null);
  when(this.manager.getBatcher()).thenReturn(batcher);
  when(batcher.startBatch()).thenReturn(true);
  io.undertow.server.session.Session sessionFacade=this.facade.getSession(exchange,config);
  assertNull(sessionFacade);
  verify(batcher).endBatch(false);
}
