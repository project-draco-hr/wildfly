{
  Map<DotName,List<AnnotationInstance>> annotationsOnBean=beanClass.annotations();
  if (annotationsOnBean == null || annotationsOnBean.isEmpty()) {
    return;
  }
  final List<AnnotationInstance> declareRolesAnnotations=annotationsOnBean.get(DECLARE_ROLES_DOT_NAME);
  if (declareRolesAnnotations == null || declareRolesAnnotations.isEmpty()) {
    return;
  }
  if (declareRolesAnnotations.size() > 1) {
    throw new DeploymentUnitProcessingException("More than one @DeclareRoles annotation found on bean: " + componentDescription.getEJBName());
  }
  AnnotationInstance declareRolesAnnotation=declareRolesAnnotations.get(0);
  if (declareRolesAnnotation.target() instanceof ClassInfo == false) {
    throw new DeploymentUnitProcessingException("@DeclareRoles can appear only on a class. Target: " + declareRolesAnnotation.target() + " is not a class");
  }
  final AnnotationValue annotationValue=declareRolesAnnotation.value();
  final String[] roles=annotationValue.asStringArray();
  if (roles != null) {
    componentDescription.addDeclaredRoles(roles);
    logger.debug(componentDescription.getEJBName() + " bean declares roles: " + Arrays.toString(roles));
  }
}
