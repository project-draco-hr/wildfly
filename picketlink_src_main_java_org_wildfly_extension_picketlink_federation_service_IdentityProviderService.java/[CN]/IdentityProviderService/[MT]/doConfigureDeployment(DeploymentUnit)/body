{
  if (getConfiguration().getKeyProvider() != null) {
    TrustType trustType=getConfiguration().getTrust();
    if (trustType != null) {
      String domainsStr=trustType.getDomains();
      if (domainsStr != null) {
        String[] domains=domainsStr.split(",");
        for (        String domain : domains) {
          KeyValueType kv=new KeyValueType();
          kv.setKey(domain);
          String value=domain;
          if (getConfiguration().getTrustDomainAlias() != null) {
            value=getConfiguration().getTrustDomainAlias().get(domain);
          }
          kv.setValue(value);
          getConfiguration().getKeyProvider().remove(kv);
          getConfiguration().getKeyProvider().add(kv);
        }
      }
    }
  }
}
