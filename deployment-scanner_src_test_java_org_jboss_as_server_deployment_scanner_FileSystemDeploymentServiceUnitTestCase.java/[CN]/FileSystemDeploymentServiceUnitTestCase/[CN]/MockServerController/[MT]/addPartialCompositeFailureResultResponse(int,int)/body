{
  if (count < failureStep) {
    throw new IllegalArgumentException("failureStep must be > count");
  }
  ModelNode rsp=new ModelNode();
  rsp.get(OUTCOME).set(SUCCESS);
  ModelNode result=rsp.get(RESULT);
  for (int i=1; i <= count; i++) {
    String step="step-" + i;
    if (i < failureStep) {
      result.get(step,OUTCOME).set(SUCCESS);
      result.get(step,RESULT);
      result.get(step,RESULT,"step-1",OUTCOME).set(SUCCESS);
      result.get(step,RESULT,"step-1",RESULT);
      result.get(step,RESULT,"step-2",OUTCOME).set(SUCCESS);
      result.get(step,RESULT,"step-2",RESULT);
    }
 else     if (i == failureStep) {
      result.get(step,OUTCOME).set(SUCCESS);
      result.get(step,RESULT);
      result.get(step,RESULT,"step-1",OUTCOME).set(SUCCESS);
      result.get(step,RESULT,"step-1",RESULT);
      result.get(step,RESULT,"step-2",OUTCOME).set(FAILED);
      result.get(step,RESULT,"step-2",FAILURE_DESCRIPTION).set(new ModelNode().set("badness happened"));
    }
 else {
      result.get(step,OUTCOME).set(CANCELLED);
    }
  }
  responses.add(new Response(true,rsp));
}
