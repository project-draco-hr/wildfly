{
  File incomplete=new File(tmpDir,"foo.war");
  File deployed=new File(tmpDir,"foo.war" + FileSystemDeploymentService.DEPLOYED);
  File pending=new File(tmpDir,"foo.war" + FileSystemDeploymentService.PENDING);
  testSupport.createZip(incomplete,0,false,true,true,false);
  File complete=new File(tmpDir,"complete.jar");
  File completeDeployed=new File(tmpDir,"complete.jar" + FileSystemDeploymentService.DEPLOYED);
  File completePending=new File(tmpDir,"complete.jar" + FileSystemDeploymentService.PENDING);
  testSupport.createZip(complete,0,false,false,true,false);
  TesteeSet ts=createTestee();
  ts.testee.setAutoDeployZippedContent(true);
  ts.testee.scan();
  assertFalse(deployed.exists());
  assertFalse(completeDeployed.exists());
  assertTrue(pending.exists());
  assertTrue(completePending.exists());
  incomplete.delete();
  testSupport.createZip(incomplete,0,false,false,false,false);
  ts.controller.addCompositeSuccessResponse(2);
  ts.testee.scan();
  assertTrue(deployed.exists());
  assertTrue(completeDeployed.exists());
  assertFalse(pending.exists());
  assertFalse(completePending.exists());
}
