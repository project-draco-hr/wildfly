{
  File incomplete=new File(tmpDir,"foo.war");
  File deployed=new File(tmpDir,"foo.war" + FileSystemDeploymentService.DEPLOYED);
  File pending=new File(tmpDir,"foo.war" + FileSystemDeploymentService.PENDING);
  testSupport.createZip(incomplete,0,false,true,true,false);
  TesteeSet ts=createTestee();
  ts.testee.setAutoDeployZippedContent(true);
  ts.testee.scan();
  assertFalse(deployed.exists());
  assertTrue(pending.exists());
  incomplete.delete();
  testSupport.createZip(incomplete,0,false,false,false,false);
  ts.controller.addCompositeSuccessResponse(1);
  ts.testee.scan();
  assertTrue(deployed.exists());
  assertFalse(pending.exists());
}
