{
  File deployment=new File(tmpDir,"foo.war");
  File dodeploy=createFile("foo.war" + FileSystemDeploymentService.DO_DEPLOY);
  File deployed=new File(tmpDir,"foo.war" + FileSystemDeploymentService.DEPLOYED);
  File failed=new File(tmpDir,"foo.war" + FileSystemDeploymentService.FAILED_DEPLOY);
  testSupport.createZip(deployment,0,false,false,true,true);
  TesteeSet ts=createTestee(new DiscardTaskExecutor(){
    @Override public <T>Future<T> submit(    Callable<T> tCallable){
      return new TimeOutFuture<T>(5,tCallable);
    }
  }
);
  ts.testee.setDeploymentTimeout(5);
  ts.testee.scan();
  assertFalse(deployed.exists());
  assertTrue(failed.exists());
}
