{
  File war=createFile("foo.war");
  File dodeploy=createFile("foo.war" + FileSystemDeploymentService.DO_DEPLOY);
  File deployed=new File(tmpDir,"foo.war" + FileSystemDeploymentService.DEPLOYED);
  File failed=new File(tmpDir,"foo.war" + FileSystemDeploymentService.FAILED_DEPLOY);
  TesteeSet ts=createTestee();
  ts.testee.setAutoDeployZippedContent(true);
  ts.controller.addCompositeFailureResponse(1,1);
  ts.testee.scan();
  assertTrue(war.exists());
  assertFalse(dodeploy.exists());
  assertFalse(deployed.exists());
  assertTrue(failed.exists());
  failed.setLastModified(0);
  testSupport.createZip(war,0,false,false,true,false);
  ts.controller.addCompositeSuccessResponse(1);
  ts.testee.scan();
  assertTrue(war.exists());
  assertFalse(dodeploy.exists());
  assertTrue(deployed.exists());
  assertFalse(failed.exists());
}
