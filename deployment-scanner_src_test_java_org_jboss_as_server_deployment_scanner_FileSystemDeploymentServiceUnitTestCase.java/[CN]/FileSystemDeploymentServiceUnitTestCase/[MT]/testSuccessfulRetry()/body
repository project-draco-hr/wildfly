{
  File war1=createFile("bar.war");
  File dodeploy1=createFile("bar.war" + FileSystemDeploymentService.DO_DEPLOY);
  File deployed1=new File(tmpDir,"bar.war" + FileSystemDeploymentService.DEPLOYED);
  File failed1=new File(tmpDir,"bar.war" + FileSystemDeploymentService.FAILED_DEPLOY);
  File war2=createFile("foo.war");
  File dodeploy2=createFile("foo.war" + FileSystemDeploymentService.DO_DEPLOY);
  File deployed2=new File(tmpDir,"foo.war" + FileSystemDeploymentService.DEPLOYED);
  File failed2=new File(tmpDir,"foo.war" + FileSystemDeploymentService.FAILED_DEPLOY);
  TesteeSet ts=createTestee();
  ts.controller.addGetDeploymentNamesResponse();
  ts.controller.addCompositeFailureResponse(2,1);
  ts.controller.addCompositeSuccessResponse(1);
  ts.testee.scan();
  assertEquals(2,ts.repo.content.size());
  assertTrue(war1.exists());
  assertTrue(war2.exists());
  assertFalse(dodeploy1.exists());
  assertFalse(dodeploy2.exists());
  assertFalse(deployed1.exists() && deployed2.exists());
  assertTrue(failed1.exists() || failed2.exists());
}
