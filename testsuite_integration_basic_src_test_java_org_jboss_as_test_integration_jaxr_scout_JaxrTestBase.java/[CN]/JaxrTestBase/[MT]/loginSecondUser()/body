{
  Connection con=null;
  try {
    if (factory == null)     throw new IllegalStateException("ConnectionFactory is null");
    con=factory.createConnection();
  }
 catch (  JAXRException e) {
    e.printStackTrace();
  }
  PasswordAuthentication passwdAuth=new PasswordAuthentication("jbosscts",passwd.toCharArray());
  Set creds=new HashSet();
  creds.add(passwdAuth);
  try {
    con.setCredentials(creds);
  }
 catch (  JAXRException e) {
    e.printStackTrace();
    Assert.fail(e.getMessage());
  }
  return con;
}
