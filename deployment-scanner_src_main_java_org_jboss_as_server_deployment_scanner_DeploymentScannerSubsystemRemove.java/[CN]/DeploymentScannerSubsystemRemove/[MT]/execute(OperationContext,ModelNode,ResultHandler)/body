{
  ModelNode subsystem=context.getSubModel();
  if (subsystem.hasDefined(CommonAttributes.SCANNER) && subsystem.get(CommonAttributes.SCANNER).asInt() > 0) {
    throw new OperationFailedException(new ModelNode().set("Cannot remove subsystem while it still has scanners configured. Remove all scanners first."));
  }
  final ModelNode compensatingOperation=Util.getEmptyOperation(DeploymentScannerSubsystemAdd.OPERATION_NAME,operation.get(OP_ADDR));
  resultHandler.handleResultComplete();
  return new BasicOperationResult(compensatingOperation);
}
