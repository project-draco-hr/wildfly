{
  final ManagementResponseHeader responseHeader;
  ByteDataInput input=null;
  try {
    input=new SimpleByteDataInput(inputStream);
    responseHeader=new ManagementResponseHeader(input);
    if (requestId != responseHeader.getResponseId()) {
      throw new ManagementException("Invalid request ID expecting " + requestId + " received "+ responseHeader.getResponseId());
    }
    connection.setMessageHandler(ManagementRequest.this);
    sendRequest(responseHeader.getVersion(),connection);
  }
 catch (  IOException e) {
    throw new ManagementException("Failed to read response header",e);
  }
 finally {
    safeClose(input);
  }
}
