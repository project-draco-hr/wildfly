{
  if (log.isTraceEnabled())   log.tracef("removeSession(): removing Session %s from cached session set for SSO %s",sessionId.getSessionId(),ssoId);
  final SessionKey key=new SessionKey(ssoId);
  SessionOperation<Boolean> operation=new SessionOperation<Boolean>(){
    @Override public Boolean invoke(    Cache<SessionKey,Map<FullyQualifiedSessionId,Void>> cache){
      Map<FullyQualifiedSessionId,Void> sessions=cache.get(key);
      if (sessions == null) {
        return false;
      }
      sessions.remove(sessionId);
      return sessions.isEmpty();
    }
  }
;
  if (this.batch(this.sessionCache,operation)) {
    this.notifySSOEmpty(ssoId);
  }
}
