{
  final Set<T> copy;
synchronized (channels) {
    copy=new HashSet<T>(channels);
  }
  for (  final T channel : copy) {
    closeChannelOnShutdown(channel);
  }
}
