{
  if (batchInProgress.compareAndSet(true,false)) {
    if (batchCompletionTask != null)     batchCompletionTask.run();
    if (!batchInProgress.get() && deploymentFinished.get()) {
      deploymentComplete();
    }
  }
}
