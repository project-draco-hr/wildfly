{
  if (configuration == null) {
    throw new IllegalArgumentException("Null configuration");
  }
  configuration.validate();
  final Endpoint endpoint=Remoting.createEndpoint(configuration.getEndpointName(),configuration.getExecutor(),configuration.getOptionMap());
  final Xnio xnio=Xnio.getInstance();
  endpoint.addConnectionProvider(configuration.getUriScheme(),new RemoteConnectionProviderFactory(xnio),OptionMap.create(Options.SSL_ENABLED,false));
  final NetworkServerProvider networkServerProvider=endpoint.getConnectionProviderInterface(configuration.getUriScheme(),NetworkServerProvider.class);
  SimpleServerAuthenticationProvider provider=new SimpleServerAuthenticationProvider();
  provider.addUser("TestUser",configuration.getEndpointName(),"TestUserPassword".toCharArray());
  System.out.println(configuration.getBindAddress());
  AcceptingChannel<? extends ConnectedStreamChannel> streamServer=networkServerProvider.createServer(configuration.getBindAddress(),OptionMap.create(Options.SASL_MECHANISMS,Sequence.of("CRAM-MD5")),provider);
  return new ChannelServer(endpoint,streamServer);
}
