{
  if (configuration == null) {
    throw new IllegalArgumentException("Null configuration");
  }
  configuration.validate();
  final Endpoint endpoint=Remoting.createEndpoint(configuration.getEndpointName(),configuration.getExecutor(),configuration.getOptionMap());
  final Xnio xnio=Xnio.getInstance();
  Registration registration=endpoint.addConnectionProvider(configuration.getUriScheme(),new RemoteConnectionProviderFactory(xnio),OptionMap.create(Options.SSL_ENABLED,false));
  final NetworkServerProvider networkServerProvider=endpoint.getConnectionProviderInterface(configuration.getUriScheme(),NetworkServerProvider.class);
  SimpleServerAuthenticationProvider provider=new SimpleServerAuthenticationProvider();
  provider.addUser("TestUser","localhost.localdomain","TestUserPassword".toCharArray());
  System.out.println(configuration.getBindAddress());
  OptionMap options=OptionMap.create(Options.SASL_MECHANISMS,Sequence.of("ANONYMOUS"),Options.SASL_POLICY_NOANONYMOUS,Boolean.FALSE);
  AcceptingChannel<? extends ConnectedStreamChannel> streamServer=networkServerProvider.createServer(configuration.getBindAddress(),options,provider);
  return new ChannelServer(endpoint,registration,streamServer);
}
