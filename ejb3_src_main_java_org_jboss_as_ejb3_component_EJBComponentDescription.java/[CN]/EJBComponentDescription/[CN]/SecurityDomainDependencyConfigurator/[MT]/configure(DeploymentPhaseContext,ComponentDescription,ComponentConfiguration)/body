{
  configuration.getCreateDependencies().add(new DependencyConfigurator<Service<Component>>(){
    @Override public void configureDependency(    ServiceBuilder<?> serviceBuilder,    Service<Component> service) throws DeploymentUnitProcessingException {
      if (!SecurityDomainDependencyConfigurator.this.ejbComponentDescription.isSecurityDomainsConfigured()) {
        final String securityDomainName=SecurityDomainDependencyConfigurator.this.ejbComponentDescription.getSecurityDomain();
        if (securityDomainName != null && !securityDomainName.isEmpty()) {
          final ServiceName securityDomainServiceName=SecurityDomainService.SERVICE_NAME.append(securityDomainName);
          serviceBuilder.addDependency(securityDomainServiceName);
        }
        serviceBuilder.addDependency(SecurityDomainService.SERVICE_NAME.append(SecurityConstants.DEFAULT_EJB_APPLICATION_POLICY));
      }
    }
  }
);
}
