{
synchronized (file) {
    if (doneBootup.get()) {
      return;
    }
    createHistoryDirectory();
    try {
      final File last=addSuffixToFile(file,LAST);
      final File original=addSuffixToFile(file,ORIGINAL);
      final File initial=addSuffixToFile(file,INITIAL);
      if (!initial.exists()) {
        copyFile(file,initial);
      }
      if (!last.exists()) {
        copyFile(file,last);
      }
      if (!original.exists() || (last.exists() && file.lastModified() > last.lastModified())) {
        copyFile(file,original);
        snapshot();
        last.setLastModified(System.currentTimeMillis());
      }
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
    doneBootup.set(true);
  }
}
