{
  this.processType=processType;
  this.runningMode=runningMode;
  this.transactionControl=transactionControl;
  this.processState=processState;
  this.booting=booting;
  this.auditLogger=auditLogger;
  steps=new EnumMap<Stage,Deque<Step>>(Stage.class);
  for (  Stage stage : Stage.values()) {
    if (booting && stage == Stage.VERIFY) {
      steps.put(stage,new LinkedBlockingDeque<Step>());
    }
 else {
      steps.put(stage,new ArrayDeque<Step>());
    }
  }
  initiatingThread=Thread.currentThread();
}
