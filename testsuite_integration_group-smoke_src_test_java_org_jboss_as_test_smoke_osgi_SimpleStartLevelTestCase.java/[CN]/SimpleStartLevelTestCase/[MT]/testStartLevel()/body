{
  assertNotNull("StartLevel injected",startLevel);
  int initialStartLevel=startLevel.getInitialBundleStartLevel();
  assertEquals("Initial bundle start level",1,initialStartLevel);
  assertEquals("Bundle RESOLVED",Bundle.RESOLVED,bundle.getState());
  assertEquals("arq465-bundle",bundle.getSymbolicName());
  int bundleStartLevel=startLevel.getBundleStartLevel(bundle);
  assertEquals("Bundle start level",4,bundleStartLevel);
  OSGiTestSupport.changeStartLevel(context,3,6,TimeUnit.SECONDS);
  assertEquals("Framework start level",3,startLevel.getStartLevel());
  try {
    bundle.start(Bundle.START_TRANSIENT);
    fail("Bundle cannot be started due to the Framework's current start level");
  }
 catch (  BundleException ex) {
  }
  assertEquals("Bundle RESOLVED",Bundle.RESOLVED,bundle.getState());
  bundle.start();
  assertEquals("Bundle RESOLVED",Bundle.RESOLVED,bundle.getState());
  OSGiTestSupport.changeStartLevel(context,4,6,TimeUnit.SECONDS);
  assertEquals("Bundle ACTIVE",Bundle.ACTIVE,bundle.getState());
  bundle.stop();
  assertEquals("Bundle RESOLVED",Bundle.RESOLVED,bundle.getState());
  bundle.uninstall();
  assertEquals("Bundle UNINSTALLED",Bundle.UNINSTALLED,bundle.getState());
  OSGiTestSupport.changeStartLevel(context,3,6,TimeUnit.SECONDS);
}
