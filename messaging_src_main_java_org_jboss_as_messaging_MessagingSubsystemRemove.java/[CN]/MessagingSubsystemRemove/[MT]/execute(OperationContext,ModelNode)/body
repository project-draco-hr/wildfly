{
  final Resource resource=context.removeResource(PathAddress.EMPTY_ADDRESS);
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    final OperationContext context,    final ModelNode operation) throws OperationFailedException {
      Set<String> serverNames=resource.getChildrenNames(CommonAttributes.HORNETQ_SERVER);
      for (      String serverName : serverNames) {
        PathElement path=PathElement.pathElement(CommonAttributes.HORNETQ_SERVER,serverName);
        Resource server=resource.getChild(path);
        HornetQServerRemove.removeHornetQServer(serverName,context,server);
      }
      if (context.completeStep() == OperationContext.ResultAction.ROLLBACK) {
      }
    }
  }
,OperationContext.Stage.RUNTIME);
  context.completeStep();
}
