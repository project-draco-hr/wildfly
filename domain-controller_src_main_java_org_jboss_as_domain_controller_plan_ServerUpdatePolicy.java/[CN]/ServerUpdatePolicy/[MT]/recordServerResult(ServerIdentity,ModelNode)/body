{
  if (!serverGroupName.equals(server.getServerGroupName()) || !servers.contains(server)) {
    throw new IllegalStateException("Unknown server " + server);
  }
  boolean serverFailed=response.has(FAILURE_DESCRIPTION);
synchronized (this) {
    int previousFailed=failureCount;
    if (serverFailed) {
      failureCount++;
    }
 else {
      successCount++;
    }
    if (previousFailed <= maxFailed) {
      if (!serverFailed && (successCount + failureCount) == servers.size()) {
        parent.recordServerGroupResult(serverGroupName,false);
      }
 else       if (serverFailed && failureCount > maxFailed) {
        parent.recordServerGroupResult(serverGroupName,true);
      }
    }
  }
}
