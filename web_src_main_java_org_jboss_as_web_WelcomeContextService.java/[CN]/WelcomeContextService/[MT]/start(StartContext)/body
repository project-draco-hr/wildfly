{
  try {
    context.setPath("");
    context.addLifecycleListener(new ContextConfig());
    context.setDocBase(pathInjector.getValue() + File.separatorChar + "welcome-content");
    final Loader loader=new WebCtxLoader(this.getClass().getClassLoader());
    loader.setContainer(hostInjector.getValue());
    context.setLoader(loader);
    context.setInstanceManager(new LocalInstanceManager());
    context.setReplaceWelcomeFiles(true);
    context.addWelcomeFile("index.html");
    Wrapper wrapper=context.createWrapper();
    wrapper.setName("DefaultServlet");
    wrapper.setServletClass("org.apache.catalina.servlets.DefaultServlet");
    context.addChild(wrapper);
    context.addServletMapping("/","DefaultServlet");
    context.addMimeMapping("html","text/html");
    context.addMimeMapping("jpg","image/jpeg");
    hostInjector.getValue().addChild(context);
    context.create();
  }
 catch (  Exception e) {
    throw new StartException("failed to create context",e);
  }
  try {
    context.start();
  }
 catch (  LifecycleException e) {
    throw new StartException("failed to start context",e);
  }
}
