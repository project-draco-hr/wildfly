{
  ManagementResourceRegistration hostRegistration=root.registerSubModel(PathElement.pathElement(HOST,hostName),HostDescriptionProviders.HOST_ROOT_PROVIDER);
  EnumSet<OperationEntry.Flag> flags=EnumSet.of(OperationEntry.Flag.READ_ONLY);
  XmlMarshallingHandler xmh=new HostXmlMarshallingHandler(configurationPersister.getHostPersister(),hostControllerInfo);
  hostRegistration.registerOperationHandler(XmlMarshallingHandler.OPERATION_NAME,xmh,xmh,false,OperationEntry.EntryType.PUBLIC,flags);
  hostRegistration.registerReadWriteAttribute(HostRootDescription.DIRECTORY_GROUPING,null,new ReloadRequiredWriteAttributeHandler(HostRootDescription.DIRECTORY_GROUPING));
  hostRegistration.registerReadOnlyAttribute(PRODUCT_NAME,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(DOMAIN_CONTROLLER,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(ServerDescriptionConstants.PROCESS_STATE,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(RELEASE_VERSION,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(RELEASE_CODENAME,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(PRODUCT_VERSION,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(NAMESPACES,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(SCHEMA_LOCATIONS,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(MANAGEMENT_MAJOR_VERSION,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(MANAGEMENT_MINOR_VERSION,null,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(MANAGEMENT_MICRO_VERSION,null,Storage.RUNTIME);
  hostRegistration.registerOperationHandler(NamespaceAddHandler.OPERATION_NAME,NamespaceAddHandler.INSTANCE,NamespaceAddHandler.INSTANCE,false);
  hostRegistration.registerOperationHandler(NamespaceRemoveHandler.OPERATION_NAME,NamespaceRemoveHandler.INSTANCE,NamespaceRemoveHandler.INSTANCE,false);
  hostRegistration.registerOperationHandler(SchemaLocationAddHandler.OPERATION_NAME,SchemaLocationAddHandler.INSTANCE,SchemaLocationAddHandler.INSTANCE,false);
  hostRegistration.registerOperationHandler(SchemaLocationRemoveHandler.OPERATION_NAME,SchemaLocationRemoveHandler.INSTANCE,SchemaLocationRemoveHandler.INSTANCE,false);
  hostRegistration.registerOperationHandler(ValidateAddressOperationHandler.OPERATION_NAME,ValidateAddressOperationHandler.INSTANCE,ValidateAddressOperationHandler.INSTANCE,false,EnumSet.of(OperationEntry.Flag.READ_ONLY));
  hostRegistration.registerReadWriteAttribute(NAME,environment.getProcessNameReadHandler(),environment.getProcessNameWriteHandler(),Storage.CONFIGURATION);
  hostRegistration.registerReadOnlyAttribute(MASTER,IsMasterHandler.INSTANCE,Storage.RUNTIME);
  hostRegistration.registerReadOnlyAttribute(HOST_STATE,new ProcessStateAttributeHandler(processState),Storage.RUNTIME);
  StartServersHandler ssh=new StartServersHandler(environment,serverInventory,runningModeControl);
  hostRegistration.registerOperationHandler(StartServersHandler.OPERATION_NAME,ssh,ssh,false,OperationEntry.EntryType.PRIVATE);
  HostShutdownHandler hsh=new HostShutdownHandler(domainController);
  hostRegistration.registerOperationHandler(HostShutdownHandler.OPERATION_NAME,hsh,hsh,EnumSet.of(Flag.HOST_CONTROLLER_ONLY));
  hostRegistration.registerOperationHandler(ResolveExpressionHandler.OPERATION_NAME,ResolveExpressionHandler.INSTANCE,ResolveExpressionHandler.INSTANCE,EnumSet.of(OperationEntry.Flag.READ_ONLY));
  hostRegistration.registerOperationHandler(ResolveExpressionOnHostHandler.OPERATION_NAME,ResolveExpressionOnHostHandler.INSTANCE,ResolveExpressionOnHostHandler.INSTANCE,EnumSet.of(OperationEntry.Flag.READ_ONLY,OperationEntry.Flag.DOMAIN_PUSH_TO_SERVERS));
  HostProcessReloadHandler reloadHandler=new HostProcessReloadHandler(HostControllerService.HC_SERVICE_NAME,runningModeControl,processState,HostRootDescription.getResourceDescriptionResolver("host"),hostControllerInfo);
  hostRegistration.registerOperationHandler(ProcessReloadHandler.OPERATION_NAME,reloadHandler,reloadHandler,EnumSet.of(Flag.HOST_CONTROLLER_ONLY));
  RunningModeReadHandler.createAndRegister(runningModeControl,hostRegistration);
  DomainServerLifecycleHandlers.initializeServerInventory(serverInventory);
  DomainSocketBindingGroupRemoveHandler.INSTANCE.initializeServerInventory(serverInventory);
  hostRegistration.registerOperationHandler(SpecifiedInterfaceResolveHandler.OPERATION_NAME,SpecifiedInterfaceResolveHandler.INSTANCE,SpecifiedInterfaceResolveHandler.INSTANCE);
  ValidateOperationHandler validateOperationHandler=hostControllerInfo.isMasterDomainController() ? ValidateOperationHandler.INSTANCE : ValidateOperationHandler.SLAVE_HC_INSTANCE;
  hostRegistration.registerOperationHandler(ValidateOperationHandler.OPERATION_NAME,validateOperationHandler,validateOperationHandler,false,EntryType.PRIVATE,EnumSet.of(Flag.READ_ONLY));
  hostRegistration.registerSubModel(SystemPropertyResourceDefinition.createForDomainOrHost(Location.HOST));
  hostRegistration.registerSubModel(new VaultResourceDefinition(vaultReader));
  ManagementResourceRegistration management=hostRegistration.registerSubModel(PathElement.pathElement(CORE_SERVICE,MANAGEMENT),CommonProviders.MANAGEMENT_WITH_INTERFACES_PROVIDER);
  management.registerSubModel(SecurityRealmResourceDefinition.INSTANCE);
  management.registerSubModel(LdapConnectionResourceDefinition.INSTANCE);
  management.registerSubModel(new NativeManagementResourceDefinition(hostControllerInfo));
  management.registerSubModel(new HttpManagementResourceDefinition(hostControllerInfo,environment));
  PlatformMBeanResourceRegistrar.registerPlatformMBeanResources(hostRegistration);
  hostRegistration.registerSubModel(HostControllerResourceDescription.of(environment));
  LocalDomainControllerAddHandler localDcAddHandler=LocalDomainControllerAddHandler.getInstance(root,hostControllerInfo,configurationPersister,localFileRepository,contentRepository,domainController,extensionRegistry,pathManager);
  hostRegistration.registerOperationHandler(LocalDomainControllerAddHandler.OPERATION_NAME,localDcAddHandler,localDcAddHandler,false);
  hostRegistration.registerOperationHandler(LocalDomainControllerRemoveHandler.OPERATION_NAME,LocalDomainControllerRemoveHandler.INSTANCE,LocalDomainControllerRemoveHandler.INSTANCE,false);
  RemoteDomainControllerAddHandler remoteDcAddHandler=new RemoteDomainControllerAddHandler(root,hostControllerInfo,configurationPersister,contentRepository,remoteFileRepository,extensionRegistry,ignoredRegistry,pathManager);
  hostRegistration.registerOperationHandler(RemoteDomainControllerAddHandler.OPERATION_NAME,remoteDcAddHandler,remoteDcAddHandler,false);
  hostRegistration.registerOperationHandler(RemoteDomainControllerRemoveHandler.OPERATION_NAME,RemoteDomainControllerRemoveHandler.INSTANCE,RemoteDomainControllerRemoveHandler.INSTANCE,false);
  ignoredRegistry.registerResources(hostRegistration);
  SnapshotDeleteHandler snapshotDelete=new SnapshotDeleteHandler(configurationPersister.getHostPersister());
  hostRegistration.registerOperationHandler(SnapshotDeleteHandler.OPERATION_NAME,snapshotDelete,snapshotDelete,false);
  SnapshotListHandler snapshotList=new SnapshotListHandler(configurationPersister.getHostPersister());
  hostRegistration.registerOperationHandler(SnapshotListHandler.OPERATION_NAME,snapshotList,snapshotList,false);
  SnapshotTakeHandler snapshotTake=new SnapshotTakeHandler(configurationPersister.getHostPersister());
  hostRegistration.registerOperationHandler(SnapshotTakeHandler.OPERATION_NAME,snapshotTake,snapshotTake,false);
  final ManagementResourceRegistration jvms=hostRegistration.registerSubModel(JvmResourceDefinition.GLOBAL);
  hostRegistration.registerSubModel(PathResourceDefinition.createSpecified(pathManager));
  ManagementResourceRegistration interfaces=hostRegistration.registerSubModel(PathElement.pathElement(INTERFACE),CommonProviders.SPECIFIED_INTERFACE_PROVIDER);
  HostSpecifiedInterfaceAddHandler hsiah=new HostSpecifiedInterfaceAddHandler();
  interfaces.registerOperationHandler(InterfaceAddHandler.OPERATION_NAME,hsiah,hsiah,false);
  HostSpecifiedInterfaceRemoveHandler sirh=new HostSpecifiedInterfaceRemoveHandler();
  interfaces.registerOperationHandler(InterfaceRemoveHandler.OPERATION_NAME,sirh,sirh,false);
  InterfaceCriteriaWriteHandler.UPDATE_RUNTIME.register(interfaces);
  interfaces.registerOperationHandler(SpecifiedInterfaceResolveHandler.OPERATION_NAME,SpecifiedInterfaceResolveHandler.INSTANCE,SpecifiedInterfaceResolveHandler.INSTANCE);
  hostRegistration.registerSubModel(new ServerConfigResourceDefinition(serverInventory,pathManager));
}
