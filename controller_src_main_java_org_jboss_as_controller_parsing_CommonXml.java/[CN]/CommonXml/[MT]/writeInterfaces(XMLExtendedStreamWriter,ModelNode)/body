{
  writer.writeStartElement(Element.INTERFACES.getLocalName());
  List<ModelNode> interfaces=modelNode.get("interfaces").asList();
  for (  ModelNode iface : interfaces) {
    writer.writeStartElement(Element.INTERFACE.getLocalName());
    writeAttribute(writer,Attribute.NAME,iface.get("name").asString());
    ModelNode criteria=iface.get("criteria");
    if (criteria.getType() == ModelType.STRING) {
      String value=criteria.asString();
      if (value.equals(Element.ANY_ADDRESS.getLocalName())) {
        writer.writeEmptyElement(Element.ANY_ADDRESS.getLocalName());
      }
 else       if (value.equals(Element.ANY_IPV4_ADDRESS.getLocalName())) {
        writer.writeEmptyElement(Element.ANY_IPV4_ADDRESS.getLocalName());
      }
 else       if (value.equals(Element.ANY_IPV6_ADDRESS.getLocalName())) {
        writer.writeEmptyElement(Element.ANY_IPV6_ADDRESS.getLocalName());
      }
 else {
        throw new RuntimeException("Unkown criteria type: " + value);
      }
    }
 else     if (criteria.getType() == ModelType.LIST) {
      List<ModelNode> values=criteria.asList();
      writeInterfaceCriteria(writer,values);
    }
 else {
      throw new RuntimeException("Unkown type for criteria node " + criteria);
    }
    writer.writeEndElement();
  }
  writer.writeEndElement();
}
