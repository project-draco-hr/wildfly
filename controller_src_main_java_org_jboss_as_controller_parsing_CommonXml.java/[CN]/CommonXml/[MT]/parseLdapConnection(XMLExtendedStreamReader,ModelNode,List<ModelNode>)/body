{
  String name=null;
  String url=null;
  String searchDN=null;
  String searchCredential=null;
  String initialContextFactory=null;
  final int count=reader.getAttributeCount();
  for (int i=0; i < count; i++) {
    final String value=reader.getAttributeValue(i);
    if (!isNoNamespaceAttribute(reader,i)) {
      throw unexpectedAttribute(reader,i);
    }
 else {
      final Attribute attribute=Attribute.forName(reader.getAttributeLocalName(i));
switch (attribute) {
case NAME:
{
          name=value;
          break;
        }
case URL:
{
        url=value;
        break;
      }
case SEARCH_DN:
{
      searchDN=value;
      break;
    }
case SEARCH_CREDENTIAL:
{
    searchCredential=value;
    break;
  }
case INITIAL_CONTEXT_FACTORY:
{
  initialContextFactory=value;
  break;
}
default :
{
throw unexpectedAttribute(reader,i);
}
}
}
}
Set<Attribute> missingAttributes=new HashSet<Attribute>();
if (name == null) missingAttributes.add(Attribute.NAME);
if (url == null) missingAttributes.add(Attribute.URL);
if (searchDN == null) missingAttributes.add(Attribute.SEARCH_DN);
if (searchCredential == null) missingAttributes.add(Attribute.SEARCH_CREDENTIAL);
if (missingAttributes.size() > 0) throw missingRequired(reader,missingAttributes);
requireNoContent(reader);
final ModelNode add=new ModelNode();
add.get(OP_ADDR).set(address).add(MANAGEMENT,CONNECTIONS).add(CONNECTION,name);
add.get(OP).set(ADD);
add.get(TYPE).set(LDAP);
add.get(URL).set(url);
add.get(SEARCH_DN).set(searchDN);
add.get(SEARCH_CREDENTIAL).set(searchCredential);
if (initialContextFactory != null) {
add.get(INITIAL_CONTEXT_FACTORY).set(INITIAL_CONTEXT_FACTORY);
}
list.add(add);
}
