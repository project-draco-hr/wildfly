{
  int securityRealmsCount=0;
  int connectionsCount=0;
  int managementInterfacesCount=0;
  final ModelNode managementAddress=address.clone().add(CORE_SERVICE,MANAGEMENT);
  while (reader.hasNext() && reader.nextTag() != END_ELEMENT) {
    requireNamespace(reader,expectedNs);
    final Element element=Element.forName(reader.getLocalName());
switch (element) {
case SECURITY_REALMS:
{
        if (++securityRealmsCount > 1) {
          throw unexpectedElement(reader);
        }
        parseSecurityRealms(reader,managementAddress,expectedNs,list);
        break;
      }
case OUTBOUND_CONNECTIONS:
{
      if (++connectionsCount > 1) {
        throw unexpectedElement(reader);
      }
      parseConnections(reader,managementAddress,expectedNs,list);
      break;
    }
case MANAGEMENT_INTERFACES:
{
    if (allowInterfaces) {
      if (++managementInterfacesCount > 1) {
        throw unexpectedElement(reader);
      }
      parseManagementInterfaces(reader,managementAddress,expectedNs,list);
    }
 else {
      String msg=String.format("Element %s is not supported in a domain.xml file",element.getLocalName());
      log.warn(ParseUtils.getWarningMessage(msg,reader.getLocation()));
    }
    break;
  }
default :
{
  throw unexpectedElement(reader);
}
}
}
}
