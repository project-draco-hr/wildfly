{
  try {
    ServiceContainer container=bootstrap(configuration,extraServices).get();
    ServiceController<?> controller=container.getRequiredService(Services.JBOSS_AS);
    AsyncFuture<ServiceContainer> startupFuture=(AsyncFuture<ServiceContainer>)controller.getValue();
    return startupFuture;
  }
 catch (  Exception ex) {
    throw new IllegalStateException("Cannot start server",ex);
  }
}
