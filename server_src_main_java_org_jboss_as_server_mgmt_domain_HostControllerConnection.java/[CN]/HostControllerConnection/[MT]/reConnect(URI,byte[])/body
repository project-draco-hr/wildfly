{
  final ProtocolConnectionConfiguration config=ProtocolConnectionConfiguration.copy(configuration);
  config.setCallbackHandler(createClientCallbackHandler(userName,authKey));
  config.setUri(reconnectUri);
  this.configuration=config;
  boolean ok=connectionManager.isConnected();
  final Connection connection=connectionManager.connect();
  try {
    channelHandler.executeRequest(new ServerReconnectRequest(),null);
    ok=true;
  }
  finally {
    if (!ok) {
      StreamUtils.safeClose(connection);
    }
  }
}
