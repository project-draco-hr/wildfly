{
  AuthorizationResult authorizationResult=context.authorize(operation);
  if (authorizationResult.getDecision() == AuthorizationResult.Decision.DENY) {
    throw ControllerMessages.MESSAGES.unauthorized(operation.get(OP).asString(),PathAddress.pathAddress(operation.get(OP_ADDR)),authorizationResult.getExplanation());
  }
  try {
    SnapshotInfo info=persister.listSnapshots();
    ModelNode result=context.getResult();
    result.get(ModelDescriptionConstants.DIRECTORY).set(info.getSnapshotDirectory());
    result.get(ModelDescriptionConstants.NAMES).setEmptyList();
    for (    String name : info.names()) {
      result.get(ModelDescriptionConstants.NAMES).add(name);
    }
  }
 catch (  Exception e) {
    throw new OperationFailedException(e);
  }
  context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
}
