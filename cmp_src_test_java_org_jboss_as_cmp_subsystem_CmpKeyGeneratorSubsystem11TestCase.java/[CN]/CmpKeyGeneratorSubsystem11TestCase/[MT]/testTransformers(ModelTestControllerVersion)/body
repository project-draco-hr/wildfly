{
  ModelVersion modelVersion=ModelVersion.create(1,0,0);
  KernelServicesBuilder builder=createKernelServicesBuilder(createAdditionalInitialization());
  builder.createLegacyKernelServicesBuilder(createAdditionalInitialization(),controllerVersion,modelVersion).addMavenResourceURL("org.jboss.as:jboss-as-cmp:" + controllerVersion.getMavenGavVersion()).configureReverseControllerCheck(createAdditionalInitialization(),null);
  KernelServices mainServices=builder.build();
  Assert.assertTrue(mainServices.isSuccessfulBoot());
  Assert.assertTrue(mainServices.getLegacyServices(modelVersion).isSuccessfulBoot());
  ModelTestUtils.checkFailedTransformedBootOperations(mainServices,modelVersion,parse(getSubsystemXml()),new FailedOperationTransformationConfig().addFailedAttribute(SUBSYSTEM_PATH.append(CmpSubsystemModel.UUID_KEY_GENERATOR_PATH),new FailedOperationTransformationConfig.NewAttributesConfig(CMPSubsystemRootResourceDefinition.JNDI_NAME)).addFailedAttribute(SUBSYSTEM_PATH.append(CmpSubsystemModel.HILO_KEY_GENERATOR_PATH),new FailedOperationTransformationConfig.NewAttributesConfig(CMPSubsystemRootResourceDefinition.JNDI_NAME)));
}
