{
  if (attribute == null) {
    return this.removeAttribute(name);
  }
  if (this.properties.isMarshalling() && !this.marshaller.getContext().isMarshallable(attribute)) {
    throw new IllegalArgumentException(new NotSerializableException(attribute.getClass().getName()));
  }
  SessionAttributeKey key=this.createKey(name);
  V value=this.marshaller.write(attribute);
  Object result=this.read(name,this.cache.getAdvancedCache().withFlags(Flag.FORCE_SYNCHRONOUS).put(key,value));
  if (this.mutations != null) {
    this.mutations.remove(key);
  }
  return result;
}
