{
  if (attribute == null) {
    return this.removeAttribute(name);
  }
  if (this.requireMarshallable && !this.marshaller.getContext().isMarshallable(attribute)) {
    throw new IllegalArgumentException(new NotSerializableException(attribute.getClass().getName()));
  }
  SessionAttributeKey key=this.createKey(name);
  V value=this.marshaller.write(attribute);
  return this.read(name,this.cache.getAdvancedCache().withFlags(Flag.FORCE_SYNCHRONOUS).put(key,value));
}
