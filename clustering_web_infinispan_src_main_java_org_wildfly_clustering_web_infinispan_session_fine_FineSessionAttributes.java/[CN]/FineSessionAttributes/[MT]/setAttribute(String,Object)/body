{
  if (attribute == null) {
    return this.removeAttribute(name);
  }
  SessionAttributeCacheKey key=this.createKey(name);
  V value=this.marshaller.write(attribute);
  return this.marshaller.read(this.cache.getAdvancedCache().withFlags(this.attributes.add(name) ? Flag.IGNORE_RETURN_VALUES : Flag.FORCE_SYNCHRONOUS).put(key,value));
}
