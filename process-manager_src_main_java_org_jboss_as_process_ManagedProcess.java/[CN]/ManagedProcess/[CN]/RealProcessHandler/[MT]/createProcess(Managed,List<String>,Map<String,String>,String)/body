{
  final ProcessBuilder processBuilder=new ProcessBuilder(command);
  final Map<String,String> env=processBuilder.environment();
  final String processName=managed.getProcessName();
  env.clear();
  env.putAll(environment);
  processBuilder.directory(new File(workingDirectory));
  final Process process;
synchronized (ManagedProcess.class) {
    process=processBuilder.start();
  }
  errorStream=process.getErrorStream();
  commandStream=process.getOutputStream();
  final Thread monitorThread=new Thread(new ProcessMonitor(managed,process));
  monitorThread.setName("Process " + processName + " monitor thread");
  monitorThread.start();
  return this;
}
