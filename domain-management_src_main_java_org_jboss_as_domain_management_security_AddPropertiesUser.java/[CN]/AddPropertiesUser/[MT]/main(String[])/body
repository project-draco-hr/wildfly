{
  boolean management=true;
  JavaConsole javaConsole=new JavaConsole();
  if (args.length >= 1) {
    Iterator<String> it=Arrays.asList(args).iterator();
    String temp;
    while (it.hasNext()) {
      temp=it.next();
      if (CommandLineArgument.HELP.match(temp)) {
        usage(javaConsole);
        return;
      }
      if (CommandLineArgument.DOMAIN_CONFIG_DIR_USERS.match(temp)) {
        System.setProperty(DOMAIN_CONFIG_DIR,it.next());
      }
 else       if (CommandLineArgument.SERVER_CONFIG_DIR_USERS.match(temp)) {
        System.setProperty(SERVER_CONFIG_DIR,it.next());
      }
 else       if (CommandLineArgument.APPLICATION_USERS.match(temp)) {
        management=false;
      }
 else {
        CommandLineArgument commandLineArgument=findCommandLineOption(temp);
        if (commandLineArgument != null) {
          final String value;
          if (CommandLineArgument.SILENT.equals(commandLineArgument)) {
            value=Boolean.TRUE.toString();
          }
 else {
            value=it.hasNext() ? it.next() : null;
          }
          if (value != null) {
            argsCliProps.setProperty(commandLineArgument.key(),value);
          }
        }
 else {
          final String userKey=CommandLineArgument.USER.key();
          if (!argsCliProps.containsKey(userKey)) {
            argsCliProps.setProperty(userKey,temp);
          }
 else {
            final String passwordKey=CommandLineArgument.PASSWORD.key();
            if (!argsCliProps.containsKey(passwordKey)) {
              argsCliProps.setProperty(passwordKey,temp);
            }
 else {
              final String realmKey=CommandLineArgument.REALM.key();
              if (!argsCliProps.containsKey(realmKey)) {
                argsCliProps.setProperty(realmKey,temp);
              }
            }
          }
        }
      }
    }
  }
  if (argsCliProps.containsKey(CommandLineArgument.PASSWORD.key()) || argsCliProps.containsKey(CommandLineArgument.USER.key())) {
    final String password=argsCliProps.getProperty(CommandLineArgument.PASSWORD.key());
    final String user=argsCliProps.getProperty(CommandLineArgument.USER.key());
    if (argsCliProps.containsKey(CommandLineArgument.REALM.key())) {
      new AddPropertiesUser(javaConsole,management,user,password,argsCliProps.getProperty(CommandLineArgument.REALM.key()),RealmMode.USER_SUPPLIED).run();
    }
 else {
      new AddPropertiesUser(javaConsole,management,user,password).run();
    }
  }
 else {
    String realm=null;
    if (argsCliProps.containsKey(CommandLineArgument.REALM.key())) {
      realm=argsCliProps.getProperty(CommandLineArgument.REALM.key());
    }
    new AddPropertiesUser(javaConsole,realm).run();
  }
}
