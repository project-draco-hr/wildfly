{
  boolean management=true;
  if (args.length >= 1) {
    Iterator<String> it=Arrays.asList(args).iterator();
    String temp;
    while (it.hasNext()) {
      temp=it.next();
      if (DOMAIN_CONFIG_DIR_USERS_OPTION.equals(temp)) {
        System.setProperty(DOMAIN_CONFIG_DIR,it.next());
      }
 else       if (SERVER_CONFIG_DIR_USERS_OPTION.equals(temp)) {
        System.setProperty(SERVER_CONFIG_DIR,it.next());
      }
 else       if (APPLICATION_USERS_OPTION.equals(temp)) {
        management=false;
      }
 else {
        CommandLineOption commandLineOption=findCommandLineOption(temp);
        if (commandLineOption != null) {
          final String value;
          if (SILENT_OPTION.equals(commandLineOption)) {
            value=Boolean.TRUE.toString();
          }
 else {
            value=it.next();
          }
          argsCliProps.setProperty(commandLineOption.key(),value);
        }
 else {
          if (!argsCliProps.containsKey(USER_OPTION.key())) {
            argsCliProps.setProperty(USER_OPTION.key(),temp);
          }
 else           if (!argsCliProps.containsKey(PASSWORD_OPTION.key())) {
            argsCliProps.setProperty(PASSWORD_OPTION.key(),temp);
          }
 else           if (!argsCliProps.containsKey(REALM_OPTION.key())) {
            argsCliProps.setProperty(REALM_OPTION.key(),temp);
          }
        }
      }
    }
  }
  if (argsCliProps.containsKey(PASSWORD_OPTION.key()) && argsCliProps.containsKey(USER_OPTION.key())) {
    char[] password=argsCliProps.getProperty(PASSWORD_OPTION.key()).toCharArray();
    String user=argsCliProps.getProperty(USER_OPTION.key());
    if (argsCliProps.contains(REALM_OPTION.key())) {
      new AddPropertiesUser(management,user,password,argsCliProps.getProperty(REALM_OPTION.key())).run();
    }
 else {
      new AddPropertiesUser(management,user,password).run();
    }
  }
 else {
    new AddPropertiesUser().run();
  }
}
