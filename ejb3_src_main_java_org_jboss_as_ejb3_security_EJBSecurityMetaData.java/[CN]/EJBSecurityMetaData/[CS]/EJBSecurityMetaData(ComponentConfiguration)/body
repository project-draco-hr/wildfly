{
  if (componentConfiguration.getComponentDescription() instanceof EJBComponentDescription == false) {
    throw MESSAGES.invalidComponentConfiguration(componentConfiguration.getComponentName());
  }
  final EJBComponentDescription ejbComponentDescription=(EJBComponentDescription)componentConfiguration.getComponentDescription();
  this.ejbClassName=ejbComponentDescription.getEJBClassName();
  this.ejbName=ejbComponentDescription.getEJBName();
  this.runAsRole=ejbComponentDescription.getRunAs();
  this.securityDomain=ejbComponentDescription.getSecurityDomain();
  this.runAsPrincipal=ejbComponentDescription.getRunAsPrincipal();
  this.securityRoles=ejbComponentDescription.getSecurityRoles();
  this.securityRoleLinks=ejbComponentDescription.getSecurityRoleLinks();
  final Set<String> roles=ejbComponentDescription.getDeclaredRoles();
  this.declaredRoles=roles == null ? Collections.<String>emptySet() : Collections.unmodifiableSet(roles);
  if (this.securityRoleLinks != null && this.securityRoles != null) {
    for (    final Map.Entry<String,Collection<String>> entry : this.securityRoleLinks.entrySet()) {
      final String aliasRoleName=entry.getKey();
      final Collection<String> roleNames=entry.getValue();
      if (roleNames == null || roleNames.isEmpty()) {
        continue;
      }
      for (      final String roleName : roleNames) {
        if (roleName == null || roleName.isEmpty()) {
          continue;
        }
        final SecurityRoleMetaData securityRole=this.getSecurityRole(roleName);
        if (securityRole == null) {
          continue;
        }
        final Set<String> principals=securityRole.getPrincipals();
        if (principals == null || principals.isEmpty()) {
          continue;
        }
        final SecurityRoleMetaData aliasSecurityRole=new SecurityRoleMetaData();
        aliasSecurityRole.setRoleName(aliasRoleName);
        aliasSecurityRole.setPrincipals(principals);
        this.securityRoles.add(aliasSecurityRole);
      }
    }
  }
}
