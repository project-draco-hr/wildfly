{
  final JavaArchive ejbJarOne=ShrinkWrap.create(JavaArchive.class,MODULE_ONE_NAME + ".jar");
  ejbJarOne.addClasses(SecuredBeanOne.class);
  ejbJarOne.addAsManifestResource(SecuredBeanOne.class.getPackage(),"one-jboss-ejb3.xml","jboss-ejb3.xml");
  final JavaArchive ejbJarTwo=ShrinkWrap.create(JavaArchive.class,MODULE_TWO_NAME + ".jar");
  ejbJarTwo.addClass(SecuredBeanTwo.class);
  ejbJarTwo.addAsManifestResource(SecuredBeanTwo.class.getPackage(),"two-jboss-ejb3.xml","jboss-ejb3.xml");
  final JavaArchive ejbJarThree=ShrinkWrap.create(JavaArchive.class,MODULE_THREE_NAME + ".jar");
  ejbJarThree.addClass(SecuredBeanThree.class);
  final JavaArchive libJar=ShrinkWrap.create(JavaArchive.class,"bean-interfaces.jar");
  libJar.addClasses(SecurityTestRemoteView.class,Util.class,MissingMethodPermissionsDefaultAllowedTestCase.class);
  final EnterpriseArchive ear=ShrinkWrap.create(EnterpriseArchive.class,APP_NAME + ".ear");
  ear.addAsModules(ejbJarOne,ejbJarTwo,ejbJarThree);
  ear.addAsLibrary(libJar);
  return ear;
}
