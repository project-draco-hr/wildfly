{
  Set<String> classNames=new HashSet<String>();
  if (index != null) {
    classNames.addAll(Collections2.transform(index.getKnownClasses(),Indices.CLASS_INFO_TO_FQCN));
  }
  String beanArchiveId=null;
  if (beanArchiveMetadata.getResourceRoot() == null) {
    beanArchiveId=getDeploymentUnitId(deploymentUnit);
  }
 else {
    beanArchiveId=beanArchiveMetadata.getResourceRoot().getRoot().getPathName();
  }
  return new BeanDeploymentArchiveImpl(classNames,beanArchiveMetadata.getBeansXml(),module,beanArchiveId,BeanArchiveType.EXPLICIT,root);
}
