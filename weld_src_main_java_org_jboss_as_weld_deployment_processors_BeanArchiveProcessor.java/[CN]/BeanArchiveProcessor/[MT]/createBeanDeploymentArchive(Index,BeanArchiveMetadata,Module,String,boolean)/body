{
  Set<String> classNames=new HashSet<String>();
  if (index != null) {
    for (    ClassInfo classInfo : index.getKnownClasses()) {
      classNames.add(classInfo.name().toString());
    }
  }
  String beanArchiveId=beanArchivePrefix;
  if (beanArchiveMetadata.getResourceRoot() != null) {
    beanArchiveId+=beanArchiveMetadata.getResourceRoot().getRoot().getPathName();
  }
  return new BeanDeploymentArchiveImpl(classNames,beanArchiveMetadata.getBeansXml(),module,beanArchiveId,root);
}
