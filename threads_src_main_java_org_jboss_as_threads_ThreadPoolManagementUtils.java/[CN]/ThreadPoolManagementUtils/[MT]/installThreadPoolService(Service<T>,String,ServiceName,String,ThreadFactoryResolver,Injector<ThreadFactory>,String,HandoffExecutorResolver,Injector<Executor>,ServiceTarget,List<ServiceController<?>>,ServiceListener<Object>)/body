{
  final ServiceName threadPoolServiceName=serviceNameBase.append(threadPoolName);
  final ServiceBuilder<?> serviceBuilder=target.addService(threadPoolServiceName,threadPoolService);
  final ServiceName threadFactoryServiceName=threadFactoryResolver.resolveThreadFactory(threadFactoryName,threadPoolName,threadPoolServiceName,target,newControllers,newServiceListeners);
  serviceBuilder.addDependency(threadFactoryServiceName,ThreadFactory.class,threadFactoryInjector);
  if (handoffExecutorInjector != null) {
    ServiceName handoffServiceName=handoffExecutorResolver.resolveHandoffExecutor(handoffExecutorName,threadPoolName,threadPoolServiceName,target,newControllers,newServiceListeners);
    if (handoffServiceName != null) {
      serviceBuilder.addDependency(handoffServiceName,Executor.class,handoffExecutorInjector);
    }
  }
  if (newServiceListeners != null && newServiceListeners.length > 0) {
    serviceBuilder.addListener(newServiceListeners);
  }
  ServiceController<?> sc=serviceBuilder.install();
  if (newControllers != null) {
    newControllers.add(sc);
  }
}
