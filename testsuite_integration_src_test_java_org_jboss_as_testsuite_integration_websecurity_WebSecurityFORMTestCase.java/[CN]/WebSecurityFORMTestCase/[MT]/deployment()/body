{
  ClassLoader tccl=Thread.currentThread().getContextClassLoader();
  URL webxml=tccl.getResource("web-secure.war/web.xml");
  WebArchive war=ShrinkWrap.create(WebArchive.class,"web-secure.war");
  war.addClass(SecuredServlet.class);
  File userProp=new File(tccl.getResource("web-secure.war/users.properties").getPath());
  File roleProp=new File(tccl.getResource("web-secure.war/roles.properties").getPath());
  File loginJSP=new File(tccl.getResource("web-secure.war/login.jsp").getPath());
  File errorJSP=new File(tccl.getResource("web-secure.war/error.jsp").getPath());
  war.addResource(loginJSP);
  war.addResource(errorJSP);
  war.addResource(userProp,"/WEB-INF/classes/users.properties");
  war.addResource(roleProp,"/WEB-INF/classes/roles.properties");
  war.setWebXML(webxml);
  return war;
}
