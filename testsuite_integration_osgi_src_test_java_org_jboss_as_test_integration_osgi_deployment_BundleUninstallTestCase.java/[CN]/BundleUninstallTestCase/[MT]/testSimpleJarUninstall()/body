{
  Bundle jar=context.installBundle(V200_JAR,deployer.getDeployment(V200_JAR));
  Assert.assertEquals(Bundle.INSTALLED,jar.getState());
  XEnvironment env=context.getBundle().adapt(XEnvironment.class);
  XBundleRevision brev=(XBundleRevision)jar.adapt(BundleRevision.class);
  Long resid=brev.getAttachment(XResource.RESOURCE_IDENTIFIER_KEY);
  jar.uninstall();
  Assert.assertEquals(Bundle.UNINSTALLED,jar.getState());
  Assert.assertNull("BundleRevision is null",jar.adapt(BundleRevision.class));
  Assert.assertNull("BundleWiring is null",brev.getWiring());
  Assert.assertNull("BundleRevision removed from environment",env.getResourceById(resid));
}
