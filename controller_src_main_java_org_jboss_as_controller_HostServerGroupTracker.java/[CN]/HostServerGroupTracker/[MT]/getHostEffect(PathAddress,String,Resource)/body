{
  if (requiresMapping) {
    map(root);
    requiresMapping=false;
  }
  Set<String> mapped=hostsToGroups.get(host);
  if (mapped == null) {
    Resource hostResource=root.getChild(PathElement.pathElement(HOST,host));
    if (hostResource != null) {
      ModelNode dcModel=hostResource.getModel().get(DOMAIN_CONTROLLER);
      if (!dcModel.hasDefined(REMOTE)) {
        mapped=Collections.emptySet();
      }
    }
  }
  return mapped == null ? HostServerGroupEffect.forUnassignedHost(address,host) : HostServerGroupEffect.forHost(address,mapped,host);
}
