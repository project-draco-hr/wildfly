{
  if (requiresMapping) {
    map(root);
    requiresMapping=false;
  }
  Set<String> mapped=hostsToGroups.get(host);
  return mapped == null ? HostServerGroupEffect.forUnassignedHost(address,host) : HostServerGroupEffect.forHost(address,mapped,host);
}
