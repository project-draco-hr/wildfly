{
  final Map<DeploymentModuleIdentifier,ModuleDeployment> modules=new HashMap<DeploymentModuleIdentifier,ModuleDeployment>(this.modules);
  modules.remove(identifier);
  this.modules=Collections.unmodifiableMap(modules);
  for (  final DeploymentRepositoryListener listener : listeners) {
    try {
      listener.deploymentRemoved(identifier);
    }
 catch (    Throwable t) {
      logger.error("Exception calling deployment removal listener",t);
    }
  }
}
