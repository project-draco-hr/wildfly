{
  final Map<DeploymentModuleIdentifier,ModuleDeployment> modules=new HashMap<DeploymentModuleIdentifier,ModuleDeployment>(this.modules);
  modules.put(identifier,deployment);
  this.modules=Collections.unmodifiableMap(modules);
  for (  final DeploymentRepositoryListener listener : listeners) {
    try {
      listener.deploymentAvailable(identifier,deployment);
    }
 catch (    Throwable t) {
      logger.error("Exception calling deployment added listener",t);
    }
  }
}
