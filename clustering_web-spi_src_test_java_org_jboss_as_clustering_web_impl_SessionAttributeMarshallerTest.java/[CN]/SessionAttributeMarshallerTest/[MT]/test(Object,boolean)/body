{
  try {
    Object marshalled=this.marshaller.marshal(original);
    if (original != null) {
      assertTrue(original instanceof Serializable);
    }
    if (marshalled != null) {
      assertTrue(marshalled instanceof Serializable);
    }
    if (same) {
      assertSame(original,marshalled);
    }
 else {
      assertNotSame(original,marshalled);
    }
    Object unmarshalled=this.marshaller.unmarshal(marshalled);
    if (same) {
      assertSame(marshalled,unmarshalled);
    }
 else {
      assertNotSame(marshalled,unmarshalled);
      assertEquals(original,unmarshalled);
    }
  }
 catch (  IllegalArgumentException e) {
    assertFalse(same);
    assertFalse(original instanceof Serializable);
  }
}
