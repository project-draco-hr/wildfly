{
  final Unmarshaller unmarshaller=getUnmarshaller();
  unmarshaller.start(createByteInput(input));
  ProtocolUtils.expectHeader(unmarshaller,ServerManagerProtocol.PARAM_MODEL_UPDATE_RESPONSE_COUNT);
  int responseCount=unmarshaller.readInt();
  if (responseCount != updates.size()) {
    throw new IOException("Invalid host model update response.  Response count not equal to update count.");
  }
  final List<HostUpdateResult<?>> responses=new ArrayList<HostUpdateResult<?>>(responseCount);
  for (int i=0; i < responseCount; i++) {
    ProtocolUtils.expectHeader(unmarshaller,ServerManagerProtocol.PARAM_MODEL_UPDATE_RESPONSE);
    final HostUpdateResult<?> response=unmarshal(unmarshaller,HostUpdateResult.class);
    responses.add(response);
  }
  unmarshaller.finish();
  return responses;
}
