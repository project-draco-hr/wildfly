{
  final Marshaller marshaller=getMarshaller();
  marshaller.start(createByteOutput(output));
  marshaller.writeByte(HostControllerProtocol.PARAM_SERVER_NAME);
  marshaller.writeUTF(serverName);
  marshaller.writeByte(HostControllerProtocol.PARAM_ALLOW_ROLLBACK);
  marshaller.writeBoolean(allowOverallRollback);
  marshaller.writeByte(HostControllerProtocol.PARAM_SERVER_MODEL_UPDATE_COUNT);
  marshaller.writeInt(updates.size());
  for (  AbstractServerModelUpdate<?> update : updates) {
    marshaller.writeByte(HostControllerProtocol.PARAM_SERVER_MODEL_UPDATE);
    marshaller.writeObject(update);
  }
  marshaller.finish();
}
