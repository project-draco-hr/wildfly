{
  final Unmarshaller unmarshaller=getUnmarshaller();
  unmarshaller.start(createByteInput(input));
  ProtocolUtils.expectHeader(unmarshaller,HostControllerProtocol.RETURN_SERVER_COUNT);
  int count=unmarshaller.readInt();
  final Map<ServerIdentity,ServerStatus> map=new HashMap<ServerIdentity,ServerStatus>();
  for (int i=0; i < count; i++) {
    ProtocolUtils.expectHeader(unmarshaller,HostControllerProtocol.RETURN_SERVER_NAME);
    String serverName=unmarshaller.readUTF();
    ProtocolUtils.expectHeader(unmarshaller,HostControllerProtocol.RETURN_SERVER_GROUP_NAME);
    String groupName=unmarshaller.readUTF();
    ProtocolUtils.expectHeader(unmarshaller,HostControllerProtocol.RETURN_SERVER_STATUS);
    ServerStatus status=unmarshal(unmarshaller,ServerStatus.class);
    map.put(new ServerIdentity(id,groupName,serverName),status);
  }
  return map;
}
