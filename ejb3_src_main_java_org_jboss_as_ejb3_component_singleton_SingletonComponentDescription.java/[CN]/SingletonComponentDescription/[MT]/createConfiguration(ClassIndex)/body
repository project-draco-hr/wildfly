{
  ComponentConfiguration singletonComponentConfiguration=new ComponentConfiguration(this,classIndex);
  singletonComponentConfiguration.setComponentCreateServiceFactory(new SingletonComponentCreateServiceFactory(this.isInitOnStartup(),dependsOn));
  if (getTransactionManagementType().equals(TransactionManagementType.CONTAINER)) {
    getConfigurators().add(new ComponentConfigurator(){
      @Override public void configure(      final DeploymentPhaseContext context,      final ComponentDescription description,      final ComponentConfiguration configuration) throws DeploymentUnitProcessingException {
        configuration.addPostConstructInterceptor(new SingletonLifecycleCMTTxInterceptorFactory(TransactionAttributeType.REQUIRES_NEW),InterceptorOrder.ComponentPostConstruct.TRANSACTION_INTERCEPTOR);
        configuration.addPreDestroyInterceptor(new SingletonLifecycleCMTTxInterceptorFactory(TransactionAttributeType.REQUIRES_NEW),InterceptorOrder.ComponentPreDestroy.TRANSACTION_INTERCEPTOR);
        configuration.addTimeoutInterceptor(TimerCMTTxInterceptorFactory.INSTANCE,InterceptorOrder.Component.TIMEOUT_CMT_INTERCEPTOR);
      }
    }
);
  }
 else {
    getConfigurators().add(new ComponentConfigurator(){
      @Override public void configure(      final DeploymentPhaseContext context,      final ComponentDescription description,      final ComponentConfiguration configuration) throws DeploymentUnitProcessingException {
        final ComponentInstanceInterceptorFactory slsbBmtInterceptorFactory=new ComponentInstanceInterceptorFactory(){
          @Override protected Interceptor create(          Component component,          InterceptorFactoryContext context){
            if (component instanceof SingletonComponent == false) {
              throw new IllegalArgumentException("Component " + component + " with component class: "+ component.getComponentClass()+ " isn't a singleton component");
            }
            return new SingletonBMTInterceptor((SingletonComponent)component);
          }
        }
;
        configuration.addPostConstructInterceptor(slsbBmtInterceptorFactory,InterceptorOrder.ComponentPostConstruct.TRANSACTION_INTERCEPTOR);
        configuration.addPreDestroyInterceptor(slsbBmtInterceptorFactory,InterceptorOrder.ComponentPreDestroy.TRANSACTION_INTERCEPTOR);
        configuration.addComponentInterceptor(slsbBmtInterceptorFactory,InterceptorOrder.Component.BMT_TRANSACTION_INTERCEPTOR,false);
        configuration.addTimeoutInterceptor(slsbBmtInterceptorFactory,InterceptorOrder.Component.BMT_TRANSACTION_INTERCEPTOR);
      }
    }
);
  }
  return singletonComponentConfiguration;
}
