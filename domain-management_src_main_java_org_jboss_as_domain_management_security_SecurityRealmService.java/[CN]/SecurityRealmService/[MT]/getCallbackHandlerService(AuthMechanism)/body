{
  if (registeredServices.containsKey(mechanism)) {
    return registeredServices.get(mechanism);
  }
  for (  CallbackHandlerService current : registeredServices.values()) {
    if (current.getSupplementaryMechanisms().contains(mechanism)) {
      return current;
    }
  }
  throw MESSAGES.noCallbackHandlerForMechanism(mechanism.toString(),name);
}
