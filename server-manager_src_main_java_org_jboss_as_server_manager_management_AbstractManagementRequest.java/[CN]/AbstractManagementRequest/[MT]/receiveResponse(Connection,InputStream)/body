{
  final ByteDataInput input=new SimpleByteDataInput(dataStream);
  try {
    expectHeader(input,ManagementProtocol.RESPONSE_START);
    byte responseCode=input.readByte();
    if (responseCode != getResponseCode()) {
      throw new ManagementException("Invalid response code.  Expecting '" + getResponseCode() + "' received '"+ responseCode+ "'");
    }
    final T result=receiveResponse(input);
    expectHeader(input,ManagementProtocol.RESPONSE_END);
    return result;
  }
 catch (  ManagementException e) {
    throw e;
  }
catch (  Throwable t) {
    throw new ManagementException("Failed to receive management response",t);
  }
}
