{
  protocolClient.disconnected(old);
  if (!shuttingDown && requiredState == InternalState.SERVER_STARTED) {
    final InternalState state=internalState;
    if (state == InternalState.PROCESS_STOPPED || state == InternalState.PROCESS_STOPPING || state == InternalState.STOPPED) {
      return true;
    }
    if (state == InternalState.RELOADING) {
      return true;
    }
    try {
      HostControllerLogger.ROOT_LOGGER.tracef("trying to reconnect to %s current-state (%s) required-state (%s)",serverName,state,requiredState);
      internalSetState(new ReconnectTask(),state,InternalState.SEND_STDIN);
    }
 catch (    Exception e) {
      HostControllerLogger.ROOT_LOGGER.debugf(e,"failed to send reconnect task");
    }
    return false;
  }
 else {
    return true;
  }
}
