{
  final InternalState current=this.internalState;
  final TransactionalProtocolClient remoteClient=TransactionalProtocolHandlers.createClient(channelAssociation);
  if (current == InternalState.SERVER_STARTED && proxyController == null) {
    protocolClient.connected(remoteClient);
    this.requiresReload=false;
  }
 else {
    internalSetState(new TransitionTask(){
      @Override public void execute(      final ManagedServer server) throws Exception {
        protocolClient.connected(remoteClient);
      }
    }
,InternalState.SERVER_STARTING,InternalState.SERVER_STARTING);
  }
  return remoteClient;
}
