{
  final InternalState current=this.internalState;
  final TransactionalProtocolClient remoteClient=TransactionalProtocolHandlers.createClient(channelAssociation);
  if (reloading) {
    protocolClient.connected(remoteClient);
    this.requiresReload=false;
  }
 else {
    internalSetState(new TransitionTask(){
      @Override public void execute(      final ManagedServer server) throws Exception {
        protocolClient.connected(remoteClient);
      }
    }
,InternalState.SEND_STDIN,InternalState.SERVER_STARTING);
  }
  this.reloading=false;
  return remoteClient;
}
