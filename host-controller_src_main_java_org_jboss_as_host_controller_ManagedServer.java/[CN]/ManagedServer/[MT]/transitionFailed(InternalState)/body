{
  final InternalState current=this.internalState;
  if (state == current) {
switch (current) {
case PROCESS_ADDING:
      this.internalState=InternalState.PROCESS_STOPPED;
    break;
case PROCESS_STARTED:
  internalSetState(getTransitionTask(InternalState.PROCESS_STOPPING),InternalState.PROCESS_STARTED,InternalState.PROCESS_ADDED);
break;
case PROCESS_STARTING:
this.internalState=InternalState.PROCESS_ADDED;
break;
case SEND_STDIN:
case SERVER_STARTING:
this.internalState=InternalState.PROCESS_STARTED;
break;
}
this.requiredState=InternalState.FAILED;
notifyAll();
}
}
