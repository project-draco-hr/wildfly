{
  if (serverManagementConnection == null) {
    Exception e=new IllegalStateException("Updates can not be applied to a managed server without a management connection");
    UpdateResultHandlerResponse<?> urhr=UpdateResultHandlerResponse.createFailureResponse(e);
    List<UpdateResultHandlerResponse<?>> result=new ArrayList<UpdateResultHandlerResponse<?>>(updates.size());
    for (int i=0; i < updates.size(); i++) {
      result.add(urhr);
    }
    return result;
  }
  try {
    return new ApplyUpdatesRequest(updates,allowOverallRollback).executeForResult(new ManagementRequestConnectionStrategy.ExistingConnectionStrategy(serverManagementConnection));
  }
 catch (  Exception e) {
    UpdateResultHandlerResponse<?> urhr=UpdateResultHandlerResponse.createFailureResponse(e);
    List<UpdateResultHandlerResponse<?>> result=new ArrayList<UpdateResultHandlerResponse<?>>(updates.size());
    for (int i=0; i < updates.size(); i++) {
      result.add(urhr);
    }
    return result;
  }
}
