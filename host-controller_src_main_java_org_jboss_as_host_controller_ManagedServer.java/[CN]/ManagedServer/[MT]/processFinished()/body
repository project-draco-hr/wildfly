{
  final InternalState required=this.requiredState;
  final InternalState state=this.internalState;
  if (required == InternalState.STOPPED && state == InternalState.PROCESS_STOPPING) {
    finishTransition(InternalState.PROCESS_STOPPING,InternalState.PROCESS_STOPPED);
  }
 else {
    this.requiredState=InternalState.FAILED;
    internalSetState(null,state,InternalState.PROCESS_STOPPED);
  }
}
