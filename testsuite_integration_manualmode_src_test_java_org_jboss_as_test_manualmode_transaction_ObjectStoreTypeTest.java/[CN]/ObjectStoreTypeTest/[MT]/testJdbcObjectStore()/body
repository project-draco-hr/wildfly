{
  try {
    String objectStoreType=readObjectStoreType();
    assertEquals("default",objectStoreType);
    cli.sendLine("data-source add --name=ObjectStoreTestDS --jndi-name=java:jboss/datasources/ObjectStoreTestDS --driver-name=h2 --connection-url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1 --jta=false");
    cli.sendLine("/subsystem=transactions:write-attribute(name=jdbc-store-datasource, value=java:jboss/datasources/ObjectStoreTestDS)");
    cli.sendLine("/subsystem=transactions:write-attribute(name=use-jdbc-store, value=true)");
    final CLIOpResult ret=cli.readAllAsOpResult();
    assertEquals("reload-required",(String)((Map)ret.getFromResponse(RESPONSE_HEADERS)).get(PROCESS_STATE));
    cli.sendLine("reload");
    objectStoreType=readObjectStoreType();
    assertEquals("jdbc",objectStoreType);
  }
  finally {
    try {
      setDefaultObjectStore(true);
    }
  finally {
      cli.sendLine("data-source remove --name=ObjectStoreTestDS");
    }
  }
}
