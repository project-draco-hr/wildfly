{
  if (relationData.removedRelations.size() == 0) {
    return;
  }
  Iterator pairs=relationData.removedRelations.iterator();
  int i=0;
  while (i < relationData.removedRelations.size()) {
    String sql=getSQL(relationData,relationData.removedRelations.size() - i);
    Connection con=null;
    PreparedStatement ps=null;
    JDBCCMRFieldBridge cmrField=relationData.getLeftCMRField();
    try {
      if (log.isDebugEnabled()) {
        log.debug("Executing SQL: " + sql);
      }
      DataSource dataSource=cmrField.getDataSource();
      con=dataSource.getConnection();
      ps=con.prepareStatement(sql);
      setParameters(ps,relationData,pairs);
      int rowsAffected=ps.executeUpdate();
      if (log.isDebugEnabled()) {
        log.debug("Rows affected = " + rowsAffected);
      }
      i+=(maxKeysInDelete > 0 ? maxKeysInDelete : relationData.removedRelations.size());
    }
 catch (    Exception e) {
      throw new EJBException("Could not delete relations from " + cmrField.getQualifiedTableName(),e);
    }
 finally {
      JDBCUtil.safeClose(ps);
      JDBCUtil.safeClose(con);
    }
  }
}
