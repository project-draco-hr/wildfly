{
  ByteDataOutput output=null;
  try {
    output=new SimpleByteDataOutput(outputStream);
    output.writeByte(StandaloneClientProtocol.PARAM_DEPLOYMENT_NAME);
    output.writeUTF(name);
    output.writeByte(StandaloneClientProtocol.PARAM_DEPLOYMENT_RUNTIME_NAME);
    output.writeUTF(runtimeName);
    output.writeByte(StandaloneClientProtocol.PARAM_DEPLOYMENT_CONTENT);
    ChunkyByteOutput chunkyByteOutput=null;
    try {
      chunkyByteOutput=new ChunkyByteOutput(output,8192);
      byte[] buffer=new byte[8192];
      int read;
      while ((read=inputStream.read(buffer)) != -1) {
        chunkyByteOutput.write(buffer,0,read);
      }
    }
  finally {
      safeClose(inputStream);
      safeClose(chunkyByteOutput);
    }
    output.close();
  }
  finally {
    safeClose(output);
  }
}
