{
  final List<AnnotationTarget> resourceInjectionTargets=classAnnotations.get(RESOURCE_ANNOTATION_NAME);
  if (resourceInjectionTargets == null) {
    managedBeanConfiguration.setResourceInjectionConfigurations(Collections.<ResourceInjectionConfiguration>emptyList());
  }
  final List<ResourceInjectionConfiguration> resourceInjectionConfigurations=new ArrayList<ResourceInjectionConfiguration>(resourceInjectionTargets.size());
  for (  AnnotationTarget annotationTarget : resourceInjectionTargets) {
    if (annotationTarget instanceof FieldInfo) {
      final FieldInfo fieldInfo=FieldInfo.class.cast(annotationTarget);
      resourceInjectionConfigurations.add(new ResourceInjectionConfiguration(fieldInfo.name(),fieldInfo.type().name().toString(),ResourceInjectionConfiguration.TargetType.FIELD));
    }
 else     if (annotationTarget instanceof MethodInfo) {
      final MethodInfo methodInfo=MethodInfo.class.cast(annotationTarget);
      final String methodName=methodInfo.name();
      final Type[] args=methodInfo.args();
      if (!methodName.startsWith("set") || args.length != 1) {
        throw new DeploymentUnitProcessingException("@Resource injection target is invalid.  Only setter methods are allowed: " + methodInfo,null);
      }
      resourceInjectionConfigurations.add(new ResourceInjectionConfiguration(methodName,args[0].name().toString(),ResourceInjectionConfiguration.TargetType.METHOD));
    }
  }
}
