{
  Object oldValue=this.session.getAttributes().setAttribute(name,value);
  if (value != oldValue) {
    HttpSessionBindingEvent event=new HttpSessionBindingEvent(this,name,(oldValue != null) ? oldValue : value);
    for (    HttpSessionAttributeListener listener : this.session.getContext().getSessionAttributeListeners()) {
      if (oldValue == null) {
        listener.attributeAdded(event);
      }
 else       if (value == null) {
        listener.attributeRemoved(event);
      }
 else {
        listener.attributeReplaced(event);
      }
    }
    if (oldValue instanceof HttpSessionBindingListener) {
      HttpSessionBindingListener listener=(HttpSessionBindingListener)oldValue;
      listener.valueUnbound(new HttpSessionBindingEvent(this,name));
    }
    if (value instanceof HttpSessionBindingListener) {
      HttpSessionBindingListener listener=(HttpSessionBindingListener)value;
      listener.valueBound(new HttpSessionBindingEvent(this,name));
    }
  }
}
