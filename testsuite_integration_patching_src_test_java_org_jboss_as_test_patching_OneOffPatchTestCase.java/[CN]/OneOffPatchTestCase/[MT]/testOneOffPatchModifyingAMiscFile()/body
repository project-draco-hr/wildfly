{
  File tempDir=mkdir(new File(System.getProperty("java.io.tmpdir")),randomString());
  String patchID=randomString();
  File oneOffPatchDir=mkdir(tempDir,patchID);
  final String testFilePath=PatchingTestUtil.AS_DISTRIBUTION + "/README.txt";
  final String testContent="test content";
  final String originalContent=PatchingTestUtil.readFile(testFilePath);
  ContentModification miscFileModified=ContentModificationUtils.modifyMisc(oneOffPatchDir,patchID,testContent,new File(testFilePath),"README.txt");
  ProductConfig productConfig=new ProductConfig(PRODUCT,AS_VERSION,"consoleSlot");
  Patch oneOffPatch=PatchBuilder.create().setPatchId(patchID).setDescription("A one-off patch modifying a misc file.").oneOffPatchIdentity(productConfig.getProductName(),productConfig.getProductVersion()).getParent().addContentModification(miscFileModified).build();
  PatchingTestUtil.createPatchXMLFile(oneOffPatchDir,oneOffPatch);
  File zippedPatch=PatchingTestUtil.createZippedPatchFile(oneOffPatchDir,patchID);
  controller.start(CONTAINER);
  CliUtilsForPatching.applyPatch(zippedPatch.getAbsolutePath());
  controller.stop(CONTAINER);
  String patchContent=PatchingTestUtil.readFile(testFilePath);
  Assert.assertEquals(testContent,patchContent);
  controller.start(CONTAINER);
  CliUtilsForPatching.rollbackPatch(patchID);
  controller.stop(CONTAINER);
  patchContent=PatchingTestUtil.readFile(testFilePath);
  Assert.assertEquals(originalContent,patchContent);
}
