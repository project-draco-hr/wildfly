{
  final ContentItem item=new MiscContentItem("dir",new String[]{"test"},NO_CONTENT,true,false);
  final ContentModification addDir=new ContentModification(item,NO_CONTENT,ModificationType.ADD);
  final String patchID=randomString();
  final Patch patch=PatchBuilder.create().setPatchId(patchID).setDescription(randomString()).oneOffPatchIdentity(productConfig.getProductName(),productConfig.getProductVersion()).getParent().addContentModification(addDir).build();
  final File patchDir=mkdir(tempDir,patch.getPatchId());
  createPatchXMLFile(patchDir,patch);
  final File zippedPatch=createZippedPatchFile(patchDir,patch.getPatchId());
  PatchingResult result=executePatch(zippedPatch);
  assertPatchHasBeenApplied(result,patch);
  final File test=new File(env.getInstalledImage().getJbossHome(),"test");
  assertTrue(test.exists());
  assertTrue(test.isDirectory());
  final File dir=new File(test,"dir");
  assertTrue(dir.exists());
  assertTrue(dir.isDirectory());
  rollback(patchID);
}
