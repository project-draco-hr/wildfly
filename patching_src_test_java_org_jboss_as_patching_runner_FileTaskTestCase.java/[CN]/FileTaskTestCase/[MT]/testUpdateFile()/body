{
  File binDir=mkdir(env.getInstalledImage().getJbossHome(),"bin");
  String fileName="standalone.sh";
  File standaloneShellFile=touch(binDir,fileName);
  dump(standaloneShellFile,"original script to run standalone AS7");
  String patchID=randomString();
  File patchDir=mkdir(tempDir,patchID);
  ContentModification fileModified=ContentModificationUtils.modifyMisc(patchDir,patchID,"updated script",standaloneShellFile,"bin","standalone.sh");
  Patch patch=PatchBuilder.create().setPatchId(patchID).setDescription(randomString()).oneOffPatchIdentity(productConfig.getProductName(),productConfig.getProductVersion(),Constants.NOT_PATCHED).getParent().addContentModification(fileModified).build();
  createPatchXMLFile(patchDir,patch);
  File zippedPatch=createZippedPatchFile(patchDir,patch.getPatchId());
  PatchingResult result=executePatch(zippedPatch);
  assertPatchHasBeenApplied(result,patch);
  assertFileExists(standaloneShellFile);
  assertFileContent(fileModified.getItem().getContentHash(),standaloneShellFile);
  File backupFile=assertFileExists(env.getInstalledImage().getPatchHistoryDir(patchID),"misc","bin",fileName);
  assertFileContent(fileModified.getTargetHash(),backupFile);
}
