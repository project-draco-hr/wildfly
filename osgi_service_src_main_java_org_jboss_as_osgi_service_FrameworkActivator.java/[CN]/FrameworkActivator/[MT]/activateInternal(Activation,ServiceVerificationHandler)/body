{
  boolean activate=activated.compareAndSet(false,true);
  if (activate) {
    new BootstrapBundlesIntegration().install(serviceTarget,verificationHandler);
    new PersistentBundlesIntegration().install(serviceTarget,verificationHandler);
    ServiceName serviceName=Services.FRAMEWORK_ACTIVE.getParent().append(activation.toString(),"ACTIVATOR");
switch (activation) {
case EAGER:
      EagerActivatorService.addService(serviceTarget,serviceName,verificationHandler);
    break;
case LAZY:
  LazyActivatorService.addService(serviceTarget,serviceName,verificationHandler);
break;
}
}
return activate;
}
