{
  this.trace("passivate(%s)",key);
  E entry=store.get(key);
  if (entry == null) {
    EjbLogger.ROOT_LOGGER.cacheEntryNotFound(key);
    return;
  }
  if (!entry.tryLock()) {
    throw EjbMessages.MESSAGES.cacheEntryInUse(entry);
  }
  try {
    if (entry.isInUse()) {
      throw EjbMessages.MESSAGES.cacheEntryInUse(entry);
    }
    passivationManager.prePassivate(entry);
    entry.setPrePassivated(true);
    entry.invalidate();
    store.passivate(entry);
  }
  finally {
    entry.unlock();
  }
}
