{
  GlobalOperationHandlers.registerGlobalOperations(rootRegistration,processType);
  rootRegistration.registerOperationHandler(new SimpleOperationDefinitionBuilder("setup",new NonResolvingResourceDescriptionResolver()).setPrivateEntry().build(),new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      context.createResource(PathAddress.EMPTY_ADDRESS.append(PathElement.pathElement("profile","test")));
      context.stepCompleted();
    }
  }
);
  ManagementResourceRegistration profileRegistration=rootRegistration.registerSubModel(ResourceBuilder.Factory.create(PathElement.pathElement("profile"),new NonResolvingResourceDescriptionResolver()).addReadOnlyAttribute(SimpleAttributeDefinitionBuilder.create("name",ModelType.STRING,false).setMinSize(1).build()).build());
  TestExtensionContext context=new TestExtensionContext(profileRegistration);
  ThreadsExtension extension=new ThreadsExtension();
  extension.initialize(context);
  Assert.assertNotNull(context.createdRegistration);
}
