{
  final PathAddress address=PathAddress.pathAddress(operation.get(ModelDescriptionConstants.OP_ADDR));
  final String deploymentName=address.getElement(address.size() - 3).getValue();
  final ModelNode node=context.readModel(PathAddress.EMPTY_ADDRESS);
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    final OperationContext context,    final ModelNode operation) throws OperationFailedException {
      final ServiceController<?> controller=context.getServiceRegistry(false).getRequiredService(WebSubsystemServices.JBOSS_WEB.append(deploymentName));
      if (controller != null) {
        final String name=node.get("servlet-name").asString();
        final Context webContext=Context.class.cast(controller.getValue());
        final Wrapper wrapper=Wrapper.class.cast(webContext.findChild(name));
        handle(context.getResult(),address.getLastElement().getValue(),wrapper);
      }
      context.completeStep();
    }
  }
,OperationContext.Stage.RUNTIME);
  context.completeStep();
}
