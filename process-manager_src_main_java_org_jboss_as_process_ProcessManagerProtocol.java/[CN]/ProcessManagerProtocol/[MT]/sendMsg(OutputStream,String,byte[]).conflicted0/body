{
  final StringBuilder b=new StringBuilder();
  b.append(OutgoingCommand.MSG);
  b.append('\0');
  b.append(sender);
  b.append('\0');
synchronized (output) {
    StreamUtils.writeString(output,b.toString());
    StreamUtils.writeInt(output,msg.length);
    output.write(msg,0,msg.length);
    StreamUtils.writeChar(output,'\n');
    output.flush();
  }
}
