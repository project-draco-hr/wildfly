{
  ManagementAdaptor managementAdaptor=adaptor.getManagementAdaptor();
  if (managementAdaptor != null) {
    final String providerLabel=managementAdaptor.getIdentificationLabel();
    final String scopedPersistenceUnitName=pu.getScopedPersistenceUnitName();
    final ModelNode node=deploymentUnit.getDeploymentSubsystemModel("jpa");
    ModelNode perPuNode=deploymentUnit.createDeploymentSubModel("jpa",PathElement.pathElement(providerLabel,ManagementUtil.filterScopedPuNameForManagement(scopedPersistenceUnitName)));
    perPuNode.get("scoped-unit-name").set(pu.getScopedPersistenceUnitName());
  }
}
