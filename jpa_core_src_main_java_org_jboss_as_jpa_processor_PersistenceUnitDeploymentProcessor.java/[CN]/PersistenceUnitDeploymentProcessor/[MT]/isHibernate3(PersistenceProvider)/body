{
  boolean result=false;
  try {
    Class targetCls=provider.getClass().getClassLoader().loadClass("org.hibernate.Version");
    Method m=targetCls.getMethod("getVersionString");
    Object version=m.invoke(null,null);
    JPA_LOGGER.tracef("lookup provider checking provider version (%s)",version);
    if (version instanceof String && ((String)version).startsWith("3.")) {
      result=true;
    }
  }
 catch (  ClassNotFoundException ignore) {
  }
catch (  NoSuchMethodException ignore) {
  }
catch (  InvocationTargetException ignore) {
  }
catch (  IllegalAccessException ignore) {
  }
  return result;
}
