{
  int rows=ps.executeUpdate();
  Statement stmt=ps;
  do {
    try {
      Object[] args={};
      stmt=(Statement)getUnderlyingStatement.invoke(stmt,args);
    }
 catch (    IllegalAccessException e) {
      SQLException ex=new SQLException("Failed to invoke getUnderlyingStatement");
      ex.initCause(e);
      throw ex;
    }
catch (    InvocationTargetException e) {
      SQLException ex=new SQLException("Failed to invoke getUnderlyingStatement");
      ex.initCause(e);
      throw ex;
    }
  }
 while (stmt != null && method.getDeclaringClass().isInstance(stmt) == false);
  try {
    Number pk=(Number)method.invoke(stmt,null);
    pkField.setInstanceValue(ctx,pk);
    return rows;
  }
 catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    throw new EJBException("Error extracting generated keys",e);
  }
}
