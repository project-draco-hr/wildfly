{
  Set<RealmUser> users=subject.getPrincipals(RealmUser.class);
  Set<Principal> principals=subject.getPrincipals();
  try {
    for (    RealmUser current : users) {
      SECURITY_LOGGER.tracef("Loading groups for '%s'",current);
      principals.addAll(loadGroups(current));
    }
  }
 catch (  Exception e) {
    SECURITY_LOGGER.trace("Failure supplementing Subject",e);
    if (e instanceof IOException) {
      throw (IOException)e;
    }
    throw new IOException(e);
  }
 finally {
    dcf.close();
  }
}
