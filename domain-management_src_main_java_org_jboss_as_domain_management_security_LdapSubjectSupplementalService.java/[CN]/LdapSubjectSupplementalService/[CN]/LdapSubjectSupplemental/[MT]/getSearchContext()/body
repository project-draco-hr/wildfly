{
  DirContext searchContext;
  if (shareConnection && sharedState.containsKey(DirContext.class.getName())) {
    searchContext=(DirContext)sharedState.remove(DirContext.class.getName());
  }
 else {
    ConnectionManager connectionManager=LdapSubjectSupplementalService.this.connectionManager.getValue();
    searchContext=(DirContext)connectionManager.getConnection();
  }
  return searchContext;
}
