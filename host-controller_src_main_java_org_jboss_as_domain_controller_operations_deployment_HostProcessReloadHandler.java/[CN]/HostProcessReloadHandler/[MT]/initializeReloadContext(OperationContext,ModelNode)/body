{
  final boolean adminOnly=ADMIN_ONLY.resolveModelAttribute(context,operation).asBoolean(false);
  final boolean restartServers=RESTART_SERVERS.resolveModelAttribute(context,operation).asBoolean(true);
  final boolean useCurrentHostConfig=USE_CURRENT_HOST_CONFIG.resolveModelAttribute(context,operation).asBoolean(true);
  final boolean useCurrentDomainConfig=USE_CURRENT_DOMAIN_CONFIG.resolveModelAttribute(context,operation).asBoolean(true);
  return new ReloadContext<HostRunningModeControl>(){
    @Override public void reloadInitiated(    HostRunningModeControl runningModeControl){
      runningModeControl.setRestartMode(restartServers ? RestartMode.SERVERS : RestartMode.HC_ONLY);
    }
    @Override public void doReload(    HostRunningModeControl runningModeControl){
      runningModeControl.setRunningMode(adminOnly ? RunningMode.ADMIN_ONLY : RunningMode.NORMAL);
      runningModeControl.setReloaded(true);
      runningModeControl.setUseCurrentConfig(useCurrentHostConfig);
      runningModeControl.setUseCurrentDomainConfig(useCurrentDomainConfig);
    }
  }
;
}
