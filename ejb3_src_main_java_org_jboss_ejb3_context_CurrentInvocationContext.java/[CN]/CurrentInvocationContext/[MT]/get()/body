{
  InvocationContext current=stack.get();
  if (current == null)   throw new IllegalStateException("No current invocation context available");
  return current;
}
