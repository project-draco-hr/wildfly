{
  NameCallback ncb=new NameCallback("Username",username);
  Callback passwordCallback;
  if (verifyPasswordCallback) {
    passwordCallback=new VerifyPasswordCallback(password);
  }
 else {
    passwordCallback=new PasswordCallback("Password",false);
  }
  Callback[] callbacks=new Callback[]{ncb,passwordCallback};
  try {
    callbackHandler.get().handle(callbacks);
  }
 catch (  IOException e) {
    ROOT_LOGGER.debug("Callback handle failed.",e);
    return false;
  }
catch (  UnsupportedCallbackException e) {
    throw MESSAGES.callbackRejected(e);
  }
  if (verifyPasswordCallback) {
    return ((VerifyPasswordCallback)passwordCallback).isVerified();
  }
 else {
    char[] expectedPassword=((PasswordCallback)passwordCallback).getPassword();
    return Arrays.equals(password.toCharArray(),expectedPassword);
  }
}
