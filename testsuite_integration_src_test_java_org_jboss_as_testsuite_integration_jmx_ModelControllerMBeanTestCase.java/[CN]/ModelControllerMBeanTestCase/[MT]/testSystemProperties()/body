{
  String[] initialNames=getSystemPropertyNames();
  ObjectName testName=new ObjectName(Constants.DOMAIN + ":system-property=mbeantest");
  assertNoMBean(testName);
  connection.invoke(ROOT_MODEL_NAME,"addSystemProperty",new Object[]{"mbeantest","800"},new String[]{String.class.getName(),String.class.getName()});
  try {
    String[] newNames=getSystemPropertyNames();
    Assert.assertEquals(initialNames.length + 1,newNames.length);
    boolean found=false;
    for (    String s : newNames) {
      if (s.equals("mbeantest")) {
        found=true;
        break;
      }
    }
    ;
    Assert.assertTrue(found);
    Assert.assertNotNull(connection.getMBeanInfo(new ObjectName(Constants.DOMAIN + ":system-property=mbeantest")));
  }
  finally {
    connection.invoke(new ObjectName(Constants.DOMAIN + ":system-property=mbeantest"),"remove",new Object[0],new String[0]);
  }
  assertNoMBean(testName);
  Assert.assertEquals(initialNames.length,getSystemPropertyNames().length);
}
