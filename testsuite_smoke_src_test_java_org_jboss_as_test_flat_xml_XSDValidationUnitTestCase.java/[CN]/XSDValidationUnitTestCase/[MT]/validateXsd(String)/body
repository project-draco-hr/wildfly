{
  URL jbossDomain=getXsdUrl(xsdName);
  SchemaFactory schemaFactory=SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
  schemaFactory.setErrorHandler(new ErrorHandlerImpl());
  schemaFactory.setResourceResolver(new LSResourceResolver(){
    public LSInput resolveResource(    String type,    String namespaceURI,    String publicId,    String systemId,    String baseURI){
      LSInput input=new DOMInputImpl();
      final ClassLoader cl=Thread.currentThread().getContextClassLoader();
      final InputStream is;
      if (NAMESPACE_MAP.containsKey(systemId)) {
        is=cl.getResourceAsStream(NAMESPACE_MAP.get(systemId));
      }
 else {
        is=cl.getResourceAsStream(systemId);
      }
      input.setByteStream(is);
      return input;
    }
  }
);
  schemaFactory.newSchema(jbossDomain);
}
