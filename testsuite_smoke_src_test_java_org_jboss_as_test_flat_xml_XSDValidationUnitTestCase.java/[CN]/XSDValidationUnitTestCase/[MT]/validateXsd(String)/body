{
  URL jbossDomain=getXsdUrl(xsdName);
  SchemaFactory schemaFactory=SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
  schemaFactory.setErrorHandler(new ErrorHandlerImpl());
  schemaFactory.setResourceResolver(new LSResourceResolver(){
    public LSInput resolveResource(    String type,    String namespaceURI,    String publicId,    String systemId,    String baseURI){
      LSInput input=new DOMInputImpl();
      final URL url;
      if (NAMESPACE_MAP.containsKey(systemId)) {
        url=XsdUtil.discover(NAMESPACE_MAP.get(systemId));
      }
 else {
        url=XsdUtil.discover(systemId);
      }
      try {
        input.setByteStream(url.openStream());
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
      return input;
    }
  }
);
  schemaFactory.newSchema(jbossDomain);
}
