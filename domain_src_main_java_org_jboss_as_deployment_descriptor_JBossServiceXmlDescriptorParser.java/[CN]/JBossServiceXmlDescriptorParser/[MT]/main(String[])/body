{
  final JBossServiceXmlDescriptorParser parser=new JBossServiceXmlDescriptorParser();
  final XMLMapper xmlMapper=XMLMapper.Factory.create();
  xmlMapper.registerRootElement(new QName("server"),parser);
  final XMLInputFactory inputFactory=XMLInputFactory.newInstance();
  String xml="" + "<server>" + "   <mbean name=\"test\" code=\"testCode\">"+ "       <constructor>"+ "           <arg type=\"java.lang.String\" value=\"test\"/>"+ "       </constructor>"+ "       <alias>aliasOne</alias>"+ "       <alias>aliasTwo</alias>"+ "       <annotation>annotationOne</annotation>"+ "       <annotation>annotationTwo</annotation>"+ "   </mbean>"+ "   <mbean name=\"test2\" code=\"testCode2\">"+ "       <attribute name=\"attr1\">"+ "           <value-factory bean=\"factory\" method=\"create\">"+ "               <parameter class=\"TestClass\">some value</parameter>"+ "           </value-factory>"+ "       </attribute>"+ "       <attribute name=\"attr2\">"+ "           <inject bean=\"otherBean\" property=\"otherProp\"/>"+ "       </attribute>"+ "       <depends optional-attribute-name=\"other\">test</depends>"+ "       <depends-list>"+ "           <depends-list-element>test2</depends-list-element>"+ "           <depends-list-element><mbean name=\"test3\" code=\"otherCode\"/></depends-list-element>"+ "       </depends-list>"+ "   </mbean>"+ "</server>";
  System.out.println(xml);
  final XMLStreamReader reader=inputFactory.createXMLStreamReader(new StringReader(xml));
  final ParseResult<JBossServiceXmlDescriptor> jBossServiceXmlDescriptorParseResult=new ParseResult<JBossServiceXmlDescriptor>();
  xmlMapper.parseDocument(jBossServiceXmlDescriptorParseResult,reader);
  System.out.println(jBossServiceXmlDescriptorParseResult.getResult().getServiceConfigs());
  System.out.println(jBossServiceXmlDescriptorParseResult.getResult().getServiceConfigs().get(1).getDependencyConfigs());
}
