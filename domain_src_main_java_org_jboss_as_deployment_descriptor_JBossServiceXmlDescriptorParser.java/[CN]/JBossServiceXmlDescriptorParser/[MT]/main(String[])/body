{
  final JBossServiceXmlDescriptorParser parser=new JBossServiceXmlDescriptorParser();
  final XMLMapper xmlMapper=XMLMapper.Factory.create();
  xmlMapper.registerRootElement(new QName("server"),parser);
  final XMLInputFactory inputFactory=XMLInputFactory.newInstance();
  String xml="" + "<server>" + "   <mbean name=\"test\" code=\"testCode\">"+ "       <constructor>"+ "           <arg type=\"java.lang.String\" value=\"test\"/>"+ "       </constructor>"+ "   </mbean>"+ "   <mbean name=\"test2\" code=\"testCode2\">"+ "   </mbean>"+ "</server>";
  final XMLStreamReader reader=inputFactory.createXMLStreamReader(new StringReader(xml));
  final ParseResult<JBossServiceXmlDescriptor> jBossServiceXmlDescriptorParseResult=new ParseResult<JBossServiceXmlDescriptor>();
  xmlMapper.parseDocument(jBossServiceXmlDescriptorParseResult,reader);
  System.out.println(jBossServiceXmlDescriptorParseResult.getResult().getServiceConfigs());
}
