{
  final JBossWebMetaData jbossWebMD=WSHelper.getRequiredAttachment(dep,JBossWebMetaData.class);
  final DeploymentUnit unit=WSHelper.getRequiredAttachment(dep,DeploymentUnit.class);
  final List<POJOEndpoint> pojoEndpoints=getPojoEndpoints(unit);
  final JSEArchiveMetaData jseArchiveMD=new JSEArchiveMetaData();
  final String contextRoot=getContextRoot(dep,jbossWebMD);
  jseArchiveMD.setContextRoot(contextRoot);
  final Map<String,String> servletMappings=this.getServletUrlPatternsMappings(jbossWebMD,pojoEndpoints);
  jseArchiveMD.setServletMappings(servletMappings);
  final Map<String,String> servletClassNamesMappings=this.getServletClassMappings(jbossWebMD,pojoEndpoints);
  jseArchiveMD.setServletClassNames(servletClassNamesMappings);
  final String securityDomain=jbossWebMD.getSecurityDomain();
  jseArchiveMD.setSecurityDomain(securityDomain);
  final JBossWebservicesMetaData jbossWebservicesMD=WSHelper.getOptionalAttachment(dep,JBossWebservicesMetaData.class);
  if (jbossWebservicesMD != null) {
    final PublishLocationAdapter resolver=new PublishLocationAdapterImpl(jbossWebservicesMD.getWebserviceDescriptions());
    jseArchiveMD.setPublishLocationAdapter(resolver);
  }
  final List<JSESecurityMetaData> jseSecurityMDs=this.getSecurityMetaData(jbossWebMD.getSecurityConstraints());
  jseArchiveMD.setSecurityMetaData(jseSecurityMDs);
  this.setConfigNameAndFile(jseArchiveMD,jbossWebMD,jbossWebservicesMD);
  return jseArchiveMD;
}
