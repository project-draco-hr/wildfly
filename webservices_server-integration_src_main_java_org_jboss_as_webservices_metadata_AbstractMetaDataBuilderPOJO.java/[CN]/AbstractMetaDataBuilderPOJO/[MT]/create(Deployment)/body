{
  WSLogger.ROOT_LOGGER.tracef("Creating JBoss agnostic meta data for POJO webservice deployment: %s",dep.getSimpleName());
  final JBossWebMetaData jbossWebMD=WSHelper.getRequiredAttachment(dep,JBossWebMetaData.class);
  final DeploymentUnit unit=WSHelper.getRequiredAttachment(dep,DeploymentUnit.class);
  final List<POJOEndpoint> pojoEndpoints=getPojoEndpoints(unit);
  final JSEArchiveMetaData jseArchiveMD=new JSEArchiveMetaData();
  final String contextRoot=getContextRoot(dep,jbossWebMD);
  jseArchiveMD.setContextRoot(contextRoot);
  WSLogger.ROOT_LOGGER.tracef("Setting context root: %s",contextRoot);
  final Map<String,String> servletMappings=getServletUrlPatternsMappings(jbossWebMD,pojoEndpoints);
  jseArchiveMD.setServletMappings(servletMappings);
  final Map<String,String> servletClassNamesMappings=getServletClassMappings(jbossWebMD,pojoEndpoints);
  jseArchiveMD.setServletClassNames(servletClassNamesMappings);
  final String securityDomain=jbossWebMD.getSecurityDomain();
  jseArchiveMD.setSecurityDomain(securityDomain);
  final JBossWebservicesMetaData jbossWebservicesMD=WSHelper.getOptionalAttachment(dep,JBossWebservicesMetaData.class);
  if (jbossWebservicesMD != null) {
    final PublishLocationAdapter resolver=new PublishLocationAdapterImpl(jbossWebservicesMD.getWebserviceDescriptions());
    jseArchiveMD.setPublishLocationAdapter(resolver);
  }
  final List<JSESecurityMetaData> jseSecurityMDs=getSecurityMetaData(jbossWebMD.getSecurityConstraints());
  jseArchiveMD.setSecurityMetaData(jseSecurityMDs);
  setConfigNameAndFile(jseArchiveMD,jbossWebMD,jbossWebservicesMD);
  return jseArchiveMD;
}
