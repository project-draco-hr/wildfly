{
  PathAddress cacheAddress=context.getCurrentAddress();
  PathAddress containerAddress=cacheAddress.getParent();
  String containerName=containerAddress.getLastElement().getValue();
  String cacheName=cacheAddress.getLastElement().getValue();
  ServiceTarget target=context.getServiceTarget();
  this.builderFactory.createBuilder(cacheAddress).configure(context,model).build(target).install();
  new CacheBuilder<>(containerName,cacheName).build(target).install();
  new XAResourceRecoveryBuilder(containerName,cacheName).build(target).install();
  BinderServiceBuilder<?> bindingBuilder=new BinderServiceBuilder<>(InfinispanBindingFactory.createCacheBinding(containerName,cacheName),CacheServiceName.CACHE.getServiceName(containerName,cacheName),Cache.class);
  String jndiName=ModelNodes.asString(CacheResourceDefinition.Attribute.JNDI_NAME.getDefinition().resolveModelAttribute(context,model));
  if (jndiName != null) {
    bindingBuilder.alias(ContextNames.bindInfoFor(JndiNameFactory.parse(jndiName).getAbsoluteName()));
  }
  bindingBuilder.build(target).install();
  for (  CacheGroupBuilderProvider provider : ServiceLoader.load(this.providerClass,this.providerClass.getClassLoader())) {
    for (    Builder<?> builder : provider.getBuilders(containerName,cacheName)) {
      builder.build(target).install();
    }
  }
}
