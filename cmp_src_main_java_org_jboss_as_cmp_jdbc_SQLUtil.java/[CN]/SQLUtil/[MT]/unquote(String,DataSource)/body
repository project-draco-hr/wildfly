{
  Connection con=null;
  try {
    con=ds.getConnection();
    String quote=con.getMetaData().getIdentifierQuoteString();
    if (tableName.startsWith(quote)) {
      if (tableName.endsWith(quote) == false) {
        throw new RuntimeException("Mismatched quote in table name: " + tableName);
      }
      int quoteLength=quote.length();
      tableName=tableName.substring(quoteLength,tableName.length() - quoteLength);
    }
  }
 catch (  SQLException e) {
    throw new RuntimeException("Failed to get datasource connection");
  }
 finally {
    JDBCUtil.safeClose(con);
  }
  return tableName;
}
