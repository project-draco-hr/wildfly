{
  JDBCAbstractEntityBridge parentEntity=cmrField.getEntity();
  JDBCAbstractEntityBridge childEntity=(JDBCAbstractEntityBridge)cmrField.getRelatedEntity();
  JDBCFieldBridge parentField;
  JDBCFieldBridge childField;
  if (cmrField.hasForeignKey()) {
    JDBCFieldBridge[] parentFkFields=cmrField.getForeignKeyFields();
    int i=0;
    while (i < parentFkFields.length) {
      parentField=parentFkFields[i++];
      childField=(JDBCFieldBridge)childEntity.getFieldByName(parentField.getFieldName());
      getJoinClause(parentField,parentAlias,childField,childAlias,buf);
      if (i < parentFkFields.length)       buf.append(AND);
    }
  }
 else {
    JDBCFieldBridge[] childFkFields=cmrField.getRelatedCMRField().getForeignKeyFields();
    int i=0;
    while (i < childFkFields.length) {
      childField=childFkFields[i++];
      parentField=(JDBCFieldBridge)parentEntity.getFieldByName(childField.getFieldName());
      getJoinClause(parentField,parentAlias,childField,childAlias,buf);
      if (i < childFkFields.length) {
        buf.append(AND);
      }
    }
  }
  return buf;
}
