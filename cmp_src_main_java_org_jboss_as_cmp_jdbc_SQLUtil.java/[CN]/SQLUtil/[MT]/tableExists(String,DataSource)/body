{
  Connection con=null;
  ResultSet rs=null;
  try {
    con=dataSource.getConnection();
    DatabaseMetaData dmd=con.getMetaData();
    String catalog=con.getCatalog();
    String schema=null;
    String quote=dmd.getIdentifierQuoteString();
    if (tableName.startsWith(quote)) {
      if (tableName.endsWith(quote) == false) {
        throw MESSAGES.mismatchedQuoteTableName(tableName);
      }
      int quoteLength=quote.length();
      tableName=tableName.substring(quoteLength,tableName.length() - quoteLength);
      if (dmd.storesLowerCaseQuotedIdentifiers())       tableName=tableName.toLowerCase();
 else       if (dmd.storesUpperCaseQuotedIdentifiers())       tableName=tableName.toUpperCase();
    }
 else {
      if (dmd.storesLowerCaseIdentifiers())       tableName=tableName.toLowerCase();
 else       if (dmd.storesUpperCaseIdentifiers())       tableName=tableName.toUpperCase();
    }
    int dotIndex;
    if ((dotIndex=tableName.indexOf('.')) != -1) {
      schema=tableName.substring(0,dotIndex);
      tableName=tableName.substring(dotIndex + 1);
    }
    rs=dmd.getTables(catalog,schema,tableName,null);
    return rs.next();
  }
 catch (  SQLException e) {
    throw MESSAGES.errorCheckingIfTableExists(tableName,e);
  }
 finally {
    JDBCUtil.safeClose(rs);
    JDBCUtil.safeClose(con);
  }
}
