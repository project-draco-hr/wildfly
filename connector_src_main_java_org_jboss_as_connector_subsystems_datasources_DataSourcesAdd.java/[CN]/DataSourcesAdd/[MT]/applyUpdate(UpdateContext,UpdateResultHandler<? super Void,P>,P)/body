{
  final BatchBuilder builder=updateContext.getBatchBuilder();
  final DataSourcesService dsService=new DataSourcesService(datasources);
  BatchServiceBuilder<?> serviceBuilder=builder.addService(ConnectorServices.DATASOURCES_SERVICE,dsService);
  serviceBuilder.setInitialMode(Mode.ACTIVE);
  if (datasources == null)   return;
  if (datasources.getDataSource().size() > 0 || datasources.getXaDataSource().size() > 0) {
    serviceBuilder=builder.addServiceValueIfNotExist(JDBCRARDeployService.NAME,new JDBCRARDeployService());
    serviceBuilder.addDependency(RaDeploymentActivator.RAR_DEPLOYMENT_CHAIN_SERVICE_NAME);
    serviceBuilder.addDependency(ConnectorServices.RESOURCEADAPTERS_SERVICE);
    serviceBuilder.addDependency(ConnectorServices.CONNECTOR_CONFIG_SERVICE);
    serviceBuilder.setInitialMode(Mode.ACTIVE);
  }
}
