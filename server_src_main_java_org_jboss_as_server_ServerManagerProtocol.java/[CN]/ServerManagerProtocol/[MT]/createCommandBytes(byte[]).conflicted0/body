{
  int length=data == null ? 0 : data.length;
  if (length == 0 && hasData)   throw new IllegalArgumentException("Expected some data for " + this);
 else   if (length != 0 && !hasData)   throw new IllegalArgumentException("Expected no data for " + this);
  if (length == 0)   return new byte[]{id};
  byte[] all=new byte[length + 1];
  all[0]=id;
  System.arraycopy(data,0,all,1,length);
  return all;
}
