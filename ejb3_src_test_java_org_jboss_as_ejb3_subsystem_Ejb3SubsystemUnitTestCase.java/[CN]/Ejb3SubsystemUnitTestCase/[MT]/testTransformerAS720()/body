{
  ModelTestControllerVersion controllerVersion=ModelTestControllerVersion.V7_2_0_FINAL;
  String subsystemXml="transform_1_2_0.xml";
  ModelVersion modelVersion=ModelVersion.create(1,2,0);
  KernelServicesBuilder builder=createKernelServicesBuilder(AdditionalInitialization.MANAGEMENT).setSubsystemXmlResource(subsystemXml);
  builder.createLegacyKernelServicesBuilder(null,controllerVersion,modelVersion).addMavenResourceURL("org.jboss.as:jboss-as-ejb3:" + controllerVersion.getMavenGavVersion()).addMavenResourceURL("org.jboss.as:jboss-as-threads:" + controllerVersion.getMavenGavVersion()).skipReverseControllerCheck().addOperationValidationResolve("add",PathAddress.pathAddress(PathElement.pathElement(SUBSYSTEM,getMainSubsystemName()))).addOperationValidationResolve("add",PathAddress.pathAddress(PathElement.pathElement(SUBSYSTEM,getMainSubsystemName()),PathElement.pathElement("strict-max-bean-instance-pool")));
  KernelServices mainServices=builder.build();
  Assert.assertTrue(mainServices.isSuccessfulBoot());
  KernelServices legacyServices=mainServices.getLegacyServices(modelVersion);
  Assert.assertTrue(legacyServices.isSuccessfulBoot());
  Assert.assertNotNull(mainServices);
  Assert.assertNotNull(legacyServices);
  generateLegacySubsystemResourceRegistrationDmr(mainServices,modelVersion);
  checkSubsystemModelTransformation(mainServices,modelVersion);
}
