{
  try {
    TextMessage message=(TextMessage)m;
    String text=message.getText();
    TextMessage replyMessage;
    if (message instanceof TextMessage) {
      if (text.equals("await") && !message.getJMSRedelivered()) {
        HelperSingletonImpl.barrier.await(WAIT_S,SECONDS);
        HelperSingletonImpl.barrier.reset();
        Thread.sleep(SECONDS.toMillis(WAIT_S));
      }
      replyMessage=session.createTextMessage("Reply: " + text);
    }
 else {
      replyMessage=session.createTextMessage("Unknown message");
    }
    Destination destination=message.getJMSReplyTo();
    message.setJMSDeliveryMode(NON_PERSISTENT);
    sender.send(destination,replyMessage);
    log.info("onMessage method [OK], msg: " + message.toString());
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
