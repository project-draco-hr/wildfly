{
  ServiceName secretServiceName=realmServiceName.append(SecretIdentityService.SERVICE_SUFFIX);
  ModelNode secretValueNode=secret.require(VALUE);
  String resolvedValue=context.resolveExpressions(secretValueNode).asString();
  SecretIdentityService sis=new SecretIdentityService(resolvedValue,secretValueNode.asString().equals(resolvedValue));
  final ServiceController<CallbackHandlerFactory> serviceController=serviceTarget.addService(secretServiceName,sis).setInitialMode(ON_DEMAND).install();
  if (newControllers != null) {
    newControllers.add(serviceController);
  }
  return secretServiceName;
}
