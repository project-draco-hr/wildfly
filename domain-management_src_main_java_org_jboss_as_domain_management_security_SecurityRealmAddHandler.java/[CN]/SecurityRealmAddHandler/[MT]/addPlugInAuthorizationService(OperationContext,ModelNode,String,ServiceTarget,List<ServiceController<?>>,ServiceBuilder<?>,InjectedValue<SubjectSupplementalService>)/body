{
  ServiceName plugInServiceName=PlugInSubjectSupplemental.ServiceUtil.createServiceName(realmName);
  final String pluginName=PlugInAuthorizationResourceDefinition.NAME.resolveModelAttribute(context,model).asString();
  final Map<String,String> properties=resolveProperties(context,model);
  PlugInSubjectSupplemental plugInSubjectSupplemental=new PlugInSubjectSupplemental(realmName,pluginName,properties);
  ServiceBuilder<?> plugInBuilder=serviceTarget.addService(plugInServiceName,plugInSubjectSupplemental);
  PlugInLoaderService.ServiceUtil.addDependency(plugInBuilder,plugInSubjectSupplemental.getPlugInLoaderServiceValue(),realmName,false);
  final ServiceController<?> serviceController=plugInBuilder.setInitialMode(ON_DEMAND).install();
  if (newControllers != null) {
    newControllers.add(serviceController);
  }
  SubjectSupplementalService.ServiceUtil.addDependency(realmBuilder,injector,plugInServiceName,false);
}
