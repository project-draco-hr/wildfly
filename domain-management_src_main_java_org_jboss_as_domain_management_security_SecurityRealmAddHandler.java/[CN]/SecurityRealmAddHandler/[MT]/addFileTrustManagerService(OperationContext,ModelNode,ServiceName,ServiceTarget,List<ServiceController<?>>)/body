{
  char[] keystorePassword=KeystoreAttributes.KEYSTORE_PASSWORD.resolveModelAttribute(context,ssl).asString().toCharArray();
  String path=KeystoreAttributes.KEYSTORE_PATH.resolveModelAttribute(context,ssl).asString();
  JKSTrustManagerService trustManagerService=new JKSTrustManagerService(path,keystorePassword);
  ServiceBuilder<?> serviceBuilder=serviceTarget.addService(serviceName,trustManagerService);
  ModelNode relativeTo=KeystoreAttributes.KEYSTORE_RELATIVE_TO.resolveModelAttribute(context,ssl);
  if (relativeTo.isDefined()) {
    serviceBuilder.addDependency(pathName(relativeTo.asString()),String.class,trustManagerService.getRelativeToInjector());
  }
  final ServiceController<?> serviceController=serviceBuilder.setInitialMode(ON_DEMAND).install();
  if (controllers != null) {
    controllers.add(serviceController);
  }
}
