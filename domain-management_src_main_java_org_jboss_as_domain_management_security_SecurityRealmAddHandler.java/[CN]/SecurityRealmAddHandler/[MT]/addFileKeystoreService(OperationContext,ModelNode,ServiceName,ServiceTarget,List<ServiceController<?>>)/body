{
  char[] password=unmaskPassword(context,ssl.require(KEYSTORE_PASSWORD));
  FileKeystoreService fileKeystoreService=new FileKeystoreService(ssl.require(KEYSTORE_PATH).asString(),password);
  ServiceBuilder<?> serviceBuilder=serviceTarget.addService(serviceName,fileKeystoreService);
  if (ssl.hasDefined(KEYSTORE_RELATIVE_TO)) {
    serviceBuilder.addDependency(pathName(ssl.require(KEYSTORE_RELATIVE_TO).asString()),String.class,fileKeystoreService.getRelativeToInjector());
  }
  final ServiceController<?> serviceController=serviceBuilder.setInitialMode(ON_DEMAND).install();
  if (newControllers != null) {
    newControllers.add(serviceController);
  }
  return password;
}
