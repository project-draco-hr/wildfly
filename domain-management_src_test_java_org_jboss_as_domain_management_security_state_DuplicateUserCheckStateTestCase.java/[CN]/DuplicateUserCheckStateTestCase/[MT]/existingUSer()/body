{
  values.setExistingUser(true);
  values.setRoles(ROLES);
  DuplicateUserCheckState userCheckState=new DuplicateUserCheckState(consoleMock,values);
  AssertConsoleBuilder consoleBuilder=new AssertConsoleBuilder().expectedDisplayText(MESSAGES.updateUser(values.getUserName(),values.getPropertiesFiles().get(0).getAbsolutePath())).expectedDisplayText(AddPropertiesUser.NEW_LINE).expectedDisplayText(MESSAGES.updatedRoles(values.getUserName(),values.getRoles(),values.getRoleFiles().get(0).getAbsolutePath())).expectedDisplayText(AddPropertiesUser.NEW_LINE);
  consoleMock.setResponses(consoleBuilder);
  State nextState=userCheckState.execute();
  assertTrue(nextState instanceof UpdateUser);
  nextState=nextState.execute();
  consoleBuilder.validate();
}
