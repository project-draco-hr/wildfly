{
  if (state == CLEAN || state == DIRTY || state == DIRTY_RELATIONS) {
    updateState(DELETED);
  }
 else   if (state == CREATED) {
    dereference();
    state=DELETED;
    view.rowByPk.remove(pk);
  }
 else   if (state == DELETED) {
    throw new IllegalStateException("The row is already deleted: pk=" + pk);
  }
}
