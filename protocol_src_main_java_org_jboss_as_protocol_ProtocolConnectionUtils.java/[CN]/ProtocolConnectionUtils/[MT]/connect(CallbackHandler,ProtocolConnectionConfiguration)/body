{
  final Endpoint endpoint=configuration.getEndpoint();
  final OptionMap options=getOptions(configuration);
  final CallbackHandler actualHandler=handler != null ? handler : new AnonymousCallbackHandler();
  return endpoint.connect(configuration.getUri(),options,actualHandler,configuration.getSslContext());
}
