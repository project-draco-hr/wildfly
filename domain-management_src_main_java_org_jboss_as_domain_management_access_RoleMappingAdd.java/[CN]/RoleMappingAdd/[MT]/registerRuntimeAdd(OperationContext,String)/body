{
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      if (context.isBooting()) {
        authorizerConfiguration.addRoleMappingImmediate(roleName);
      }
 else {
        authorizerConfiguration.addRoleMapping(roleName);
      }
      ModelNode model=context.readResource(PathAddress.EMPTY_ADDRESS).getModel();
      boolean includeAll=RoleMappingResourceDefinition.INCLUDE_ALL.resolveModelAttribute(context,model).asBoolean();
      if (includeAll) {
        authorizerConfiguration.setRoleMappingIncludeAll(roleName,includeAll);
      }
      registerRollbackHandler(context,roleName);
    }
  }
,Stage.RUNTIME);
}
