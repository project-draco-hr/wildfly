{
  byte[] hash=new byte[0];
  if (deploymentFile.isDirectory()) {
    try {
      hash=deploymentRepository.addExternalFileReference(deploymentFile);
    }
 catch (    IOException e) {
      log.error("Failed to add content to deployment repository for [" + deploymentName + "]",e);
    }
    return getUpdatesAfterContent(hash);
  }
  InputStream inputStream=null;
  try {
    inputStream=new FileInputStream(deploymentFile);
    hash=contentRepository.addContent(inputStream);
  }
 catch (  IOException e) {
    log.error("Failed to add content to deployment repository for [" + deploymentName + "]",e);
  }
 finally {
    safeClose(inputStream);
  }
  return getUpdatesAfterContent(hash);
}
