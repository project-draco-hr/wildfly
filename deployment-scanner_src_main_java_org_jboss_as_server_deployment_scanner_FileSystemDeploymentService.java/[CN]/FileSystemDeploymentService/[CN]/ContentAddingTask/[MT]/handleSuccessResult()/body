{
  final File parentFolder=new File(parent);
  final File doDeployMarker=new File(parentFolder,deploymentFile.getName() + DO_DEPLOY);
  if (doDeployMarker.exists() && !doDeployMarker.delete()) {
    ROOT_LOGGER.cannotRemoveDeploymentMarker(doDeployMarker.getAbsolutePath());
  }
  final File failedMarker=new File(deploymentFile.getParent(),deploymentFile.getName() + FAILED_DEPLOY);
  if (failedMarker.exists() && !failedMarker.delete()) {
    ROOT_LOGGER.cannotRemoveDeploymentMarker(failedMarker);
  }
  final File deployedMarker=new File(parent,deploymentFile.getName() + DEPLOYED);
  createMarkerFile(deployedMarker,deploymentName);
  deployedMarker.setLastModified(doDeployTimestamp);
  if (deployed.containsKey(deploymentName)) {
    deployed.remove(deploymentName);
  }
  deployed.put(deploymentName,new DeploymentMarker(doDeployTimestamp,archive,parentFolder));
  removeInProgressMarker();
}
