{
  final File failedMarker=new File(deploymentFile.getParent(),deploymentFile.getName() + FAILED_DEPLOY);
  final File deployMarker=new File(deploymentFile.getParent(),deploymentFile.getName() + DO_DEPLOY);
  if (deployMarker.exists() && !deployMarker.delete()) {
    ROOT_LOGGER.cannotRemoveDeploymentMarker(deployMarker);
  }
  final File deployedMarker=new File(deploymentFile.getParent(),deploymentFile.getName() + DEPLOYED);
  if (deployedMarker.exists() && !deployedMarker.delete()) {
    ROOT_LOGGER.cannotRemoveDeploymentMarker(deployedMarker);
  }
  final File undeployedMarker=new File(deploymentFile.getParent(),deploymentFile.getName() + UNDEPLOYED);
  if (undeployedMarker.exists() && !undeployedMarker.delete()) {
    ROOT_LOGGER.cannotRemoveDeploymentMarker(undeployedMarker);
  }
  FileOutputStream fos=null;
  try {
    fos=new FileOutputStream(failedMarker);
    fos.write(failureDescription.asString().getBytes());
  }
 catch (  IOException io) {
    ROOT_LOGGER.errorWritingDeploymentMarker(io,failedMarker.getAbsolutePath());
  }
 finally {
    safeClose(fos);
  }
}
