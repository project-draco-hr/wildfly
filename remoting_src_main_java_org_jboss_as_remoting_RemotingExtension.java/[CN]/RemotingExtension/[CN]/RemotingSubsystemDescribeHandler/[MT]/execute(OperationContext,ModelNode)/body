{
  final ModelNode result=context.getResult();
  final ModelNode model=context.readModel(PathAddress.EMPTY_ADDRESS);
  final PathAddress address=PathAddress.pathAddress(PathElement.pathElement(SUBSYSTEM,SUBSYSTEM_NAME));
  final ModelNode subsystem=new ModelNode();
  subsystem.get(OP).set(ADD);
  subsystem.get(OP_ADDR).set(address.toModelNode());
  subsystem.get(THREAD_POOL).set(model.get(THREAD_POOL));
  result.add(subsystem);
  if (model.hasDefined(CONNECTOR)) {
    for (    org.jboss.dmr.Property prop : model.get(CONNECTOR).asPropertyList()) {
      final ModelNode connector=prop.getValue();
      final ModelNode add=Util.getEmptyOperation(ADD,address.append(PathElement.pathElement(CONNECTOR,prop.getName())).toModelNode());
      if (connector.hasDefined(SOCKET_BINDING)) {
        add.get(SOCKET_BINDING).set(connector.get(SOCKET_BINDING));
      }
      if (connector.hasDefined(AUTHENTICATION_PROVIDER)) {
        add.get(AUTHENTICATION_PROVIDER).set(AUTHENTICATION_PROVIDER);
      }
      if (connector.hasDefined(SASL)) {
        add.get(SASL);
      }
      result.add(add);
    }
  }
  context.completeStep();
}
