{
  super(getInitialModel(model),configurationPersister,DomainDescriptionProviders.ROOT_PROVIDER);
  this.localHostName=localHostProxy.getName();
  ModelNodeRegistration registry=getRegistry();
  if (model == null) {
    this.extensionContext=DomainModelUtil.initializeMasterDomainRegistry(registry,configurationPersister,deploymentRepo,fileRepository,this);
  }
 else {
    this.extensionContext=DomainModelUtil.initializeSlaveDomainRegistry(registry,configurationPersister,deploymentRepo,fileRepository,this);
  }
  registry.registerSubModel(PathElement.pathElement(HOST,localHostName),localHostProxy.getRegistry());
  registerInternalOperations();
  this.hostModel=localHostProxy.getHostModel();
  this.injectedHostPersister=localHostProxy.getConfigurationPersister();
  ModelNode ourModel=getModel();
  ourModel.get(HOST,localHostName).set(this.hostModel);
  this.serverOperationResolver=new ServerOperationResolver(localHostName);
  if (model == null) {
    initializeExtensions(ourModel);
  }
  this.hosts=Collections.unmodifiableMap(hosts);
  this.master=master;
}
