{
  if (!SUCCESS.equals(opResult.get(OUTCOME).asString())) {
    return opResult;
  }
  ModelNode resultNode=opResult.get(RESULT);
  ModelNode overallResult=new ModelNode();
  overallResult.get(OUTCOME).set(SUCCESS);
  ModelNode domainResult=parsedOp.getFormattedDomainResult(resultNode);
  overallResult.get(RESULT,DOMAIN_RESULTS).set(domainResult);
  Map<Set<ServerIdentity>,ModelNode> serverOps=parsedOp.getServerOps(getDomainModel(),getHostModel());
  ModelNode serverOpsNode=overallResult.get(RESULT,SERVER_OPERATIONS);
  for (  Map.Entry<Set<ServerIdentity>,ModelNode> entry : serverOps.entrySet()) {
    ModelNode setNode=serverOpsNode.add();
    ModelNode serverNode=setNode.get("servers");
    for (    ServerIdentity server : entry.getKey()) {
      serverNode.add(server.getServerName(),server.getServerGroupName());
    }
    setNode.get(OP).set(entry.getValue());
  }
  ModelNode compOp=opResult.has(COMPENSATING_OPERATION) ? opResult.get(COMPENSATING_OPERATION) : null;
  if (compOp != null) {
    if (compOp.isDefined()) {
      compOp=parsedOp.getFormattedDomainCompensatingOp(compOp);
    }
    overallResult.get(COMPENSATING_OPERATION).set(compOp);
  }
  return overallResult;
}
