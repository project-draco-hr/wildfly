{
  alwaysProvideRuntimeContext=false;
  ModelNode ourModel=super.getModel();
  DomainModelUtil.updateCoreModel(ourModel);
  master=true;
  domainPersister.setDelegate(configurationPersister);
  ModelNodeRegistration registry=getRegistry();
  extensionContext=DomainModelUtil.initializeMasterDomainRegistry(registry,configurationPersister,deploymentRepo,fileRepository,this);
  registerInternalOperations();
  ModelNodeRegistration hostRegistry=registry.getSubModel(PathAddress.pathAddress(PathElement.pathElement(HOST,getLocalHostName())));
  XmlMarshallingHandler xmlHandler=new XmlMarshallingHandler(this.hostPersister,getHostModel());
  hostRegistry.registerOperationHandler(CommonDescriptions.READ_CONFIG_AS_XML,xmlHandler,xmlHandler,false,OperationEntry.EntryType.PRIVATE);
  this.serverOperationResolver=new ServerOperationResolver(getLocalHostName());
  initializeExtensions(ourModel,extensionContext);
  this.hosts=Collections.unmodifiableMap(hosts);
}
