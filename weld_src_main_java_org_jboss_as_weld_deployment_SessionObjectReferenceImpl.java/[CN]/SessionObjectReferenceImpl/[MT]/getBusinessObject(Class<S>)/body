{
  final ServiceName viewServiceName=component.getViewServices().get(businessInterfaceType);
  if (viewServiceName == null) {
    throw new RuntimeException("Could not find view for " + businessInterfaceType);
  }
  final ServiceController<?> viewController=serviceRegistry.getRequiredService(viewServiceName);
  ComponentView view=(ComponentView)viewController.getValue();
  if (descriptor.isStateful()) {
    return (S)view.getViewForInstance(sessionId);
  }
  return (S)view.getReference().getInstance();
}
