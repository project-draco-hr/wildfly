{
  if (!iterator.hasNext()) {
    if (handlersUpdater.putIfAbsent(this,operationName,handler) != null) {
      throw new IllegalArgumentException("A handler named '" + operationName + "' is already registered at location '"+ getLocationString()+ "'");
    }
  }
  final PathElement element=iterator.next();
  final String key=element.getKey();
  final Map<String,OperationSubregistry> snapshot=childrenUpdater.get(this);
  final OperationSubregistry subregistry=snapshot.get(key);
  if (subregistry != null) {
    subregistry.register(element.getValue(),iterator,operationName,handler);
  }
}
