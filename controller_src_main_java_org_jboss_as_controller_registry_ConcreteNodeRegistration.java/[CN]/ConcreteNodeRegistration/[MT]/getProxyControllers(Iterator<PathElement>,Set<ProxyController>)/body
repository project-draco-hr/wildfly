{
  if (iterator.hasNext()) {
    final PathElement next=iterator.next();
    final NodeSubregistry subregistry=children.get(next.getKey());
    if (subregistry == null) {
      return;
    }
    if (next.isWildcard()) {
      subregistry.getProxyControllers(iterator,null,controllers);
    }
 else     if (next.isMultiTarget()) {
      for (      final String value : next.getSegments()) {
        subregistry.getProxyControllers(iterator,value,controllers);
      }
    }
 else {
      subregistry.getProxyControllers(iterator,next.getValue(),controllers);
    }
  }
 else {
    final Map<String,NodeSubregistry> snapshot=childrenUpdater.get(this);
    for (    NodeSubregistry subregistry : snapshot.values()) {
      subregistry.getProxyControllers(iterator,null,controllers);
    }
  }
}
