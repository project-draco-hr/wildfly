{
  if (modelNode.isDefined() && modelNode.asInt() > 0) {
    List<ModelNode> stacks=modelNode.asList();
    for (    ModelNode stack : stacks) {
      writer.writeStartElement(Element.LOGIN_MODULE_STACK.getLocalName());
      List<ModelNode> nodes=stack.asList();
      Iterator<ModelNode> iter=nodes.iterator();
      ModelNode nameNode=iter.next();
      writer.writeAttribute(Attribute.NAME.getLocalName(),nameNode.require(Attribute.NAME.getLocalName()).asString());
      while (iter.hasNext()) {
        ModelNode loginModuleNode=iter.next();
        List<ModelNode> lms=loginModuleNode.asList();
        for (        ModelNode loginModule : lms) {
          writer.writeStartElement(Element.LOGIN_MODULE.getLocalName());
          writeCommonModule(writer,loginModule,Element.AUTHENTICATION);
        }
      }
      writer.writeEndElement();
    }
  }
}
