{
  final String recoveryBindingName=recoveryEnvModel.require(BINDING).asString();
  final String recoveryStatusBindingName=recoveryEnvModel.require(STATUS_BINDING).asString();
  final boolean recoveryListener=recoveryEnvModel.get(RECOVERY_LISTENER).asBoolean(false);
  final ArjunaRecoveryManagerService recoveryManagerService=new ArjunaRecoveryManagerService(recoveryListener);
  serviceControllers.add(context.getServiceTarget().addService(TxnServices.JBOSS_TXN_ARJUNA_RECOVERY_MANAGER,recoveryManagerService).addDependency(ServiceBuilder.DependencyType.OPTIONAL,ServiceName.JBOSS.append("iiop","orb"),ORB.class,recoveryManagerService.getOrbInjector()).addDependency(SocketBinding.JBOSS_BINDING_NAME.append(recoveryBindingName),SocketBinding.class,recoveryManagerService.getRecoveryBindingInjector()).addDependency(SocketBinding.JBOSS_BINDING_NAME.append(recoveryStatusBindingName),SocketBinding.class,recoveryManagerService.getStatusBindingInjector()).addDependency(TxnServices.JBOSS_TXN_CORE_ENVIRONMENT).addDependency(TxnServices.JBOSS_TXN_ARJUNA_OBJECTSTORE_ENVIRONMENT).addListener(verificationHandler).setInitialMode(ServiceController.Mode.ACTIVE).install());
}
