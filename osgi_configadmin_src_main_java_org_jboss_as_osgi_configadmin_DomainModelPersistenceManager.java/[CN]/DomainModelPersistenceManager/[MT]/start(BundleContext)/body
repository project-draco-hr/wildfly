{
  ServiceReference sref=context.getServiceReference(ServiceContainer.class.getName());
  ServiceContainer serviceContainer=(ServiceContainer)context.getService(sref);
  ServiceController<?> controller=serviceContainer.getRequiredService(ConfigAdminService.SERVICE_NAME);
  jbossConfigAdminService=(ConfigAdminService)controller.getValue();
  jbossConfigAdminService.addListener(this);
  Hashtable props=new Hashtable();
  props.put(Constants.SERVICE_RANKING,Integer.MAX_VALUE);
  serviceRegistration=context.registerService(PersistenceManager.class.getName(),this,props);
  osgiConfigAdminServiceTracker=new ServiceTracker(context,ConfigurationAdmin.class.getName(),null){
    @Override public Object addingService(    ServiceReference reference){
      Object svc=super.addingService(reference);
      if (svc instanceof ConfigurationAdmin) {
        ConfigurationAdmin osgiConfigAdminService=(ConfigurationAdmin)svc;
        for (        String pid : jbossConfigAdminService.getConfigurations()) {
          try {
            osgiConfigAdminService.getConfiguration(pid,null);
          }
 catch (          IOException e) {
            throw new RuntimeException(e);
          }
        }
      }
      return svc;
    }
  }
;
  osgiConfigAdminServiceTracker.open();
}
