{
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      if (context.completeStep() != ResultAction.ROLLBACK) {
        for (        ModelNode node : operation.get(OPERATION_HEADERS,DEPLOYMENT_HASHES).asList()) {
          try {
            contentRepository.removeContent(node.asBytes());
          }
 catch (          Exception e) {
            log.debugf(e,"Exception occurred removing %s",node.asBytes());
          }
        }
      }
      operation.get(OPERATION_HEADERS).remove("DEPLOYMENT_HASHES");
    }
  }
,Stage.RUNTIME);
}
