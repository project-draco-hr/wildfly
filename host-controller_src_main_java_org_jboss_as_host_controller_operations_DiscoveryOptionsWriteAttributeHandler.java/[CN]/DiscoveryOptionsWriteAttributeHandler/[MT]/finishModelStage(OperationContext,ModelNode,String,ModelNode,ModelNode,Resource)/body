{
  final ModelNode model=Resource.Tools.readModel(resource);
  ModelNode unorderedDiscoveryOptions=new ModelNode();
  if (model.hasDefined(DISCOVERY_OPTION)) {
    final ModelNode discoveryOptions=model.get(DISCOVERY_OPTION);
    for (    Property prop : discoveryOptions.asPropertyList()) {
      unorderedDiscoveryOptions.add(DISCOVERY_OPTION,prop.getName());
    }
  }
  if (model.hasDefined(STATIC_DISCOVERY)) {
    final ModelNode staticDiscoveryOptions=model.get(STATIC_DISCOVERY);
    for (    Property prop : staticDiscoveryOptions.asPropertyList()) {
      unorderedDiscoveryOptions.add(STATIC_DISCOVERY,prop.getName());
    }
  }
  List<ModelNode> newValueList=newValue.isDefined() ? newValue.asList() : Collections.<ModelNode>emptyList();
  List<ModelNode> unorderedDiscoveryOptionsList=unorderedDiscoveryOptions.isDefined() ? unorderedDiscoveryOptions.asList() : Collections.<ModelNode>emptyList();
  if (newValueList.size() != unorderedDiscoveryOptionsList.size() || !newValueList.containsAll(unorderedDiscoveryOptionsList)) {
    throw HostControllerLogger.ROOT_LOGGER.invalidDiscoveryOptionsOrdering(DISCOVERY_OPTIONS);
  }
}
