{
synchronized (lock) {
    for (    Connection connection : managedConnections) {
      try {
        final OutputStream os=connection.writeMessage();
        try {
          os.write(Protocol.PROCESS_STARTED);
          StreamUtils.writeUTFZBytes(os,processName);
          os.close();
        }
  finally {
          StreamUtils.safeClose(os);
        }
      }
 catch (      IOException e) {
        log.errorf("Failed to write PROCESS_STARTED message to connection: %s",e);
      }
    }
  }
}
