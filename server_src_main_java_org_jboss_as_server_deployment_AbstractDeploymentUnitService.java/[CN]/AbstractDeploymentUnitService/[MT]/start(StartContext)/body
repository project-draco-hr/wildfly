{
  ServiceTarget target=context.getChildTarget();
  final String deploymentName=context.getController().getName().getSimpleName();
  final DeploymentServiceListener listener=new DeploymentServiceListener(deploymentName);
  this.listener=listener;
  log.infof("Starting deployment of \"%s\"",deploymentName);
  target.addListener(listener);
  deploymentUnit=createAndInitializeDeploymentUnit(context.getController().getServiceContainer());
  deploymentUnit.putAttachment(Attachments.STATUS_LISTENER,listener);
  final ServiceName serviceName=deploymentUnit.getServiceName().append(FIRST_PHASE_NAME);
  final Phase firstPhase=Phase.values()[0];
  final DeploymentUnitPhaseService<?> phaseService=DeploymentUnitPhaseService.create(deploymentUnit,firstPhase);
  final ServiceBuilder<?> phaseServiceBuilder=target.addService(serviceName,phaseService);
  phaseServiceBuilder.addDependency(Services.JBOSS_DEPLOYMENT_CHAINS,DeployerChains.class,phaseService.getDeployerChainsInjector());
  phaseServiceBuilder.install();
}
