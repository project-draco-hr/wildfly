{
  CfgFileDescription lastBackupDesc=getLatestBackup(currentCfgDir);
  ModelNode[] steps=new ModelNode[2];
  steps[0]=createOpNode("system-property=test","add");
  steps[0].get("value").set("test");
  steps[1]=createOpNode("system-property=test","write-attribute");
  steps[1].get("name").set("value");
  steps[1].get("value").set("test2");
  executeOperation(ModelUtil.createCompositeNode(steps));
  CfgFileDescription newBackupDesc=getLatestBackup(currentCfgDir);
  assertTrue(lastBackupDesc.version == newBackupDesc.version - 1);
  ModelNode op=createOpNode("system-property=test","remove");
  executeOperation(op);
  lastBackupDesc=newBackupDesc;
  newBackupDesc=getLatestBackup(currentCfgDir);
  assertNotNull("Model snapshot not found.",newBackupDesc);
  assertTrue(lastBackupDesc.version == newBackupDesc.version - 1);
}
