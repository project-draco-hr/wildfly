{
  initModelControllerClient(url.getHost(),MGMT_PORT);
  if (configDir == null) {
    configDir=new File(SERVER_CONFIG_DIR);
    assertTrue("Server config dir " + SERVER_CONFIG_DIR + " does not exists.",configDir.exists());
    assertTrue(configDir.isDirectory());
    currentCfgDir=new File(configDir,HISTORY_DIR + File.separatorChar + CURRENT_DIR);
    ModelNode op=createOpNode("core-service=server-environment","read-attribute");
    op.get("name").set("config-file");
    ModelNode result=executeOperation(op);
    String configFile=result.asString();
    String configFileName=new File(configFile).getName();
    assertTrue(configFileName.endsWith(".xml"));
    configFileName=configFileName.substring(0,configFileName.length() - 4);
    lastCfgFile=new File(configDir,HISTORY_DIR + File.separator + configFileName+ ".last.xml");
  }
}
