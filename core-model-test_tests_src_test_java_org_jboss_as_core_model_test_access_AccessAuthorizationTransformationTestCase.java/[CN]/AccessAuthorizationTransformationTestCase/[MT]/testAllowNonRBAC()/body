{
  KernelServicesBuilder builder=createKernelServicesBuilder(TestModelType.DOMAIN).setModelInitializer(new ModelInitializer(){
    @Override public void populateModel(    Resource rootResource){
      Resource management=Resource.Factory.create();
      rootResource.registerChild(PathElement.pathElement(ModelDescriptionConstants.CORE_SERVICE,ModelDescriptionConstants.MANAGEMENT),management);
      management.registerChild(PathElement.pathElement(ModelDescriptionConstants.ACCESS,ModelDescriptionConstants.AUTHORIZATION),AccessAuthorizationResourceDefinition.createResource(null));
    }
  }
,null).setXmlResource("domain-transform-no-rbac-provider.xml");
  builder.createLegacyKernelServicesBuilder(modelVersion,testControllerVersion).skipReverseControllerCheck();
  KernelServices mainServices=builder.build();
  Assert.assertTrue(mainServices.isSuccessfulBoot());
  KernelServices legacyServices=mainServices.getLegacyServices(modelVersion);
  Assert.assertTrue(legacyServices.isSuccessfulBoot());
  ModelNode legacyModel=checkCoreModelTransformation(mainServices,modelVersion);
}
