{
  if (ModelVersion.compare(ModelVersion.create(1,4,0),modelVersion) > 0) {
    return;
  }
  KernelServicesBuilder builder=createKernelServicesBuilder(TestModelType.DOMAIN).setXmlResource("domain-transform-rbac-provider.xml");
  builder.createLegacyKernelServicesBuilder(modelVersion,testControllerVersion).addOperationValidationExclude("write-attribute",PathAddress.pathAddress(CoreManagementResourceDefinition.PATH_ELEMENT,AccessAuthorizationResourceDefinition.PATH_ELEMENT)).skipReverseControllerCheck();
  KernelServices mainServices=builder.build();
  Assert.assertTrue(mainServices.isSuccessfulBoot());
  KernelServices legacyServices=mainServices.getLegacyServices(modelVersion);
  Assert.assertFalse(legacyServices.isSuccessfulBoot());
}
