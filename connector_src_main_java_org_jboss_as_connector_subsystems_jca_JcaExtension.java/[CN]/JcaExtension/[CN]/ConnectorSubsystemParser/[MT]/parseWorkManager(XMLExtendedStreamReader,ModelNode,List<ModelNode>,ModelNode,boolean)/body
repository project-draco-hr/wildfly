{
  final ModelNode workManagerOperation=new ModelNode();
  workManagerOperation.get(OP).set(ADD);
  final int cnt=reader.getAttributeCount();
  String name=null;
  for (int i=0; i < cnt; i++) {
    final Attribute attribute=Attribute.forName(reader.getAttributeLocalName(i));
switch (attribute) {
case NAME:
{
        name=rawAttributeText(reader,WorkManagerAdd.WmParameters.NAME.getAttribute().getXmlName());
        WorkManagerAdd.WmParameters.NAME.getAttribute().parseAndSetParameter(name,workManagerOperation,reader);
        break;
      }
default :
{
      throw unexpectedAttribute(reader,i);
    }
}
}
if (name == null) {
if (defaultWm) {
  name=DEFAULT_NAME;
  workManagerOperation.get(NAME).set(name);
}
 else {
  throw new XMLStreamException("name attribute is mandatory for workmanager element");
}
}
final ModelNode workManagerAddress=parentAddress.clone();
workManagerAddress.add(WORKMANAGER,name);
workManagerAddress.protect();
workManagerOperation.get(OP_ADDR).set(workManagerAddress);
list.add(workManagerOperation);
while (reader.hasNext() && reader.nextTag() != END_ELEMENT) {
final Element element=Element.forName(reader.getLocalName());
Namespace readerNS=Namespace.forUri(reader.getNamespaceURI());
switch (element) {
case LONG_RUNNING_THREADS:
{
switch (readerNS) {
case JCA_1_0:
{
        org.jboss.as.threads.Namespace ns=org.jboss.as.threads.Namespace.THREADS_1_0;
        ThreadsParser.getInstance().parseBoundedQueueThreadPool(reader,readerNS.getUriString(),ns,workManagerAddress,list,WORKMANAGER_LONG_RUNNING,name + "-" + WORKMANAGER_LONG_RUNNING);
        break;
      }
default :
{
      org.jboss.as.threads.Namespace ns=org.jboss.as.threads.Namespace.THREADS_1_1;
      ThreadsParser.getInstance().parseBoundedQueueThreadPool(reader,readerNS.getUriString(),ns,workManagerAddress,list,WORKMANAGER_LONG_RUNNING,name + "-" + WORKMANAGER_LONG_RUNNING);
    }
}
break;
}
case SHORT_RUNNING_THREADS:
{
switch (readerNS) {
case JCA_1_0:
{
  org.jboss.as.threads.Namespace ns=org.jboss.as.threads.Namespace.THREADS_1_0;
  ThreadsParser.getInstance().parseBoundedQueueThreadPool(reader,readerNS.getUriString(),ns,workManagerAddress,list,WORKMANAGER_SHORT_RUNNING,name + "-" + WORKMANAGER_SHORT_RUNNING);
  break;
}
default :
{
org.jboss.as.threads.Namespace ns=org.jboss.as.threads.Namespace.THREADS_1_1;
ThreadsParser.getInstance().parseBoundedQueueThreadPool(reader,readerNS.getUriString(),ns,workManagerAddress,list,WORKMANAGER_SHORT_RUNNING,name + "-" + WORKMANAGER_SHORT_RUNNING);
break;
}
}
break;
}
default :
throw unexpectedElement(reader);
}
}
for (ModelNode op : list) {
if (op.hasDefined(BLOCKING)) {
op.get(BLOCKING).set(Boolean.TRUE);
}
}
}
