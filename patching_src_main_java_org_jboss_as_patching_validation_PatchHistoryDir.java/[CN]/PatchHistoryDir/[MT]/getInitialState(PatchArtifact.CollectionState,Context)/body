{
  PatchArtifact.State patch=patchCollection.getState();
  if (patch == null) {
    return null;
  }
  if (patch.historyDir == null) {
    final File dir=ctx.getInstallationManager().getInstalledImage().getPatchHistoryDir(patch.getPatchId());
    patch.historyDir=new State(dir);
  }
  return patch.historyDir;
}
