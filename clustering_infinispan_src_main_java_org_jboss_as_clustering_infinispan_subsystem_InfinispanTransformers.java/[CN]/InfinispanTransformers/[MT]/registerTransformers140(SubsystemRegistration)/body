{
  final ModelVersion version=ModelVersion.create(1,4,0);
  final ResourceTransformationDescriptionBuilder subsystemBuilder=TransformationDescriptionBuilder.Factory.createSubsystemInstance();
  ResourceTransformationDescriptionBuilder cacheContainerBuilder=subsystemBuilder.addChildResource(CacheContainerResourceDefinition.CONTAINER_PATH).getAttributeBuilder().setDiscard(new DiscardAttributeChecker.DiscardAttributeValueChecker(false,false,new ModelNode(true)),CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.UNDEFINED,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.SIMPLE_EXPRESSIONS,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(new RejectAttributeChecker.SimpleRejectAttributeChecker(new ModelNode(false)),CacheResourceDefinition.STATISTICS_ENABLED).end();
  ResourceTransformationDescriptionBuilder distributedCacheBuilder=cacheContainerBuilder.addChildResource(DistributedCacheResourceDefinition.DISTRIBUTED_CACHE_PATH);
  distributedCacheBuilder.getAttributeBuilder().setDiscard(new DiscardAttributeChecker.DefaultDiscardAttributeChecker(false,true){
    @Override protected boolean isValueDiscardable(    PathAddress address,    String attributeName,    ModelNode attributeValue,    TransformationContext context){
      if (attributeName.equals(DistributedCacheResourceDefinition.VIRTUAL_NODES.getName())) {
        if (attributeValue.isDefined()) {
          if (attributeValue.equals(new ModelNode().set(1))) {
            return true;
          }
        }
      }
      return false;
    }
  }
,DistributedCacheResourceDefinition.VIRTUAL_NODES).addRejectCheck(VirtualNodesCheckerAndConverter.INSTANCE,DistributedCacheResourceDefinition.VIRTUAL_NODES).setValueConverter(VirtualNodesCheckerAndConverter.INSTANCE,DistributedCacheResourceDefinition.VIRTUAL_NODES).addRename(DistributedCacheResourceDefinition.VIRTUAL_NODES,DistributedCacheResourceDefinition.SEGMENTS.getName()).setDiscard(new DiscardAttributeChecker.DiscardAttributeValueChecker(false,false,new ModelNode(true)),CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.UNDEFINED,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.SIMPLE_EXPRESSIONS,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(new RejectAttributeChecker.SimpleRejectAttributeChecker(new ModelNode(false)),CacheResourceDefinition.STATISTICS_ENABLED).end();
  distributedCacheBuilder.rejectChildResource(BackupSiteResourceDefinition.BACKUP_PATH);
  distributedCacheBuilder.rejectChildResource(BackupForResourceDefinition.BACKUP_FOR_PATH);
  ResourceTransformationDescriptionBuilder replicatedCacheBuilder=cacheContainerBuilder.addChildResource(ReplicatedCacheResourceDefinition.REPLICATED_CACHE_PATH);
  replicatedCacheBuilder.getAttributeBuilder().setDiscard(new DiscardAttributeChecker.DiscardAttributeValueChecker(false,false,new ModelNode(true)),CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.UNDEFINED,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.SIMPLE_EXPRESSIONS,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(new RejectAttributeChecker.SimpleRejectAttributeChecker(new ModelNode(false)),CacheResourceDefinition.STATISTICS_ENABLED).end();
  replicatedCacheBuilder.rejectChildResource(BackupSiteResourceDefinition.BACKUP_PATH);
  replicatedCacheBuilder.rejectChildResource(BackupForResourceDefinition.BACKUP_FOR_PATH);
  cacheContainerBuilder.addChildResource(InvalidationCacheResourceDefinition.INVALIDATION_CACHE_PATH).getAttributeBuilder().setDiscard(new DiscardAttributeChecker.DiscardAttributeValueChecker(false,false,new ModelNode(true)),CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.UNDEFINED,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.SIMPLE_EXPRESSIONS,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(new RejectAttributeChecker.SimpleRejectAttributeChecker(new ModelNode(false)),CacheResourceDefinition.STATISTICS_ENABLED).end();
  cacheContainerBuilder.addChildResource(LocalCacheResourceDefinition.LOCAL_CACHE_PATH).getAttributeBuilder().setDiscard(new DiscardAttributeChecker.DiscardAttributeValueChecker(false,false,new ModelNode(true)),CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.UNDEFINED,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(RejectAttributeChecker.SIMPLE_EXPRESSIONS,CacheResourceDefinition.STATISTICS_ENABLED).addRejectCheck(new RejectAttributeChecker.SimpleRejectAttributeChecker(new ModelNode(false)),CacheResourceDefinition.STATISTICS_ENABLED).end();
  TransformationDescription sub=subsystemBuilder.build();
  TransformationDescription.Tools.register(sub,subsystem,version);
}
