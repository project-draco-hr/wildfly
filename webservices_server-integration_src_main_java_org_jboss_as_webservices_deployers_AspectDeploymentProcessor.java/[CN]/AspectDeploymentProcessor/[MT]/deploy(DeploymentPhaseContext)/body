{
  final DeploymentUnit unit=phaseContext.getDeploymentUnit();
  if (isWebServiceDeployment(unit)) {
    ensureAspectInitialised();
    final Deployment dep=ASHelper.getRequiredAttachment(unit,WSAttachmentKeys.DEPLOYMENT_KEY);
    if (aspect.canHandle(dep)) {
      log.debug(this.aspect + " start: " + unit.getName());
      ClassLoader origClassLoader=SecurityActions.getContextClassLoader();
      try {
        SecurityActions.setContextClassLoader(aspect.getLoader());
        dep.addAttachment(ServiceTarget.class,phaseContext.getServiceTarget());
        aspect.start(dep);
        dep.removeAttachment(ServiceTarget.class);
      }
  finally {
        SecurityActions.setContextClassLoader(origClassLoader);
      }
    }
  }
}
