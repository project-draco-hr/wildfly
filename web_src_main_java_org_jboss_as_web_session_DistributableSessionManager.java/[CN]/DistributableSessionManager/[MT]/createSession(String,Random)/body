{
  Session session=null;
  try {
    boolean inLockingValve=SessionReplicationContext.isLocallyActive();
    if (inLockingValve || this.valveLock.tryLock(0,TimeUnit.SECONDS)) {
      try {
        session=createSessionInternal(sessionId,random);
      }
  finally {
        if (!inLockingValve) {
          this.valveLock.unlock();
        }
      }
    }
 else {
      log.trace("createEmptySession(): Manager is not handling requests; returning null");
    }
  }
 catch (  InterruptedException e) {
    Thread.currentThread().interrupt();
  }
  return session;
}
