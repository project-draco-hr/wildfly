{
  String policyClass=this.replicationConfig.getSessionNotificationPolicy();
  if (policyClass == null || policyClass.isEmpty()) {
    policyClass=WildFlySecurityManager.getPropertyPrivileged("jboss.web.clustered.session.notification.policy",IgnoreUndeployLegacyClusteredSessionNotificationPolicy.class.getName());
  }
  try {
    ClusteredSessionNotificationPolicy policy=loadClass(policyClass,ClusteredSessionNotificationPolicy.class).newInstance();
    policy.setClusteredSessionNotificationCapability(new ClusteredSessionNotificationCapability());
    return policy;
  }
 catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    throw MESSAGES.failToCreateSessionNotificationPolicy(ClusteredSessionNotificationPolicy.class.getName(),policyClass,e);
  }
}
