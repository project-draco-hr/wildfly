{
  String policyClass=this.replicationConfig.getSessionNotificationPolicy();
  if (policyClass == null || policyClass.isEmpty()) {
    policyClass=AccessController.doPrivileged(new PrivilegedAction<String>(){
      @Override public String run(){
        return System.getProperty("jboss.web.clustered.session.notification.policy",IgnoreUndeployLegacyClusteredSessionNotificationPolicy.class.getName());
      }
    }
);
  }
  try {
    ClusteredSessionNotificationPolicy policy=loadClass(policyClass,ClusteredSessionNotificationPolicy.class).newInstance();
    policy.setClusteredSessionNotificationCapability(new ClusteredSessionNotificationCapability());
    return policy;
  }
 catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    throw new RuntimeException(String.format("Failed to instantiate %s %s",ClusteredSessionNotificationPolicy.class.getName(),policyClass),e);
  }
}
