{
  boolean updated=true;
  ClusteredSession<O> session=cast(this.sessions.get(realId));
  if (session != null) {
    updated=session.setVersionFromDistributedCache(distributedVersion);
    if (updated) {
      log.tracef("session in-memory data is invalidated for id: %s new version: %d",realId,distributedVersion);
    }
  }
 else {
    int maxLife=metadata == null ? getMaxInactiveInterval() : metadata.getMaxInactiveInterval();
    Object existing=unloadedSessions.put(realId,new OwnedSessionUpdate(dataOwner,timestamp,maxLife,false));
    if (existing == null) {
      calcActiveSessions();
      log.tracef("New session %s added to unloaded session map",realId);
    }
 else {
      log.tracef("Updated timestamp for unloaded session %s",realId);
    }
  }
  return updated;
}
