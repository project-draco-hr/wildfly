{
  String ctxPath=((Context)this.container).getPath();
switch (this.getSnapshotMode()) {
case INTERVAL:
{
      int interval=this.getSnapshotInterval();
      if (interval > 0) {
        return new IntervalSnapshotManager(this,ctxPath,interval);
      }
      log.warn("Snapshot mode set to 'interval' but snapshotInterval is < 1 or was not specified, using 'instant'");
    }
case INSTANT:
{
    return new InstantSnapshotManager(this,ctxPath);
  }
default :
{
  throw new IllegalStateException();
}
}
}
