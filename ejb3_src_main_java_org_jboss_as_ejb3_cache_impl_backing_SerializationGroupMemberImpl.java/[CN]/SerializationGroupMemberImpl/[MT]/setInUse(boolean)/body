{
  if (group != null) {
    boolean localGroupLock=false;
    if (!groupLockHeld) {
      group.lock();
      localGroupLock=groupLockHeld=true;
    }
    try {
      if (inUse)       group.addInUse(id);
 else       group.removeInUse(id);
    }
  finally {
      if (localGroupLock) {
        group.unlock();
        groupLockHeld=false;
      }
    }
  }
}
