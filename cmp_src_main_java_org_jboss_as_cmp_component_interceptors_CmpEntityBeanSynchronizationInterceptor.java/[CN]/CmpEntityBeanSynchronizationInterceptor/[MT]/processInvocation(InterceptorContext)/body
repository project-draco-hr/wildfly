{
  final CmpEntityBeanComponent component=(CmpEntityBeanComponent)context.getPrivateData(Component.class);
  final CmpEntityBeanComponentInstance instance=(CmpEntityBeanComponentInstance)context.getPrivateData(ComponentInstance.class);
  if (instance.getPrimaryKey() == null) {
    return context.proceed();
  }
  final CmpEntityBeanContext entityContext=instance.getEjbContext();
  if (!entityContext.isValid()) {
    component.getStoreManager().loadEntity(entityContext);
    entityContext.setValid(true);
  }
  final Transaction transaction=component.getTransactionManager().getTransaction();
  if (TxUtils.isActive(transaction)) {
    entityContext.getTxAssociation().scheduleSync(transaction,instance.getEjbContext());
  }
  return super.processInvocation(context);
}
