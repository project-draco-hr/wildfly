{
  if (theTrustStore.isModified()) {
    try {
      theTrustStore.load();
    }
 catch (    StartException e1) {
      throw new IllegalStateException("Unable to load key trust file.");
    }
    try {
      trustManagerFactory.init(theTrustStore.getKeyStore());
      TrustManager[] trustManagers=trustManagerFactory.getTrustManagers();
      for (      TrustManager current : trustManagers) {
        if (current instanceof X509TrustManager) {
          delegate=(X509TrustManager)current;
          break;
        }
      }
    }
 catch (    GeneralSecurityException e) {
      throw new IllegalStateException("Unable to operate on trust store.",e);
    }
  }
  if (delegate == null) {
    throw new IllegalStateException("Unable to create delegate trust manager.");
  }
  return delegate;
}
