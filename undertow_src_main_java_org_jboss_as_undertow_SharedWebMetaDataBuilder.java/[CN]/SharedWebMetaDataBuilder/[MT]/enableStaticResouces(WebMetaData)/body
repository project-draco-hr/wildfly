{
  final ModelNode resourcesConfig=config.get(STATIC_RESOURCES);
  if (true || resourcesConfig.require(DISABLED).asBoolean()) {
    return;
  }
  final ServletMetaData servlet=new ServletMetaData();
  servlet.setName("default");
  servlet.setLoadOnStartup("" + 1);
  if (resourcesConfig.require(WEBDAV).asBoolean()) {
    servlet.setServletClass("org.apache.catalina.servlets.WebdavServlet");
  }
 else {
    servlet.setServletClass("org.apache.catalina.servlets.DefaultServlet");
  }
  final List<ParamValueMetaData> initParams=new ArrayList<ParamValueMetaData>();
  initParams.add(createParameter("listings",resourcesConfig.require(LISTINGS).asString()));
  initParams.add(createParameter("readonly",resourcesConfig.require(READ_ONLY).asString()));
  initParams.add(createParameter("sendfile",resourcesConfig.require(SENDFILE).asString()));
  if (resourcesConfig.hasDefined(FILE_ENCODING)) {
    initParams.add(createParameter("file-encoding",resourcesConfig.get(FILE_ENCODING).asString()));
  }
  if (resourcesConfig.hasDefined(SECRET)) {
    initParams.add(createParameter("secret",resourcesConfig.get(SECRET).asString()));
  }
  initParams.add(createParameter("max-depth",resourcesConfig.require(MAX_DEPTH).asString()));
  servlet.setInitParam(initParams);
  metadata.getServlets().add(servlet);
  addServletMapping("default",metadata,"/");
}
