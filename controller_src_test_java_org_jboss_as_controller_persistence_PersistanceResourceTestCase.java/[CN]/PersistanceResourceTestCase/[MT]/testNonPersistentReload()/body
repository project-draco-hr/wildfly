{
  assertFileContents(standardFile,"std");
  ConfigurationFile configurationFile=new ConfigurationFile(standardDir,"standard.xml",standardFile.getCanonicalPath(),false);
  File bootingFile=configurationFile.getBootFile();
  Assert.assertEquals(standardFile.getCanonicalPath(),bootingFile.getCanonicalPath());
  TestConfigurationFilePersister persister=new TestConfigurationFilePersister(configurationFile);
  configurationFile.successfulBoot();
  checkDirectoryExists(historyDir);
  checkDirectoryExists(currentHistoryDir);
  checkFiles(null,"std","std","std","std");
  store(persister,"One");
  checkFiles(null,"std","std","std","One","std");
  configurationFile.resetBootFile(false);
  bootingFile=configurationFile.getBootFile();
  Assert.assertEquals(standardFile.getCanonicalPath(),bootingFile.getCanonicalPath());
  persister=new TestConfigurationFilePersister(configurationFile);
  configurationFile.successfulBoot();
  checkFiles(null,"std","std","std","One","std");
  configurationFile.resetBootFile(true);
  bootingFile=configurationFile.getBootFile();
  Assert.assertEquals(addSuffix(standardFile,"last"),bootingFile.getCanonicalPath());
}
