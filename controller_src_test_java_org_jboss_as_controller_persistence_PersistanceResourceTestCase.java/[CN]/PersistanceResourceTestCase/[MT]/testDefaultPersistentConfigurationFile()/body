{
  assertFileContents(standardFile,"std");
  Assert.assertFalse(historyDir.exists());
  ConfigurationFile configurationFile=new ConfigurationFile(standardDir,"standard.xml",null,true);
  Assert.assertEquals(standardFile.getCanonicalPath(),configurationFile.getBootFile().getCanonicalPath());
  TestConfigurationFilePersister persister=new TestConfigurationFilePersister(configurationFile);
  configurationFile.successfulBoot();
  checkDirectoryExists(historyDir);
  checkDirectoryExists(currentHistoryDir);
  checkFiles(null,"std","std","std","std");
  store(persister,"One");
  checkFiles(null,"One","std","std","One","std");
  store(persister,"Two");
  checkFiles(null,"Two","std","std","Two","std","One");
  store(persister,"Three");
  checkFiles(null,"Three","std","std","Three","std","One","Two");
  configurationFile=new ConfigurationFile(standardDir,"standard.xml",null,true);
  Assert.assertEquals(standardFile.getCanonicalPath(),configurationFile.getBootFile().getCanonicalPath());
  persister=new TestConfigurationFilePersister(configurationFile);
  configurationFile.successfulBoot();
  checkDirectoryExists(historyDir);
  checkDirectoryExists(currentHistoryDir);
  checkFiles(null,"Three","std","Three","Three");
  store(persister,"Four");
  checkFiles(null,"Four","std","Three","Four","Three");
}
