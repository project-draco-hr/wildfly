{
  checkDirectoryExists(dir);
  File file=new File(dir,name);
  if (contents != null) {
    Writer out=new BufferedWriter(new FileWriter(file));
    try {
      out.write(contents);
    }
  finally {
      IoUtils.safeClose(out);
    }
  }
  return file;
}
