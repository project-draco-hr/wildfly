{
  for (  final Map.Entry<Integer,ActiveRequest<?,?>> requestEntry : requests.entrySet()) {
    final ActiveRequest<?,?> request=requestEntry.getValue();
    if (request.channel == closed) {
      final IOException failure=e == null ? new IOException("Channel closed") : e;
      request.context.getResultHandler().failed(failure);
      requests.remove(requestEntry.getKey());
    }
  }
}
