def test_namedtuple_dump(self):
    for v in [Value(1), Point(1, 2)]:
        d = v._asdict()
        l = list(v)
        sio = StringIO()
        json.dump(v, sio)
        self.assertEqual(d, json.loads(sio.getvalue()))
        sio = StringIO()
        json.dump(v, sio, namedtuple_as_object=True)
        self.assertEqual(d, json.loads(sio.getvalue()))
        sio = StringIO()
        json.dump(v, sio, tuple_as_array=False)
        self.assertEqual(d, json.loads(sio.getvalue()))
        sio = StringIO()
        json.dump(v, sio, namedtuple_as_object=True, tuple_as_array=False)
        self.assertEqual(d, json.loads(sio.getvalue()))
        sio = StringIO()
        json.dump(v, sio, namedtuple_as_object=False)
        self.assertEqual(l, json.loads(sio.getvalue()))
        self.assertRaises(TypeError, json.dump, v, StringIO(), tuple_as_array=False, namedtuple_as_object=False)
