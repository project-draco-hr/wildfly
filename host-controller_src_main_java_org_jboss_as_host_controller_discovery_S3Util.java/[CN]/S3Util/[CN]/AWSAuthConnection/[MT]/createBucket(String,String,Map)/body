{
  String body;
  if (location == null) {
    body=null;
  }
 else   if (LOCATION_EU.equals(location)) {
    if (!callingFormat.supportsLocatedBuckets())     throw HostControllerLogger.ROOT_LOGGER.creatingBucketWithUnsupportedCallingFormat();
    body="<CreateBucketConstraint><LocationConstraint>" + location + "</LocationConstraint></CreateBucketConstraint>";
  }
 else   throw HostControllerLogger.ROOT_LOGGER.invalidS3Location(location);
  if (!Utils.validateBucketName(bucket,callingFormat))   throw HostControllerLogger.ROOT_LOGGER.invalidS3Bucket(bucket);
  HttpURLConnection request=makeRequest("PUT",bucket,"",null,headers);
  if (body != null) {
    request.setDoOutput(true);
    request.getOutputStream().write(body.getBytes(StandardCharsets.UTF_8));
  }
  return new Response(request);
}
