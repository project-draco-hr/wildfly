{
  if (connection.getRequestProperty("Date") == null) {
    connection.setRequestProperty("Date",httpDate());
  }
  if (connection.getRequestProperty("Content-Type") == null) {
    connection.setRequestProperty("Content-Type","");
  }
  if (this.awsAccessKeyId != null && this.awsSecretAccessKey != null) {
    String canonicalString=Utils.makeCanonicalString(method,bucket,key,pathArgs,connection.getRequestProperties());
    String encodedCanonical=Utils.encode(this.awsSecretAccessKey,canonicalString,false);
    connection.setRequestProperty("Authorization","AWS " + this.awsAccessKeyId + ":"+ encodedCanonical);
  }
}
