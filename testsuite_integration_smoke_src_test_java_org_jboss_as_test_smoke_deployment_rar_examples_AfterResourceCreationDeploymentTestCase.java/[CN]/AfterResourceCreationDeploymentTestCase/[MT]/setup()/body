{
  String xml=readXmlResource(System.getProperty("jbossas.ts.submodule.dir") + "/src/test/resources/config/basic-after.xml");
  List<ModelNode> operations=xmlToModelOperations(xml,Namespace.CURRENT.getUriString(),new ResourceAdaptersExtension.ResourceAdapterSubsystemParser());
  executeOperation(operationListToCompositeOperation(operations));
  final ModelNode address=new ModelNode();
  address.add("subsystem","resource-adapters");
  address.add("resource-adapter",deploymentName);
  address.protect();
  final ModelNode operation=new ModelNode();
  operation.get(OP).set("activate");
  operation.get(OP_ADDR).set(address);
  executeOperation(operation);
  final Properties env=new Properties();
  env.put(Context.INITIAL_CONTEXT_FACTORY,org.jboss.naming.remote.client.InitialContextFactory.class.getName());
  env.put(Context.PROVIDER_URL,"remote://" + url.getHost() + ":4447");
  env.put("jboss.naming.client.connect.options.org.xnio.Options.SASL_POLICY_NOPLAINTEXT","false");
  env.put("jboss.naming.client.security.callback.handler.class",CallbackHandler.class.getName());
  remoteContext=new InitialContext(env);
}
