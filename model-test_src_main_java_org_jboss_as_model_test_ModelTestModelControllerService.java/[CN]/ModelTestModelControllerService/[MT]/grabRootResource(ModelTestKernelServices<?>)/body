{
  final AtomicReference<Resource> resourceRef=new AtomicReference<Resource>();
  ((ModelTestKernelServicesImpl<?>)kernelServices).internalExecute(new ModelNode(),new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      resourceRef.set(context.readResourceFromRoot(PathAddress.EMPTY_ADDRESS,true));
      context.getResult().setEmptyObject();
      context.stepCompleted();
    }
  }
);
  Resource rootResource=resourceRef.get();
  Assert.assertNotNull(rootResource);
  return rootResource;
}
