{
  ModelNode result=null;
  try {
    ModelNode op=getOperation("evil","attr1",5,"good");
    op.get("rollback-on-runtime-failure").set(false);
    result=controller.execute(op);
    fail("should have thrown OperationFailedException");
  }
 catch (  OperationFailedException e) {
    assertTrue(e.getFailureDescription().get("failure-description").toString().indexOf("this handler is evil") > -1);
  }
  assertFalse(runtimeState.get());
  result=controller.execute(getOperation("good","attr1",1));
  assertEquals("success",result.get("outcome").asString());
  assertEquals(5,result.get("result").asInt());
}
