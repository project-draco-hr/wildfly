{
  ArrayList<String> pathSegments=decodePath(exchange.getRequestPath());
  Map<String,Deque<String>> queryParameters=exchange.getQueryParameters();
  ModelNode dmr=new ModelNode();
  for (  Entry<String,Deque<String>> entry : queryParameters.entrySet()) {
    String key=entry.getKey();
    String value=entry.getValue().getFirst();
    ModelNode valueNode;
    if (key.startsWith("operation-header-")) {
      String header=key.substring("operation-header-".length());
      valueNode=dmr.get(OPERATION_HEADERS,header);
    }
 else {
      valueNode=dmr.get(key);
    }
    valueNode.set(!value.equals("") ? value : "true");
  }
  dmr.get(OP).set(operation.realOperation);
  ModelNode list=dmr.get(OP_ADDR).setEmptyList();
  for (int i=1; i < pathSegments.size() - 1; i+=2) {
    list.add(pathSegments.get(i),pathSegments.get(i + 1));
  }
  return dmr;
}
