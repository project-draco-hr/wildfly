{
  final ManagementResourceRegistration profileReg=profileRegistration;
  if (profileReg == null) {
    return;
  }
  final ManagementResourceRegistration deploymentsReg=deploymentsRegistration;
  Map<String,SubsystemInformation> subsystems=extensionInfo.remove(moduleName);
  if (subsystems != null) {
synchronized (subsystems) {
      Set<String> subsystemNames=subsystems.keySet();
      for (      String subsystem : subsystemNames) {
        if (rootResource.getChild(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM,subsystem)) != null) {
          extensionInfo.put(moduleName,subsystems);
          throw MESSAGES.removingExtensionWithRegisteredSubsystem(moduleName,subsystem);
        }
      }
      for (      String subsystem : subsystemNames) {
        profileReg.unregisterSubModel(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM,subsystem));
        if (deploymentsReg != null) {
          deploymentsReg.unregisterSubModel(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM,subsystem));
        }
      }
      unnamedParsers.remove(moduleName);
    }
  }
}
