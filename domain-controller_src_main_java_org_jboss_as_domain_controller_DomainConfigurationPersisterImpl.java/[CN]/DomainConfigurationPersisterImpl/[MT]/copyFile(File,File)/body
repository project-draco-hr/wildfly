{
  if (backup.exists())   backup.delete();
  if (!file.renameTo(backup)) {
    FileOutputStream fos=null;
    BufferedOutputStream bos=null;
    FileInputStream fis=null;
    try {
      fos=new FileOutputStream(backup);
      bos=new BufferedOutputStream(fos);
      fis=new FileInputStream(file);
      BufferedInputStream bis=new BufferedInputStream(fis);
      byte[] bytes=new byte[8192];
      int read;
      while ((read=bis.read(bytes)) > -1) {
        bos.write(bytes,0,read);
      }
    }
  finally {
      try {
        if (bos != null) {
          bos.close();
        }
      }
 catch (      Exception ignored) {
      }
      try {
        if (fos != null) {
          fos.close();
        }
      }
 catch (      Exception ignored) {
      }
      try {
        if (fis != null) {
          fis.close();
        }
      }
 catch (      Exception ignored) {
      }
    }
  }
}
