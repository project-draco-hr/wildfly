{
  int portOffSet=0;
  String socketBindingRef=null;
  if (serverGroup.hasDefined(SOCKET_BINDING_GROUP)) {
    socketBindingRef=serverGroup.get(SOCKET_BINDING_GROUP).asString();
  }
  if (serverModel.hasDefined(SOCKET_BINDING_GROUP)) {
    socketBindingRef=serverModel.get(SOCKET_BINDING_GROUP).asString();
  }
  if (serverGroup.hasDefined("socket-binding-port-offset")) {
    portOffSet=serverGroup.get("socket-binding-port-offset").asInt();
  }
  if (serverModel.hasDefined("socket-binding-port-offset")) {
    portOffSet=serverModel.get("socket-binding-port-offset").asInt();
  }
  if (socketBindingRef == null) {
    throw new IllegalArgumentException("undefined socket binding group for server " + serverName);
  }
  List<ModelNode> updates=new ArrayList<ModelNode>();
  addNamespaces(updates);
  addServerName(updates);
  addSchemaLocations(updates);
  addExtensions(updates);
  addPaths(updates);
  addInterfaces(updates);
  addSocketBindings(updates,portOffSet,socketBindingRef);
  addSubsystems(updates);
  return updates;
}
