{
  String pid=ConfigAdminActivator2.class.getName();
  assertFalse("Precondition",ConfigAdminManagementOperations.listConfigurations(getControllerClient()).contains(pid));
  long bundleId=OSGiManagementOperations.getBundleId(getControllerClient(),"test-config-admin2",new Version(0,0,0));
  assertTrue(bundleId > 0);
  assertTrue(OSGiManagementOperations.bundleStart(getControllerClient(),bundleId));
  assertEquals("ACTIVE",OSGiManagementOperations.getBundleState(getControllerClient(),bundleId));
  Map<String,String> config=ConfigAdminManagementOperations.readConfiguration(getControllerClient(),pid);
  assertEquals("initial",config.get("from.bundle"));
  assertTrue(OSGiManagementOperations.bundleStop(getControllerClient(),bundleId));
  assertEquals("RESOLVED",OSGiManagementOperations.getBundleState(getControllerClient(),bundleId));
  Map<String,String> config2=ConfigAdminManagementOperations.readConfiguration(getControllerClient(),pid);
  assertEquals("updated",config2.get("from.bundle"));
  assertTrue(ConfigAdminManagementOperations.removeConfiguration(getControllerClient(),pid));
  assertFalse(ConfigAdminManagementOperations.listConfigurations(getControllerClient()).contains(pid));
}
