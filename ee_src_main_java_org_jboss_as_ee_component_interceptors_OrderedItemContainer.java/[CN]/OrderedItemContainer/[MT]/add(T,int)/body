{
  if (sortedItems != null) {
    throw new IllegalStateException("Cannot add any more items once getSortedItems() has been called");
  }
  if (item == null) {
    throw new IllegalArgumentException("item cannot be null");
  }
  final T current=items.get(priority);
  if (current != null) {
    throw new IllegalArgumentException("AS7-1042: can't add " + item + ", priority 0x"+ toHexString(priority)+ " is already taken by "+ current);
  }
  items.put(priority,item);
}
