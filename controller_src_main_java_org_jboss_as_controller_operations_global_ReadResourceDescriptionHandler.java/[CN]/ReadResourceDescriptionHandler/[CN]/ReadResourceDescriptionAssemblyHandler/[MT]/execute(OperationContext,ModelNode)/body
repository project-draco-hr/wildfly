{
  for (  Map.Entry<PathElement,ModelNode> entry : childResources.entrySet()) {
    final PathElement element=entry.getKey();
    final ModelNode value=entry.getValue();
    if (!value.has(FAILURE_DESCRIPTION)) {
      nodeDescription.get(CHILDREN,element.getKey(),MODEL_DESCRIPTION,element.getValue()).set(value.get(RESULT));
    }
 else     if (value.hasDefined(FAILURE_DESCRIPTION)) {
      context.getFailureDescription().set(value.get(FAILURE_DESCRIPTION));
      break;
    }
  }
  if (operations != null) {
    for (    Map.Entry<String,ModelNode> entry : operations.entrySet()) {
      nodeDescription.get(OPERATIONS.getName(),entry.getKey()).set(entry.getValue());
    }
  }
  if (accessControlContext.defaultWildcardAccessControl != null && accessControlContext.localResourceAccessControlResults != null) {
    ModelNode accessControl=new ModelNode();
    accessControl.setEmptyObject();
    ModelNode defaultControl;
    if (accessControlContext.defaultWildcardAccessControl != null) {
      accessControl.get(DEFAULT).set(accessControlContext.defaultWildcardAccessControl);
      defaultControl=accessControlContext.defaultWildcardAccessControl;
    }
 else {
      defaultControl=new ModelNode();
    }
    if (accessControlContext.localResourceAccessControlResults != null) {
      ModelNode exceptions=accessControl.get(EXCEPTIONS);
      exceptions.setEmptyObject();
      for (      Map.Entry<PathAddress,ModelNode> entry : accessControlContext.localResourceAccessControlResults.entrySet()) {
        if (!entry.getValue().isDefined()) {
          continue;
        }
        if (!entry.getValue().equals(defaultControl)) {
          exceptions.get(entry.getKey().toModelNode().asString()).set(entry.getValue());
        }
      }
    }
    nodeDescription.get(ACCESS_CONTROL.getName()).set(accessControl);
  }
  if (!includeAttrs && nodeDescription.hasDefined(ATTRIBUTES)) {
    nodeDescription.get(ATTRIBUTES).set(new ModelNode());
  }
  context.getResult().set(nodeDescription);
  context.stepCompleted();
}
