{
  ModelNode operation=new ModelNode();
  operation.get(OP_ADDR).set(address);
  operation.get(OP).set(READ_RESOURCE_OPERATION);
  operation.get(INCLUDE_RUNTIME).set(true);
  ModelNode result=execute(client,operation);
  assertEquals(result.toJSONString(true),active,result.get(RESULT,runtimeAttributeName).isDefined());
  operation.get(OP).set("list-messages");
  if (active) {
    execute(client,operation);
  }
 else {
    executeWithFailure(client,operation);
  }
}
