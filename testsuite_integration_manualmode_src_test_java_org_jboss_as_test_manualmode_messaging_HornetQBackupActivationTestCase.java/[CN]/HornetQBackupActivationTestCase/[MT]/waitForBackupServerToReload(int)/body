{
  long start=System.currentTimeMillis();
  long now;
  do {
    backupClient.close();
    backupClient=createBackupClient();
    ModelNode operation=new ModelNode();
    operation.get(OP_ADDR).setEmptyList();
    operation.get(OP).set(READ_ATTRIBUTE_OPERATION);
    operation.get(NAME).set("running-mode");
    try {
      ModelNode result=execute(backupClient,operation);
      boolean normal="NORMAL".equals(result.get(RESULT).asString());
      if (normal) {
        return;
      }
    }
 catch (    Exception e) {
    }
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
    }
    now=System.currentTimeMillis();
  }
 while (now - start < timeout);
  fail("Backup Server did not reload in the imparted time.");
}
