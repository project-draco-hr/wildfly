{
  Thread.sleep(TimeoutUtil.adjust(500));
  long start=System.currentTimeMillis();
  long now;
  do {
    backupJMSOperations.getControllerClient().close();
    ModelControllerClient backupClient=createBackupClient();
    ModelNode operation=new ModelNode();
    operation.get(OP_ADDR).setEmptyList();
    operation.get(OP).set(READ_ATTRIBUTE_OPERATION);
    operation.get(NAME).set("server-state");
    try {
      ModelNode result=execute(backupClient,operation);
      boolean normal="running".equals(result.get(RESULT).asString());
      if (normal) {
        backupJMSOperations=new DefaultHornetQProviderJMSOperations(backupClient);
        return;
      }
    }
 catch (    Exception e) {
    }
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
    }
    now=System.currentTimeMillis();
  }
 while (now - start < timeout);
  fail("Backup Server did not reload in the imparted time.");
}
