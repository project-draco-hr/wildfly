{
  checkHornetQServerStartedAndActiveAttributes(liveClient,true,true);
  checkHornetQServerStartedAndActiveAttributes(backupClient,true,false);
  final String queueName=randomUUID().toString();
  addQueue(backupClient,queueName);
  final String jmsQueueName=randomUUID().toString();
  addJMSQueue(backupClient,jmsQueueName);
  final String jmsTopicName=randomUUID().toString();
  addJMSTopic(backupClient,jmsTopicName);
  checkQueue(backupClient,queueName,false);
  checkJMSQueue(backupClient,jmsQueueName,false);
  checkJMSTopic(backupClient,jmsTopicName,false);
  checkConnectionFactory(backupClient,false);
  container.stop(LIVE_SERVER);
  waitForHornetQServerActivation(backupClient,true,TimeoutUtil.adjust(ACTIVATION_TIMEOUT));
  checkHornetQServerStartedAndActiveAttributes(backupClient,true,true);
  checkQueue(backupClient,queueName,true);
  checkJMSQueue(backupClient,jmsQueueName,true);
  checkJMSTopic(backupClient,jmsTopicName,true);
  checkConnectionFactory(backupClient,true);
  container.start(LIVE_SERVER);
  waitForHornetQServerActivation(liveClient,true,TimeoutUtil.adjust(ACTIVATION_TIMEOUT));
  checkHornetQServerStartedAndActiveAttributes(liveClient,true,true);
  waitForHornetQServerActivation(backupClient,false,TimeoutUtil.adjust(ACTIVATION_TIMEOUT));
  checkHornetQServerStartedAndActiveAttributes(backupClient,true,false);
  checkQueue(backupClient,queueName,false);
  checkJMSQueue(backupClient,jmsQueueName,false);
  checkJMSTopic(backupClient,jmsTopicName,false);
  checkConnectionFactory(backupClient,false);
}
