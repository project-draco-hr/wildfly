{
  ModelNode operation=new ModelNode();
  operation.get(OP_ADDR).add("subsystem","messaging");
  operation.get(OP_ADDR).add("hornetq-server","default");
  operation.get(OP_ADDR).add("connection-factory","RemoteConnectionFactory");
  operation.get(OP).set(READ_RESOURCE_OPERATION);
  operation.get(INCLUDE_RUNTIME).set(true);
  ModelNode result=execute(client,operation);
  assertEquals(result.toJSONString(true),active,result.get(RESULT,"initial-message-packet-size").isDefined());
  operation.get(OP).set("add-jndi");
  operation.get("jndi-binding").set("java:jboss/exported/jms/" + randomUUID().toString());
  if (active) {
    execute(client,operation);
  }
 else {
    executeWithFailure(client,operation);
  }
}
