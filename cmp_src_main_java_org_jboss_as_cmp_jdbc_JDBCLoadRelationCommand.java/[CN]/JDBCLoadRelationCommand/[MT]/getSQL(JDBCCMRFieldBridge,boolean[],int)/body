{
  JDBCCMPFieldBridge[] myKeyFields=getMyKeyFields(cmrField);
  JDBCCMPFieldBridge[] relatedKeyFields=getRelatedKeyFields(cmrField);
  String relationTable=getQualifiedRelationTable(cmrField);
  JDBCEntityBridge relatedEntity=cmrField.getRelatedJDBCEntity();
  String relatedTable=relatedEntity.getQualifiedTableName();
  boolean join=((preloadMask != null) || cmrField.allFkFieldsMappedToPkFields()) && (relatedKeyFields != relatedEntity.getPrimaryKeyFields());
  String relationTableAlias;
  String relatedTableAlias;
  if (join) {
    relationTableAlias=getRelationTable(cmrField);
    relatedTableAlias=(relatedTable.equals(relationTable) ? getRelationTable(cmrField) + '_' + cmrField.getFieldName() : relatedEntity.getTableName());
  }
 else {
    relationTableAlias="";
    relatedTableAlias="";
  }
  JDBCFunctionMappingMetaData selectTemplate=getSelectTemplate(cmrField);
  return selectTemplate == null ? getPlainSQL(keyCount,myKeyFields,relationTableAlias,relatedKeyFields,preloadMask,cmrField,relatedTableAlias,relationTable,join,relatedTable) : getSQLByTemplate(keyCount,myKeyFields,relationTableAlias,relatedKeyFields,preloadMask,cmrField,relatedTableAlias,relationTable,join,relatedTable,selectTemplate);
}
