{
  JDBCStoreManager2 manager=command.getStoreManager();
  final CmpEntityBeanComponent selectedComponent=manager.getComponent();
  JDBCQueryCommand.EntityProxyFactory factory=new JDBCQueryCommand.EntityProxyFactory(){
    public Object getEntityObject(    Object primaryKey){
      return metadata.isResultTypeMappingLocal() && selectedComponent.getLocalHomeClass() != null ? selectedComponent.getEJBLocalObject(primaryKey) : selectedComponent.getEJBObject(primaryKey);
    }
  }
;
  Object result;
switch (returnType) {
case SINGLE:
    result=command.fetchOne(schema,args,factory);
  if (result == null && getMethod().getReturnType().isPrimitive()) {
    throw CmpMessages.MESSAGES.cannotReturnNullForPrimitive(getMethod().getReturnType().getName());
  }
break;
case COLLECTION:
result=command.fetchCollection(schema,args,factory);
break;
default :
throw CmpMessages.MESSAGES.unexpectedReturnType(returnType);
}
return result;
}
