{
  if (!configurationDir.exists() || !configurationDir.isDirectory()) {
    throw ControllerLogger.ROOT_LOGGER.directoryNotFound(configurationDir.getAbsolutePath());
  }
  this.rawFileName=rawName;
  this.bootFileName=name != null ? name : rawName;
  this.configurationDir=configurationDir;
  this.historyRoot=new File(configurationDir,rawName.replace('.','_') + "_history");
  this.currentHistory=new File(historyRoot,"current");
  this.snapshotsDirectory=new File(historyRoot,"snapshot");
  this.persistOriginal=persistOriginal;
  final File file=determineMainFile(configurationDir,rawName,name);
  try {
    this.mainFile=file.getCanonicalFile();
  }
 catch (  IOException ioe) {
    throw ControllerLogger.ROOT_LOGGER.canonicalMainFileNotFound(ioe,file);
  }
  this.mainFileName=mainFile.getName();
}
