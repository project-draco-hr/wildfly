{
  if (!configurationDir.exists() || !configurationDir.isDirectory()) {
    throw new IllegalArgumentException("No directory " + configurationDir.getAbsolutePath() + " was found");
  }
  this.rawFileName=rawName;
  this.bootFileName=name != null ? name : rawName;
  this.configurationDir=configurationDir;
  this.historyRoot=new File(configurationDir,rawName.replace('.','_') + "_history");
  this.currentHistory=new File(historyRoot,"current");
  this.snapshotsDirectory=new File(historyRoot,"snapshot");
  final File file=determineMainFile(configurationDir,rawName,name);
  try {
    this.mainFile=file.getCanonicalFile();
  }
 catch (  IOException ioe) {
    throw new IllegalStateException("Could not get canonical file for main file: " + file,ioe);
  }
  this.mainFileName=mainFile.getName();
}
