{
  final String suffix="." + backupType + ".xml";
  File[] files=null;
  if (searchDir.exists() && searchDir.isDirectory()) {
    files=searchDir.listFiles(new FilenameFilter(){
      @Override public boolean accept(      File dir,      String name){
        return name.endsWith(suffix);
      }
    }
);
  }
  if (files == null || files.length == 0) {
    throw new IllegalStateException(String.format("No configuration file ending in %s found in %s",suffix,searchDir));
  }
 else   if (files.length > 1) {
    throw new IllegalStateException(String.format("Ambiguous configuration file name '%s' as there are multiple files " + "in %s that end in %s",backupType,searchDir,suffix));
  }
  String matchName=files[0].getName();
  if (matchName.equals(suffix)) {
    throw new IllegalArgumentException(String.format("Configuration files whose complete name is %s are not allowed",backupType));
  }
  String prefix=matchName.substring(0,matchName.length() - suffix.length());
  return prefix + ".xml";
}
