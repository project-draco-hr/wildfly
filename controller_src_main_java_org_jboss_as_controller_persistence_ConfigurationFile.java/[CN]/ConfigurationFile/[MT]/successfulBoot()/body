{
synchronized (this) {
    if (doneBootup.get()) {
      return;
    }
    try {
      createHistoryDirectory();
      final File last=addSuffixToFile(mainFile,LAST);
      final File original=addSuffixToFile(mainFile,ORIGINAL);
      final File initial=addSuffixToFile(mainFile,INITIAL);
      if (!initial.exists()) {
        copyFile(mainFile,initial);
      }
      if (!last.exists()) {
        copyFile(mainFile,last);
      }
      if (!original.exists() || (last.exists() && mainFile.lastModified() > last.lastModified())) {
        copyFile(mainFile,original);
        snapshot();
        last.setLastModified(System.currentTimeMillis());
      }
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
    doneBootup.set(true);
  }
}
