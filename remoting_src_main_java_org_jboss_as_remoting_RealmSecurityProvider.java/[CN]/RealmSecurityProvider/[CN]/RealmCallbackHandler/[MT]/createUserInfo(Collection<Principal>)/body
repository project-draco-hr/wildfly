{
  Collection<Principal> converted=new ArrayList<Principal>(remotingPrincipals.size());
  for (  Principal current : remotingPrincipals) {
    if (current instanceof UserPrincipal) {
      if (realm != null) {
        converted.add(new RealmUser(realm.getName(),current.getName()));
      }
 else {
        converted.add(new RealmUser(current.getName()));
      }
    }
  }
  SubjectUserInfo sui=innerHandler.createSubjectUserInfo(converted);
  Subject subject=sui.getSubject();
  subject.getPrincipals().addAll(remotingPrincipals);
  return new RealmSubjectUserInfo(sui);
}
