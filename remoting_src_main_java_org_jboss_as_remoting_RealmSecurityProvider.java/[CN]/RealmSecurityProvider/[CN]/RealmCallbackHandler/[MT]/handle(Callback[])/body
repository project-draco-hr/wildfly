{
  if (subjectCallbackSupported && callbacks.length != 1 && callbacks[0] instanceof AuthorizeCallback == false) {
    Callback[] newCallbacks=new Callback[callbacks.length + 1];
    System.arraycopy(callbacks,0,newCallbacks,0,callbacks.length);
    SubjectCallback subjectCallBack=new SubjectCallback();
    newCallbacks[newCallbacks.length - 1]=subjectCallBack;
    callbackHandler.handle(newCallbacks);
    subject=subjectCallBack.getSubject();
  }
 else {
    callbackHandler.handle(callbacks);
  }
}
