{
  if (JGroupsModel.VERSION_3_0_0.requiresTransformation(version)) {
    AttributeConverter typeConverter=new AttributeConverter.DefaultAttributeConverter(){
      @Override protected void convertAttribute(      PathAddress address,      String name,      ModelNode value,      TransformationContext context){
        if (!value.isDefined()) {
          value.set(address.getLastElement().getValue());
        }
      }
    }
;
    builder.getAttributeBuilder().setDiscard(new DiscardAttributeChecker.DiscardAttributeValueChecker(Attribute.MODULE.getDefinition().getDefaultValue()),Attribute.MODULE.getDefinition()).addRejectCheck(RejectAttributeChecker.DEFINED,Attribute.MODULE.getDefinition()).setValueConverter(typeConverter,DeprecatedAttribute.TYPE.getDefinition()).end();
    OperationTransformer getPropertyTransformer=new OperationTransformer(){
      @Override public ModelNode transformOperation(      ModelNode operation){
        if (operation.get(ModelDescriptionConstants.NAME).asString().equals(Attribute.PROPERTIES.getDefinition().getName())) {
          String key=operation.get("key").asString();
          PathAddress address=Operations.getPathAddress(operation);
          ModelNode transformedOperation=Util.createOperation(ModelDescriptionConstants.READ_ATTRIBUTE_OPERATION,address.append(PropertyResourceDefinition.pathElement(key)));
          transformedOperation.get(ModelDescriptionConstants.NAME).set(PropertyResourceDefinition.VALUE.getName());
          return transformedOperation;
        }
        return operation;
      }
    }
;
    builder.addRawOperationTransformationOverride(MapOperations.MAP_GET_DEFINITION.getName(),new SimpleOperationTransformer(getPropertyTransformer));
    builder.addRawOperationTransformationOverride(MapOperations.MAP_PUT_DEFINITION.getName(),PropertyResourceDefinition.PROPERTIES_OP_TRANSFORMER).addRawOperationTransformationOverride(MapOperations.MAP_REMOVE_DEFINITION.getName(),PropertyResourceDefinition.PROPERTIES_OP_TRANSFORMER).addRawOperationTransformationOverride(MapOperations.MAP_CLEAR_DEFINITION.getName(),PropertyResourceDefinition.PROPERTIES_OP_TRANSFORMER).addRawOperationTransformationOverride(ModelDescriptionConstants.WRITE_ATTRIBUTE_OPERATION,PropertyResourceDefinition.PROPERTIES_OP_TRANSFORMER).addRawOperationTransformationOverride(ModelDescriptionConstants.UNDEFINE_ATTRIBUTE_OPERATION,PropertyResourceDefinition.PROPERTIES_OP_TRANSFORMER);
  }
}
