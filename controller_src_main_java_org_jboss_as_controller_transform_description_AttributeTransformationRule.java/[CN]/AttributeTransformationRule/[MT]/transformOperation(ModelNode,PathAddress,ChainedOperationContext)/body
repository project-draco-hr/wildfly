{
  final ModelNode transformed=operation.clone();
  final RejectedAttributesLogContext rejectedAttributes=new RejectedAttributesLogContext(context,address,operation);
  doTransform(address,transformed,operation,context,rejectedAttributes);
  final OperationRejectionPolicy policy;
  if (!rejectedAttributes.hasRejections()) {
    policy=OperationTransformer.DEFAULT_REJECTION_POLICY;
  }
 else {
    rejectedAttributes.errorOrWarn();
    policy=new OperationRejectionPolicy(){
      @Override public boolean rejectOperation(      ModelNode preparedResult){
        return true;
      }
      @Override public String getFailureDescription(){
        try {
          return rejectedAttributes.errorOrWarn();
        }
 catch (        OperationFailedException e) {
          return null;
        }
      }
    }
;
  }
  context.invokeNext(new OperationTransformer.TransformedOperation(transformed,policy,OperationResultTransformer.ORIGINAL_RESULT));
}
