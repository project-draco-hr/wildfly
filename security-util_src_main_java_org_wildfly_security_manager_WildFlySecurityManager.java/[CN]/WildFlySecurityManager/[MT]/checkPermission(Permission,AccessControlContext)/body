{
  if (perm.implies(SECURITY_MANAGER_PERMISSION)) {
    throw new SecurityException("Security manager may not be changed");
  }
  if (CHECKING.get() == TRUE) {
    if (ENTERED.get() == TRUE) {
      return;
    }
    ENTERED.set(TRUE);
    try {
      final ProtectionDomain[] stack;
      try {
        stack=(ProtectionDomain[])PD_STACK.get(context);
      }
 catch (      IllegalAccessException e) {
        throw new IllegalAccessError(e.getMessage());
      }
      if (stack != null && !tryCheckPermission(perm,stack)) {
        throw access.accessControlException(perm,perm);
      }
    }
  finally {
      ENTERED.set(FALSE);
    }
  }
}
