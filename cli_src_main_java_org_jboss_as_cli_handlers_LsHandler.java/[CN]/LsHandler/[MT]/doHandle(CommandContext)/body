{
  final ParsedCommandLine parsedCmd=ctx.getParsedCommandLine();
  String nodePath=this.nodePath.getValue(parsedCmd);
  final OperationRequestAddress address;
  if (nodePath != null) {
    address=new DefaultOperationRequestAddress(ctx.getPrefix());
    CommandLineParser.CallbackHandler handler=new DefaultCallbackHandler(address);
    nodePath=ctx.getArgumentsString();
    if (l.isPresent(parsedCmd)) {
      nodePath=nodePath.trim();
      if (nodePath.startsWith("-l ")) {
        nodePath=nodePath.substring(3);
      }
 else {
        nodePath=nodePath.substring(0,nodePath.length() - 3);
      }
    }
    try {
      ctx.getCommandLineParser().parse(nodePath,handler);
    }
 catch (    CommandFormatException e) {
      ctx.printLine(e.getLocalizedMessage());
    }
  }
 else {
    address=new DefaultOperationRequestAddress(ctx.getPrefix());
  }
  List<String> names=null;
  if (address.endsOnType()) {
    final String type=address.getNodeType();
    address.toParentNode();
    names=Util.getNodeNames(ctx.getModelControllerClient(),address,type);
  }
 else {
    final ModelNode composite=new ModelNode();
    composite.get(Util.OPERATION).set(Util.COMPOSITE);
    composite.get(Util.ADDRESS).setEmptyList();
    final ModelNode steps=composite.get(Util.STEPS);
{
      final ModelNode typesRequest=new ModelNode();
      typesRequest.get(Util.OPERATION).set(Util.READ_CHILDREN_TYPES);
      final ModelNode addressNode=typesRequest.get(Util.ADDRESS);
      if (address.isEmpty()) {
        addressNode.setEmptyList();
      }
 else {
        Iterator<Node> iterator=address.iterator();
        while (iterator.hasNext()) {
          OperationRequestAddress.Node node=iterator.next();
          if (node.getName() != null) {
            addressNode.add(node.getType(),node.getName());
          }
 else           if (iterator.hasNext()) {
            throw new OperationFormatException("Expected a node name for type '" + node.getType() + "' in path '"+ ctx.getPrefixFormatter().format(address)+ "'");
          }
        }
      }
      steps.add(typesRequest);
    }
{
      final ModelNode resourceRequest=new ModelNode();
      resourceRequest.get(Util.OPERATION).set(Util.READ_RESOURCE);
      final ModelNode addressNode=resourceRequest.get(Util.ADDRESS);
      if (address.isEmpty()) {
        addressNode.setEmptyList();
      }
 else {
        Iterator<Node> iterator=address.iterator();
        while (iterator.hasNext()) {
          OperationRequestAddress.Node node=iterator.next();
          if (node.getName() != null) {
            addressNode.add(node.getType(),node.getName());
          }
 else           if (iterator.hasNext()) {
            throw new OperationFormatException("Expected a node name for type '" + node.getType() + "' in path '"+ ctx.getPrefixFormatter().format(address)+ "'");
          }
        }
      }
      steps.add(resourceRequest);
    }
    if (l.isPresent(parsedCmd)) {
      final ModelNode request=new ModelNode();
      request.get(Util.OPERATION).set(Util.READ_RESOURCE_DESCRIPTION);
      final ModelNode addressNode=request.get(Util.ADDRESS);
      if (address.isEmpty()) {
        addressNode.setEmptyList();
      }
 else {
        Iterator<Node> iterator=address.iterator();
        while (iterator.hasNext()) {
          OperationRequestAddress.Node node=iterator.next();
          if (node.getName() != null) {
            addressNode.add(node.getType(),node.getName());
          }
 else           if (iterator.hasNext()) {
            throw new OperationFormatException("Expected a node name for type '" + node.getType() + "' in path '"+ ctx.getPrefixFormatter().format(address)+ "'");
          }
        }
      }
      steps.add(request);
    }
    try {
      ModelNode outcome=ctx.getModelControllerClient().execute(composite);
      if (Util.isSuccess(outcome)) {
        if (outcome.hasDefined(Util.RESULT)) {
          ModelNode resultNode=outcome.get(Util.RESULT);
          ModelNode attrDescriptions=null;
          ModelNode childDescriptions=null;
          if (resultNode.hasDefined(Util.STEP_3)) {
            final ModelNode stepOutcome=resultNode.get(Util.STEP_3);
            if (Util.isSuccess(stepOutcome)) {
              if (stepOutcome.hasDefined(Util.RESULT)) {
                final ModelNode descrResult=stepOutcome.get(Util.RESULT);
                if (descrResult.hasDefined(Util.ATTRIBUTES)) {
                  attrDescriptions=descrResult.get(Util.ATTRIBUTES);
                }
                if (descrResult.hasDefined(Util.CHILDREN)) {
                  childDescriptions=descrResult.get(Util.CHILDREN);
                }
              }
 else {
                ctx.printLine("Result is not available for read-resource-description request: " + outcome);
              }
            }
 else {
              ctx.printLine("Failed to get resource description: " + outcome);
            }
          }
          List<String> typeNames=null;
          if (resultNode.hasDefined(Util.STEP_1)) {
            ModelNode typesOutcome=resultNode.get(Util.STEP_1);
            if (Util.isSuccess(typesOutcome)) {
              if (typesOutcome.hasDefined(Util.RESULT)) {
                final ModelNode resourceResult=typesOutcome.get(Util.RESULT);
                final List<ModelNode> types=resourceResult.asList();
                if (!types.isEmpty()) {
                  typeNames=new ArrayList<String>();
                  for (                  ModelNode type : types) {
                    typeNames.add(type.asString());
                  }
                  if (childDescriptions == null && attrDescriptions == null) {
                    names=typeNames;
                  }
                }
              }
 else {
                ctx.printLine("Result is not available for read-children-types request: " + outcome);
              }
            }
 else {
              ctx.printLine("Failed to fetch type names: " + outcome);
            }
          }
 else {
            ctx.printLine("The result for children type names is not available: " + outcome);
          }
          if (resultNode.hasDefined(Util.STEP_2)) {
            ModelNode resourceOutcome=resultNode.get(Util.STEP_2);
            if (Util.isSuccess(resourceOutcome)) {
              if (resourceOutcome.hasDefined(Util.RESULT)) {
                final ModelNode resourceResult=resourceOutcome.get(Util.RESULT);
                final List<Property> props=resourceResult.asPropertyList();
                if (!props.isEmpty()) {
                  SimpleTable attrTable=attrDescriptions == null ? null : new SimpleTable(new String[]{"ATTR NAME","VALUE","TYPE","NILLABLE","REQUIRED","ACCESS","EXPR","RESTART","STORAGE"});
                  SimpleTable childrenTable=childDescriptions == null ? null : new SimpleTable(new String[]{"CHILD NAME","MIN-OCCURS","MAX-OCCURS"});
                  if (typeNames == null && attrTable == null && childrenTable == null) {
                    typeNames=new ArrayList<String>();
                  }
                  for (                  Property prop : props) {
                    final StringBuilder buf=new StringBuilder();
                    if (typeNames == null || !typeNames.contains(prop.getName())) {
                      if (attrDescriptions == null) {
                        buf.append(prop.getName());
                        buf.append('=');
                        buf.append(prop.getValue().asString());
                        typeNames.add(buf.toString());
                        buf.setLength(0);
                      }
 else {
                        if (attrDescriptions.hasDefined(prop.getName())) {
                          final ModelNode attrDescr=attrDescriptions.get(prop.getName());
                          attrTable.addLine(new String[]{prop.getName(),prop.getValue().asString(),getAsString(attrDescr,Util.TYPE),getAsString(attrDescr,Util.NILLABLE),getAsString(attrDescr,Util.REQUIRED),getAsString(attrDescr,Util.ACCESS_TYPE),getAsString(attrDescr,Util.EXPRESSIONS_ALLOWED),getAsString(attrDescr,Util.RESTART_REQUIRED),getAsString(attrDescr,Util.STORAGE)});
                        }
 else {
                          attrTable.addLine(new String[]{prop.getName(),prop.getValue().asString(),"n/a","n/a","n/a","n/a","n/a","n/a"});
                        }
                      }
                    }
 else                     if (childDescriptions != null) {
                      if (childDescriptions.hasDefined(prop.getName())) {
                        final ModelNode childDescr=attrDescriptions.get(prop.getName());
                        childrenTable.addLine(new String[]{prop.getName(),getAsString(childDescr,Util.MIN_OCCURS),getAsString(childDescr,Util.MAX_OCCURS)});
                      }
 else {
                        attrTable.addLine(new String[]{prop.getName(),"n/a","n/a"});
                      }
                    }
                  }
                  if (childrenTable != null && !childrenTable.isEmpty()) {
                    ctx.printLine(childrenTable.toString());
                  }
                  if (attrTable != null && !attrTable.isEmpty()) {
                    ctx.printLine(attrTable.toString());
                  }
                }
              }
 else {
                ctx.printLine("Result is not available for read-resource request: " + outcome);
              }
            }
 else {
              ctx.printLine("Failed to fetch attributes: " + outcome);
            }
          }
 else {
            ctx.printLine("The result for attributes is not available: " + outcome);
          }
        }
      }
 else {
        ctx.printLine("Failed to fetch the list of children: " + outcome);
      }
    }
 catch (    Exception e) {
    }
  }
  if (names != null) {
    printList(ctx,names,l.isPresent(parsedCmd));
  }
}
