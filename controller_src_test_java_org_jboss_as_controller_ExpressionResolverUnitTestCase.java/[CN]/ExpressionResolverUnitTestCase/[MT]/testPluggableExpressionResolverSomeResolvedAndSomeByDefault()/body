{
  System.setProperty("test.prop.c","C");
  System.setProperty("test.prop.three","THREE");
  System.setProperty("test.prop.prop","PROP");
  try {
    ModelNode node=new ExpressionResolverImpl(){
      @Override protected void resolvePluggableExpression(      ModelNode node){
        String s=node.asString();
        if (s.equals("${test.prop.expr}")) {
          node.set("EXPR");
        }
 else         if (s.equals("${test.prop.b}")) {
          node.set("B");
        }
 else         if (s.equals("${test.prop.two}")) {
          node.set("TWO");
        }
      }
    }
.resolveExpressions(createModelNode());
    checkResolved(node);
  }
  finally {
    System.clearProperty("test.prop.c");
    System.clearProperty("test.prop.three");
    System.clearProperty("test.prop.prop");
  }
}
