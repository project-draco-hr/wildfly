{
  ServerGroupDeploymentElement undeploymentElement=standalone.getDeployment(toReplace);
  if (undeploymentElement == null) {
    throw new UpdateFailedException("Unknown deployment " + newDeployment);
  }
  if (newDeploymentRuntimeName != null) {
    standalone.addDeployment(new ServerGroupDeploymentElement(newDeployment,newDeploymentRuntimeName,newDeploymentHash,false));
  }
  deploymentElement=standalone.getDeployment(newDeployment);
  if (deploymentElement == null) {
    throw new UpdateFailedException("Unknown deployment " + newDeployment);
  }
  undeploymentElement.setStart(false);
  deploymentElement.setStart(true);
}
