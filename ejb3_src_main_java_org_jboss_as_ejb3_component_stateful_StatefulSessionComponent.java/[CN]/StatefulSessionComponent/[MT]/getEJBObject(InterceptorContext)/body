{
  if (getEjbObjectView() == null) {
    throw new IllegalStateException("Bean " + getComponentName() + " does not have an EJBObject");
  }
  final ServiceController<?> serviceController=CurrentServiceContainer.getServiceContainer().getRequiredService(getEjbObjectView());
  final ComponentView view=(ComponentView)serviceController.getValue();
  final String locatorAppName=getEarApplicationName() == null ? "" : getEarApplicationName();
  return EJBClient.createProxy(new StatefulEJBLocator<EJBObject>((Class<EJBObject>)view.getViewClass(),locatorAppName,getModuleName(),getComponentName(),getDistinctName(),getSessionIdOf(ctx)));
}
