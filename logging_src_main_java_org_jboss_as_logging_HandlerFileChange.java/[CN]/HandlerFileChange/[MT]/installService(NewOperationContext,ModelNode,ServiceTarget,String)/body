{
  final ServiceVerificationHandler verificationHandler=new ServiceVerificationHandler();
  final HandlerFileService service=new HandlerFileService(operation.get(CommonAttributes.PATH).asString());
  final ServiceBuilder<?> builder=serviceTarget.addService(LogServices.handlerFileName(name),service);
  if (operation.hasDefined(CommonAttributes.RELATIVE_TO)) {
    builder.addDependency(AbstractPathService.pathNameOf(operation.get(RELATIVE_TO).asString()),String.class,service.getRelativeToInjector());
  }
  final ServiceController<?> controller=builder.setInitialMode(ServiceController.Mode.ACTIVE).addListener(verificationHandler).install();
  context.addStep(verificationHandler,NewOperationContext.Stage.VERIFY);
  if (context.completeStep() == NewOperationContext.ResultAction.ROLLBACK) {
    context.removeService(controller);
  }
}
