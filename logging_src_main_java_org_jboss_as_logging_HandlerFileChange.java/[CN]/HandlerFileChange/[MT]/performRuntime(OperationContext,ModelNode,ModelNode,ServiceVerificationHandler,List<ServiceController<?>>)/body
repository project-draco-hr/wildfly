{
  final PathAddress address=PathAddress.pathAddress(operation.require(OP_ADDR));
  final String name=address.getLastElement().getValue();
  final ServiceTarget serviceTarget=context.getServiceTarget();
  final HandlerFileService service=new HandlerFileService(PATH.validateResolvedOperation(model).asString());
  final ServiceBuilder<String> serviceBuilder=serviceTarget.addService(LogServices.handlerName(name),service);
  final ModelNode relativeTo=RELATIVE_TO.validateResolvedOperation(model);
  if (relativeTo.isDefined()) {
    serviceBuilder.addDependency(AbstractPathService.pathNameOf(relativeTo.asString()),String.class,service.getRelativeToInjector());
  }
  context.addStep(verificationHandler,OperationContext.Stage.VERIFY);
  if (context.completeStep() == OperationContext.ResultAction.ROLLBACK) {
    context.removeService(LogServices.handlerFileName(name));
  }
}
