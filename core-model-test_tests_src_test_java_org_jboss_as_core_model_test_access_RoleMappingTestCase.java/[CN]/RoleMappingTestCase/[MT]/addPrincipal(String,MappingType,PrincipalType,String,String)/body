{
  ModelNode operation=new ModelNode();
  operation.get(OP_ADDR).add(CORE_SERVICE,MANAGEMENT).add(ACCESS,AUTHORIZATION).add(ROLE_MAPPING,roleName).add(mappingType.toString(),uniqueCount++);
  operation.get(OP).set(ADD);
  operation.get(TYPE).set(principalType.toString());
  operation.get(NAME).set(name);
  if (realm != null) {
    operation.get(REALM).set(realm);
  }
  ModelNode response=kernelServices.executeOperation(operation);
  assertEquals(SUCCESS,response.get(OUTCOME).asString());
  return operation.get(OP_ADDR);
}
