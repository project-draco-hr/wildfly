{
synchronized (cache) {
    Entry entry=cache.get(obj.getId());
    if (entry == null)     throw new NoSuchEJBException("Could not find Stateful bean: " + obj.getId());
    entry.lastUsed=System.currentTimeMillis();
    entry.state=State.INACTIVE;
  }
}
