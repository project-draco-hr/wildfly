{
  String pathname="file://RaActivator" + deploymentName;
  final ServiceContainer container=context.getController().getServiceContainer();
  CommonDeployment deploymentMD;
  try {
    ResourceAdapterActivator activator=new ResourceAdapterActivator(container,new URL(pathname),deploymentName,new File(pathname),cl,cmd,ijmd);
    activator.setConfiguration(getConfig().getValue());
    ClassLoader old=Thread.currentThread().getContextClassLoader();
    try {
      Thread.currentThread().setContextClassLoader(cl);
      deploymentMD=activator.doDeploy();
    }
  finally {
      Thread.currentThread().setContextClassLoader(old);
    }
  }
 catch (  Throwable e) {
    throw MESSAGES.failedToStartRaDeployment(e,deploymentName);
  }
  value=new ResourceAdapterDeployment(deploymentMD);
  registry.getValue().registerResourceAdapterDeployment(value);
  managementRepository.getValue().getConnectors().add(value.getDeployment().getConnector());
  DEPLOYMENT_CONNECTOR_LOGGER.debugf("Starting service %s",ConnectorServices.RESOURCE_ADAPTER_SERVICE_PREFIX.append(this.value.getDeployment().getDeploymentName()));
  context.getChildTarget().addService(ServiceName.of(value.getDeployment().getDeploymentName()),new ResourceAdapterService(value.getDeployment().getResourceAdapter())).setInitialMode(Mode.ACTIVE).install();
  DEPLOYMENT_CONNECTOR_LOGGER.debugf("Starting service %s",ConnectorServices.RESOURCE_ADAPTER_ACTIVATOR_SERVICE);
}
