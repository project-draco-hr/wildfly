{
  if (System.getSecurityManager() == null) {
    return Thread.currentThread().getContextClassLoader();
  }
  return AccessController.doPrivileged(new PrivilegedAction<ClassLoader>(){
    @Override public ClassLoader run(){
      return Thread.currentThread().getContextClassLoader();
    }
  }
);
}
