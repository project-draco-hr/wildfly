{
  DocumentBuilderFactory documentBuilderFactory=DocumentBuilderFactory.newInstance();
  DocumentBuilder documentBuilder=documentBuilderFactory.newDocumentBuilder();
  Document document=documentBuilder.parse(filePath);
  NodeList nodeList=document.getElementsByTagName("datasource");
  if (nodeList.getLength() < 1) {
    throw new IllegalStateException("unexpected count of datasources");
  }
  Node node=nodeList.item(0);
  Node attributeNode=node.getAttributes().getNamedItem("jndi-name");
  attributeNode.setNodeValue("java:jboss/datasources/changedDS");
  TransformerFactory transformerFactory=TransformerFactory.newInstance();
  Transformer transformer=transformerFactory.newTransformer();
  DOMSource domSource=new DOMSource(document);
  StreamResult streamResult=new StreamResult(new File(filePath));
  transformer.transform(domSource,streamResult);
}
