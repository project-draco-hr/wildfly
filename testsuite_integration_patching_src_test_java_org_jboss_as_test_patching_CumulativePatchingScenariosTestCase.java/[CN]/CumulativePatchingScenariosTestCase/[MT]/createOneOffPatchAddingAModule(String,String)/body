{
  String layerPatchID=randomString();
  File oneOffPatchDir=mkdir(tempDir,patchID);
  final String moduleName="org.wildfly.test." + randomString();
  final ResourceItem resourceItem1=new ResourceItem("testFile1","content1".getBytes());
  final ResourceItem resourceItem2=new ResourceItem("testFile2","content2".getBytes());
  Module newModule=new Module.Builder(moduleName).miscFile(resourceItem1).miscFile(resourceItem2).build();
  ContentModification moduleAdded=ContentModificationUtils.addModule(oneOffPatchDir,layerPatchID,newModule);
  ProductConfig productConfig=new ProductConfig(PRODUCT,asVersion,"main");
  Patch oneOffPatch=PatchBuilder.create().setPatchId(patchID).setDescription("A one-off patch adding a new module.").oneOffPatchIdentity(productConfig.getProductName(),productConfig.getProductVersion()).getParent().oneOffPatchElement(layerPatchID,"base",false).setDescription("New module for the base layer").addContentModification(moduleAdded).getParent().build();
  createPatchXMLFile(oneOffPatchDir,oneOffPatch);
  return createZippedPatchFile(oneOffPatchDir,patchID);
}
