{
  try {
    System.err.println("Listener started");
    BufferedReader in=new BufferedReader(new InputStreamReader(socket.getInputStream()));
    boolean done=false;
    while (!done) {
      String line=in.readLine();
      System.err.println(processName + " listener got data " + line);
      if (line != null)       TestCommand.receive(this,line.trim());
 else       done=true;
    }
  }
 catch (  SocketException e) {
    System.err.println(this.getName() + " socket closed");
  }
catch (  Exception e) {
    e.printStackTrace();
  }
 finally {
    serverSocketThread.removeThread(this);
    closeSocket(socket);
  }
}
