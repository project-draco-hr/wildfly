{
  try {
    latch.countDown();
    System.err.println("Server listening");
    while (true) {
      ListenerSocketThread t=new ListenerSocketThread(this,server.accept());
      t.start();
synchronized (this) {
        listenerThreads.add(t);
      }
    }
  }
 catch (  SocketException e) {
    System.err.println(this.getName() + " server socket closed");
  }
catch (  Exception e) {
    e.printStackTrace();
  }
 finally {
    closeServer();
  }
}
