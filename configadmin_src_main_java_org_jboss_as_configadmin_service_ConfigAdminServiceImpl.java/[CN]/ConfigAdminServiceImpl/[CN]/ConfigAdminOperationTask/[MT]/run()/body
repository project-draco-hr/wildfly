{
  boolean success=true;
  try {
    ModelNode node=controllerClient.execute(operation);
    ModelNode outcome=node.get(ModelDescriptionConstants.OUTCOME);
    success=ModelDescriptionConstants.SUCCESS.equals(outcome.asString());
    if (!success) {
      ModelNode failure=node.get(ModelDescriptionConstants.FAILURE_DESCRIPTION);
      LOGGER.cannotUpdateConfiguration(new IllegalStateException(failure.asString()),pid);
    }
  }
 catch (  Throwable ex) {
    LOGGER.cannotUpdateConfiguration(ex,pid);
  }
  if (!success) {
    try {
      errorHandler.call();
    }
 catch (    Exception ex) {
      LOGGER.cannotRestoreConfiguration(ex,pid);
    }
  }
}
