{
  log.info("start" + DEP2 + "deployment");
  WebAppDeployment dep=new WebAppDeployment(DEP2,SecuredServletWithDBSetupForDep2.class,DatabaseServerLoginModule.class);
  DEPLOYMENTS.put(DEP2,dep);
  log.debug("adding module options");
  dep.addModuleOption("dsJndiName","java:jboss/datasources/LoginDSdep" + DEP_NUM.get(DEP2));
  dep.addModuleOption("principalsQuery","select Password from Principals where PrincipalID=?");
  dep.addModuleOption("rolesQuery","select Role, RoleGroup from Roles where PrincipalID=?");
  dep.addModuleOption("hashAlgorithm","MD5");
  Map<String,String> usersProps=new HashMap<String,String>();
  usersProps.put("anil",Utils.hash("anil","MD5",BASE_64));
  usersProps.put("marcus",Utils.hash("marcus","MD5",BASE_64));
  databaseManager.updateDatabase(DEP_NUM.get(DEP2),usersProps);
  log.debug(dep.getWar().toString(true));
  WebArchive war=dep.getWar();
  addH2Lib(war);
  return war;
}
