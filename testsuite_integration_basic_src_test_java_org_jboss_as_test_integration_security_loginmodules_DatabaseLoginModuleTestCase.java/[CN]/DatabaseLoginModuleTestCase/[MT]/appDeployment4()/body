{
  log.info("start" + DEP4 + "deployment");
  WebAppDeployment dep=new WebAppDeployment(DEP4,SecuredServletWithDBSetupForDep4.class,DatabaseServerLoginModule.class);
  DEPLOYMENTS.put(DEP4,dep);
  log.debug("adding module options");
  dep.addModuleOption("dsJndiName","java:jboss/datasources/LoginDSdep" + DEP_NUM.get(DEP4));
  dep.addModuleOption("principalsQuery","select Password from Principals where PrincipalID=?");
  dep.addModuleOption("rolesQuery","select Role, RoleGroup from Roles where PrincipalID=?");
  dep.addModuleOption("hashAlgorithm","MD5");
  dep.addModuleOption("hashEncoding","hex");
  Map<String,String> usersProps=new HashMap<String,String>();
  usersProps.put("anil",Utils.hash("anil","MD5",HEX));
  usersProps.put("marcus",Utils.hash("marcus","MD5",HEX));
  databaseManager.updateDatabase(DEP_NUM.get(DEP4),usersProps);
  log.debug(dep.getWar().toString(true));
  WebArchive war=dep.getWar();
  addH2Lib(war);
  return war;
}
