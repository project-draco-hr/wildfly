{
  final ParsedCommandLine args=ctx.getParsedCommandLine();
  assertNotPresent(serverGroups,args);
  assertNotPresent(allServerGroups,args);
  assertNotPresent(allRelevantServerGroups,args);
  assertNotPresent(content,args);
  assertNotPresent(deployments,args);
  assertNotPresent(redeployAffected,args);
  final String overlay=name.getValue(args,true);
  final ModelControllerClient client=ctx.getModelControllerClient();
  final ModelNode redeployOp=new ModelNode();
  redeployOp.get(Util.OPERATION).set(Util.COMPOSITE);
  redeployOp.get(Util.ADDRESS).setEmptyList();
  final ModelNode steps=redeployOp.get(Util.STEPS);
  if (ctx.isDomainMode()) {
    for (    String group : Util.getServerGroupsReferencingOverlay(overlay,client)) {
      addRemoveRedeployLinksSteps(client,steps,overlay,group,null,false,REDEPLOY_ALL);
    }
  }
 else {
    addRemoveRedeployLinksSteps(client,steps,overlay,null,null,false,REDEPLOY_ALL);
  }
  if (!steps.isDefined() || steps.asList().isEmpty()) {
    throw new CommandFormatException("None of the deployments affected.");
  }
  return redeployOp;
}
