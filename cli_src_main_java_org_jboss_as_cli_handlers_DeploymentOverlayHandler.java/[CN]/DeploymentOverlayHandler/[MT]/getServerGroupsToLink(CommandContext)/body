{
  final List<String> sg;
  final String sgStr=serverGroups.getValue(ctx.getParsedCommandLine());
  if (allServerGroups.isPresent(ctx.getParsedCommandLine())) {
    if (sgStr != null) {
      throw new CommandFormatException("Only one of " + allServerGroups.getFullName() + " or "+ serverGroups.getFullName()+ " can be specified at a time.");
    }
    sg=Util.getServerGroups(ctx.getModelControllerClient());
    if (sg.isEmpty()) {
      throw new CommandFormatException("No server group is available.");
    }
  }
 else {
    if (sgStr == null) {
      throw new CommandFormatException(serverGroups.getFullName() + " or " + allServerGroups.getFullName()+ " must be specified.");
    }
    sg=Arrays.asList(sgStr.split(",+"));
    if (sg.isEmpty()) {
      throw new CommandFormatException(serverGroups.getFullName() + " is missing value.");
    }
  }
  return sg;
}
