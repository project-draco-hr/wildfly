{
  instantiateTxManagement();
  final Endpoint endpoint=Remoting.createEndpoint("ejb-client-xid-test-client-endpoint",OptionMap.EMPTY);
  final Registration registration=endpoint.addConnectionProvider("remote",new RemoteConnectionProviderFactory(),OptionMap.create(Options.SSL_ENABLED,false));
  final int ejbRemotingPort=EJBRemoteManagementUtil.getEJBRemoteConnectorPort("localhost",9999);
  final IoFuture<Connection> futureConnection=endpoint.connect(new URI("remote://localhost:" + ejbRemotingPort),OptionMap.create(Options.SASL_POLICY_NOANONYMOUS,Boolean.FALSE),new AnonymousCallbackHandler());
  connection=IoFutureHelper.get(futureConnection,5,TimeUnit.SECONDS);
}
