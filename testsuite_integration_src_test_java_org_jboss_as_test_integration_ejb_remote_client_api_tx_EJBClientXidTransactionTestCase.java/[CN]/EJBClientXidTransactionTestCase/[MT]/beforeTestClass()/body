{
  instantiateTxManagement();
  final Endpoint endpoint=Remoting.createEndpoint("endpoint",Executors.newSingleThreadExecutor(),OptionMap.EMPTY);
  final Xnio xnio=Xnio.getInstance();
  final Registration registration=endpoint.addConnectionProvider("remote",new RemoteConnectionProviderFactory(xnio),OptionMap.create(Options.SSL_ENABLED,false));
  final IoFuture<Connection> futureConnection=endpoint.connect(new URI("remote://localhost:9999"),OptionMap.create(Options.SASL_POLICY_NOANONYMOUS,Boolean.FALSE),new AnonymousCallbackHandler());
  connection=IoFutureHelper.get(futureConnection,5,TimeUnit.SECONDS);
}
