{
  if (configuration == null) {
    throw new IllegalArgumentException("Null configuration");
  }
  configuration.validate();
  final Endpoint endpoint=Remoting.createEndpoint(configuration.getEndpointName(),configuration.getOptionMap());
  Registration registration=endpoint.addConnectionProvider(configuration.getUriScheme(),new RemoteConnectionProviderFactory(),OptionMap.create(Options.SSL_ENABLED,Boolean.FALSE));
  final NetworkServerProvider networkServerProvider=endpoint.getConnectionProviderInterface(configuration.getUriScheme(),NetworkServerProvider.class);
  SimpleServerAuthenticationProvider provider=new SimpleServerAuthenticationProvider();
  provider.addUser("bob",configuration.getEndpointName(),"pass".toCharArray());
  AcceptingChannel<? extends ConnectedStreamChannel> streamServer=networkServerProvider.createServer(configuration.getBindAddress(),OptionMap.create(Options.SASL_MECHANISMS,Sequence.of("CRAM-MD5")),provider,null);
  return new ChannelServer(endpoint,registration,streamServer);
}
