{
  Class c=klass;
  try {
    while (c != null && c != Object.class) {
      for (      Field field : c.getDeclaredFields()) {
        if ((instance == null && Modifier.isStatic(field.getModifiers()) || instance != null && !Modifier.isStatic(field.getModifiers()))) {
          if (field.isAnnotationPresent(Inject.class)) {
            field.setAccessible(true);
            if (field.getType() == ManagementClient.class) {
              field.set(instance,server.getClient());
            }
 else             if (field.getType() == ModelControllerClient.class) {
              field.set(instance,server.getClient().getControllerClient());
            }
          }
        }
      }
      c=c.getSuperclass();
    }
  }
 catch (  Exception e) {
    throw new RuntimeException("Failed to inject",e);
  }
}
