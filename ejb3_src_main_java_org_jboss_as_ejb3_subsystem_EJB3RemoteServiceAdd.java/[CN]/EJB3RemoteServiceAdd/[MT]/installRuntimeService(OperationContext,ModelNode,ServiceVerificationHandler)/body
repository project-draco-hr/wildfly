{
  final String connectorName=model.require(CONNECTOR_REF).asString();
  final String threadPoolName=model.require(THREAD_POOL_NAME).asString();
  final ServiceTarget serviceTarget=context.getServiceTarget();
  final EJBRemoteConnectorService service=new EJBRemoteConnectorService((byte)0x01,new String[]{"river","java-serial"});
  final ServiceBuilder<EJBRemoteConnectorService> target=serviceTarget.addService(EJBRemoteConnectorService.SERVICE_NAME,service).addDependency(ManagementRemotingServices.MANAGEMENT_ENDPOINT,Endpoint.class,service.getEndpointInjector()).addDependency(EJB3ThreadPoolAdd.BASE_SERVICE_NAME.append(threadPoolName),ExecutorService.class,service.getExecutorService()).addDependency(DeploymentRepository.SERVICE_NAME,DeploymentRepository.class,service.getDeploymentRepositoryInjector()).addDependency(EJBRemoteTransactionsRepository.SERVICE_NAME,EJBRemoteTransactionsRepository.class,service.getEJBRemoteTransactionsRepositoryInjector()).setInitialMode(ServiceController.Mode.ACTIVE);
  if (verificationHandler != null) {
    target.addListener(verificationHandler);
  }
  return target.install();
}
