{
  final ModelNode fullModel=Resource.Tools.readModel(context.readResource(PathAddress.EMPTY_ADDRESS));
  final ModelNode channelCreationOptions=fullModel.get(EJB3SubsystemModel.CHANNEL_CREATION_OPTIONS);
  if (channelCreationOptions.isDefined() && channelCreationOptions.asInt() > 0) {
    final ClassLoader loader=this.getClass().getClassLoader();
    final OptionMap.Builder builder=OptionMap.builder();
    for (    Property property : channelCreationOptions.asPropertyList()) {
      String name=property.getName();
      if (!name.contains(".")) {
        name="org.xnio.Options." + name;
      }
      final Option option=Option.fromString(name,loader);
      builder.set(option,option.parseValue(property.getValue().get(ModelDescriptionConstants.VALUE).asString(),loader));
    }
    return builder.getMap();
  }
 else {
    return OptionMap.EMPTY;
  }
}
