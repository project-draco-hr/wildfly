{
  final ServiceContainer serviceContainer=this.serviceContainer;
  final List<ServiceController<?>> serviceControllers=new ArrayList<ServiceController<?>>(deploymentRoots.length);
  for (  VirtualFile deploymentRoot : deploymentRoots) {
    final String deploymentName=deploymentRoot.getName();
    final ServiceName deploymentServiceName=DeploymentService.SERVICE_NAME.append(deploymentName);
    final ServiceController<?> serviceController=serviceContainer.getService(deploymentServiceName);
    if (serviceController == null)     throw new DeploymentException("Failed to undeploy " + deploymentRoot + ". Deployment service does not exist.");
    serviceControllers.add(serviceController);
  }
  ServiceUtils.undeployAll(new Runnable(){
    @Override public void run(){
    }
  }
,serviceControllers);
}
