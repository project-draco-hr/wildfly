{
  final ClassLoader cl=SecurityActions.getContextClassLoader();
  try {
    SecurityActions.setContextClassLoader(classLoader);
    beanManager=(BeanManagerImpl)weldContainer.getValue().getBeanManager(beanDeploymentArchiveId);
    for (    final Class<?> interceptor : interceptorClasses) {
      interceptorInjections.put(interceptor,WeldEEInjection.createWeldEEInjection(interceptor,null,beanManager));
    }
    if (ejbName != null) {
      EjbDescriptor<Object> descriptor=beanManager.getEjbDescriptor(ejbName);
      if (descriptor != null) {
        bean=beanManager.getBean(descriptor);
      }
    }
    injectionTarget=WeldEEInjection.createWeldEEInjection(componentClass,bean,beanManager);
  }
  finally {
    SecurityActions.setContextClassLoader(cl);
  }
}
