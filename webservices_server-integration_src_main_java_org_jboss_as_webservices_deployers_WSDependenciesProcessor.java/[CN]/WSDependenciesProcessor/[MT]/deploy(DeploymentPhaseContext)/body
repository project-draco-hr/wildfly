{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  if (isWSDeployment(deploymentUnit)) {
    final ModuleLoader moduleLoader=Module.getSystemModuleLoader();
    final ModuleSpecification moduleSpecification=deploymentUnit.getAttachment(Attachments.MODULE_SPECIFICATION);
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,JAXB_IMPL,false,false,true));
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,JBOSS_WS_SPI,false,false,true));
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,JBOSS_WS_COMMON,false,false,true));
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,JBOSS_WS_CXF_CLIENT,false,false,true));
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,JBOSS_WS_CXF_FACTORIES,false,false,true));
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,JBOSS_WS_CXF_SERVER,false,false,true));
    ModuleDependency apacheCxfDep=new ModuleDependency(moduleLoader,APACHE_CXF,false,false,true);
    apacheCxfDep.getImportFilters().add(new FilterSpecification(PathFilters.match("META-INF/cxf"),true));
    apacheCxfDep.getImportFilters().add(new FilterSpecification(PathFilters.match("META-INF/spring.*"),true));
    moduleSpecification.addDependency(apacheCxfDep);
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,APACHE_XALAN,false,false,true));
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,APACHE_XERCES,false,false,true));
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,JBOSS_WEBSERVICES,false,false,true));
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,SAAJ_IMPL,false,false,true));
    moduleSpecification.addDependency(new ModuleDependency(moduleLoader,WSDL4J,false,false,true));
  }
}
