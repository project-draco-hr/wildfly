{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final ModuleLoader moduleLoader=Module.getBootModuleLoader();
  final ModuleSpecification moduleSpec=deploymentUnit.getAttachment(Attachments.MODULE_SPECIFICATION);
  moduleSpec.addDependency(new ModuleDependency(moduleLoader,JBOSSWS_API,false,true,true));
  if (!isWSDeployment(deploymentUnit)) {
    return;
  }
  moduleSpec.addDependency(new ModuleDependency(moduleLoader,JBOSSWS_SPI,false,true,true));
}
