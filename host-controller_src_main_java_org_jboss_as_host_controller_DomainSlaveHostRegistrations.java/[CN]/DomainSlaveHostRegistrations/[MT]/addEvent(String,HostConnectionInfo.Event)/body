{
synchronized (this) {
    DomainHostConnection registration=registrations.get(hostName);
    if (registration == null) {
      registration=new DomainHostConnection(hostName);
      registrations.put(hostName,registration);
    }
    final List<HostConnectionInfo.Event> events=new ArrayList<>(registration.events);
    events.add(event);
    registration.events=events;
  }
}
