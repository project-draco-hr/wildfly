{
  service=new RemoteDomainConnectionService("Test",InetAddress.getByName("localhost"),server.getBoundAddress().getPort());
  ModelNode remoteModel=service.register(new TestHostController());
  Assert.assertNotNull(remoteModel);
  Assert.assertTrue(remoteModel.hasDefined(ModelDescriptionConstants.HOST));
  Assert.assertTrue(remoteModel.get(ModelDescriptionConstants.HOST).has("Test"));
  Assert.assertTrue(remoteModel.hasDefined(ModelDescriptionConstants.PROFILE));
  Assert.assertTrue(remoteModel.get(ModelDescriptionConstants.PROFILE).hasDefined("test"));
  ModelNode desc=service.getProfileOperations("test");
  Assert.assertNotNull(desc);
  ModelNode op=new ModelNode();
  op.get(ModelDescriptionConstants.OP).set(ModelDescriptionConstants.READ_RESOURCE_OPERATION);
  op.get(ModelDescriptionConstants.OP_ADDR).set(PathAddress.pathAddress().toModelNode());
  op.get(ModelDescriptionConstants.RECURSIVE).set(true);
  ModelNode result=domainController.execute(op);
  Assert.assertEquals("success",result.require("outcome").asString());
}
