{
  service=new RemoteDomainConnectionService("Test",InetAddress.getByName("localhost"),server.getBoundAddress().getPort(),new NoopFileRepository());
  TestDomainControllerSlave slave=new TestDomainControllerSlave();
  service.register("slave",slave);
  ModelNode remoteModel=slave.model;
  Assert.assertNotNull(remoteModel);
  Assert.assertTrue(remoteModel.hasDefined(ModelDescriptionConstants.PROFILE));
  Assert.assertTrue(remoteModel.get(ModelDescriptionConstants.PROFILE).hasDefined("test"));
  ModelNode op=new ModelNode();
  op.get(ModelDescriptionConstants.OP).set(ModelDescriptionConstants.READ_RESOURCE_OPERATION);
  op.get(ModelDescriptionConstants.OP_ADDR).set(PathAddress.pathAddress().toModelNode());
  op.get(ModelDescriptionConstants.RECURSIVE).set(true);
  ModelNode result=domainController.execute(op);
  Assert.assertEquals("success",result.require("outcome").asString());
}
