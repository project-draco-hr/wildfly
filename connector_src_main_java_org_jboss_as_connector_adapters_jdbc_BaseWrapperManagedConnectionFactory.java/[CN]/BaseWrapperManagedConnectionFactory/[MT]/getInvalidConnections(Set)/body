{
  final Set<BaseWrapperManagedConnection> invalid=new HashSet<BaseWrapperManagedConnection>();
  for (Iterator<?> iter=connectionSet.iterator(); iter.hasNext(); ) {
    final Object anonymous=iter.next();
    if (anonymous instanceof BaseWrapperManagedConnection) {
      BaseWrapperManagedConnection mc=(BaseWrapperManagedConnection)anonymous;
      if (!mc.checkValid()) {
        invalid.add(mc);
      }
    }
  }
  return invalid;
}
