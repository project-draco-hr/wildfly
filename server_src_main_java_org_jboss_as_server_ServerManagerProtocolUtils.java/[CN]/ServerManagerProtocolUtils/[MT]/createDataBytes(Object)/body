{
  final ByteArrayOutputStream baos=new ByteArrayOutputStream(1024);
  byte[] objectBytes=null;
  if (data != null) {
    final Marshaller marshaller=MARSHALLER_FACTORY.createMarshaller(CONFIG);
    try {
      marshaller.start(Marshalling.createByteOutput(baos));
      marshaller.writeObject(data);
      marshaller.finish();
      marshaller.close();
      objectBytes=baos.toByteArray();
    }
  finally {
      safeClose(marshaller);
    }
  }
  return objectBytes;
}
