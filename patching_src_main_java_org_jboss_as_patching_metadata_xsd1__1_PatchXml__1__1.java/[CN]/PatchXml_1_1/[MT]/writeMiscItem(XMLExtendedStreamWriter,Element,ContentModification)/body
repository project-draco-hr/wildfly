{
  writer.writeEmptyElement(element.name);
  final MiscContentItem item=(MiscContentItem)modification.getItem();
  final ModificationType type=modification.getType();
  final StringBuilder path=new StringBuilder();
  for (  final String p : item.getPath()) {
    path.append(p).append(PATH_DELIMITER);
  }
  path.append(item.getName());
  writer.writeAttribute(Attribute.PATH.name,path.toString());
  if (item.isDirectory()) {
    writer.writeAttribute(Attribute.DIRECTORY.name,"true");
  }
  byte[] hash=item.getContentHash();
  if (hash.length > 0) {
    writer.writeAttribute(Attribute.HASH.name,bytesToHexString(hash));
  }
  if (type == ModificationType.REMOVE) {
    final byte[] existingHash=modification.getTargetHash();
    if (existingHash.length > 0) {
      writer.writeAttribute(Attribute.HASH.name,bytesToHexString(existingHash));
    }
    if (item.isAffectsRuntime()) {
      writer.writeAttribute(Attribute.IN_RUNTIME_USE.name,"true");
    }
  }
 else   if (type == ModificationType.MODIFY) {
    writer.writeAttribute(Attribute.NEW_HASH.name,bytesToHexString(modification.getTargetHash()));
    if (item.isAffectsRuntime()) {
      writer.writeAttribute(Attribute.IN_RUNTIME_USE.name,"true");
    }
  }
}
