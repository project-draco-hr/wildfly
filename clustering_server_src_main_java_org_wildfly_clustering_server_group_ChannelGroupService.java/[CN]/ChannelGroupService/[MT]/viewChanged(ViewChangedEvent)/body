{
  List<Address> oldAddresses=event.getOldMembers();
  List<Node> oldNodes=this.getNodes(oldAddresses);
  List<Address> newAddresses=event.getNewMembers();
  List<Node> newNodes=this.getNodes(newAddresses);
  Set<Address> members=new HashSet<>(newAddresses);
  List<org.jgroups.Address> obsolete=new ArrayList<>(oldAddresses.size());
  for (  Address address : oldAddresses) {
    if (!members.contains(address)) {
      obsolete.add(toJGroupsAddress(address));
    }
  }
  this.factory.invalidate(obsolete);
  for (  Listener listener : this.listeners) {
    listener.membershipChanged(oldNodes,newNodes,false);
  }
}
