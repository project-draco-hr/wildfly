{
  if (properties.size() == 0) {
    return address;
  }
  for (  Map.Entry<String,String> entry : properties.entrySet()) {
    PathElement childElement=PathElement.pathElement(replaceEscapedCharactersInKey(entry.getKey()),replaceEscapedCharactersInValue(entry.getValue()));
    Resource child=resource.getChild(childElement);
    if (child != null) {
      Map<String,String> childProps=new HashMap<String,String>(properties);
      childProps.remove(entry.getKey());
      PathAddress foundAddr=searchPathAddress(address.append(childElement),child,childProps);
      if (foundAddr != null) {
        return foundAddr;
      }
    }
  }
  return null;
}
