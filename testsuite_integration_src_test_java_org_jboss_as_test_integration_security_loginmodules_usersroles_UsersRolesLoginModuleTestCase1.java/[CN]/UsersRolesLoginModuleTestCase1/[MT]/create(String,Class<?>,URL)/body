{
  WebArchive war=ShrinkWrap.create(WebArchive.class,name);
  war.addClass(servletClass);
  ClassLoader tccl=Thread.currentThread().getContextClassLoader();
  war.addAsWebInfResource(tccl.getResource("users-roles-login-module.war/jboss-web.xml"),"jboss-web.xml");
  war.addClass(UsersRolesLoginModule.class);
  war.addClass(UnsecuredEJB.class);
  war.addClass(UnsecuredEJBImpl.class);
  if (webxml != null) {
    war.setWebXML(webxml);
  }
  OutputStream os=new OutputStream(){
    StringBuilder builder=new StringBuilder();
    @Override public void write(    int b) throws IOException {
      builder.append((char)b);
    }
    public String toString(){
      return builder.toString();
    }
  }
;
  war.writeTo(os,Formatters.VERBOSE);
  return war;
}
