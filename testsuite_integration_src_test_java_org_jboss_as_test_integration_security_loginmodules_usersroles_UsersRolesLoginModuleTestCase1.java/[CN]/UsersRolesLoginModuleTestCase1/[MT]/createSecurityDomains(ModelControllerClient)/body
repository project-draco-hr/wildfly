{
  List<ModelNode> updates=new ArrayList<ModelNode>();
  ModelNode op=new ModelNode();
  op.get(OP).set(ADD);
  op.get(OP_ADDR).add(SUBSYSTEM,"security");
  op.get(OP_ADDR).add(SECURITY_DOMAIN,"users-roles-login-module");
  ModelNode loginModule=op.get(Constants.AUTHENTICATION).add();
  loginModule.get(ModelDescriptionConstants.CODE).set(UsersRolesLoginModule.class.getName());
  loginModule.get(FLAG).set("required");
  ClassLoader tccl=Thread.currentThread().getContextClassLoader();
  URL usersProp=tccl.getResource("users-roles-login-module.war/users.properties");
  URL rolesProp=tccl.getResource("users-roles-login-module.war/roles.properties");
  ModelNode moduleOptions=loginModule.get("module-options");
  moduleOptions.get("usersProperties").set(usersProp.getFile());
  moduleOptions.get("rolesProperties").set(rolesProp.getFile());
  moduleOptions.get("unauthenticatedIdentity").set(ANNONYMOUS_USER_NAME);
  updates.add(op);
  applyUpdates(updates,client);
}
