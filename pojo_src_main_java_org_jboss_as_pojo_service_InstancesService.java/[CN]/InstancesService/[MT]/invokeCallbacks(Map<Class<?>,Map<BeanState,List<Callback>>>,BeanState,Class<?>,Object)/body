{
synchronized (clazz) {
    Map<BeanState,List<Callback>> states=map.get(clazz);
    if (states != null) {
      List<Callback> callbacks=states.get(state);
      if (callbacks != null)       for (      Callback c : callbacks)       try {
        c.dispatch(bean);
      }
 catch (      Throwable t) {
        log.warn("Error invoking callback: " + c,t);
      }
    }
  }
}
