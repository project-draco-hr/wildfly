{
  if (event.isPre())   return;
  List<Address> oldAddresses=event.getConsistentHashAtStart().getMembers();
  List<Node> oldNodes=this.getNodes(oldAddresses);
  List<Address> newAddresses=event.getConsistentHashAtEnd().getMembers();
  List<Node> newNodes=this.getNodes(newAddresses);
  Set<Address> obsolete=new HashSet<>(oldAddresses);
  obsolete.removeAll(newAddresses);
  this.factory.invalidate(obsolete);
  for (  Listener listener : this.listeners) {
    listener.membershipChanged(oldNodes,newNodes,false);
  }
}
