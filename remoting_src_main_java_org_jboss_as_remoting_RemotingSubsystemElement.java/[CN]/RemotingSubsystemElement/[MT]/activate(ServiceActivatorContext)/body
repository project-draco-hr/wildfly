{
  final BatchBuilder batchBuilder=context.getBatchBuilder();
  final EndpointService endpointService=new EndpointService();
  final Injector<Executor> executorInjector=endpointService.getExecutorInjector();
  final BatchServiceBuilder<Endpoint> serviceBuilder=batchBuilder.addService(JBOSS_REMOTING_ENDPOINT,endpointService);
  serviceBuilder.addDependency(ServiceName.of(JBOSS_THREAD_EXECUTOR.append(threadPoolName)),Executor.class,executorInjector);
  serviceBuilder.setLocation(getLocation());
  serviceBuilder.setInitialMode(ServiceController.Mode.ON_DEMAND);
  endpointService.setOptionMap(OptionMap.EMPTY);
}
