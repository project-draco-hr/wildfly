{
  if (ctx.getCharacter() == '\\') {
    if (ctx.getInput().length() > ctx.getLocation() + Util.LINE_SEPARATOR.length() && ctx.getInput().startsWith(Util.LINE_SEPARATOR,ctx.getLocation() + 1)) {
      if (leaveOnLnBreak) {
        ctx.leaveState();
        ctx.advanceLocation(Util.LINE_SEPARATOR.length());
      }
    }
 else     if (fallbackToEscape) {
      ctx.enterState(EscapeCharacterState.INSTANCE);
    }
 else {
      ctx.enterState(EscapeCharacterState.KEEP_ESCAPE);
    }
  }
 else {
    doHandle(ctx);
  }
}
