{
  ServiceTarget target=context.getServiceTarget();
  ProtocolDefaultsService.build(target).setInitialMode(ON_DEMAND).install();
  String defaultChannel=ModelNodes.asString(JGroupsSubsystemResourceDefinition.DEFAULT_CHANNEL.resolveModelAttribute(context,model));
  if ((defaultChannel != null) && !defaultChannel.equals(ChannelServiceNameFactory.DEFAULT_CHANNEL)) {
    for (    ChannelServiceNameFactory factory : ChannelServiceName.values()) {
      new AliasServiceBuilder<>(factory.getServiceName(),factory.getServiceName(defaultChannel),Object.class).build(target).install();
    }
    for (    GroupServiceInstaller installer : ServiceLoader.load(ClusteredGroupServiceInstaller.class,ClusteredGroupServiceInstaller.class.getClassLoader())) {
      Iterator<ServiceName> names=installer.getServiceNames(defaultChannel).iterator();
      for (      ServiceName name : installer.getServiceNames(ChannelServiceNameFactory.DEFAULT_CHANNEL)) {
        new AliasServiceBuilder<>(name,names.next(),Object.class).build(target).install();
      }
    }
  }
  String defaultStack=ModelNodes.asString(JGroupsSubsystemResourceDefinition.DEFAULT_STACK.resolveModelAttribute(context,model));
  if ((defaultStack != null) && !defaultStack.equals(ChannelFactoryService.DEFAULT)) {
    new AliasServiceBuilder<>(ChannelFactoryService.getServiceName(ChannelFactoryService.DEFAULT),ChannelFactoryService.getServiceName(defaultStack),ChannelFactory.class).build(target).install();
  }
}
