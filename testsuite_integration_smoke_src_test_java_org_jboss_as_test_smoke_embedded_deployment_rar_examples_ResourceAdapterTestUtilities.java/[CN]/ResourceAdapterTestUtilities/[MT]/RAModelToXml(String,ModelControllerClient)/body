{
  final ModelNode address=new ModelNode();
  address.add("subsystem","resource-adapters");
  address.protect();
  final ModelNode operation=new ModelNode();
  operation.get(OP).set("read-children-resources");
  operation.get("child-type").set(childType);
  operation.get(RECURSIVE).set(true);
  operation.get(OP_ADDR).set(address);
  final ModelNode ret=client.execute(operation);
  Assert.assertTrue("Management operation " + operation.asString() + " failed: "+ ret.asString(),SUCCESS.equals(ret.get(OUTCOME).asString()));
  final ModelNode result=ret.get(RESULT);
  Assert.assertNotNull(result);
  ModelNode dsNode=new ModelNode();
  dsNode.get(childType).set(result);
  StringWriter strWriter=new StringWriter();
  XMLExtendedStreamWriter writer=XMLExtendedStreamWriterFactory.create(XMLOutputFactory.newFactory().createXMLStreamWriter(strWriter));
  ResourceAdapterSubsystemParser parser=new ResourceAdapterSubsystemParser();
  parser.writeContent(writer,new SubsystemMarshallingContext(dsNode,writer));
  writer.flush();
  return strWriter.toString();
}
