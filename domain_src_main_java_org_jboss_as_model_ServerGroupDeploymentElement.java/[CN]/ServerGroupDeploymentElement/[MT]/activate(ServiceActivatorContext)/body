{
  final String deploymentName=key.getName() + ":" + key.getSha1HashAsHexString();
  log.info("Activating server group deployment: " + deploymentName);
  final Collection<DeploymentItem> deploymentItems=this.deploymentItems;
  if (deploymentItems == null)   log.warnf("No deployment items found for deployment: %s",deploymentName);
  final BatchBuilder batchBuilder=context.getBatchBuilder();
  final ServiceName deploymentServiceName=DeploymentService.SERVICE_NAME.append(deploymentName);
  batchBuilder.addService(deploymentServiceName,new DeploymentService(deploymentName));
  final BatchBuilder deploymentSubBatch=batchBuilder.subBatchBuilder();
  deploymentSubBatch.addDependency(deploymentServiceName);
  final DeploymentItemContext deploymentItemContext=new DeploymentItemContextImpl(deploymentSubBatch);
  for (  DeploymentItem deploymentItem : deploymentItems) {
    deploymentItem.install(deploymentItemContext);
  }
}
