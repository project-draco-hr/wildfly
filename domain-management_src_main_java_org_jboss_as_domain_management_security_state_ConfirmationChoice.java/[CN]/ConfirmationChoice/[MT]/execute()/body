{
  if (messageLines != null) {
    for (    String message : messageLines) {
      theConsole.printf(message);
      theConsole.printf(NEW_LINE);
    }
  }
  theConsole.printf(prompt);
  String temp=theConsole.readLine(SPACE);
switch (convertResponse(temp)) {
case YES:
    return yesState;
case NO:
  return noState;
default :
{
  List<String> acceptedValues=new ArrayList<String>(4);
  acceptedValues.add(MESSAGES.yes());
  if (MESSAGES.shortYes().length() > 0) {
    acceptedValues.add(MESSAGES.shortYes());
  }
  acceptedValues.add(MESSAGES.no());
  if (MESSAGES.shortNo().length() > 0) {
    acceptedValues.add(MESSAGES.shortNo());
  }
  StringBuilder sb=new StringBuilder(acceptedValues.get(0));
  for (int i=1; i < acceptedValues.size() - 1; i++) {
    sb.append(", ");
    sb.append(acceptedValues.get(i));
  }
  return new ErrorState(theConsole,MESSAGES.invalidConfirmationResponse(sb.toString(),acceptedValues.get(acceptedValues.size() - 1)),this);
}
}
}
