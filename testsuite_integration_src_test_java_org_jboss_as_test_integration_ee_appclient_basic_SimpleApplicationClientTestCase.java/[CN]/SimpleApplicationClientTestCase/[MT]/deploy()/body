{
  final EnterpriseArchive ear=ShrinkWrap.create(EnterpriseArchive.class,APP_NAME + ".ear");
  final JavaArchive lib=ShrinkWrap.create(JavaArchive.class,"lib.jar");
  lib.addClasses(AppClientSingletonRemote.class,AppClientWrapper.class);
  ear.addAsLibrary(lib);
  final JavaArchive ejb=ShrinkWrap.create(JavaArchive.class,MODULE_NAME + ".jar");
  ejb.addClasses(SimpleApplicationClientTestCase.class,AppClientStateSingleton.class);
  ear.addAsModule(ejb);
  final JavaArchive appClient=ShrinkWrap.create(JavaArchive.class,"client.jar");
  appClient.addClasses(AppClientMain.class);
  appClient.addAsManifestResource(new StringAsset("Main-Class: " + AppClientMain.class.getName() + "\n"),"MANIFEST.MF");
  ear.addAsModule(appClient);
  archive=ear;
  return ear;
}
