{
  final AppClientWrapper wrapper=new AppClientWrapper(archive,"client.jar","");
  try {
    final StatelessEJBLocator<AppClientSingletonRemote> locator=new StatelessEJBLocator(AppClientSingletonRemote.class,APP_NAME,MODULE_NAME,AppClientStateSingleton.class.getSimpleName(),"");
    final AppClientSingletonRemote remote=EJBClient.createProxy(locator);
    boolean callMade=remote.awaitAppClientCall();
    org.junit.Assert.assertTrue("App client call failed. App client output: " + wrapper.readAllUnformated(1000),callMade);
  }
  finally {
    wrapper.quit();
  }
}
