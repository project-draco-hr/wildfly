{
  ServiceName marshallingConfigurationServiceName=VersionedMarshallingConfigurationService.getServiceName(context.getDeploymentUnitServiceName());
  ServiceName factoryServiceName=name.append("bean-manager");
  this.builder.build(target,factoryServiceName,context,marshallingConfigurationServiceName).setInitialMode(ServiceController.Mode.ON_DEMAND).install();
  InjectedValue<BeanManagerFactory> factory=new InjectedValue<>();
  InjectedValue<ServerEnvironment> environment=new InjectedValue<>();
  return target.addService(name,new DistributableCacheFactoryService(factory,environment)).addDependency(factoryServiceName,BeanManagerFactory.class,factory).addDependency(ServerEnvironmentService.SERVICE_NAME,ServerEnvironment.class,environment);
}
