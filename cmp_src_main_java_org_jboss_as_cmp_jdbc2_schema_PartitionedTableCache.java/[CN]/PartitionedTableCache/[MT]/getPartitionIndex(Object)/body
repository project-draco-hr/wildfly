{
  int hash=key.hashCode();
  if (hash < 0) {
    hash=hash == Integer.MIN_VALUE ? Integer.MAX_VALUE : -hash;
  }
  return hash % partitions.length;
}
