{
  if (operationHandler instanceof BootOperationHandler) {
    if (getState() == State.STARTING) {
      return new BootContextImpl(subModel,getRegistry(),deployers,modelProvider,operation);
    }
 else {
      state.set(State.RESTART_REQUIRED,stamp.incrementAndGet());
      return super.getOperationContext(subModel,operationHandler,operation,modelProvider);
    }
  }
 else   if (!(getState() == State.RESTART_REQUIRED && operationHandler instanceof ModelUpdateOperationHandler)) {
    return new ServerOperationContextImpl(this,getRegistry(),subModel,modelProvider,operation);
  }
 else {
    return super.getOperationContext(subModel,operationHandler,operation,modelProvider);
  }
}
