{
  if (operationHandler instanceof BootOperationHandler) {
    if (getState() == State.STARTING) {
      return new BootContextImpl(subModel,getRegistry(),deployers);
    }
 else {
      state.set(State.RESTART_REQUIRED,stamp.incrementAndGet());
      return super.getOperationContext(subModel,operation,operationHandler);
    }
  }
 else   if (operationHandler instanceof RuntimeOperationHandler && !(getState() == State.RESTART_REQUIRED && operationHandler instanceof ModelUpdateOperationHandler)) {
    return new RuntimeContextImpl(subModel,getRegistry());
  }
 else {
    return super.getOperationContext(subModel,operation,operationHandler);
  }
}
