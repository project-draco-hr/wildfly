{
  final int PORT=9876;
  logFile=new File(System.getProperty("java.io.tmpdir"),FILE_NAME);
  if (logFile.exists()) {
    logFile.delete();
  }
  server=SyslogServer.getInstance("udp");
  server.getConfig().setPort(PORT);
  SyslogServerEventHandlerIF eventHandler=new FileSyslogServerEventHandler(logFile.getAbsolutePath(),false);
  server.getConfig().addEventHandler(eventHandler);
  SyslogServer.getThreadedInstance("udp");
  ModelNode op;
  op=new ModelNode();
  op.get(OP).set(ADD);
  op.get(OP_ADDR).add(SUBSYSTEM,"logging");
  op.get(OP_ADDR).add("logger",PACKAGE);
  op.get("level").set("TRACE");
  managementClient.getControllerClient().execute(op);
  op=new ModelNode();
  op.get(OP).set(ADD);
  op.get(OP_ADDR).add(SUBSYSTEM,"logging");
  op.get(OP_ADDR).add("syslog-handler","SYSLOG");
  op.get("level").set("TRACE");
  op.get("port").set(PORT);
  managementClient.getControllerClient().execute(op);
  op=new ModelNode();
  op.get(OP).set("add-handler");
  op.get(OP_ADDR).add(SUBSYSTEM,"logging");
  op.get(OP_ADDR).add("logger",PACKAGE);
  op.get("name").set("SYSLOG");
  managementClient.getControllerClient().execute(op);
  op=new ModelNode();
  op.get(OP).set(ADD);
  op.get(OP_ADDR).add(SUBSYSTEM,"logging");
  op.get(OP_ADDR).add("syslog-handler","SYSLOG2");
  op.get("level").set("ERROR");
  op.get("port").set(PORT);
  managementClient.getControllerClient().execute(op);
  op=new ModelNode();
  op.get(OP).set("add-handler");
  op.get(OP_ADDR).add(SUBSYSTEM,"logging");
  op.get(OP_ADDR).add("logger",PACKAGE);
  op.get("name").set("SYSLOG2");
  managementClient.getControllerClient().execute(op);
}
