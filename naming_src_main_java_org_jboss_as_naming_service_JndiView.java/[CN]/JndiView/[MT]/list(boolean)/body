{
  StringBuffer buffer=new StringBuffer(4096);
  Context context=null;
  try {
    context=new InitialContext();
    context=(Context)context.lookup("java:");
    buffer.append("<h1>java: Namespace</h1>\n");
    buffer.append("<pre>\n");
    list(context," ",buffer,verbose);
    buffer.append("</pre>\n");
  }
 catch (  NamingException e) {
    log.error("lookup for java: failed",e);
    buffer.append("Failed to get InitialContext, ").append(e.toString(true));
    formatException(buffer,e);
  }
  try {
    context=new InitialContext();
    buffer.append("<h1>Global JNDI Namespace</h1>\n");
    buffer.append("<pre>\n");
    list(context," ",buffer,verbose);
    buffer.append("</pre>\n");
  }
 catch (  NamingException e) {
    log.error("Failed to get InitialContext",e);
    buffer.append("Failed to get InitialContext, ").append(e.toString(true));
    formatException(buffer,e);
  }
  return buffer.toString();
}
