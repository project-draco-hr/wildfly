{
  StringBuffer buffer=new StringBuffer(4096);
  Context context=null;
  openJndiTag(buffer);
  try {
    context=new InitialContext();
    context=(Context)context.lookup("java:");
  }
 catch (  NamingException e) {
    log.error("Failed to get InitialContext for (java:)",e);
    appendErrorTag(buffer,"Failed to get InitialContext for (java:), " + e.toString(true));
  }
  if (context != null) {
    openContextTag(buffer);
    appendJavaNameTag(buffer);
    try {
      listXML(context,buffer);
    }
 catch (    Throwable t) {
      log.error("Failed to list contents of (java:)",t);
      appendErrorTag(buffer,"Failed to list contents of (java:), " + t.toString());
    }
    closeContextTag(buffer);
  }
  try {
    context=new InitialContext();
  }
 catch (  NamingException e) {
    log.error("Failed to get InitialContext",e);
    appendErrorTag(buffer,"Failed to get InitialContext, " + e.toString(true));
  }
  if (context != null) {
    openContextTag(buffer);
    appendGlobalNameTag(buffer);
    try {
      listXML(context,buffer);
    }
 catch (    Throwable t) {
      log.error("Failed to list global contents ",t);
      appendErrorTag(buffer,"Failed to list global contents, " + t.toString());
    }
    closeContextTag(buffer);
  }
  closeJndiTag(buffer);
  return buffer.toString();
}
