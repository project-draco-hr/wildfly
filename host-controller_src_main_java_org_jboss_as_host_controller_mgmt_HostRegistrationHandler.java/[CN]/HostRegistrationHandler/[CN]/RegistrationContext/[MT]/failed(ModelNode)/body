{
  if (completed.compareAndSet(false,true)) {
    failed=true;
    try {
      sendResponse(responseChannel,DomainControllerProtocol.PARAM_ERROR,error);
    }
 catch (    IOException e) {
      ProtocolLogger.ROOT_LOGGER.debugf(e,"failed to process message");
    }
 finally {
      completedLatch.countDown();
    }
  }
}
