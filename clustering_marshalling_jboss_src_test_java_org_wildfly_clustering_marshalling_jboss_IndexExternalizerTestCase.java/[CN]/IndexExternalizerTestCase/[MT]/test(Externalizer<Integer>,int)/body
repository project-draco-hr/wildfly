{
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  try (ObjectOutputStream output=new ObjectOutputStream(out)){
    externalizer.writeObject(output,index);
  }
   try (ObjectInputStream input=new ObjectInputStream(new ByteArrayInputStream(out.toByteArray()))){
    assertEquals(index,externalizer.readObject(input).intValue());
  }
 }
