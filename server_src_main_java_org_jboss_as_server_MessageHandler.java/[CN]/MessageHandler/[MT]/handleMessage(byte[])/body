{
  Command cmd=null;
  try {
    cmd=ServerManagerProtocolCommand.readCommand(message);
  }
 catch (  IOException e) {
    logger.error("Error reading command",e);
    return;
  }
switch (cmd.getCommand()) {
case START_SERVER:
    ServerModel standalone=null;
  try {
    standalone=ServerManagerProtocolUtils.unmarshallCommandData(ServerModel.class,cmd);
  }
 catch (  Exception e) {
    logger.error("Error reading standalone",e);
    return;
  }
try {
  server.start(standalone);
}
 catch (ServerStartException e) {
  logger.error("Error starting server",e);
  return;
}
break;
case STOP_SERVER:
server.stop();
break;
default :
throw new IllegalArgumentException("Unknown command " + cmd.getCommand());
}
}
