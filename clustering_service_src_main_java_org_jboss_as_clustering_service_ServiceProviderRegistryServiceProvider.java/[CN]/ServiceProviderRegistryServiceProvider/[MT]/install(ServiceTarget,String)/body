{
  final ServiceName name=this.getServiceName(cluster);
  @SuppressWarnings("rawtypes") final InjectedValue<Cache> cache=new InjectedValue<Cache>();
  final InjectedValue<GroupRpcDispatcher> dispatcher=new InjectedValue<GroupRpcDispatcher>();
  final InjectedValue<GroupMembershipNotifier> notifier=new InjectedValue<GroupMembershipNotifier>();
  final ServiceName serviceName=CoreGroupCommunicationService.getServiceName(cluster);
  return target.addService(name,new ServiceProviderRegistryService(name,cache,dispatcher,notifier)).addDependency(CacheService.getServiceName(cluster,null),Cache.class,cache).addDependency(serviceName,GroupRpcDispatcher.class,dispatcher).addDependency(serviceName,GroupMembershipNotifier.class,notifier).setInitialMode(ServiceController.Mode.ON_DEMAND).install();
}
