{
  try {
    PolicyConfigurationFactory pcf=PolicyConfigurationFactory.getPolicyConfigurationFactory();
synchronized (pcf) {
      policyConfiguration=pcf.getPolicyConfiguration(contextId,false);
      if (standalone) {
        if (metaData != null) {
          createPermissions(metaData,policyConfiguration);
        }
 else {
          log.debug("Cannot create permissions with 'null' metaData for id=" + contextId);
        }
      }
      if (!standalone) {
        PolicyConfiguration parent=parentPolicy.getValue();
        if (parent != null) {
          parent=pcf.getPolicyConfiguration(parent.getContextID(),false);
          parent.linkConfiguration(policyConfiguration);
          policyConfiguration.commit();
          parent.commit();
        }
 else {
          log.debug("Could not retrieve parent policy for policy " + contextId);
        }
      }
 else {
        policyConfiguration.commit();
      }
      Policy.getPolicy().refresh();
    }
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
}
