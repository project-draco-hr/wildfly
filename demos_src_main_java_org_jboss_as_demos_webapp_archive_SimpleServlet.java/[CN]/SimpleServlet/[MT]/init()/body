{
  if (!initialized) {
synchronized (this) {
      if (initialized)       return;
      initialized=true;
      try {
        InitialContext context=new InitialContext();
        ds=(DataSource)context.lookup("java:/H2DS");
        cf=(QueueConnectionFactory)context.lookup("java:/ConnectionFactory");
        queue=(Queue)context.lookup("queue/test");
        conn=cf.createQueueConnection();
      }
 catch (      Exception e) {
        throw new ServletException(e);
      }
      Connection sqlConn=null;
      CallableStatement stmt=null;
      try {
        sqlConn=ds.getConnection();
        stmt=sqlConn.prepareCall("CREATE TABLE WebAppTestTable (id INTEGER IDENTITY, value VARCHAR(255))");
        stmt.execute();
      }
 catch (      Exception e) {
        throw new ServletException(e);
      }
 finally {
        safeClose(stmt);
        safeClose(sqlConn);
      }
      System.out.println("Created table");
    }
  }
}
