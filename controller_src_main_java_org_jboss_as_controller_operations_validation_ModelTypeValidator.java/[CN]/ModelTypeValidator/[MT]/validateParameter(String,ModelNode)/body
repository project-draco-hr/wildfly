{
  if (!value.isDefined()) {
    if (!nullable)     throw new OperationFailedException(new ModelNode().set(parameterName + " may not be null "));
  }
 else {
    boolean matched=false;
    if (strictType) {
      matched=validTypes.contains(value.getType());
    }
 else {
      for (      ModelType validType : validTypes) {
        if (matches(value,validType)) {
          matched=true;
          break;
        }
      }
    }
    if (!matched)     throw new OperationFailedException(new ModelNode().set("Wrong type for " + parameterName + ". Expected "+ validTypes.toString()+ " but was "+ value.getType()));
  }
}
