{
  final ClientSessionFactory sf=createClientSessionFactory(managementClient.getMgmtAddress(),5445);
  try {
    sf.createSession("fail","epicfail",false,true,true,false,1);
    fail("must not allow to create a session with bad authentication");
  }
 catch (  HornetQException e) {
    assertEquals(HornetQExceptionType.SECURITY_EXCEPTION,e.getType());
    assertTrue(e.getMessage().startsWith("HQ119031"));
  }
 finally {
    if (sf != null) {
      sf.close();
    }
  }
}
