{
  requireNoAttributes(reader);
  final ExtensionContext extensionContext=new ExtensionContextImpl(reader);
  final Set<String> found=new HashSet<String>();
  while (reader.nextTag() != END_ELEMENT) {
    final String moduleName=readStringAttributeElement(reader,Attribute.MODULE.getLocalName());
    requireNoContent(reader);
    if (!found.add(moduleName)) {
      throw invalidAttributeValue(reader,0);
    }
    try {
      for (      Extension extension : Module.loadService(moduleName,Extension.class)) {
        extension.initialize(extensionContext);
      }
    }
 catch (    ModuleLoadException e) {
      throw new XMLStreamException("Failed to load module",e);
    }
    list.add(new DomainExtensionAdd(moduleName));
  }
}
