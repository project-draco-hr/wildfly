{
  String subsystemXml="<subsystem xmlns=\"" + Namespace.CURRENT.getUriString() + "\">"+ "<show-model value=\"true\"/>"+ "</subsystem>";
  AdditionalInitialization additionalInit=new BaseAdditionalInitalization();
  KernelServices servicesA=super.installInController(additionalInit,subsystemXml);
  ModelNode modelA=servicesA.readWholeModel();
  String marshalled=servicesA.getPersistedSubsystemXml();
  servicesA.shutdown();
  Assert.assertEquals(normalizeXML(subsystemXml),normalizeXML(marshalled));
  KernelServices servicesB=super.installInController(additionalInit,marshalled);
  ModelNode modelB=servicesB.readWholeModel();
  super.compare(modelA,modelB);
}
