{
  ParsedArguments args=ctx.getParsedArguments();
  DefaultOperationRequestBuilder builder=new DefaultOperationRequestBuilder();
  if (ctx.isDomainMode()) {
    final String profile=this.profile.getValue(args);
    if (profile == null) {
      throw new OperationFormatException("Required argument --profile is missing.");
    }
    builder.addNode("profile",profile);
  }
  final String name=this.name.getValue(ctx.getParsedArguments(),true);
  final String operation=this.operation.getValue(ctx.getParsedArguments(),true);
  for (  OperationRequestAddress.Node node : nodePath) {
    builder.addNode(node.getType(),node.getName());
  }
  builder.addNode(type,name);
  builder.setOperationName(operation);
  for (  String argName : args.getArgumentNames()) {
    if (argName.equals("--profile")) {
      continue;
    }
    builder.addProperty(argName.substring(2),args.getArgument(argName));
  }
  return builder.buildRequest();
}
