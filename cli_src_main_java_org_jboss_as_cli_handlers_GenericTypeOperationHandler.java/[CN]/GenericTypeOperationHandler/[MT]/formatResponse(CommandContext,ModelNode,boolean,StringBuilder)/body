{
  if (!opResponse.hasDefined(Util.RESULT)) {
    return null;
  }
  final ModelNode result=opResponse.get(Util.RESULT);
  if (composite) {
    final Set<String> keys;
    try {
      keys=result.keys();
    }
 catch (    Exception e) {
      ctx.printLine("Failed to get step results from a composite operation response " + opResponse);
      e.printStackTrace();
      return null;
    }
    for (    String key : keys) {
      final ModelNode stepResponse=result.get(key);
      buf=formatResponse(ctx,stepResponse,false,buf);
    }
  }
 else {
    final ModelNodeFormatter formatter=ModelNodeFormatter.Factory.forType(result.getType());
    if (buf == null) {
      buf=new StringBuilder();
    }
    formatter.format(buf,0,result);
  }
  return buf;
}
