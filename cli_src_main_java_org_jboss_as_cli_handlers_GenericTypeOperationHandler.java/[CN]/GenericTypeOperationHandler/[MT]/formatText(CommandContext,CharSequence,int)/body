{
  int terminalWidth=ctx.getTerminalWidth();
  if (terminalWidth <= 0) {
    terminalWidth=80;
  }
  final StringBuilder target=new StringBuilder();
  if (offset >= terminalWidth) {
    target.append(text);
  }
 else {
    int startIndex=0;
    while (startIndex < text.length()) {
      if (startIndex > 0) {
        target.append(Util.LINE_SEPARATOR);
      }
      for (int i=0; i < offset; ++i) {
        target.append(' ');
      }
      int endIndex=startIndex + terminalWidth - offset;
      if (endIndex > text.length()) {
        endIndex=text.length();
        target.append(text.subSequence(startIndex,endIndex));
        startIndex=endIndex;
      }
 else {
        while (endIndex >= startIndex && !Character.isWhitespace(text.charAt(endIndex))) {
          --endIndex;
        }
        if (endIndex <= startIndex) {
          endIndex=startIndex + terminalWidth - 2;
          target.append(text.subSequence(startIndex,endIndex));
          startIndex=endIndex;
        }
 else {
          target.append(text.subSequence(startIndex,endIndex));
          startIndex=endIndex + 1;
        }
      }
    }
  }
  ctx.printLine(target.toString());
}
