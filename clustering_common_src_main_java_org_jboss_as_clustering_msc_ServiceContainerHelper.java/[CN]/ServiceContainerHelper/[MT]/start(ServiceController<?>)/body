{
  if (controller.getState() == ServiceController.State.DOWN) {
switch (controller.getMode()) {
case NEVER:
{
        controller.setMode(ServiceController.Mode.ACTIVE);
        break;
      }
case ON_DEMAND:
{
      controller.setMode(ServiceController.Mode.PASSIVE);
      break;
    }
default :
{
  }
}
}
if (!wait(controller,EnumSet.of(ServiceController.State.DOWN,ServiceController.State.STARTING),ServiceController.State.UP)) {
throw controller.getStartException();
}
}
