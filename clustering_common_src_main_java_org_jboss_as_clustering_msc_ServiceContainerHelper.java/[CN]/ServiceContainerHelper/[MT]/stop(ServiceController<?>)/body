{
  if (controller.getState() == ServiceController.State.UP) {
switch (controller.getMode()) {
case ACTIVE:
{
        controller.setMode(ServiceController.Mode.NEVER);
        break;
      }
case PASSIVE:
{
      controller.setMode(ServiceController.Mode.ON_DEMAND);
      break;
    }
default :
{
  }
}
}
wait(controller,EnumSet.of(ServiceController.State.UP,ServiceController.State.STOPPING),ServiceController.State.DOWN);
}
