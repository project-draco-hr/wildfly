{
  ModelNode expectedClone=expected.clone();
  expectedClone.remove(OPERATION_HEADERS);
  ModelNode actualClone=actual.clone();
  actualClone.remove(OPERATION_HEADERS);
  for (  String removal : undefinedAttributesToRemoveFromActual) {
    if (!actualClone.hasDefined(removal)) {
      actualClone.remove(removal);
    }
  }
  expectedClone=ModelNode.fromJSONString(expectedClone.toJSONString(true));
  actualClone=ModelNode.fromJSONString(actualClone.toJSONString(true));
  Assert.assertEquals(expectedClone,actualClone);
}
