{
  ZipFile zip=null;
  try {
    zip=new ZipFile(file);
    Enumeration<? extends ZipEntry> entries=zip.entries();
    while (entries.hasMoreElements()) {
      ZipEntry entry=entries.nextElement();
      if (copy.includeFile(entry.getName())) {
        if (entry.isDirectory()) {
          new File(target,entry.getName()).mkdirs();
        }
 else {
          InputStream in=null;
          try {
            in=zip.getInputStream(entry);
            copyFile(in,new File(target,entry.getName()));
          }
  finally {
            safeClose(in);
          }
        }
      }
    }
  }
  finally {
    safeClose(zip);
  }
}
