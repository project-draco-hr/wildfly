{
  final ServiceName serviceName=getServiceName(unit,endpoint.getShortName());
  final EndpointService service=new EndpointService(endpoint,serviceName);
  final ServiceBuilder<Endpoint> builder=serviceTarget.addService(serviceName,service);
  final ServiceName bindingDependencyService=JndiNamingDependencyProcessor.serviceName(unit);
  builder.addDependency(DependencyType.REQUIRED,bindingDependencyService);
  builder.addDependency(DependencyType.REQUIRED,SecurityDomainService.SERVICE_NAME.append(getDeploymentSecurityDomainName(endpoint)),SecurityDomainContext.class,service.getSecurityDomainContextInjector());
  builder.addDependency(DependencyType.REQUIRED,WSServices.REGISTRY_SERVICE,EndpointRegistry.class,service.getEndpointRegistryInjector());
  builder.addDependency(DependencyType.REQUIRED,WSServices.PORT_COMPONENT_LINK_SERVICE,WebAppController.class,service.getPclWebAppControllerInjector());
  builder.addDependency(DependencyType.REQUIRED,MBEAN_SERVER_NAME,MBeanServer.class,service.getMBeanServerInjector());
  builder.setInitialMode(Mode.ACTIVE);
  builder.install();
}
