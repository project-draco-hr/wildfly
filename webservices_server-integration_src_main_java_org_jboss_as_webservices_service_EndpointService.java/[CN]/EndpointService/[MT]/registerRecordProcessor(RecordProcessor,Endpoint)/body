{
  try {
    mBeanServerValue.getValue().registerMBean(processor,ObjectNameFactory.create(ep.getName() + ",recordProcessor=" + processor.getName()));
  }
 catch (  final JMException ex) {
    ROOT_LOGGER.trace("Cannot register endpoint with JMX server, trying with the default ManagedRecordProcessor: " + ex.getMessage());
    try {
      mBeanServerValue.getValue().registerMBean(new ManagedRecordProcessor(processor),ObjectNameFactory.create(ep.getName() + ",recordProcessor=" + processor.getName()));
    }
 catch (    final JMException e) {
      ROOT_LOGGER.cannotRegisterRecordProcessor();
    }
  }
}
