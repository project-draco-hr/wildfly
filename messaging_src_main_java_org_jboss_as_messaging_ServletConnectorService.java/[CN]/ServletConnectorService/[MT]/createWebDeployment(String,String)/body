{
  WebDeploymentBuilder builder=new WebDeploymentBuilder();
  builder.setContextRoot(getContextRoot());
  File documentRoot=new File(injectedServerEnvironment.getValue().getServerTempDir() + File.separator + hornetqServerName+ File.separator+ connectorName+ "-root");
  builder.setDocumentRoot(documentRoot);
  ClassLoader classLoader=Thread.currentThread().getContextClassLoader();
  builder.setClassLoader(classLoader);
  ServletBuilder servlet=new ServletBuilder();
  servlet.setServletName(hornetqServerName + "-" + connectorName);
  servlet.setServletClass(classLoader.loadClass(HttpTunnelingServlet.class.getName()));
  servlet.addUrlMapping(getUrlMapping(hornetqServerName,connectorName));
  servlet.addInitParam("endpoint","local:" + getServletEndpoint(hornetqServerName,connectorName));
  servlet.setForceInit(true);
  builder.addServlet(servlet);
  return builder;
}
