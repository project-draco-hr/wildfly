{
  ServerManagerProtocolCommand.Command cmd=null;
  try {
    cmd=ServerManagerProtocolCommand.readCommand(message);
  }
 catch (  IOException e) {
    logger.error("Error reading command",e);
    return;
  }
switch (cmd.getCommand()) {
case START_SERVER:
    DomainControllerConfig config=null;
  try {
    config=ServerManagerProtocolUtils.unmarshallCommandData(DomainControllerConfig.class,cmd);
  }
 catch (  Exception e) {
    logger.error("Error reading configuration",e);
    return;
  }
try {
  domainController.start(config);
}
 catch (Throwable t) {
  logger.error("Error starting domain controller",t);
  return;
}
break;
case STOP_SERVER:
domainController.stop();
break;
default :
throw new IllegalArgumentException("Unknown command " + cmd.getCommand());
}
}
