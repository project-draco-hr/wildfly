{
  final ModelNode undefineOp=Operations.createUndefineAttributeOperation(address,attribute);
  final ModelNode undefineResult;
  if (expectFailure) {
    undefineResult=client.execute(undefineOp);
    assertFalse("Undefining attribute " + attribute + " should have failed.",Operations.isSuccessfulOutcome(undefineResult));
  }
 else {
    undefineResult=executeOperation(client,undefineOp);
    final ModelNode readOp=Operations.createReadAttributeOperation(address,attribute);
    readOp.get("include-defaults").set(false);
    final ModelNode result=executeOperation(client,readOp);
    assertFalse("Attribute '" + attribute + "' was not undefined.",Operations.readResult(result).isDefined());
  }
  return undefineResult;
}
