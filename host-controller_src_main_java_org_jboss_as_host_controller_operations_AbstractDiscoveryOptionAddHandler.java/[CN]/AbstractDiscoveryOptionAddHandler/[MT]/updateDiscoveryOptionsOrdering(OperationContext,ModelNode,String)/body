{
  PathAddress operationAddress=PathAddress.pathAddress(operation.get(OP_ADDR));
  PathAddress discoveryOptionsAddress=operationAddress.subAddress(0,operationAddress.size() - 1);
  ModelNode discoveryOptions=Resource.Tools.readModel(context.readResourceFromRoot(discoveryOptionsAddress));
  ModelNode discoveryOptionsOrdering=discoveryOptions.get(DISCOVERY_OPTIONS).clone();
  if (!discoveryOptionsOrdering.isDefined()) {
    discoveryOptionsOrdering.setEmptyList();
  }
  discoveryOptionsOrdering.add(type,Util.getNameFromAddress(operation.get(OP_ADDR)));
  ModelNode writeOp=Util.getWriteAttributeOperation(discoveryOptionsAddress,DISCOVERY_OPTIONS,discoveryOptionsOrdering);
  OperationStepHandler writeHandler=context.getRootResourceRegistration().getSubModel(discoveryOptionsAddress).getOperationHandler(PathAddress.EMPTY_ADDRESS,WRITE_ATTRIBUTE_OPERATION);
  context.addStep(new ModelNode(),writeOp,writeHandler,OperationContext.Stage.MODEL,true);
}
