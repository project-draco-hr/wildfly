{
  String targetHost=null;
  String runningServerTarget=null;
  ModelNode runningServerOp=null;
  final PathAddress address=PathAddress.pathAddress(operation.get(OP_ADDR));
  if (address.size() > 0) {
    PathElement first=address.getElement(0);
    if (HOST.equals(first.getKey())) {
      targetHost=first.getValue();
      if (address.size() > 1 && RUNNING_SERVER.equals(address.getElement(1).getKey())) {
        runningServerTarget=address.getElement(1).getValue();
        ModelNode relativeAddress=new ModelNode();
        for (int i=2; i < address.size(); i++) {
          PathElement element=address.getElement(i);
          relativeAddress.add(element.getKey(),element.getValue());
        }
        runningServerOp=operation.clone();
        runningServerOp.get(OP_ADDR).set(relativeAddress);
      }
    }
  }
  HostControllerExecutionSupport result;
  if (targetHost != null && !getLocalHostName().equals(targetHost)) {
    result=HostControllerExecutionSupport.Factory.createIgnoredOperationSupport(index);
  }
 else   if (runningServerTarget != null) {
    final ModelNode domainModel=domainModelProvider.getDomainModel();
    final String serverGroup=domainModel.require(HOST).require(targetHost).require(SERVER_CONFIG).require(runningServerTarget).require(GROUP).asString();
    final ServerIdentity serverIdentity=new ServerIdentity(targetHost,serverGroup,runningServerTarget);
    result=HostControllerExecutionSupport.Factory.createDirectServerOperationExecutionSupport(index,serverIdentity,runningServerOp);
  }
 else   if (COMPOSITE.equals(operation.require(OP).asString())) {
    if (operation.hasDefined(STEPS)) {
      int stepNum=0;
      List<HostControllerExecutionSupport> parsedSteps=new ArrayList<HostControllerExecutionSupport>();
      for (      ModelNode step : operation.get(STEPS).asList()) {
        parsedSteps.add(parseOperation(step,stepNum++,domainModelProvider));
      }
      result=HostControllerExecutionSupport.Factory.createCompositeOperationExecutionSupport(index,parsedSteps);
    }
 else {
      result=HostControllerExecutionSupport.Factory.createDomainOperationExecutionSupport(index,operation,address);
    }
  }
 else   if (targetHost == null && ignoredDomainResourceRegistry.isResourceExcluded(address)) {
    result=HostControllerExecutionSupport.Factory.createIgnoredOperationSupport(index);
  }
 else {
    result=HostControllerExecutionSupport.Factory.createDomainOperationExecutionSupport(index,operation,address);
  }
  return result;
}
