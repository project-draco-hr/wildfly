{
  final PathAddress originalAddress=PathAddress.pathAddress(operation.get(OP_ADDR));
  final ImmutableManagementResourceRegistration originalRegistration=context.getResourceRegistration();
  if (originalRegistration == null) {
    String operationName=operation.require(OP).asString();
    throw new OperationFailedException(new ModelNode().set(MESSAGES.noHandlerForOperation(operationName,originalAddress)));
  }
  HostControllerExecutionSupport hostControllerExecutionSupport=HostControllerExecutionSupport.Factory.create(operation,localHostControllerInfo.getLocalHostName(),new LazyDomainModelProvider(context),ignoredDomainResourceRegistry);
  ModelNode domainOp=hostControllerExecutionSupport.getDomainOperation();
  if (domainOp != null) {
    addBasicStep(context,domainOp);
  }
  ServerOperationResolver resolver=new ServerOperationResolver(localHostControllerInfo.getLocalHostName(),serverProxies);
  ServerOperationsResolverHandler sorh=new ServerOperationsResolverHandler(resolver,hostControllerExecutionSupport,originalAddress,originalRegistration,response,recordResponse);
  context.addStep(sorh,OperationContext.Stage.DOMAIN);
}
