{
  final PathAddress originalAddress=PathAddress.pathAddress(operation.get(OP_ADDR));
  final ImmutableManagementResourceRegistration originalRegistration=context.getResourceRegistration();
  HostControllerExecutionSupport hostControllerExecutionSupport=HostControllerExecutionSupport.Factory.create(operation,localHostControllerInfo.getLocalHostName(),new LazyDomainModelProvider(context),ignoredDomainResourceRegistry);
  ModelNode domainOp=hostControllerExecutionSupport.getDomainOperation();
  if (domainOp != null) {
    if (originalRegistration == null) {
      throw new OperationFailedException(new ModelNode(ControllerMessages.MESSAGES.noSuchResourceType(originalAddress)));
    }
    addBasicStep(context,domainOp);
  }
  ServerOperationResolver resolver=new ServerOperationResolver(localHostControllerInfo.getLocalHostName(),serverProxies);
  ServerOperationsResolverHandler sorh=new ServerOperationsResolverHandler(resolver,hostControllerExecutionSupport,originalAddress,originalRegistration,response);
  context.addStep(sorh,OperationContext.Stage.DOMAIN);
}
