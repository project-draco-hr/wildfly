{
  final Resource resource=context.getRootResource().navigate(getBaseAddress());
  final ModelNode model=Resource.Tools.readModel(resource);
  try {
    final ByteArrayOutputStream baos=new ByteArrayOutputStream();
    try {
      BufferedOutputStream output=new BufferedOutputStream(baos);
      configPersister.marshallAsXml(model,output);
      output.close();
      baos.close();
    }
  finally {
      safeClose(baos);
    }
    String xml=new String(baos.toByteArray());
    context.getResult().set(xml);
  }
 catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    log.errorf(e,"Failed executing operation %s at address %s",operation.require(ModelDescriptionConstants.OP),PathAddress.pathAddress(operation.get(ModelDescriptionConstants.OP_ADDR)));
    context.getFailureDescription().set(e.toString());
  }
  context.completeStep();
}
