{
  super(reader);
  try {
    XmlElementReader ereader=new XmlElementReader(reader);
    DOMResult result=new DOMResult();
    TransformerFactory transFactory=TransformerFactory.newInstance();
    Transformer transformer=transFactory.newTransformer();
    transformer.transform(new StAXSource(ereader),result);
    Document document=(Document)result.getNode();
    org.w3c.dom.Element docElement=document.getDocumentElement();
    NodeList nodes=docElement.getElementsByTagNameNS("urn:hornetq","configuration");
    org.w3c.dom.Element configElement=(org.w3c.dom.Element)nodes.item(0);
    FileConfigurationParser jmsParser=new FileConfigurationParser();
    jmsParser.parseMainConfig(configElement,config);
  }
 catch (  Exception e) {
    throw new XMLStreamException("Failed to transform stax stream into document",e);
  }
}
