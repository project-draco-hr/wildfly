{
  final Unmarshaller unmarshaller=getUnmarshaller();
  unmarshaller.start(createByteInput(inputStream));
  expectHeader(unmarshaller,DomainServerProtocol.PARAM_SERVER_MODEL_UPDATE_COUNT);
  int count=unmarshaller.readInt();
  updates=new ArrayList<AbstractServerModelUpdate<?>>(count);
  for (int i=0; i < count; i++) {
    expectHeader(unmarshaller,DomainServerProtocol.PARAM_SERVER_MODEL_UPDATE);
    final AbstractServerModelUpdate<?> update=unmarshal(unmarshaller,AbstractServerModelUpdate.class);
    updates.add(update);
  }
  unmarshaller.finish();
}
