{
  if (config instanceof LoaderConfiguration) {
    LoaderConfiguration loader=(LoaderConfiguration)config;
    Properties properties=new TypedProperties(loader.properties());
    String location=loader.properties().getProperty("location");
    if (location != null) {
      properties.setProperty("location",this.createBeanLocation(location,beanName));
    }
    return loadersBuilder.addCacheLoader().read(loader).withProperties(properties);
  }
 else   if (config instanceof FileCacheStoreConfiguration) {
    FileCacheStoreConfiguration store=(FileCacheStoreConfiguration)config;
    return loadersBuilder.addFileCacheStore().read(store).location(this.createBeanLocation(store.location(),beanName));
  }
  throw new IllegalStateException(String.format("Unsupported cache loader: %s",config.getClass().getName()));
}
