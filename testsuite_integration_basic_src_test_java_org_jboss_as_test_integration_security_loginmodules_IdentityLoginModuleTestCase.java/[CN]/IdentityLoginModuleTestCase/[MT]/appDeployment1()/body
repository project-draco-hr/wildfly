{
  log.info("start" + DEP1 + "deployment");
  WebArchive war=ShrinkWrap.create(WebArchive.class,DEP1 + ".war");
  war.addClass(PrincipalPrintingServlet.class);
  war.setWebXML(Utils.getResource("loginmodules/deployments/IdentityLoginModule/web.xml"));
  war.addAsWebInfResource(Utils.getResource("loginmodules/deployments/IdentityLoginModule/dep1/jboss-web.xml"),"jboss-web.xml");
  log.debug(war.toString(true));
  log.debug("adding module options");
  Map<String,String> moduleOptionsMap=new HashMap<String,String>();
  moduleOptionsMap.put("roles","role1,role2");
  log.info("creating security domain: TestIdentityLoginDomain");
  Utils.createSecurityDomain("TestIdentityLoginDomain","localhost",9999,IdentityLoginModule.class,moduleOptionsMap);
  log.info("security domain created");
  return war;
}
