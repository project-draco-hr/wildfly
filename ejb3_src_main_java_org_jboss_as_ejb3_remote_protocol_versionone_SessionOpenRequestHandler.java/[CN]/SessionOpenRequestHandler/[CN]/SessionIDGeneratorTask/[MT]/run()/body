{
  final SessionID sessionID;
  try {
    try {
      sessionID=statefulSessionComponent.createSession();
    }
 catch (    Throwable t) {
      SessionOpenRequestHandler.this.writeException(channelAssociation,SessionOpenRequestHandler.this.marshallerFactory,invocationId,t,null);
      return;
    }
    final Affinity hardAffinity=statefulSessionComponent.getCache().getStrictAffinity();
    SessionOpenRequestHandler.this.writeSessionId(channelAssociation,invocationId,sessionID,hardAffinity);
  }
 catch (  IOException ioe) {
    logger.error("IOException while generating session id for invocation id: " + invocationId + " on channel "+ channelAssociation.getChannel(),ioe);
    IoUtils.safeClose(this.channelAssociation.getChannel());
    return;
  }
}
