{
  JDBCFieldBridge[] cmpFields=entity.getTableFields();
  for (int i=0; i < cmpFields.length; ++i) {
    JDBCFieldBridge field=cmpFields[i];
    JDBCCMPFieldMetaData fieldMD=entity.getMetaData().getCMPFieldByName(field.getFieldName());
    if (fieldMD != null && fieldMD.isIndexed()) {
      createCMPIndex(dataSource,field,indexNames);
    }
  }
  final JDBCAbstractCMRFieldBridge[] cmrFields=entity.getCMRFields();
  if (cmrFields != null) {
    for (int i=0; i < cmrFields.length; ++i) {
      JDBCAbstractCMRFieldBridge cmrField=cmrFields[i];
      if (cmrField.getRelatedCMRField().getMetaData().isIndexed()) {
        final JDBCFieldBridge[] fkFields=cmrField.getForeignKeyFields();
        if (fkFields != null) {
          for (int fkInd=0; fkInd < fkFields.length; ++fkInd) {
            createCMPIndex(dataSource,fkFields[fkInd],indexNames);
          }
        }
      }
    }
  }
}
