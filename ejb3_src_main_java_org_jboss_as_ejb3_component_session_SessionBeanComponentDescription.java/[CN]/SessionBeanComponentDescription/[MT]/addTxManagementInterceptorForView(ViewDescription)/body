{
  view.getConfigurators().add(new ViewConfigurator(){
    @Override public void configure(    DeploymentPhaseContext context,    ComponentConfiguration componentConfiguration,    ViewDescription description,    ViewConfiguration configuration) throws DeploymentUnitProcessingException {
      EJBComponentDescription ejbComponentDescription=(EJBComponentDescription)componentConfiguration.getComponentDescription();
      if (TransactionManagementType.CONTAINER.equals(ejbComponentDescription.getTransactionManagementType())) {
        configuration.addViewInterceptor(new InterceptorFactory(){
          @Override public Interceptor create(          InterceptorFactoryContext context){
            Component component=(Component)context.getContextData().get(Component.class);
            if (component == null) {
              throw new IllegalStateException("Component not set in InterceptorFactoryContext: " + context);
            }
            if (component instanceof TransactionalComponent == false) {
              throw new IllegalArgumentException("Component " + component + " with component class: "+ component.getComponentClass()+ " isn't a transactional component. Tx interceptors cannot be applied");
            }
            return new CMTTxInterceptor((TransactionalComponent)component);
          }
        }
);
      }
    }
  }
);
}
