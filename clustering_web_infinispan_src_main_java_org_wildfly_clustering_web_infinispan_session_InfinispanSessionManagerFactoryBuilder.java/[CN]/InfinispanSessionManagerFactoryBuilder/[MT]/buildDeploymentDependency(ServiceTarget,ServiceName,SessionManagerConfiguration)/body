{
  ServiceName templateCacheServiceName=getCacheServiceName(config.getCacheName());
  String templateCacheName=templateCacheServiceName.getSimpleName();
  ServiceName containerServiceName=templateCacheServiceName.getParent();
  String containerName=containerServiceName.getSimpleName();
  String cacheName=config.getDeploymentName();
  new TemplateConfigurationBuilder(containerName,cacheName,templateCacheName).build(target).install();
  new CacheBuilder<>(containerName,cacheName).build(target).addAliases(InfinispanRouteLocatorService.getCacheServiceAlias(cacheName)).install();
  return InfinispanSessionManagerFactory.build(target,name,containerName,cacheName,config);
}
