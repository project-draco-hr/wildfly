{
  Registry.RegistryEntryProvider<String,Void> provider=new Registry.RegistryEntryProvider<String,Void>(){
    @Override public String getKey(){
      return instanceId.getValue();
    }
    @Override public Void getValue(){
      return null;
    }
  }
;
  InjectedValue<Cache> cache=new InjectedValue<>();
  return AsynchronousService.addService(target,ROUTING_REGISTRY_SERVICE_NAME,new RegistryService(cache,new ImmediateValue(provider))).addDependency(CacheService.getServiceName(DEFAULT_CACHE_CONTAINER,null),Cache.class,cache).setInitialMode(ServiceController.Mode.ON_DEMAND);
}
