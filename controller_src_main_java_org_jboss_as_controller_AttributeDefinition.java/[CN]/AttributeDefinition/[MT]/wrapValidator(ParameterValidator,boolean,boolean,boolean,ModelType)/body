{
  NillableOrExpressionParameterValidator result=null;
  if (toWrap == null) {
    if (type == ModelType.STRING) {
      toWrap=new StringLengthValidator(1,Integer.MAX_VALUE,allowNull,allowExpression);
    }
 else {
      toWrap=new ModelTypeValidator(type);
    }
  }
 else   if (toWrap instanceof NillableOrExpressionParameterValidator) {
    NillableOrExpressionParameterValidator current=(NillableOrExpressionParameterValidator)toWrap;
    if (allowExpression == current.isAllowExpression() && (!validateNull && current.getAllowNull() == null || allowNull == current.getAllowNull())) {
      result=current;
    }
 else {
      toWrap=current.getDelegate();
    }
  }
  if (result == null) {
    Boolean nullCheck=validateNull ? allowNull : null;
    result=new NillableOrExpressionParameterValidator(toWrap,nullCheck,allowExpression);
  }
  return result;
}
