{
  final ModelNode bindingResult=createSocketBinding(client);
  checkSuccess(bindingResult);
  final ModelNode connectorResult=createWebConnector(client);
  checkSuccess(connectorResult);
  try {
    InputStream in=null;
    try {
      final URLConnection conn=new URL("http://localhost:8181/").openConnection();
      conn.setDoInput(true);
      conn.connect();
      in=new BufferedInputStream(conn.getInputStream());
      int i=in.read();
      StringBuilder sb=new StringBuilder();
      while (i != -1) {
        sb.append((char)i);
        i=in.read();
      }
    }
 catch (    Exception ignore) {
    }
 finally {
      safeClose(in);
    }
    final ModelNode address=new ModelNode();
    address.add(HOST,"local");
    address.add(SERVER,"server-one");
    address.add(SUBSYSTEM,"web");
    address.add("connector","new");
    final ModelNode stats=new ModelNode();
    stats.get(OP).set(READ_ATTRIBUTE_OPERATION);
    stats.get(OP_ADDR).set(address);
    stats.get(NAME).set("requestCount");
    final ModelNode result=client.execute(stats);
    checkSuccess(result);
    System.out.println(result.get(RESULT));
  }
  finally {
    final ModelNode remove1=new ModelNode();
    remove1.get(OP).set(REMOVE);
    remove1.get(OP_ADDR).set(WC_ADDR);
    final ModelNode result1=client.execute(remove1);
    checkSuccess(result1);
    final ModelNode remove2=new ModelNode();
    remove2.get(OP).set(REMOVE);
    remove2.get(OP_ADDR).set(SB_ADDR);
    final ModelNode result2=client.execute(remove2);
    checkSuccess(result2);
  }
}
