{
  values.setRoles(ROLES);
  AddUser addUserState=new AddUser(consoleMock,values);
  AssertConsoleBuilder consoleBuilder=new AssertConsoleBuilder().expectedDisplayText(MESSAGES.addedUser(values.getUserName(),values.getPropertiesFiles().get(0).getAbsolutePath())).expectedDisplayText(AddPropertiesUser.NEW_LINE).expectedDisplayText(MESSAGES.addedRoles(values.getUserName(),values.getRoles(),values.getRoleFiles().get(0).getAbsolutePath())).expectedDisplayText(AddPropertiesUser.NEW_LINE);
  consoleMock.setResponses(consoleBuilder);
  addUserState.update(values);
  assertRolePropertyFile();
  assertUserPropertyFile();
  consoleBuilder.validate();
}
