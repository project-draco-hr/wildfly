{
  values.setRoles(ROLES);
  AddUser addUserState=new AddUser(consoleMock,values);
  AssertConsoleBuilder consoleBuilder=new AssertConsoleBuilder().expectedDisplayText(MESSAGES.addedUser(values.getUserName(),values.getPropertiesFiles().get(0).getCanonicalPath())).expectedDisplayText(AddPropertiesUser.NEW_LINE).expectedDisplayText(MESSAGES.addedRoles(values.getUserName(),values.getRoles(),values.getRoleFiles().get(0).getCanonicalPath())).expectedDisplayText(AddPropertiesUser.NEW_LINE);
  consoleMock.setResponses(consoleBuilder);
  addUserState.update(values);
  assertRolePropertyFile(USER_NAME);
  assertUserPropertyFile(USER_NAME);
  consoleBuilder.validate();
}
