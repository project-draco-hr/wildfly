{
switch (transition) {
case STARTING_to_UP:
{
      CommonDeployment deploymentMD=((AbstractDataSourceService)controller.getService()).getDeploymentMD();
      StatisticsPlugin jdbcStats=deploymentMD.getDataSources()[0].getStatistics();
      StatisticsPlugin poolStats=deploymentMD.getDataSources()[0].getPool().getStatistics();
      jdbcStats.setEnabled(statsEnabled);
      poolStats.setEnabled(statsEnabled);
      int jdbcStatsSize=jdbcStats.getNames().size();
      int poolStatsSize=poolStats.getNames().size();
      if (jdbcStatsSize > 0 || poolStatsSize > 0) {
        if (overrideRegistration != null) {
          if (jdbcStatsSize > 0) {
            ManagementResourceRegistration jdbcRegistration=overrideRegistration.registerSubModel(new StatisticsResourceDefinition(JDBC_STATISTICS,DataSourcesSubsystemProviders.RESOURCE_NAME,jdbcStats));
            jdbcRegistration.setRuntimeOnly(true);
            resource.registerChild(JDBC_STATISTICS,new PlaceholderResource.PlaceholderResourceEntry(JDBC_STATISTICS));
          }
          if (poolStatsSize > 0) {
            ManagementResourceRegistration poolRegistration=overrideRegistration.registerSubModel(new StatisticsResourceDefinition(POOL_STATISTICS,DataSourcesSubsystemProviders.RESOURCE_NAME,poolStats));
            poolRegistration.setRuntimeOnly(true);
            resource.registerChild(POOL_STATISTICS,new PlaceholderResource.PlaceholderResourceEntry(JDBC_STATISTICS));
          }
        }
      }
      break;
    }
case UP_to_STOP_REQUESTED:
{
    if (overrideRegistration != null) {
      overrideRegistration.unregisterSubModel(JDBC_STATISTICS);
      overrideRegistration.unregisterSubModel(POOL_STATISTICS);
    }
    if (resource.hasChild(JDBC_STATISTICS)) {
      resource.removeChild(JDBC_STATISTICS);
    }
    if (resource.hasChild(POOL_STATISTICS)) {
      resource.removeChild(POOL_STATISTICS);
    }
    break;
  }
}
}
