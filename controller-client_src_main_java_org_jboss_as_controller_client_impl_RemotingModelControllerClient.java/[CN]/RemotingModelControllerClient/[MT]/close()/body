{
synchronized (this) {
    closed=true;
    if (endpoint != null) {
      StreamUtils.safeClose(endpoint);
      endpoint=null;
    }
    if (strategy != null) {
      StreamUtils.safeClose(strategy);
      strategy=null;
    }
    try {
      super.shutdownNow();
    }
  finally {
      StreamUtils.safeClose(clientConfiguration);
    }
  }
}
