{
synchronized (this) {
    if (closed) {
      return;
    }
    closed=true;
    channelAssociation.shutdown();
    if (strategy != null) {
      StreamUtils.safeClose(strategy);
      strategy=null;
    }
    if (endpoint != null) {
      StreamUtils.safeClose(endpoint);
      endpoint=null;
    }
    channelAssociation.shutdownNow();
    try {
      channelAssociation.awaitCompletion(1,TimeUnit.SECONDS);
    }
 catch (    InterruptedException ignore) {
      Thread.currentThread().interrupt();
    }
 finally {
      StreamUtils.safeClose(clientConfiguration);
    }
  }
}
