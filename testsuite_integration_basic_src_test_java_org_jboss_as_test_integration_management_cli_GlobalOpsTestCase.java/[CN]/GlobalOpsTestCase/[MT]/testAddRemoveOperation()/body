{
  cli.sendLine("/socket-binding-group=standard-sockets/socket-binding=test:add(port=8181)");
  CLIOpResult result=cli.readAllAsOpResult();
  assertTrue(result.isIsOutcomeSuccess());
  cli.sendLine("/subsystem=undertow/server=default-server/http-listener=test-listener:add(socket-binding=test, enabled=true)");
  result=cli.readAllAsOpResult();
  assertTrue(result.isIsOutcomeSuccess());
  String cURL="http://" + url.getHost() + ":8181";
  String response=HttpRequest.get(cURL,10,TimeUnit.SECONDS);
  assertTrue("Invalid response: " + response,response.indexOf("JBoss") >= 0);
  cli.sendLine("/subsystem=undertow/server=default-server/http-listener=test-listener:remove{allow-resource-service-restart=true}");
  result=cli.readAllAsOpResult();
  assertTrue(result.isIsOutcomeSuccess());
  cli.sendLine("/socket-binding-group=standard-sockets/socket-binding=test:remove");
  result=cli.readAllAsOpResult();
  assertTrue(result.isIsOutcomeSuccess());
  Thread.sleep(5000);
  boolean failed=false;
  try {
    response=HttpRequest.get(cURL,10,TimeUnit.SECONDS);
  }
 catch (  Exception e) {
    failed=true;
  }
  assertTrue("Connector still live: " + response,failed);
}
