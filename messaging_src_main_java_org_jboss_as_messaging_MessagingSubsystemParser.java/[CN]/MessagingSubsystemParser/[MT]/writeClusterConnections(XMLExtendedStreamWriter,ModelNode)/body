{
  List<Property> properties=node.asPropertyList();
  if (!properties.isEmpty()) {
    writer.writeStartElement(Element.CLUSTER_CONNECTIONS.getLocalName());
    for (    final Property property : node.asPropertyList()) {
      writer.writeStartElement(Element.CLUSTER_CONNECTION.getLocalName());
      writer.writeAttribute(Attribute.NAME.getLocalName(),property.getName());
      final ModelNode cluster=property.getValue();
      for (      AttributeDefinition attribute : CommonAttributes.CLUSTER_CONNECTION_ATTRIBUTES) {
        if (attribute == CommonAttributes.ALLOW_DIRECT_CONNECTIONS_ONLY) {
          continue;
        }
        if (attribute == ConnectorRefsAttribute.CLUSTER_CONNECTION_CONNECTORS) {
          if (ConnectorRefsAttribute.CLUSTER_CONNECTION_CONNECTORS.isMarshallable(cluster)) {
            writer.writeStartElement(Element.STATIC_CONNECTORS.getLocalName());
            CommonAttributes.ALLOW_DIRECT_CONNECTIONS_ONLY.marshallAsAttribute(cluster,writer);
            ConnectorRefsAttribute.CLUSTER_CONNECTION_CONNECTORS.marshallAsElement(cluster,writer);
            writer.writeEndElement();
          }
 else           if (CommonAttributes.ALLOW_DIRECT_CONNECTIONS_ONLY.isMarshallable(cluster)) {
            writer.writeEmptyElement(Element.STATIC_CONNECTORS.getLocalName());
            CommonAttributes.ALLOW_DIRECT_CONNECTIONS_ONLY.marshallAsAttribute(cluster,writer);
          }
        }
 else         if (attribute == CommonAttributes.DISCOVERY_GROUP_NAME) {
          if (CommonAttributes.DISCOVERY_GROUP_NAME.isMarshallable(cluster)) {
            writer.writeStartElement(Element.DISCOVERY_GROUP_REF.getLocalName());
            CommonAttributes.DISCOVERY_GROUP_NAME.marshallAsAttribute(cluster,writer);
            writer.writeEndElement();
          }
        }
 else {
          attribute.marshallAsElement(property.getValue(),writer);
        }
      }
      writer.writeEndElement();
    }
    writer.writeEndElement();
  }
}
