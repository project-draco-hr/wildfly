{
  context.startSubsystemElement(Namespace.CURRENT.getUriString(),false);
  final ModelNode node=context.getModelNode();
  for (  AttributeDefinition simpleAttribute : CommonAttributes.SIMPLE_ROOT_RESOURCE_ATTRIBUTES) {
    simpleAttribute.marshallAsElement(node,writer);
  }
  writeAcceptors(writer,node);
  if (has(node,ADDRESS_SETTING)) {
    writeAddressSettings(writer,node.get(ADDRESS_SETTING));
  }
  if (has(node.get(ModelDescriptionConstants.PATH),BINDINGS_DIRECTORY)) {
    writeDirectory(writer,Element.BINDINGS_DIRECTORY,node.get(ModelDescriptionConstants.PATH));
  }
  writeConnectors(writer,node);
  if (node.hasDefined(BROADCAST_GROUP)) {
    writeBroadcastGroups(writer,node.get(BROADCAST_GROUP));
  }
  if (node.hasDefined(DISCOVERY_GROUP)) {
    writeDiscoveryGroups(writer,node.get(DISCOVERY_GROUP));
  }
  if (node.hasDefined(DIVERT)) {
    writeDiverts(writer,node.get(DIVERT));
  }
  if (node.hasDefined(CommonAttributes.BRIDGE)) {
    writeBridges(writer,node.get(CommonAttributes.BRIDGE));
  }
  if (node.hasDefined(CommonAttributes.CLUSTER_CONNECTION)) {
    writeClusterConnections(writer,node.get(CommonAttributes.CLUSTER_CONNECTION));
  }
  if (node.hasDefined(CommonAttributes.GROUPING_HANDLER)) {
    writeGroupingHandler(writer,node.get(GROUPING_HANDLER));
  }
  if (has(node.get(ModelDescriptionConstants.PATH),CommonAttributes.JOURNAL_DIRECTORY)) {
    writeDirectory(writer,Element.JOURNAL_DIRECTORY,node.get(ModelDescriptionConstants.PATH));
  }
  if (has(node.get(ModelDescriptionConstants.PATH),CommonAttributes.LARGE_MESSAGES_DIRECTORY)) {
    writeDirectory(writer,Element.LARGE_MESSAGES_DIRECTORY,node.get(ModelDescriptionConstants.PATH));
  }
  if (has(node.get(ModelDescriptionConstants.PATH),CommonAttributes.PAGING_DIRECTORY)) {
    writeDirectory(writer,Element.PAGING_DIRECTORY,node.get(ModelDescriptionConstants.PATH));
  }
  if (has(node,CommonAttributes.SECURITY_SETTING)) {
    writeSecuritySettings(writer,node.get(CommonAttributes.SECURITY_SETTING));
  }
  if (has(node,CommonAttributes.QUEUE)) {
    writeQueues(writer,node.get(CommonAttributes.QUEUE));
  }
  if (node.hasDefined(CommonAttributes.CONNECTOR_SERVICE)) {
    writeConnectorServices(writer,node.get(CommonAttributes.CONNECTOR_SERVICE));
  }
  if (node.has(CONNECTION_FACTORY) || node.has(POOLED_CONNECTION_FACTORY)) {
    writer.writeStartElement(JMS_CONNECTION_FACTORIES);
    if (node.has(CONNECTION_FACTORY)) {
      writeConnectionFactories(writer,node.get(CONNECTION_FACTORY));
    }
    if (node.has(POOLED_CONNECTION_FACTORY)) {
      writePooledConnectionFactories(writer,node.get(POOLED_CONNECTION_FACTORY));
    }
    writer.writeEndElement();
  }
  if (node.has(JMS_QUEUE) || node.has(JMS_TOPIC)) {
    writer.writeStartElement(JMS_DESTINATIONS);
    if (node.has(JMS_QUEUE)) {
      writeJmsQueues(writer,node.get(JMS_QUEUE));
    }
    if (node.has(JMS_TOPIC)) {
      writeTopics(writer,node.get(JMS_TOPIC));
    }
    writer.writeEndElement();
  }
  writer.writeEndElement();
}
