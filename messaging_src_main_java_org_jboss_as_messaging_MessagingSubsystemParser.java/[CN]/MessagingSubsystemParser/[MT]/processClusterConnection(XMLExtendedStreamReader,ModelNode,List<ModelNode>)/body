{
  requireSingleAttribute(reader,CommonAttributes.NAME);
  String name=reader.getAttributeValue(0);
  ModelNode bridgeAdd=org.jboss.as.controller.operations.common.Util.getEmptyOperation(ADD,address.clone().add(CommonAttributes.CLUSTER_CONNECTION,name));
  EnumSet<Element> required=EnumSet.of(Element.ADDRESS,Element.CONNECTOR_REF);
  Set<Element> seen=EnumSet.noneOf(Element.class);
  while (reader.hasNext() && reader.nextTag() != END_ELEMENT) {
    final Element element=Element.forName(reader.getLocalName());
    if (!seen.add(element)) {
      throw ParseUtils.duplicateNamedElement(reader,element.getLocalName());
    }
    required.remove(element);
switch (element) {
case FORWARD_WHEN_NO_CONSUMERS:
case MAX_HOPS:
case CONFIRMATION_WINDOW_SIZE:
      handleElementText(reader,element,bridgeAdd);
    break;
case ADDRESS:
{
    handleElementText(reader,element,CommonAttributes.CLUSTER_CONNECTION_ADDRESS.getName(),bridgeAdd);
    break;
  }
case CONNECTOR_REF:
{
  handleElementText(reader,element,"simple",bridgeAdd);
  break;
}
case USE_DUPLICATE_DETECTION:
case RETRY_INTERVAL:
handleElementText(reader,element,"cluster",bridgeAdd);
break;
case STATIC_CONNECTORS:
if (seen.contains(Element.DISCOVERY_GROUP_REF)) {
throw new XMLStreamException(String.format("Illegal element %s: cannot be used when %s is used",STATIC_CONNECTORS,DISCOVERY_GROUP_REF),reader.getLocation());
}
processStaticConnectors(reader,bridgeAdd,true);
break;
case DISCOVERY_GROUP_REF:
{
if (seen.contains(Element.STATIC_CONNECTORS)) {
throw new XMLStreamException(String.format("Illegal element %s: cannot be used when %s is used",DISCOVERY_GROUP_REF,STATIC_CONNECTORS),reader.getLocation());
}
final Location location=reader.getLocation();
final String groupRef=readStringAttributeElement(reader,DISCOVERY_GROUP_NAME.getXmlName());
DISCOVERY_GROUP_NAME.parseAndSetParameter(groupRef,bridgeAdd,location);
break;
}
default :
{
throw ParseUtils.unexpectedElement(reader);
}
}
}
if (!required.isEmpty()) {
missingRequired(reader,required);
}
updates.add(bridgeAdd);
}
