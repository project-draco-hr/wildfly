{
  final ServiceTarget target=container.subTarget();
  final StringConfigurationPersister persister=new StringConfigurationPersister(Collections.<ModelNode>emptyList(),new StandaloneXml(null,null));
  final ControlledProcessState processState=new ControlledProcessState(true);
  final ModelControllerService svc=new ModelControllerService(OperationContext.Type.MANAGEMENT,processState,persister);
  final ServiceBuilder<ModelController> builder=target.addService(Services.JBOSS_SERVER_CONTROLLER,svc);
  builder.install();
  svc.latch.await();
  this.controller=svc.getValue();
}
