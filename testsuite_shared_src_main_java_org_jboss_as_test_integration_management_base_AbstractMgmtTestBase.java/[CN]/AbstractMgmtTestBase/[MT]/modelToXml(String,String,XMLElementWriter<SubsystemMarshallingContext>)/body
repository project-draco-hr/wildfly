{
  final ModelNode address=new ModelNode();
  address.add("subsystem",subsystemName);
  address.protect();
  final ModelNode operation=new ModelNode();
  operation.get(OP).set("read-children-resources");
  operation.get("child-type").set(childType);
  operation.get(RECURSIVE).set(true);
  operation.get(OP_ADDR).set(address);
  final ModelNode result=executeOperation(operation);
  Assert.assertNotNull(result);
  ModelNode dsNode=new ModelNode();
  dsNode.get(childType).set(result);
  StringWriter strWriter=new StringWriter();
  XMLExtendedStreamWriter writer=XMLExtendedStreamWriterFactory.create(XMLOutputFactory.newInstance().createXMLStreamWriter(strWriter));
  parser.writeContent(writer,new SubsystemMarshallingContext(dsNode,writer));
  writer.flush();
  return strWriter.toString();
}
