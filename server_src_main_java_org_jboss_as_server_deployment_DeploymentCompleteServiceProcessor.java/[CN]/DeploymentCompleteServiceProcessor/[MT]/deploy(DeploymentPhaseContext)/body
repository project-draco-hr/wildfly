{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  if (deploymentUnit.getParent() == null) {
    for (    final DeploymentUnit subDeployment : deploymentUnit.getAttachmentList(Attachments.SUB_DEPLOYMENTS)) {
      deploymentUnit.addToAttachmentList(Attachments.DEPLOYMENT_COMPLETE_SERVICES,serviceName(subDeployment.getServiceName()));
    }
  }
  phaseContext.getServiceTarget().addService(serviceName(deploymentUnit.getServiceName()),Service.NULL).addDependencies(deploymentUnit.getAttachmentList(Attachments.DEPLOYMENT_COMPLETE_SERVICES)).install();
}
