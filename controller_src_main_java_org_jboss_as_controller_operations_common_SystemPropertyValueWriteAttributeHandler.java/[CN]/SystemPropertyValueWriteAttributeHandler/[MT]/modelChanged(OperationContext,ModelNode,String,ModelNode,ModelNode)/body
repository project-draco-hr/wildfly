{
  if (context.getType() == OperationContext.Type.SERVER) {
    context.addStep(new OperationStepHandler(){
      public void execute(      OperationContext context,      ModelNode operation){
        final String propertyName=PathAddress.pathAddress(operation.require(OP_ADDR)).getLastElement().getValue();
        final String propertyValue=newValue.isDefined() ? newValue.asString() : null;
        SecurityActions.setSystemProperty(propertyName,propertyValue);
        if (context.completeStep() == OperationContext.ResultAction.ROLLBACK) {
          if (currentValue.isDefined()) {
            SecurityActions.setSystemProperty(propertyName,currentValue.asString());
          }
 else {
            SecurityActions.clearSystemProperty(propertyName);
          }
        }
      }
    }
,OperationContext.Stage.RUNTIME);
  }
  context.completeStep();
}
