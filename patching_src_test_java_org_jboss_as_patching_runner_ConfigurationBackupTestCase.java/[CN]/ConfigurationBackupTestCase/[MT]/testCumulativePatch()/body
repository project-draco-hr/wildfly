{
  String patchID=randomString();
  String layerPatchID=randomString();
  File patchDir=mkdir(tempDir,patchID);
  String moduleName=randomString();
  ContentModification moduleAdded=ContentModificationUtils.addModule(patchDir,layerPatchID,moduleName);
  InstalledIdentity installedIdentity=loadInstalledIdentity();
  final PatchBuilder builder=PatchBuilder.create();
  builder.setPatchId(patchID).setDescription(randomString()).upgradeIdentity(installedIdentity.getIdentity().getName(),installedIdentity.getIdentity().getVersion(),productConfig.getProductVersion() + "-CP1").getParent().upgradeElement(layerPatchID,BASE,false).addContentModification(moduleAdded);
  Patch patch=builder.build();
  checkApplyPatchAndRollbackRestoresBackupConfiguration(patchDir,patch);
}
