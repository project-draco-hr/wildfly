{
  String patchID=randomString();
  String layerPatchID=randomString();
  File patchDir=mkdir(tempDir,patchID);
  String moduleName=randomString();
  ContentModification moduleAdded=ContentModificationUtils.addModule(patchDir,layerPatchID,moduleName);
  InstalledIdentity installedIdentity=loadInstalledIdentity();
  Patch patch=PatchBuilder.create().setPatchId(patchID).setDescription(randomString()).setOneOffType(productConfig.getProductVersion()).setIdentity(new IdentityImpl(installedIdentity.getIdentity().getName(),installedIdentity.getIdentity().getVersion())).addElement(new PatchElementImpl(layerPatchID).setProvider(new PatchElementProviderImpl(BASE,"1.0.1",false)).setNoUpgrade().addContentModification(moduleAdded)).build();
  checkApplyPatchAndRollbackRestoresBackupConfiguration(patchDir,patch);
}
