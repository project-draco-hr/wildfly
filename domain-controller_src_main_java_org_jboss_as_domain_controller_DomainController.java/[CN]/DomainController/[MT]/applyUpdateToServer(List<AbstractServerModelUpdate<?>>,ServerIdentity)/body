{
  DomainControllerClient client=clients.get(server.getHostName());
  List<UpdateResultHandlerResponse<?>> responses=new ArrayList<UpdateResultHandlerResponse<?>>();
  if (client == null) {
    UpdateResultHandlerResponse<?> failure=UpdateResultHandlerResponse.createFailureResponse(new IllegalStateException("unknown host " + server.getHostName()));
    for (int i=0; i < updates.size(); i++) {
      responses.add(failure);
    }
  }
 else {
    List<ModelUpdateResponse<?>> rsps=client.updateServerModel(updates,server.getServerName());
    for (    ModelUpdateResponse<?> rsp : rsps) {
      if (rsp.isSuccess()) {
        responses.add(UpdateResultHandlerResponse.createSuccessResponse(rsp.getResult()));
      }
 else {
        responses.add(UpdateResultHandlerResponse.createFailureResponse(rsp.getUpdateException()));
      }
    }
  }
  return responses;
}
