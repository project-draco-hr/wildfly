{
  final File domainXML=new File(domainConfigDir,"domain.xml");
  if (!domainXML.exists()) {
    throw new IllegalStateException("File " + domainXML.getAbsolutePath() + " does not exist. A DomainController cannot be launched without a valid domain.xml");
  }
 else   if (!domainXML.canWrite()) {
    throw new IllegalStateException("File " + domainXML.getAbsolutePath() + " is not writeable. A DomainController cannot be launched without a writable domain.xml");
  }
  try {
    final ParseResult<DomainModel> parseResult=new ParseResult<DomainModel>();
    mapper.parseDocument(parseResult,XMLInputFactory.newInstance().createXMLStreamReader(new BufferedReader(new FileReader(domainXML))));
    return parseResult.getResult();
  }
 catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    throw new RuntimeException("Caught exception during processing of domain.xml",e);
  }
}
