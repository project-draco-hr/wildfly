{
  boolean done=false;
  log.infof("DomainController listening on %d for ServerManager requests.",serverSocket.getLocalPort());
  while (!done) {
    try {
      final Socket socket=serverSocket.accept();
      final String id=String.format("%s:%d",socket.getInetAddress().getHostAddress(),socket.getPort());
      final ServerManagerConnection connection=new ServerManagerConnection(id,domainController,ServerManagerCommunicationService.this,socket);
      if (serverManagerConnections.putIfAbsent(id,connection) != null) {
      }
      executor.execute(connection);
    }
 catch (    SocketException e) {
      log.info("Closed server socket");
      done=true;
    }
catch (    IOException e) {
      e.printStackTrace();
    }
  }
}
