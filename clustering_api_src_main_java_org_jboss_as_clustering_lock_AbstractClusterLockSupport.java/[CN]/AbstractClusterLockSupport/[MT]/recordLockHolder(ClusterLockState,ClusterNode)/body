{
  if (lockState.holder != null) {
    Set<ClusterLockState> memberLocks=getLocksHeldByMember(lockState.holder);
synchronized (memberLocks) {
      memberLocks.remove(lockState);
    }
  }
  if (me.equals(caller) == false) {
    Set<ClusterLockState> memberLocks=getLocksHeldByMember(caller);
synchronized (memberLocks) {
      memberLocks.add(lockState);
    }
  }
  lockState.lock(caller);
}
