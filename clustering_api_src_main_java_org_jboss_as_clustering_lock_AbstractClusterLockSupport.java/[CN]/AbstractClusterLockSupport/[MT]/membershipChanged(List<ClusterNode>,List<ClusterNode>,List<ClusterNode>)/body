{
  this.members.clear();
  this.members.addAll(allMembers);
  Set<ClusterNode> toClean=lockStatesByOwner.keySet();
  toClean.removeAll(this.members);
  for (  ClusterNode deadMember : toClean) {
    Set<ClusterLockState> deadMemberLocks=lockStatesByOwner.remove(deadMember);
    if (deadMemberLocks != null) {
synchronized (deadMemberLocks) {
        Set<ClusterLockState> copy=new HashSet<ClusterLockState>(deadMemberLocks);
        for (        ClusterLockState lockState : copy) {
          releaseRemoteLock(lockState.lockId,deadMember);
        }
      }
    }
  }
}
