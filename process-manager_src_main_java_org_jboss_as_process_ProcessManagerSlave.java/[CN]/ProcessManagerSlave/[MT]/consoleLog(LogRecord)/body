{
  final StringBuilder b=new StringBuilder();
  b.append(Command.LOG).append('\0');
synchronized (output) {
    final ByteArrayOutputStream baos=new ByteArrayOutputStream();
    final ModularObjectOutputStream oos=ModularObjectOutputStream.create(baos);
    oos.writeObject(record);
    oos.close();
    final byte[] message=baos.toByteArray();
    StreamUtils.writeString(output,b.toString());
    StreamUtils.writeInt(output,message.length);
    output.write(message);
    StreamUtils.writeChar(output,'\n');
    output.flush();
  }
}
