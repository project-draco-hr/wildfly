{
  ArquillianConfig arqConfig=context.getAttachment(ArquillianConfig.KEY);
  if (arqConfig == null)   return;
  BatchBuilder batchBuilder=context.getBatchBuilder();
  DeploymentTrackerService tracker=new DeploymentTrackerService(arqConfig);
  ServiceBuilder<Object> serviceBuilder=batchBuilder.addService(SERVICE_NAME_BASE.append(context.getName()),tracker);
  serviceBuilder.addDependency(ArquillianService.SERVICE_NAME,ArquillianService.class,tracker.injectedArquillianService);
  Deployment osgiDeployment=OSGiDeploymentAttachment.getAttachment(context);
  if (osgiDeployment != null) {
    ServiceName serviceName=OSGiDeploymentService.getServiceName(context.getName());
    serviceBuilder.addDependency(serviceName);
    osgiDeployment.setAutoStart(false);
  }
  serviceBuilder.install();
}
