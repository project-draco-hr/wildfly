{
  ArquillianConfig arqConfig=deploymentUnit.getAttachment(ArquillianConfig.KEY);
  if (arqConfig == null)   return;
  DeploymentTrackerService tracker=new DeploymentTrackerService(arqConfig);
  ServiceName serviceName=DeploymentTrackerService.getServiceName(deploymentUnit);
  ServiceBuilder<ArquillianConfig> serviceBuilder=serviceTarget.addService(serviceName,tracker);
  serviceBuilder.addDependency(ArquillianService.SERVICE_NAME);
  Deployment osgiDeployment=OSGiDeploymentAttachment.getDeployment(deploymentUnit);
  if (osgiDeployment != null) {
    ServiceName dependencyName=BundleInstallService.getServiceName(deploymentUnit.getName());
    serviceBuilder.addDependency(dependencyName);
    osgiDeployment.setAutoStart(false);
  }
  serviceBuilder.install();
}
