{
  List<CommonConnDef> connDefs=new ArrayList<CommonConnDef>();
  for (  ModelNode conDefNode : parentNode.get(CONNECTIONDEFINITIONS).asList()) {
    Map<String,String> configProperties=new HashMap<String,String>(conDefNode.get(CONFIG_PROPERTIES).asList().size());
    for (    ModelNode property : conDefNode.get(CONFIG_PROPERTIES).asList()) {
      configProperties.put(property.asProperty().getName(),property.asString());
    }
    String className=getStringIfSetOrGetDefault(conDefNode,CLASS_NAME,null);
    String jndiName=getStringIfSetOrGetDefault(conDefNode,JNDI_NAME,null);
    String poolName=getStringIfSetOrGetDefault(conDefNode,POOL_NAME,null);
    boolean enabled=getBooleanIfSetOrGetDefault(conDefNode,ENABLED,false);
    boolean useJavaContext=getBooleanIfSetOrGetDefault(conDefNode,USE_JAVA_CONTEXT,false);
    boolean useCcm=getBooleanIfSetOrGetDefault(conDefNode,USE_CCM,true);
    Integer maxPoolSize=getIntIfSetOrGetDefault(conDefNode,MAX_POOL_SIZE,null);
    Integer minPoolSize=getIntIfSetOrGetDefault(conDefNode,MIN_POOL_SIZE,null);
    boolean prefill=getBooleanIfSetOrGetDefault(conDefNode,POOL_PREFILL,false);
    boolean useStrictMin=getBooleanIfSetOrGetDefault(conDefNode,POOL_USE_STRICT_MIN,false);
    final FlushStrategy flushStrategy=conDefNode.hasDefined(FLUSH_STRATEGY) ? FlushStrategy.valueOf(conDefNode.get(FLUSH_STRATEGY).asString()) : FlushStrategy.FAILING_CONNECTION_ONLY;
    Integer allocationRetry=getIntIfSetOrGetDefault(conDefNode,ALLOCATION_RETRY,null);
    Long allocationRetryWaitMillis=getLongIfSetOrGetDefault(conDefNode,ALLOCATION_RETRY_WAIT_MILLIS,null);
    Long blockingTimeoutMillis=getLongIfSetOrGetDefault(conDefNode,BLOCKING_TIMEOUT_WAIT_MILLIS,null);
    Long idleTimeoutMinutes=getLongIfSetOrGetDefault(conDefNode,IDLETIMEOUTMINUTES,null);
    Integer xaResourceTimeout=getIntIfSetOrGetDefault(conDefNode,XA_RESOURCE_TIMEOUT,null);
    CommonTimeOut timeOut=new CommonTimeOutImpl(blockingTimeoutMillis,idleTimeoutMinutes,allocationRetry,allocationRetryWaitMillis,xaResourceTimeout);
    CommonPool pool=new CommonPoolImpl(minPoolSize,maxPoolSize,prefill,useStrictMin,flushStrategy);
    String securityDomain=getStringIfSetOrGetDefault(conDefNode,SECURITY_DOMAIN,null);
    String securityDomainAndApplication=getStringIfSetOrGetDefault(conDefNode,SECURITY_DOMAIN_AND_APPLICATION,null);
    boolean application=getBooleanIfSetOrGetDefault(conDefNode,APPLICATION,false);
    CommonSecurity security=new CommonSecurityImpl(securityDomain,securityDomainAndApplication,application);
    Long backgroundValidationMinutes=getLongIfSetOrGetDefault(conDefNode,BACKGROUNDVALIDATIONMINUTES,null);
    boolean backgroundValidation=getBooleanIfSetOrGetDefault(conDefNode,BACKGROUNDVALIDATION,false);
    boolean useFastFail=getBooleanIfSetOrGetDefault(conDefNode,USE_FAST_FAIL,false);
    CommonValidation validation=new CommonValidationImpl(backgroundValidation,backgroundValidationMinutes,useFastFail);
    final String recoveryUsername=getStringIfSetOrGetDefault(conDefNode,RECOVERY_USERNAME,null);
    final String recoveryPassword=getStringIfSetOrGetDefault(conDefNode,RECOVERY_PASSWORD,null);
    final String recoverySecurityDomain=getStringIfSetOrGetDefault(conDefNode,RECOVERY_SECURITY_DOMAIN,null);
    final Credential credential=new CredentialImpl(recoveryUsername,recoveryPassword,recoverySecurityDomain);
    final Extension recoverPlugin=extractExtension(conDefNode,RECOVERLUGIN_CLASSNAME,RECOVERLUGIN_PROPERTIES);
    final boolean noRecovery=getBooleanIfSetOrGetDefault(conDefNode,NO_RECOVERY,false);
    Recovery recovery=new Recovery(credential,recoverPlugin,noRecovery);
    CommonConnDef connectionDefinition=new CommonConnDefImpl(configProperties,className,jndiName,poolName,enabled,useJavaContext,useCcm,pool,timeOut,validation,security,recovery);
    connDefs.add(connectionDefinition);
  }
  return connDefs;
}
