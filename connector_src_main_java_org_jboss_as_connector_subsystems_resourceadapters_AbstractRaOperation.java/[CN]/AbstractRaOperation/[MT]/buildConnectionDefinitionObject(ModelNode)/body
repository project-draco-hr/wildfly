{
  List<CommonConnDef> connDefs=new ArrayList<CommonConnDef>();
  if (parentNode.hasDefined(CONNECTIONDEFINITIONS)) {
    for (    ModelNode conDefNode : parentNode.get(CONNECTIONDEFINITIONS).asList()) {
      Map<String,String> configProperties=null;
      if (conDefNode.hasDefined(CONFIG_PROPERTIES)) {
        configProperties=new HashMap<String,String>(conDefNode.get(CONFIG_PROPERTIES).asList().size());
        for (        ModelNode property : conDefNode.get(CONFIG_PROPERTIES).asList()) {
          configProperties.put(property.asProperty().getName(),property.asProperty().getValue().asString());
        }
      }
      String className=getStringIfSetOrGetDefault(conDefNode,CLASS_NAME,null);
      String jndiName=getStringIfSetOrGetDefault(conDefNode,JNDI_NAME,null);
      String poolName=getStringIfSetOrGetDefault(conDefNode,POOL_NAME,null);
      boolean enabled=getBooleanIfSetOrGetDefault(conDefNode,ENABLED,Defaults.ENABLED);
      boolean useJavaContext=getBooleanIfSetOrGetDefault(conDefNode,USE_JAVA_CONTEXT,Defaults.USE_JAVA_CONTEXT);
      boolean useCcm=getBooleanIfSetOrGetDefault(conDefNode,USE_CCM,Defaults.USE_CCM);
      Integer maxPoolSize=getIntIfSetOrGetDefault(conDefNode,MAX_POOL_SIZE,Defaults.MAX_POOL_SIZE);
      Integer minPoolSize=getIntIfSetOrGetDefault(conDefNode,MIN_POOL_SIZE,Defaults.MIN_POOL_SIZE);
      boolean prefill=getBooleanIfSetOrGetDefault(conDefNode,POOL_PREFILL,Defaults.PREFILL);
      boolean useStrictMin=getBooleanIfSetOrGetDefault(conDefNode,POOL_USE_STRICT_MIN,Defaults.USE_STRICT_MIN);
      final FlushStrategy flushStrategy=conDefNode.hasDefined(FLUSH_STRATEGY) ? FlushStrategy.valueOf(conDefNode.get(FLUSH_STRATEGY).asString()) : Defaults.FLUSH_STRATEGY;
      Integer allocationRetry=getIntIfSetOrGetDefault(conDefNode,ALLOCATION_RETRY,null);
      Long allocationRetryWaitMillis=getLongIfSetOrGetDefault(conDefNode,ALLOCATION_RETRY_WAIT_MILLIS,null);
      Long blockingTimeoutMillis=getLongIfSetOrGetDefault(conDefNode,BLOCKING_TIMEOUT_WAIT_MILLIS,null);
      Long idleTimeoutMinutes=getLongIfSetOrGetDefault(conDefNode,IDLETIMEOUTMINUTES,null);
      Integer xaResourceTimeout=getIntIfSetOrGetDefault(conDefNode,XA_RESOURCE_TIMEOUT,null);
      CommonTimeOut timeOut=new CommonTimeOutImpl(blockingTimeoutMillis,idleTimeoutMinutes,allocationRetry,allocationRetryWaitMillis,xaResourceTimeout);
      CommonPool pool=new CommonPoolImpl(minPoolSize,maxPoolSize,prefill,useStrictMin,flushStrategy);
      String securityDomain=getStringIfSetOrGetDefault(conDefNode,SECURITY_DOMAIN,null);
      String securityDomainAndApplication=getStringIfSetOrGetDefault(conDefNode,SECURITY_DOMAIN_AND_APPLICATION,null);
      Boolean application=getBooleanIfSetOrGetDefault(conDefNode,APPLICATION,null);
      CommonSecurity security=null;
      if (securityDomain != null && securityDomainAndApplication != null && application != null) {
        if (application == null)         application=Defaults.APPLICATION_MANAGED_SECURITY;
        security=new CommonSecurityImpl(securityDomain,securityDomainAndApplication,application);
      }
      Long backgroundValidationMillis=getLongIfSetOrGetDefault(conDefNode,BACKGROUNDVALIDATIONMINUTES_REMOVE,null);
      backgroundValidationMillis=getLongIfSetOrGetDefault(conDefNode,BACKGROUNDVALIDATIONMILLIS,null);
      boolean backgroundValidation=getBooleanIfSetOrGetDefault(conDefNode,BACKGROUNDVALIDATION,Defaults.BACKGROUND_VALIDATION);
      boolean useFastFail=getBooleanIfSetOrGetDefault(conDefNode,USE_FAST_FAIL,Defaults.USE_FAST_FAIl);
      CommonValidation validation=new CommonValidationImpl(backgroundValidation,backgroundValidationMillis,useFastFail);
      final String recoveryUsername=getStringIfSetOrGetDefault(conDefNode,RECOVERY_USERNAME,null);
      final String recoveryPassword=getStringIfSetOrGetDefault(conDefNode,RECOVERY_PASSWORD,null);
      final String recoverySecurityDomain=getStringIfSetOrGetDefault(conDefNode,RECOVERY_SECURITY_DOMAIN,null);
      final Credential credential=new CredentialImpl(recoveryUsername,recoveryPassword,recoverySecurityDomain);
      final Extension recoverPlugin=extractExtension(conDefNode,RECOVERLUGIN_CLASSNAME,RECOVERLUGIN_PROPERTIES);
      final boolean noRecovery=getBooleanIfSetOrGetDefault(conDefNode,NO_RECOVERY,false);
      Recovery recovery=new Recovery(credential,recoverPlugin,noRecovery);
      CommonConnDef connectionDefinition=new CommonConnDefImpl(configProperties,className,jndiName,poolName,enabled,useJavaContext,useCcm,pool,timeOut,validation,security,recovery);
      connDefs.add(connectionDefinition);
    }
  }
  return connDefs;
}
