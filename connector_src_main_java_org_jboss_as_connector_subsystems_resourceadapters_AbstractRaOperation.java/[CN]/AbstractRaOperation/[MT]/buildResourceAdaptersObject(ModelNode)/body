{
  List<ResourceAdapter> resourceAdapters=new ArrayList<ResourceAdapter>();
  Map<String,String> configProperties=null;
  if (operation.hasDefined(CONFIG_PROPERTIES)) {
    configProperties=new HashMap<String,String>(operation.get(CONFIG_PROPERTIES).asList().size());
    for (    ModelNode property : operation.get(CONFIG_PROPERTIES).asList()) {
      configProperties.put(property.asProperty().getName(),property.asProperty().getValue().asString());
    }
  }
  String archive=getStringIfSetOrGetDefault(operation,ARCHIVE,null);
  TransactionSupportEnum transactionSupport=operation.hasDefined(TRANSACTIONSUPPORT) ? TransactionSupportEnum.valueOf(operation.get(TRANSACTIONSUPPORT).asString()) : null;
  String bootstrapContext=getStringIfSetOrGetDefault(operation,BOOTSTRAPCONTEXT,null);
  List<String> beanValidationGroups=null;
  if (operation.hasDefined(BEANVALIDATIONGROUPS)) {
    beanValidationGroups=new ArrayList<String>(operation.get(BEANVALIDATIONGROUPS).asList().size());
    for (    ModelNode beanValidtion : operation.get(BEANVALIDATIONGROUPS).asList()) {
      beanValidationGroups.add(beanValidtion.asString());
    }
  }
  ResourceAdapter ra;
  try {
    ra=new ResourceAdapterImpl(archive,transactionSupport,buildConnectionDefinitionObject(operation),buildAdminObjects(operation),configProperties,beanValidationGroups,bootstrapContext);
  }
 catch (  ValidateException e) {
    throw new OperationFailedException(e,operation);
  }
  resourceAdapters.add(ra);
  return new ModifiableResourceAdaptors(resourceAdapters);
}
