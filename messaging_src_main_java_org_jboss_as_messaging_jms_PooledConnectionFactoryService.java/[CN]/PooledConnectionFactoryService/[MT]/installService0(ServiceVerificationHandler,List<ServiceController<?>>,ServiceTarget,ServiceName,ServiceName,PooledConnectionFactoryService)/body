{
  ServiceBuilder serviceBuilder=serviceTarget.addService(serviceName,service).addDependency(TxnServices.JBOSS_TXN_TRANSACTION_MANAGER,service.transactionManager).addDependency(hqServiceName,HornetQServer.class,service.hornetQService).addDependency(HornetQActivationService.getHornetQActivationServiceName(hqServiceName)).addDependency(JMSServices.getJmsManagerBaseServiceName(hqServiceName)).setInitialMode(ServiceController.Mode.PASSIVE);
  if (verificationHandler != null) {
    serviceBuilder.addListener(verificationHandler);
  }
  final ServiceController<Void> controller=serviceBuilder.install();
  if (newControllers != null) {
    newControllers.add(controller);
  }
}
