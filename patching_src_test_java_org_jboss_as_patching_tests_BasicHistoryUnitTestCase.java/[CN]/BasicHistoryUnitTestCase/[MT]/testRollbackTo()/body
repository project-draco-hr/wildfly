{
  final PatchingTestBuilder test=createDefaultBuilder();
  final byte[] existingHash=new byte[20];
  final byte[] resultingHash=Arrays.copyOf(existingHash,existingHash.length);
  final PatchingTestStepBuilder oop1=test.createStepBuilder();
  oop1.setPatchId("oop1").oneOffPatchIdentity(PRODUCT_VERSION).oneOffPatchElement("base-oop1","base",false).addModuleWithRandomContent("org.jboss.test",existingHash);
  apply(oop1);
  final PatchingTestStepBuilder oop2=test.createStepBuilder();
  oop2.setPatchId("oop2").oneOffPatchIdentity(PRODUCT_VERSION).oneOffPatchElement("base-oop2","base",false).updateModuleWithRandomContent("org.jboss.test",existingHash,resultingHash);
  apply(oop2);
  rollback(oop1,ContentVerificationPolicy.STRICT,PatchStepAssertions.NONE,true);
}
