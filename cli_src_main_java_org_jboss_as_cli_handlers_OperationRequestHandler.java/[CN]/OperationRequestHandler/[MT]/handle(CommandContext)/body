{
  ModelControllerClient client=ctx.getModelControllerClient();
  if (client == null) {
    throw new CommandFormatException("You are disconnected at the moment." + " Type 'connect' to connect to the server" + " or 'help' for the list of supported commands.");
  }
  ModelNode request=(ModelNode)ctx.get("OP_REQ");
  if (request == null) {
    throw new CommandFormatException("Parsed request isn't available.");
  }
  try {
    validateRequest(ctx,request);
  }
 catch (  CommandFormatException e) {
    throw new CommandFormatException(e.getLocalizedMessage());
  }
  try {
    final ModelNode result=client.execute(request);
    if (Util.isSuccess(result)) {
      ctx.printLine(result.toString());
    }
 else {
      throw new CommandFormatException(result.toString());
    }
  }
 catch (  NoSuchElementException e) {
    throw new CommandFormatException("ModelNode request is incomplete: " + e.getMessage());
  }
catch (  CancellationException e) {
    throw new CommandFormatException("The result couldn't be retrieved (perhaps the task was cancelled: " + e.getLocalizedMessage());
  }
catch (  IOException e) {
    ctx.disconnectController();
    throw new CommandFormatException("Communication error: " + e.getLocalizedMessage());
  }
catch (  RuntimeException e) {
    throw new CommandFormatException("Failed to execute operation.",e);
  }
}
