{
  acquireOnStart=new AcquireOnStart();
  ServiceController<?> controller=context.getController();
  try {
    ServiceBuilder<ManagedReferenceFactory> serviceBuilder=context.getController().getServiceContainer().addService(binderName,binder);
    serviceBuilder.addDependency(namingStoreName,NamingStore.class,binder.getNamingStoreInjector());
    serviceBuilder.addInjectionValue(binder.getManagedObjectInjector(),managedReferenceFactory);
    serviceBuilder.addListener(acquireOnStart);
    serviceBuilder.addListener(serviceVerificationHandler);
    serviceBuilder.install();
  }
 catch (  RuntimeException e) {
    @SuppressWarnings("unchecked") ServiceController<ManagedReferenceFactory> registered=(ServiceController<ManagedReferenceFactory>)controller.getServiceContainer().getService(binderName);
    if (registered == null)     throw e;
    BinderService service=(BinderService)registered.getService();
    if (!service.getSource().equals(binder.getSource()))     throw new IllegalArgumentException("Incompatible conflicting binding at " + name + " source: "+ binder.getSource());
    registered.addListener(acquireOnStart);
  }
}
