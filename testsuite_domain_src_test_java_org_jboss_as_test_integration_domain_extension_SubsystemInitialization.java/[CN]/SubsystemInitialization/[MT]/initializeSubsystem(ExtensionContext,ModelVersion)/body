{
  final SubsystemRegistration subsystem=context.registerSubsystem(subsystemName,version.getMajor(),version.getMinor());
  final ManagementResourceRegistration registration=subsystem.registerSubsystemModel(definition);
  registration.registerReadWriteAttribute(TEST_ATTRIBUTE,null,new BasicAttributeWriteHandler(TEST_ATTRIBUTE));
  final AttributeDefinition integer=SimpleAttributeDefinitionBuilder.create("int",ModelType.INT).setAllowExpression(allowExpressions).build();
  final AttributeDefinition string=SimpleAttributeDefinitionBuilder.create("string",ModelType.STRING).setAllowExpression(allowExpressions).build();
  registration.registerReadWriteAttribute(integer,null,new BasicAttributeWriteHandler(integer));
  registration.registerReadWriteAttribute(string,null,new BasicAttributeWriteHandler(string));
  return new RegistrationResult(){
    @Override public SubsystemRegistration getSubsystemRegistration(){
      return subsystem;
    }
    @Override public ManagementResourceRegistration getResourceRegistration(){
      return registration;
    }
  }
;
}
