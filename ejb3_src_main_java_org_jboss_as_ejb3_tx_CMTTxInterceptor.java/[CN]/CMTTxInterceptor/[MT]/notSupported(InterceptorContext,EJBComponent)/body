{
  final TransactionManager tm=component.getTransactionManager();
  Transaction tx=tm.getTransaction();
  if (tx != null) {
    tm.suspend();
    try {
      return invokeInNoTx(invocation);
    }
 catch (    Throwable e) {
      handleExceptionInNoTx(invocation,e,component);
    }
 finally {
      tm.resume(tx);
    }
  }
 else {
    try {
      return invokeInNoTx(invocation);
    }
 catch (    Throwable e) {
      handleExceptionInNoTx(invocation,e,component);
    }
  }
  throw new RuntimeException("UNREACHABLE");
}
