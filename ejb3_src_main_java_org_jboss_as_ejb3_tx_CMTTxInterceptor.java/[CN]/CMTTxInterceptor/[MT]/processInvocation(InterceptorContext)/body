{
  final EJBComponent component=(EJBComponent)invocation.getPrivateData(Component.class);
  MethodIntf methodIntf=invocation.getPrivateData(MethodIntf.class);
  if (methodIntf == null) {
    final ComponentView componentView=invocation.getPrivateData(ComponentView.class);
    if (componentView != null) {
      methodIntf=componentView.getPrivateData(MethodIntf.class);
    }
 else {
      methodIntf=MethodIntf.BEAN;
    }
  }
  final TransactionAttributeType attr=component.getTransactionAttributeType(methodIntf,invocation.getMethod());
switch (attr) {
case MANDATORY:
    return mandatory(invocation,component);
case NEVER:
  return never(invocation,component);
case NOT_SUPPORTED:
return notSupported(invocation,component);
case REQUIRED:
return required(invocation,component);
case REQUIRES_NEW:
return requiresNew(invocation,component);
case SUPPORTS:
return supports(invocation,component);
default :
throw new IllegalStateException("Unexpected tx attribute " + attr + " on "+ invocation);
}
}
