{
  final ServiceName endpointName=ManagementRemotingServices.MANAGEMENT_ENDPOINT;
  ManagementRemotingServices.installRemotingEndpoint(serviceTarget,ManagementRemotingServices.MANAGEMENT_ENDPOINT,SecurityActions.getSystemProperty(ServerEnvironment.NODE_NAME),EndpointService.EndpointType.MANAGEMENT,OptionMap.create(RemotingOptions.RECEIVE_WINDOW_SIZE,ProtocolChannelClient.Configuration.WINDOW_SIZE),null,null);
  final int port=managementSocket.getPort();
  final String host=managementSocket.getAddress().getHostAddress();
  HostControllerConnectionService service=new HostControllerConnectionService(host,port,serverName,serverProcessName,authKey);
  serviceTarget.addService(HostControllerConnectionService.SERVICE_NAME,service).addDependency(endpointName,Endpoint.class,service.getEndpointInjector()).addDependency(ControlledProcessStateService.SERVICE_NAME,ControlledProcessStateService.class,service.getProcessStateServiceInjectedValue()).setInitialMode(ServiceController.Mode.ACTIVE).install();
}
