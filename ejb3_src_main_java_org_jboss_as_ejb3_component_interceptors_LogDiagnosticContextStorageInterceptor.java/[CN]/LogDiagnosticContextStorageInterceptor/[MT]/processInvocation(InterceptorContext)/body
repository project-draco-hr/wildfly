{
  if (MDC.getMap() != null) {
    context.putPrivateData(KEY,new StoredLogDiagnosticContext(MDC.getMap(),NDC.get()));
    try {
      return context.proceed();
    }
  finally {
      context.putPrivateData(KEY,null);
    }
  }
 else {
    return context.proceed();
  }
}
