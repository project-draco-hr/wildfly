{
  final ModelNode model=context.readModel(PathAddress.EMPTY_ADDRESS);
  performRemove(context,operation,model);
  if (requiresRuntime()) {
    if (requiresRuntime()) {
      if (context.getType() == NewOperationContext.Type.SERVER) {
        context.addStep(new NewStepHandler(){
          public void execute(          NewOperationContext context,          ModelNode operation) throws OperationFailedException {
            performRuntime(context,operation,model);
            if (context.completeStep() == NewOperationContext.ResultAction.ROLLBACK) {
              recoverServices(context,operation,model);
            }
          }
        }
,NewOperationContext.Stage.RUNTIME);
      }
    }
  }
  context.completeStep();
}
