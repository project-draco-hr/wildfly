{
  context.startSubsystemElement(InfinispanSchema.CURRENT.getNamespaceUri(),false);
  ModelNode model=context.getModelNode();
  if (model.isDefined()) {
    if (model.hasDefined(CacheContainerResourceDefinition.WILDCARD_PATH.getKey())) {
      for (      Property entry : model.get(CacheContainerResourceDefinition.WILDCARD_PATH.getKey()).asPropertyList()) {
        String containerName=entry.getName();
        ModelNode container=entry.getValue();
        writer.writeStartElement(Element.CACHE_CONTAINER.getLocalName());
        writer.writeAttribute(Attribute.NAME.getLocalName(),containerName);
        writeAttribute(writer,container,CacheContainerResourceDefinition.DEFAULT_CACHE);
        writeAttribute(writer,container,CacheContainerResourceDefinition.EVICTION_EXECUTOR);
        writeAttribute(writer,container,CacheContainerResourceDefinition.JNDI_NAME);
        writeAttribute(writer,container,CacheContainerResourceDefinition.LISTENER_EXECUTOR);
        writeAttribute(writer,container,CacheContainerResourceDefinition.REPLICATION_QUEUE_EXECUTOR);
        writeAttribute(writer,container,CacheContainerResourceDefinition.START);
        writeAttribute(writer,container,CacheContainerResourceDefinition.MODULE);
        writeAttribute(writer,container,CacheContainerResourceDefinition.STATISTICS_ENABLED);
        writeAttribute(writer,container,CacheContainerResourceDefinition.ALIASES);
        if (container.hasDefined(TransportResourceDefinition.PATH.getKey())) {
          writer.writeStartElement(Element.TRANSPORT.getLocalName());
          ModelNode transport=container.get(TransportResourceDefinition.PATH.getKeyValuePair());
          writeAttribute(writer,transport,TransportResourceDefinition.CHANNEL);
          writeAttribute(writer,transport,TransportResourceDefinition.EXECUTOR);
          writeAttribute(writer,transport,TransportResourceDefinition.LOCK_TIMEOUT);
          writer.writeEndElement();
        }
        if (container.hasDefined(CacheType.LOCAL.pathElement().getKey())) {
          for (          Property property : container.get(CacheType.LOCAL.pathElement().getKey()).asPropertyList()) {
            ModelNode cache=property.getValue();
            writer.writeStartElement(Element.LOCAL_CACHE.getLocalName());
            writeCacheAttributes(writer,property.getName(),cache);
            writeCacheElements(writer,cache);
            writer.writeEndElement();
          }
        }
        if (container.hasDefined(CacheType.INVALIDATION.pathElement().getKey())) {
          for (          Property property : container.get(CacheType.INVALIDATION.pathElement().getKey()).asPropertyList()) {
            ModelNode cache=property.getValue();
            writer.writeStartElement(Element.INVALIDATION_CACHE.getLocalName());
            writeClusteredCacheAttributes(writer,property.getName(),cache);
            writeCacheElements(writer,cache);
            writer.writeEndElement();
          }
        }
        if (container.hasDefined(CacheType.REPLICATED.pathElement().getKey())) {
          for (          Property property : container.get(CacheType.REPLICATED.pathElement().getKey()).asPropertyList()) {
            ModelNode cache=property.getValue();
            writer.writeStartElement(Element.REPLICATED_CACHE.getLocalName());
            writeClusteredCacheAttributes(writer,property.getName(),cache);
            writeCacheElements(writer,cache);
            writer.writeEndElement();
          }
        }
        if (container.hasDefined(CacheType.DISTRIBUTED.pathElement().getKey())) {
          for (          Property property : container.get(CacheType.DISTRIBUTED.pathElement().getKey()).asPropertyList()) {
            ModelNode cache=property.getValue();
            writer.writeStartElement(Element.DISTRIBUTED_CACHE.getLocalName());
            writeClusteredCacheAttributes(writer,property.getName(),cache);
            writeAttribute(writer,cache,DistributedCacheResourceDefinition.OWNERS);
            writeAttribute(writer,cache,DistributedCacheResourceDefinition.SEGMENTS);
            writeAttribute(writer,cache,DistributedCacheResourceDefinition.L1_LIFESPAN);
            writeAttribute(writer,cache,DistributedCacheResourceDefinition.CAPACITY_FACTOR);
            writeAttribute(writer,cache,DistributedCacheResourceDefinition.CONSISTENT_HASH_STRATEGY);
            writeCacheElements(writer,cache);
            writer.writeEndElement();
          }
        }
        writer.writeEndElement();
      }
    }
  }
  writer.writeEndElement();
}
