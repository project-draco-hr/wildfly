{
  if (isConnected == false)   throw new IllegalStateException("DeploymentManager is not connected");
  if (targets == null) {
    if (deployURI.isOpaque()) {
      throw new NotImplementedException("Opaque deployment URI not implemented");
    }
 else {
      ROOT_LOGGER.debugf("Non-Opaque URI seen, checking query for targetType");
      URIParser parser=new URIParser(deployURI);
      String targetType=parser.getParameter("targetType");
      if ("as7".equals(targetType)) {
        targets=new Target[]{new DeploymentManagerTarget(deployURI,username,password)};
      }
 else {
        throw new IllegalArgumentException("Invalid targetType in URI: " + deployURI);
      }
    }
  }
  return targets;
}
