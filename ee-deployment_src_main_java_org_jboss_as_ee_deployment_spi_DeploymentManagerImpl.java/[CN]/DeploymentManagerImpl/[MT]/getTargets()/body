{
  if (isConnected == false)   throw new IllegalStateException(MESSAGES.deploymentManagerNotConnected());
  if (targets == null) {
    if (deployURI.isOpaque()) {
      throw new UnsupportedOperationException(MESSAGES.opaqueDeploymentUriNotImplemented());
    }
 else {
      ROOT_LOGGER.debugf("Non-Opaque URI seen, checking query for targetType");
      URIParser parser=new URIParser(deployURI);
      String targetType=parser.getParameter("targetType");
      if ("as7".equals(targetType)) {
        targets=new Target[]{new DeploymentManagerTarget(deployURI,client)};
      }
 else {
        throw new IllegalArgumentException(MESSAGES.invalidTargetType(deployURI));
      }
    }
  }
  return targets;
}
