{
  if (isConnected == false)   throw new IllegalStateException("DeploymentManager is not connected");
  log.debug("getAvailableModules [type=" + moduleType + ",targets="+ Arrays.asList(targets)+ "]");
  List<TargetModuleID> targetModules=new ArrayList<TargetModuleID>();
  for (int i=0; i < targets.length; i++) {
    JBossTarget target=(JBossTarget)targets[i];
    TargetModuleID[] tmids=target.getAvailableModules(moduleType);
    targetModules.addAll(Arrays.asList(tmids));
  }
  log.debug("Found [" + targetModules.size() + "] available modules");
  if (targetModules.size() > 0) {
    TargetModuleID[] idarr=new TargetModuleID[targetModules.size()];
    targetModules.toArray(idarr);
    return idarr;
  }
  return null;
}
