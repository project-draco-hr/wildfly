{
  if (isConnected == false)   throw new IllegalStateException(MESSAGES.deploymentManagerNotConnected());
  ROOT_LOGGER.debugf("getAvailableModules [type=%s,targets=%s]",moduleType,Arrays.asList(targets));
  List<TargetModuleID> targetModules=new ArrayList<TargetModuleID>();
  for (int i=0; i < targets.length; i++) {
    JBossTarget target=(JBossTarget)targets[i];
    TargetModuleID[] tmids=target.getAvailableModules(moduleType);
    targetModules.addAll(Arrays.asList(tmids));
  }
  ROOT_LOGGER.debugf("Found [%d] available modules",targetModules.size());
  if (targetModules.size() > 0) {
    TargetModuleID[] idarr=new TargetModuleID[targetModules.size()];
    targetModules.toArray(idarr);
    return idarr;
  }
  return null;
}
