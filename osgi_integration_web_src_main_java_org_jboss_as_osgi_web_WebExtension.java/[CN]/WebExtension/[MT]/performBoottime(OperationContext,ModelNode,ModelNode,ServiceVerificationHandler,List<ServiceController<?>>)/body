{
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      ServiceTarget serviceTarget=context.getServiceTarget();
      newControllers.add(WebContextLifecycleInterceptor.addService(serviceTarget,verificationHandler));
      context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
    }
  }
,OperationContext.Stage.RUNTIME);
  context.addStep(new AbstractDeploymentChainStep(){
    @Override protected void execute(    DeploymentProcessorTarget processorTarget){
      processorTarget.addDeploymentProcessor(OSGiExtension.SUBSYSTEM_NAME,Phase.STRUCTURE,Phase.STRUCTURE_OSGI_WEBBUNDLE,new WebBundleStructureProcessor());
      processorTarget.addDeploymentProcessor(OSGiExtension.SUBSYSTEM_NAME,Phase.STRUCTURE,Phase.STRUCTURE_REMOUNT_EXPLODED,new RemountDeploymentRootProcessor());
      processorTarget.addDeploymentProcessor(OSGiExtension.SUBSYSTEM_NAME,Phase.DEPENDENCIES,Phase.DEPENDENCIES_WAR_MODULE,new WebBundleDependencyProcessor());
      processorTarget.addDeploymentProcessor(OSGiExtension.SUBSYSTEM_NAME,Phase.PARSE,Phase.PARSE_WAB_CONTEXT_FACTORY,new WebBundleContextProcessor());
      processorTarget.addDeploymentProcessor(OSGiExtension.SUBSYSTEM_NAME,Phase.POST_MODULE,Phase.POST_MODULE_WAB_FRAGMENTS,new WebBundleFragmentProcessor());
      processorTarget.addDeploymentProcessor(OSGiExtension.SUBSYSTEM_NAME,Phase.INSTALL,Phase.INSTALL_WAB_DEPLOYMENT,new WebContextActivationProcessor());
    }
  }
,OperationContext.Stage.RUNTIME);
}
