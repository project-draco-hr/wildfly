{
  if (str == null || str.isEmpty()) {
    return;
  }
  int i=0;
  ParsingContextImpl ctx=new ParsingContextImpl();
  ctx.initialState=initialState;
  ctx.callbackHandler=callbackHandler;
  ctx.input=str;
  ctx.ch=str.charAt(i);
  ctx.location=i;
  initialState.getEnterHandler().handle(ctx);
  while (i < str.length()) {
    char ch=str.charAt(i);
    ctx.ch=ch;
    ctx.location=i;
    CharacterHandler handler=ctx.getState().getHandler(ch);
    handler.handle(ctx);
    ++i;
  }
  ctx.location=i;
  ctx.endOfContent=true;
  ParsingState state=ctx.getState();
  while (state != ctx.initialState) {
    state.getEndContentHandler().handle(ctx);
    ctx.leaveState();
    state=ctx.getState();
  }
  initialState.getEndContentHandler().handle(ctx);
  initialState.getLeaveHandler().handle(ctx);
}
