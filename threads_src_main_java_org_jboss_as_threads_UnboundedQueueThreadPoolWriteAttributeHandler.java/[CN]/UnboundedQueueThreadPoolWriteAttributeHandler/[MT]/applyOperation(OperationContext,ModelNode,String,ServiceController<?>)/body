{
  final UnboundedQueueThreadPoolService pool=(UnboundedQueueThreadPoolService)service.getService();
  try {
    final ModelNode value=operation.require(CommonAttributes.VALUE);
    if (CommonAttributes.KEEPALIVE_TIME.equals(attributeName)) {
      if (!value.hasDefined(TIME)) {
        throw new IllegalArgumentException("Missing '" + TIME + "' for '"+ KEEPALIVE_TIME+ "'");
      }
      final TimeUnit unit;
      if (!value.hasDefined(UNIT)) {
        unit=pool.getKeepAliveUnit();
      }
 else {
        try {
          unit=Enum.valueOf(TimeUnit.class,value.get(UNIT).asString());
        }
 catch (        IllegalArgumentException e) {
          throw new OperationFailedException(new ModelNode().set("Failed to parse '" + UNIT + "', allowed values are: "+ Arrays.asList(TimeUnit.values())));
        }
      }
      final TimeSpec spec=new TimeSpec(unit,value.get(TIME).asLong());
      pool.setKeepAlive(spec);
    }
 else     if (CommonAttributes.MAX_THREADS.equals(attributeName)) {
      pool.setMaxThreads(getScaledCount(CommonAttributes.MAX_THREADS,value));
    }
 else {
      throw new IllegalArgumentException("Unexpected attribute '" + attributeName + "'");
    }
  }
 catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
