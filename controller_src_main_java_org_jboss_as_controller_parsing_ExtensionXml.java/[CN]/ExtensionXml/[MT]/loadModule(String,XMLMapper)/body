{
  try {
    final Module module=moduleLoader.loadModule(ModuleIdentifier.fromString(moduleName));
    boolean initialized=false;
    for (    final Extension extension : module.loadService(Extension.class)) {
      ClassLoader oldTccl=WildFlySecurityManager.setCurrentContextClassLoaderPrivileged(extension.getClass());
      try {
        extension.initializeParsers(extensionRegistry.getExtensionParsingContext(moduleName,xmlMapper));
      }
  finally {
        WildFlySecurityManager.setCurrentContextClassLoaderPrivileged(oldTccl);
      }
      if (!initialized) {
        initialized=true;
      }
    }
    if (!initialized) {
      throw ControllerLogger.ROOT_LOGGER.notFound("META-INF/services/",Extension.class.getName(),module.getIdentifier());
    }
    return null;
  }
 catch (  final ModuleLoadException e) {
    throw ControllerLogger.ROOT_LOGGER.failedToLoadModule(e);
  }
}
