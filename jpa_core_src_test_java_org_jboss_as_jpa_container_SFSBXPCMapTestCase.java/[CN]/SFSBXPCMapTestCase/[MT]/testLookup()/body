{
  SFSBContextHandle beanContextHandle1=new SFSBContextHandleImpl(SFSB1);
  SFSBContextHandle beanContextHandle2=new SFSBContextHandleImpl(SFSB2);
  SFSBContextHandle beanContextHandle3=new SFSBContextHandleImpl(SFSB3);
  final EntityManager underlyingEntityManager=null;
  ExtendedEntityManager extendedEntityManager=new ExtendedEntityManager(PU_NAME,underlyingEntityManager);
  assertEquals("the same ExtendedEntityManager equals method returns true for the same instance",extendedEntityManager,extendedEntityManager);
  sfsbxpcMap.register(beanContextHandle1,extendedEntityManager);
  Set<ExtendedEntityManager> xpcSet=sfsbxpcMap.getXPC(beanContextHandle1);
  ExtendedEntityManager gotXpc=xpcSet.iterator().next();
  assertEquals("SFSBXPCMap lookup of SFSB1 returns expected persistence context (SFSBXPCMap returned object=" + System.identityHashCode(gotXpc) + ", local extendedEntityManager ="+ System.identityHashCode(extendedEntityManager)+ ")",gotXpc,extendedEntityManager);
  sfsbxpcMap.register(beanContextHandle2,extendedEntityManager);
  xpcSet=sfsbxpcMap.getXPC(beanContextHandle2);
  gotXpc=xpcSet.iterator().next();
  assertEquals("SFSBXPCMap lookup of SFSB2 returns expected persistence context (SFSBXPCMap returned object=" + System.identityHashCode(gotXpc) + ", local extendedEntityManager ="+ System.identityHashCode(extendedEntityManager)+ ")",gotXpc,extendedEntityManager);
  sfsbxpcMap.register(beanContextHandle3,extendedEntityManager);
  xpcSet=sfsbxpcMap.getXPC(beanContextHandle3);
  gotXpc=xpcSet.iterator().next();
  assertEquals("SFSBXPCMap lookup of SFSB3 returns expected persistence context (SFSBXPCMap returned object=" + System.identityHashCode(gotXpc) + ", local extendedEntityManager ="+ System.identityHashCode(extendedEntityManager)+ ")",gotXpc,extendedEntityManager);
  List<SFSBContextHandle> list=sfsbxpcMap.getSFSBList(extendedEntityManager);
  assertNotNull("SFSBXPCMap.getSFSBList(entitymanager) returns non-null list of SFSB handles",list);
  assertTrue("SFSBXPCMap.getSFSBList(entitymanager) list contains SFSB1",list.contains(beanContextHandle1));
  assertTrue("SFSBXPCMap.getSFSBList(entitymanager) list contains SFSB2",list.contains(beanContextHandle2));
  assertTrue("SFSBXPCMap.getSFSBList(entitymanager) list contains SFSB3",list.contains(beanContextHandle3));
}
