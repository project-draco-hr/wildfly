{
  final String selector=properties.containsKey(SELECTOR.getName()) ? properties.get(SELECTOR.getName()) : null;
  final boolean durable=properties.containsKey(DURABLE.getName()) ? Boolean.valueOf(properties.get(DURABLE.getName())) : DURABLE.getDefaultValue().asBoolean();
  ModelNode destination=new ModelNode();
  destination.get(NAME).set(queueName);
  destination.get(DURABLE.getName()).set(durable);
  if (selector != null) {
    destination.get(SELECTOR.getName()).set(selector);
  }
  destination.get(ENTRIES).add(name);
  Service<Queue> queueService=JMSQueueService.installService(null,null,queueName,serviceTarget,hqServiceName,selector,durable,new String[0]);
  inject(serviceBuilder,injector,queueService);
  final PathElement serverElement=PathElement.pathElement(HORNETQ_SERVER,getHornetQServerName());
  final PathElement dest=PathElement.pathElement(JMS_QUEUE,destinationName);
  deploymentUnit.createDeploymentSubModel(MessagingExtension.SUBSYSTEM_NAME,serverElement);
  PathAddress registration=PathAddress.pathAddress(serverElement,dest);
  MessagingXmlInstallDeploymentUnitProcessor.createDeploymentSubModel(registration,deploymentUnit);
  JMSQueueConfigurationRuntimeHandler.INSTANCE.registerResource(getHornetQServerName(),queueName,destination);
}
