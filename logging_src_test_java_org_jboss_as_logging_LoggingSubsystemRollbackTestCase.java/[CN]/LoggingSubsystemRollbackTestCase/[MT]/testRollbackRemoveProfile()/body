{
  final KernelServices kernelServices=boot();
  final ModelNode validSubsystemModel=getSubsystemModel(kernelServices);
  final CompositeOperationBuilder compositeOperationBuilder=CompositeOperationBuilder.create();
  final PathAddress profileAddress=createAddress(CommonAttributes.LOGGING_PROFILE,PROFILE_NAME);
  compositeOperationBuilder.addStep(Operations.createRemoveOperation(profileAddress.toModelNode(),true));
  final ModelNode rootLoggerAddress=createRootLoggerAddress().toModelNode();
  compositeOperationBuilder.addStep(Operations.createWriteAttributeOperation(rootLoggerAddress,CommonAttributes.LEVEL,"INFO"));
  ModelNode result=kernelServices.executeOperation(compositeOperationBuilder.build().getOperation());
  Assert.assertFalse("The update operation should have failed, but was successful: " + result,Operations.successful(result));
  final ModelNode currentModel=getSubsystemModel(kernelServices);
  compare(validSubsystemModel,currentModel);
  ConfigurationPersistence config=ConfigurationPersistence.getConfigurationPersistence(LogContext.getLogContext());
  compare(currentModel,config);
  config=ConfigurationPersistence.getConfigurationPersistence(LoggingProfileContextSelector.getInstance().get(PROFILE_NAME));
  compare(PROFILE_NAME,currentModel,config);
}
