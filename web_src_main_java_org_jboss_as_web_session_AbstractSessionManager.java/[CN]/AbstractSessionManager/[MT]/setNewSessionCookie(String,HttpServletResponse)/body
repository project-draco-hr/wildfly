{
  if (response != null) {
    Context context=(Context)container;
    Connector connector=((Response)response).getConnector();
    if (context.getCookies()) {
      Cookie cookie=new Cookie(Globals.SESSION_COOKIE_NAME,sessionId);
      cookie.setMaxAge(-1);
      if (context.getSessionCookie().getPath() != null) {
        cookie.setPath(context.getSessionCookie().getPath());
      }
 else {
        String contextPath=context.getEncodedPath();
        if ("".equals(contextPath)) {
          contextPath="/";
        }
        cookie.setPath(contextPath);
      }
      if (context.getSessionCookie().getComment() != null) {
        cookie.setComment(context.getSessionCookie().getComment());
      }
      if (context.getSessionCookie().getDomain() != null) {
        cookie.setDomain(context.getSessionCookie().getDomain());
      }
      if (context.getSessionCookie().isHttpOnly()) {
        cookie.setHttpOnly(true);
      }
      if (context.getSessionCookie().isSecure()) {
        cookie.setSecure(true);
      }
      if (connector.getSecure()) {
        cookie.setSecure(true);
      }
      log.tracef("Setting cookie with session id: %s & name: %s",sessionId,Globals.SESSION_COOKIE_NAME);
      response.addCookie(cookie);
    }
  }
}
