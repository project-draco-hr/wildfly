{
  if (mergedMetaData.getDistributable() != null) {
    String instanceId=undertowService.getValue().getInstanceId();
    ClassResolver resolver=ModularClassResolver.getInstance(module.getModuleLoader());
    final DistributableSessionManager<OutgoingDistributableSessionData> sessionManager=new DistributableSessionManager<>(this.distributedCacheManagerFactoryInjectedValue.getValue(),mergedMetaData,new ClassLoaderAwareClassResolver(resolver,module.getClassLoader()),deploymentInfo.getContextPath(),module.getClassLoader(),instanceId);
    deploymentInfo.setSessionManager(sessionManager);
    deploymentInfo.addOuterHandlerChainWrapper(new HandlerWrapper(){
      @Override public HttpHandler wrap(      final HttpHandler handler){
        return sessionManager.wrapHandlers(handler);
      }
    }
);
  }
}
