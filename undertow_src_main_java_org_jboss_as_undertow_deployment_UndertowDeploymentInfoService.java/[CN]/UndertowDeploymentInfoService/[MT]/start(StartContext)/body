{
  DeploymentInfo deploymentInfo=createServletConfig();
  handleSessionReplication(deploymentInfo);
  handleIdentityManager(deploymentInfo);
  if (mergedMetaData.getSessionConfig().getSessionTimeoutSet()) {
    SessionManager sessionManager=deploymentInfo.getSessionManager();
    sessionManager.setDefaultSessionTimeout(mergedMetaData.getSessionConfig().getSessionTimeout());
  }
  for (  final SetupAction action : setupActions) {
    deploymentInfo.addThreadSetupAction(new ThreadSetupAction(){
      private final Handle handle=new Handle(){
        @Override public void tearDown(){
          action.teardown(Collections.EMPTY_MAP);
        }
      }
;
      @Override public Handle setup(      final HttpServerExchange exchange){
        action.setup(Collections.EMPTY_MAP);
        return handle;
      }
    }
);
  }
  this.deploymentInfo=deploymentInfo;
}
