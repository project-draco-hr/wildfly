{
  AuthorizingCallbackHandler cbh=getAuthorizingCallbackHandler();
  NameCallback ncb=new NameCallback("Username",userName);
  RealmCallback rcb=new RealmCallback("Realm",TEST_REALM);
  VerifyPasswordCallback vpc=new VerifyPasswordCallback(password);
  cbh.handle(new Callback[]{ncb,rcb,vpc});
  assertTrue("Password verified",vpc.isVerified());
  Principal user=new SimplePrincipal(userName);
  Collection<Principal> principals=Collections.singleton(user);
  SubjectUserInfo userInfo=cbh.createSubjectUserInfo(principals);
  return userInfo.getSubject().getPrincipals(RealmGroup.class);
}
