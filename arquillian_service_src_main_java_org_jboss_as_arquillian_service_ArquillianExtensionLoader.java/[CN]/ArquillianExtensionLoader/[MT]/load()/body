{
  Collection<LoadableExtension> result;
  ClassLoader classLoader=ArquillianExtensionLoader.class.getClassLoader();
  if (classLoader instanceof ModuleClassLoader) {
    result=Arrays.asList(new ContainerTestRemoteExtension(),new OSGiEnricherExtension(),new JMXExtension());
  }
 else {
    result=new JavaSPIExtensionLoader().load();
  }
  return result;
}
