{
  Sessions<String> sessions=mock(Sessions.class);
  SessionManager manager=mock(SessionManager.class);
  Session session=mock(Session.class);
  String deployment="deployment";
  String sessionId="session";
  when(this.sso.getSessions()).thenReturn(sessions);
  when(sessions.getDeployments()).thenReturn(Collections.singleton(deployment));
  when(sessions.getSession(deployment)).thenReturn(sessionId);
  when(this.registry.getSessionManager(deployment)).thenReturn(manager);
  when(manager.getSession(sessionId)).thenReturn(session);
  Iterator<Session> result=this.subject.iterator();
  assertTrue(result.hasNext());
  assertSame(session,result.next());
  assertFalse(result.hasNext());
}
