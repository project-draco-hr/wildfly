{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  if (!DeploymentTypeMarker.isType(DeploymentType.APPLICATION_CLIENT,deploymentUnit)) {
    return;
  }
  final ResourceRoot root=deploymentUnit.getAttachment(Attachments.DEPLOYMENT_ROOT);
  final Module module=deploymentUnit.getAttachment(Attachments.MODULE);
  final Manifest manifest=root.getAttachment(Attachments.MANIFEST);
  if (manifest != null) {
    Attributes main=manifest.getMainAttributes();
    if (main != null) {
      String mainClass=main.getValue("Main-Class");
      if (mainClass != null && !mainClass.isEmpty()) {
        try {
          final Class<?> clazz=module.getClassLoader().loadClass(mainClass);
          deploymentUnit.putAttachment(AppClientAttachments.MAIN_CLASS,clazz);
        }
 catch (        ClassNotFoundException e) {
          throw new RuntimeException("Could not load application client main class",e);
        }
      }
    }
  }
}
