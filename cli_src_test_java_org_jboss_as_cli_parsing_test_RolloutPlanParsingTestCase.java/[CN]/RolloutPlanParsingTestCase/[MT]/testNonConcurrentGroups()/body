{
  parse("/profile=default/subsystem=threads/thread-factory=mytf:do{ rollout in-series=" + "groupA(rolling-to-servers=true,max-failure-percentage=20), groupB");
  assertTrue(handler.hasAddress());
  assertTrue(handler.hasOperationName());
  assertFalse(handler.hasProperties());
  assertFalse(handler.endsOnAddressOperationNameSeparator());
  assertFalse(handler.endsOnPropertyListStart());
  assertFalse(handler.endsOnPropertySeparator());
  assertFalse(handler.endsOnPropertyValueSeparator());
  assertFalse(handler.endsOnNodeSeparator());
  assertFalse(handler.endsOnNodeTypeNameSeparator());
  assertTrue(handler.endsOnSeparator());
  assertTrue(handler.endsOnHeaderListStart());
  assertFalse(handler.isRequestComplete());
  assertTrue(handler.hasHeaders());
  final List<OperationRequestHeader> headers=handler.getHeaders();
  assertEquals(1,headers.size());
  final OperationRequestHeader header=headers.get(0);
  assertTrue(header instanceof RolloutPlanHeader);
  final ModelNode node=new ModelNode();
  final ModelNode inSeries=node.get(Util.ROLLOUT_PLAN).get(Util.IN_SERIES);
  ModelNode group=new ModelNode();
  final ModelNode groupProps=group.get("groupA");
  groupProps.get("rolling-to-servers").set("true");
  groupProps.get("max-failure-percentage").set("20");
  inSeries.add().get(Util.SERVER_GROUP).set(group);
  group=new ModelNode();
  group.get("groupB");
  inSeries.add().get(Util.SERVER_GROUP).set(group);
  final ModelNode headersNode=new ModelNode();
  header.addTo(headersNode);
  assertEquals(node,headersNode);
}
