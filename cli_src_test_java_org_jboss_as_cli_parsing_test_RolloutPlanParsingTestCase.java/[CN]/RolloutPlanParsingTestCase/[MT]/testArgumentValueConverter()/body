{
  final ModelNode node=ArgumentValueConverter.ROLLOUT_PLAN.fromString("{ rollout " + "groupA(rolling-to-servers=true,max-failure-percentage=20) ^ groupB, groupC," + "groupD(rolling-to-servers=true,max-failed-servers=1) ^ groupE rollback-across-groups}");
  final ModelNode expectedHeaders=new ModelNode();
  final ModelNode rolloutPlan=expectedHeaders.get(Util.ROLLOUT_PLAN);
  final ModelNode inSeries=rolloutPlan.get(Util.IN_SERIES);
  ModelNode concurrent=new ModelNode();
  ModelNode cg=concurrent.get(Util.CONCURRENT_GROUPS);
  ModelNode group=cg.get("groupA");
  group.get("rolling-to-servers").set("true");
  group.get("max-failure-percentage").set("20");
  group=cg.get("groupB");
  inSeries.add().set(concurrent);
  ModelNode sg=new ModelNode();
  group=sg.get(Util.SERVER_GROUP);
  group.get("groupC");
  inSeries.add().set(sg);
  concurrent=new ModelNode();
  cg=concurrent.get(Util.CONCURRENT_GROUPS);
  group=cg.get("groupD");
  group.get("rolling-to-servers").set("true");
  group.get("max-failed-servers").set("1");
  cg.get("groupE");
  inSeries.add().set(concurrent);
  rolloutPlan.get("rollback-across-groups").set("true");
  assertEquals(expectedHeaders,node);
}
