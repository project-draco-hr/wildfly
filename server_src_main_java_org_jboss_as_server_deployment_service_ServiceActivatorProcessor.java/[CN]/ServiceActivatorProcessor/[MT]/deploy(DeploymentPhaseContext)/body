{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final ServicesAttachment servicesAttachment=deploymentUnit.getAttachment(Attachments.SERVICES);
  if (servicesAttachment == null || servicesAttachment.getServiceImplementations(ServiceActivator.class.getName()).isEmpty())   return;
  final Module module=deploymentUnit.getAttachment(Attachments.MODULE);
  if (module == null)   return;
  final ServiceActivatorContext serviceActivatorContext=new ServiceActivatorContextImpl(phaseContext.getServiceTarget(),phaseContext.getServiceRegistry());
  for (  ServiceActivator serviceActivator : module.loadService(ServiceActivator.class)) {
    try {
      serviceActivator.activate(serviceActivatorContext);
    }
 catch (    ServiceRegistryException e) {
      throw new DeploymentUnitProcessingException(e);
    }
  }
}
