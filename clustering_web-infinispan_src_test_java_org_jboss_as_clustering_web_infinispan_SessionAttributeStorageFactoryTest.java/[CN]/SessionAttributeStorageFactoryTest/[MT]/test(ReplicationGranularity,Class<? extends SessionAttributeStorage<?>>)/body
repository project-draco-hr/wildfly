{
  SessionAttributeMarshaller marshaller=mock(SessionAttributeMarshaller.class);
  SessionAttributeStorageFactory factory=new SessionAttributeStorageFactoryImpl();
  try {
    SessionAttributeStorage<?> storage=factory.createStorage(granularity,marshaller);
    assertNotNull(expectedClass);
    assertTrue(storage.getClass().getName(),expectedClass.isInstance(storage));
  }
 catch (  IllegalArgumentException e) {
    assertNull(expectedClass);
  }
}
