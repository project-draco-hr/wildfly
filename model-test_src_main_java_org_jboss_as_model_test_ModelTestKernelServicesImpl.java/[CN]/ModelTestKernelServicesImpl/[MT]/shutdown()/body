{
  if (container != null) {
    container.shutdown();
    try {
      container.awaitTermination(5,TimeUnit.SECONDS);
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
    container=null;
    if (legacyServices != null) {
      for (      T legacyService : legacyServices.values()) {
        legacyService.shutdown();
      }
    }
  }
}
