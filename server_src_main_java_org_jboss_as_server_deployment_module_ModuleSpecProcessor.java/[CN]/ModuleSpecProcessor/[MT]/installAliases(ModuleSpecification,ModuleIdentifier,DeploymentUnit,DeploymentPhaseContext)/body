{
  for (  final ModuleIdentifier alias : moduleSpecification.getAliases()) {
    final ServiceName moduleSpecServiceName=ServiceModuleLoader.moduleSpecServiceName(alias);
    final ModuleSpec spec=ModuleSpec.buildAlias(alias,moduleIdentifier).create();
    ModuleDefinition moduleDefinition=new ModuleDefinition(alias,new HashSet<>(moduleSpecification.getAllDependencies()),spec);
    final ValueService<ModuleDefinition> moduleSpecService=new ValueService<>(new ImmediateValue<>(moduleDefinition));
    phaseContext.getServiceTarget().addService(moduleSpecServiceName,moduleSpecService).addDependencies(deploymentUnit.getServiceName()).addDependencies(phaseContext.getPhaseServiceName()).setInitialMode(Mode.ON_DEMAND).install();
    ModuleLoadService.installService(phaseContext.getServiceTarget(),alias,Collections.singletonList(moduleIdentifier));
    ModuleResolvePhaseService.installService(phaseContext.getServiceTarget(),moduleDefinition);
  }
}
