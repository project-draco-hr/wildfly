{
  calculateDifference(target,safeCopyMap(properties),safeCopyMap(other.properties),new DifferenceHandler<String,String,PropertiesElement>(){
    public void handleAdd(    final Collection<AbstractModelUpdate<PropertiesElement>> target,    final String name,    final String newElement){
      target.add(new PropertyAdd(name,newElement));
    }
    public void handleRemove(    final Collection<AbstractModelUpdate<PropertiesElement>> target,    final String name,    final String oldElement){
      target.add(new PropertyRemove(name));
    }
    public void handleChange(    final Collection<AbstractModelUpdate<PropertiesElement>> target,    final String name,    final String oldElement,    final String newElement){
      target.add(new PropertyRemove(name));
      target.add(new PropertyAdd(name,newElement));
    }
  }
);
}
