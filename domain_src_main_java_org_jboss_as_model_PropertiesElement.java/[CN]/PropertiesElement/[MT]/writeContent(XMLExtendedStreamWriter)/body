{
synchronized (properties) {
    for (    Map.Entry<String,String> entry : properties.entrySet()) {
      streamWriter.writeEmptyElement(propertyType.getLocalName());
      streamWriter.writeAttribute(Attribute.NAME.getLocalName(),entry.getKey());
      if (!allowNullValue || entry.getValue() != null) {
        streamWriter.writeAttribute(Attribute.VALUE.getLocalName(),entry.getValue());
      }
    }
  }
  streamWriter.writeEndElement();
}
