{
  ServiceTracker st=new ServiceTracker(context,ConfigurationAdmin.class.getName(),null);
  st.open();
  try {
    ConfigurationAdmin cadmin=(ConfigurationAdmin)st.waitForService(30000);
    Configuration configuration=cadmin.getConfiguration(getClass().getName(),null);
    Dictionary<String,Object> dictionary=new Hashtable<String,Object>();
    dictionary.put("from.activator","hi from a bundle activator");
    configuration.update(dictionary);
  }
  finally {
    st.close();
  }
}
