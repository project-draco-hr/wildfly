{
  addProcess("ReceiverA",ReceivingProcess.class);
  TestProcessListenerStream listenerA=startTestProcessListenerAndWait("ReceiverA");
  broadcastMessage("Test","1");
  assertEquals("Test-1",listenerA.readMessage());
  addProcess("ReceiverB",ReceivingProcess.class);
  TestProcessListenerStream listenerB=startTestProcessListenerAndWait("ReceiverB");
  broadcastMessage("Test","2");
  assertEquals("Test-2",listenerA.readMessage());
  assertEquals("Test-2",listenerB.readMessage());
  addProcess("ReceiverC",ReceivingProcess.class);
  TestProcessListenerStream listenerC=startTestProcessListenerAndWait("ReceiverC");
  broadcastMessage("Test","3");
  assertEquals("Test-3",listenerA.readMessage());
  assertEquals("Test-3",listenerB.readMessage());
  assertEquals("Test-3",listenerC.readMessage());
  assertEquals("ReceiverA",listenerA.getProcessName());
  assertEquals("ReceiverB",listenerB.getProcessName());
  assertEquals("ReceiverC",listenerC.getProcessName());
  stopTestProcessListenerAndWait(listenerA);
  broadcastMessage("Test","4");
  assertNull(listenerA.readMessage(50));
  assertEquals("Test-4",listenerB.readMessage());
  assertEquals("Test-4",listenerC.readMessage());
  removeProcess("ReceiverA");
  stopTestProcessListenerAndWait(listenerB);
  removeProcess("ReceiverB");
  broadcastMessage("Test","5");
  assertNull(listenerA.readMessage(50));
  assertNull(listenerB.readMessage(50));
  assertEquals("Test-5",listenerC.readMessage());
  stopTestProcessListener("ReceiverC");
  removeProcess("ReceiverC");
}
