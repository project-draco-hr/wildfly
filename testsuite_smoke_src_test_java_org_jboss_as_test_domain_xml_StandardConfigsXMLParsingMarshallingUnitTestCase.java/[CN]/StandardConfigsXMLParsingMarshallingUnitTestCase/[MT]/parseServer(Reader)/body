{
  final XMLMapper mapper=XMLMapper.Factory.create();
  registerStandardServerReaders(mapper);
  try {
    final List<AbstractServerModelUpdate<?>> serverUpdates=new ArrayList<AbstractServerModelUpdate<?>>();
    mapper.parseDocument(serverUpdates,XMLInputFactory.newInstance().createXMLStreamReader(new BufferedReader(reader)));
    final ServerModel serverModel=new ServerModel();
    for (    final AbstractServerModelUpdate<?> update : serverUpdates) {
      serverModel.update(update);
    }
    return serverModel;
  }
 catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    throw new RuntimeException("Caught exception during processing of host.xml",e);
  }
}
