{
  boolean interrupted=false;
  ParallelBootOperationContext operationContext=null;
  try {
    operationContext=new ParallelBootOperationContext(transactionControl,processState,primaryContext,runtimeOps,controllingThread,controller,lockId);
    for (    ParsedBootOp op : bootOperations) {
      final OperationStepHandler osh=op.handler == null ? rootRegistration.getOperationHandler(op.address,op.operationName) : op.handler;
      operationContext.addStep(op.response,op.operation,osh,executionStage);
    }
    operationContext.executeOperation();
  }
 catch (  Throwable t) {
    interrupted=(t instanceof InterruptedException);
    MGMT_OP_LOGGER.failedSubsystemBootOperations(t,subsystemName);
    if (!transactionControl.signalled) {
      ModelNode failure=new ModelNode();
      failure.get(ModelDescriptionConstants.SUCCESS).set(false);
      failure.get(ModelDescriptionConstants.FAILURE_DESCRIPTION).set(t.toString());
      transactionControl.operationFailed(failure);
    }
  }
 finally {
    if (!transactionControl.signalled) {
      for (      ParsedBootOp op : bootOperations) {
        if (op.response.hasDefined(ModelDescriptionConstants.SUCCESS) && !op.response.get(ModelDescriptionConstants.SUCCESS).asBoolean()) {
          transactionControl.operationFailed(op.response);
          break;
        }
      }
      if (!transactionControl.signalled) {
        ModelNode failure=new ModelNode();
        failure.get(ModelDescriptionConstants.SUCCESS).set(false);
        failure.get(ModelDescriptionConstants.FAILURE_DESCRIPTION).set(MESSAGES.subsystemBootOperationFailedExecuting(subsystemName));
        transactionControl.operationFailed(failure);
      }
    }
 else {
      transactionControl.operationCompleted(transactionControl.response);
    }
    if (operationContext != null) {
      operationContext.close();
    }
    if (interrupted) {
      Thread.currentThread().interrupt();
    }
  }
}
