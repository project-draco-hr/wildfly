{
  try {
    final Unmarshaller unmarshaller=getUnmarshaller();
    unmarshaller.start(input);
    expectHeader(unmarshaller,ManagementProtocol.PARAM_DOMAIN_MODEL);
    log.infof("Registered with remote domain controller");
    final DomainModel domainModel=unmarshaller.readObject(DomainModel.class);
    unmarshaller.finish();
    return domainModel;
  }
 catch (  Exception e) {
    throw new ManagementException("Failed to read domain model from response",e);
  }
}
