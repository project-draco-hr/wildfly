{
  final File cleanServerBaseDir;
  if (cleanServerBaseDirPath != null) {
    cleanServerBaseDir=new File(cleanServerBaseDirPath);
  }
 else {
    cleanServerBaseDir=createTempServerBaseDirectory();
  }
  if (!cleanServerBaseDir.exists()) {
    throw ServerMessages.MESSAGES.serverBaseDirectoryDoesNotExist(cleanServerBaseDir);
  }
  if (!cleanServerBaseDir.isDirectory()) {
    throw ServerMessages.MESSAGES.serverBaseDirectoryIsNotADirectory(cleanServerBaseDir);
  }
  copyOriginalDirectoryToCleanServerBaseDir(CONFIG_DIR,serverBaseDir,jbossHome,cleanServerBaseDir);
  copyOriginalDirectoryToCleanServerBaseDir(DATA_DIR,serverBaseDir,jbossHome,cleanServerBaseDir);
  copyOriginalDirectoryToCleanServerBaseDir(SERVERS_DIR,serverBaseDir,jbossHome,cleanServerBaseDir);
  return cleanServerBaseDir;
}
