{
  final File cleanServerBaseDir;
  if (cleanServerBaseDirPath != null) {
    cleanServerBaseDir=new File(cleanServerBaseDirPath);
  }
 else {
    cleanServerBaseDir=createTempServerBaseDirectory();
  }
  if (!cleanServerBaseDir.exists()) {
    throw ServerLogger.ROOT_LOGGER.serverBaseDirectoryDoesNotExist(cleanServerBaseDir);
  }
  if (!cleanServerBaseDir.isDirectory()) {
    throw ServerLogger.ROOT_LOGGER.serverBaseDirectoryIsNotADirectory(cleanServerBaseDir);
  }
  copyOriginalDirectoryToCleanServerBaseDir(CONFIG_DIR,serverBaseDir,jbossHome,cleanServerBaseDir);
  copyOriginalDirectoryToCleanServerBaseDir(DATA_DIR,serverBaseDir,jbossHome,cleanServerBaseDir);
  copyOriginalDirectoryToCleanServerBaseDir(SERVERS_DIR,serverBaseDir,jbossHome,cleanServerBaseDir);
  return cleanServerBaseDir;
}
