{
  Set<Server> servers=domain.getAutoStartServers();
  long startupTimeout=getContainerConfiguration().getAutoServerStartupTimeoutInSeconds();
  long timeout=startupTimeout * 1000;
  long sleep=100;
  while (timeout > 0 && servers.size() > 0) {
    Iterator<Server> serverIterator=servers.iterator();
    while (serverIterator.hasNext()) {
      Server server=serverIterator.next();
      if (client.isServerStarted(server)) {
        serverIterator.remove();
      }
    }
    try {
      Thread.sleep(sleep);
      timeout-=sleep;
    }
 catch (    InterruptedException e) {
      throw new RuntimeException("Failed waiting for servers to start",e);
    }
  }
  if (timeout <= 0) {
    throw new RuntimeException("Auto started servers did not start within set timeout [autoServerStartupTimeoutInSeconds=" + startupTimeout + "]. "+ servers);
  }
}
