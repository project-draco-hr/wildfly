{
  super.processModelNode(context,containerName,cache,builder,dependencies);
  if (cache.hasDefined(ModelKeys.STATE_TRANSFER) && cache.get(ModelKeys.STATE_TRANSFER,ModelKeys.STATE_TRANSFER_NAME).isDefined()) {
    ModelNode stateTransfer=cache.get(ModelKeys.STATE_TRANSFER,ModelKeys.STATE_TRANSFER_NAME);
    final boolean enabled=StateTransferResourceDefinition.ENABLED.resolveModelAttribute(context,stateTransfer).asBoolean();
    final long timeout=StateTransferResourceDefinition.TIMEOUT.resolveModelAttribute(context,stateTransfer).asLong();
    final int chunkSize=StateTransferResourceDefinition.CHUNK_SIZE.resolveModelAttribute(context,stateTransfer).asInt();
    builder.clustering().stateTransfer().fetchInMemoryState(enabled);
    builder.clustering().stateTransfer().timeout(timeout);
    builder.clustering().stateTransfer().chunkSize(chunkSize);
  }
  if (cache.hasDefined(ModelKeys.BACKUP)) {
    SitesConfigurationBuilder sitesBuilder=builder.sites();
    for (    Property property : cache.get(ModelKeys.BACKUP).asPropertyList()) {
      String siteName=property.getName();
      ModelNode site=property.getValue();
      sitesBuilder.addBackup().site(siteName).backupFailurePolicy(BackupFailurePolicy.valueOf(BackupSiteResource.FAILURE_POLICY.resolveModelAttribute(context,site).asString())).strategy(BackupStrategy.valueOf(BackupSiteResource.STRATEGY.resolveModelAttribute(context,site).asString())).replicationTimeout(BackupSiteResource.REPLICATION_TIMEOUT.resolveModelAttribute(context,site).asLong());
      if (BackupSiteResource.ENABLED.resolveModelAttribute(context,site).asBoolean()) {
        sitesBuilder.addInUseBackupSite(siteName);
      }
    }
  }
}
