{
  ArgumentCaptor<ClassLoaderAwareListener> capturedListener=ArgumentCaptor.forClass(ClassLoaderAwareListener.class);
  TestListener testListener=new TestListener();
  this.cache.addListener(testListener);
  verify(this.mockCache).addListener(capturedListener.capture());
  ClassLoaderAwareListener listener=capturedListener.getValue();
  assertNotNull(listener);
  @SuppressWarnings("unchecked") CacheEntryActivatedEvent<Object,Object> event=mock(CacheEntryActivatedEvent.class);
  when(event.getType()).thenReturn(Event.Type.CACHE_ENTRY_ACTIVATED);
  when(event.getCache()).thenReturn(this.cache);
  listener.event(event);
  assertTrue(testListener.triggered);
}
