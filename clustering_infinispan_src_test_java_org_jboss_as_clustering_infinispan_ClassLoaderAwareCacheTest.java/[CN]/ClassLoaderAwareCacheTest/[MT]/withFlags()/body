{
  AdvancedCache<Object,Object> flaggedCache=mock(AdvancedCache.class);
  when(this.mockCache.withFlags(Flag.CACHE_MODE_LOCAL)).thenReturn(flaggedCache);
  AdvancedCache<Object,Object> result=this.cache.withFlags(Flag.CACHE_MODE_LOCAL);
  assertNotSame(this.cache,result);
  result.clear();
  verify(flaggedCache).clear();
}
