{
  serviceTarget=context.getServiceTarget();
  deploymentNames=getDeploymentNames(context);
  for (  String deploymentName : deploymentNames) {
    ServiceName serviceName=Services.deploymentUnitName(deploymentName);
    deploymentPhaseServices.add(serviceName.append(Phase.INSTALL.toString()));
  }
  if (!deploymentNames.isEmpty()) {
    ServiceRegistry serviceRegistry=context.getServiceRegistry(false);
    listenerTarget=serviceRegistry.getService(JBOSS_SERVER_CONTROLLER).getServiceContainer();
    listenerTarget.addListener(Inheritance.ALL,this);
  }
  bundleInstallListener=new ServiceTracker<XBundle>(){
    @Override protected boolean allServicesAdded(    Set<ServiceName> trackedServices){
      return deploymentInstallComplete.get();
    }
    @Override protected void complete(){
      installResolveService(serviceTarget,installedServices);
    }
  }
;
  checkAndComplete();
}
