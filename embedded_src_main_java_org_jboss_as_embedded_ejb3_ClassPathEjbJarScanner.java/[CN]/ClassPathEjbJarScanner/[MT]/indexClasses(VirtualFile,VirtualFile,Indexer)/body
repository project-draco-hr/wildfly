{
  if (file == null) {
    throw MESSAGES.nullVar("file");
  }
  for (  final VirtualFile child : file.getChildren()) {
    if (child.isDirectory()) {
      indexClasses(root,child,indexer);
    }
    final String childName=child.getPathNameRelativeTo(root);
    if (childName.endsWith(EXTENSION_CLASS)) {
      InputStream stream=null;
      try {
        try {
          stream=child.openStream();
          indexer.index(stream);
        }
 catch (        IOException e) {
          ROOT_LOGGER.cannotLoadClassFile(e,child);
        }
      }
  finally {
        try {
          if (stream != null) {
            stream.close();
          }
        }
 catch (        IOException e) {
          ROOT_LOGGER.errorClosingFile(e,child);
        }
      }
    }
  }
}
