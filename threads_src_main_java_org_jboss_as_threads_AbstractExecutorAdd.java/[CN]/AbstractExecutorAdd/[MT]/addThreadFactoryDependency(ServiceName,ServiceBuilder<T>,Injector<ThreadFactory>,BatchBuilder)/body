{
  final ServiceName threadFactoryName;
  if (threadFactory == null) {
    threadFactoryName=serviceName.append("thread-factory");
    builder.addService(threadFactoryName,new ThreadFactoryService());
  }
 else {
    threadFactoryName=ThreadsServices.threadFactoryName(threadFactory);
  }
  return serviceBuilder.addDependency(threadFactoryName,ThreadFactory.class,injector);
}
