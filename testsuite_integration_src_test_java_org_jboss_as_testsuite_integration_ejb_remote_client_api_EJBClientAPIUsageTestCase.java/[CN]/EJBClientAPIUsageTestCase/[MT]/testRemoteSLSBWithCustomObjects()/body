{
  final EmployeeManager proxy=EJBClient.getProxy(APP_NAME,MODULE_NAME,null,EmployeeBean.class.getSimpleName(),EmployeeManager.class);
  Assert.assertNotNull("Received a null proxy",proxy);
  final String[] nickNames=new String[]{"javauser","rubyuser","phpuser"};
  final EJBClientContext ejbClientContext=EJBClientContext.create();
  final Employee employee=new Employee(1,"programmer");
  try {
    ejbClientContext.registerConnection(connection);
    final Employee employeeWithNickNames=proxy.addNickNames(employee,nickNames);
    Assert.assertEquals("Unexpected employee id",1,employeeWithNickNames.getId());
    Assert.assertEquals("Unexpected employee name","programmer",employeeWithNickNames.getName());
    Assert.assertTrue("Unexpected employee nick names",Arrays.equals(nickNames,employee.getNickNames().toArray()));
  }
  finally {
    EJBClientContext.suspendCurrent();
  }
}
