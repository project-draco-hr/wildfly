{
  ModelNode model=context.createResource(PathAddress.EMPTY_ADDRESS).getModel();
  PrincipalResourceDefinition.TYPE.validateAndSet(operation,model);
  PrincipalResourceDefinition.REALM.validateAndSet(operation,model);
  PrincipalResourceDefinition.NAME.validateAndSet(operation,model);
  final String roleName=RoleMappingResourceDefinition.getRoleName(operation);
  final AuthorizerConfiguration.PrincipalType principalType=PrincipalResourceDefinition.getPrincipalType(context,model);
  final String realm=PrincipalResourceDefinition.getRealm(context,model);
  final String name=PrincipalResourceDefinition.getName(context,model);
  PathAddress completeAddress=PathAddress.pathAddress(operation.get(ADDRESS));
  PathAddress roleAddress=completeAddress.subAddress(0,completeAddress.size() - 1);
  validateUniqueness(context,roleName,roleAddress,principalType,realm,name);
  registerRuntimeAdd(context,roleName,principalType,name,realm);
  context.stepCompleted();
}
