{
  AutoInstallIntegration service=new AutoInstallIntegration(subsystemState);
  ServiceBuilder<?> builder=target.addService(Services.AUTOINSTALL_PROVIDER,service);
  builder.addDependency(ServerEnvironmentService.SERVICE_NAME,ServerEnvironment.class,service.injectedEnvironment);
  builder.addDependency(Services.BUNDLE_MANAGER,BundleManagerService.class,service.injectedBundleManager);
  builder.addDependency(Services.SYSTEM_BUNDLE,Bundle.class,service.injectedSystemBundle);
  builder.addDependency(Services.START_LEVEL,StartLevel.class,service.injectedStartLevel);
  builder.addDependency(Services.FRAMEWORK_INIT);
  builder.setInitialMode(Mode.ON_DEMAND);
  return builder.install();
}
