{
  BundleManager bundleManager=injectedBundleManager.getValue();
  BundleInfo info=BundleInfo.createBundleInfo(bundleURL);
  Deployment dep=DeploymentFactory.createDeployment(info);
  if (level != null) {
    dep.setStartLevel(level.intValue());
    dep.setAutoStart(true);
  }
  StorageStateProvider storageProvider=injectedStorageProvider.getValue();
  StorageState storageState=storageProvider.getByLocation(dep.getLocation());
  if (storageState != null) {
    dep.addAttachment(StorageState.class,storageState);
  }
  return bundleManager.installBundle(serviceTarget,dep,listener);
}
