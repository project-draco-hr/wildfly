{
  ModuleIdentifier identifier=moduleMetaData.getIdentifier();
  Integer startLevel=moduleMetaData.getStartLevel();
  File modulesFile=ModuleIdentityArtifactProvider.getRepositoryEntry(bundlesDir,identifier);
  if (modulesFile != null) {
    URL url=modulesFile.toURI().toURL();
    return installBundleFromURL(bundleManager,url,startLevel);
  }
  ModuleLoader moduleLoader=Module.getBootModuleLoader();
  Module module=moduleLoader.loadModule(identifier);
  OSGiMetaData metadata=getModuleMetadata(module);
  return bundleManager.registerModule(serviceTarget,module,metadata);
}
