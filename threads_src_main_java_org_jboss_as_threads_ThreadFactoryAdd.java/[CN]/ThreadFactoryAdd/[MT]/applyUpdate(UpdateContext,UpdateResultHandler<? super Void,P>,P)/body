{
  final ThreadFactoryService service=new ThreadFactoryService();
  service.setNamePattern(threadNamePattern);
  service.setPriority(priority);
  service.setThreadGroupName(groupName);
  final UpdateResultHandler.ServiceStartListener<P> listener=new UpdateResultHandler.ServiceStartListener<P>(handler,param);
  final BatchBuilder batchBuilder=updateContext.getBatchBuilder();
  final BatchServiceBuilder<ThreadFactory> builder=batchBuilder.addService(ThreadsServices.threadFactoryName(name),service);
  builder.addListener(listener);
  builder.setInitialMode(ServiceController.Mode.ACTIVE);
  try {
    batchBuilder.install();
  }
 catch (  ServiceRegistryException e) {
    handler.handleFailure(e,param);
  }
}
