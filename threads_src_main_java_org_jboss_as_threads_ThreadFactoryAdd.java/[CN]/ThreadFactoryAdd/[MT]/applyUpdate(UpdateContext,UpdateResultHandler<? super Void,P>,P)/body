{
  final ThreadFactoryService service=new ThreadFactoryService();
  service.setNamePattern(threadNamePattern);
  service.setPriority(priority);
  service.setThreadGroupName(groupName);
  final UpdateResultHandler.ServiceStartListener<P> listener=new UpdateResultHandler.ServiceStartListener<P>(handler,param);
  final BatchBuilder batchBuilder=updateContext.getServiceTarget();
  try {
    batchBuilder.addService(ThreadsServices.threadFactoryName(name),service).addListener(listener).setInitialMode(ServiceController.Mode.ACTIVE).install();
    batchBuilder.install();
  }
 catch (  ServiceRegistryException e) {
    handler.handleFailure(e,param);
  }
}
