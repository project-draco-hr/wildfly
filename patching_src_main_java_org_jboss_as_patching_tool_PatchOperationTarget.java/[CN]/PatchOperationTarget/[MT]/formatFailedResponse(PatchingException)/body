{
  final ModelNode result=new ModelNode();
  result.get(OUTCOME).set(FAILED);
  if (e instanceof ContentConflictsException) {
    final ModelNode failureDescription=result.get(FAILURE_DESCRIPTION);
    failureDescription.get(Constants.MESSAGE).set(PatchMessages.MESSAGES.detectedConflicts());
    final ModelNode conflicts=failureDescription.get(Constants.CONFLICTS);
    for (    final ContentItem item : ((ContentConflictsException)e).getConflicts()) {
      final ContentType type=item.getContentType();
switch (type) {
case BUNDLE:
        conflicts.get(Constants.BUNDLES).add(item.getRelativePath());
      break;
case MODULE:
    conflicts.get(Constants.MODULES).add(item.getRelativePath());
  break;
case MISC:
conflicts.get(Constants.MISC).add(item.getRelativePath());
break;
}
}
}
 else {
result.get(FAILURE_DESCRIPTION).set(e.getLocalizedMessage());
}
return result;
}
