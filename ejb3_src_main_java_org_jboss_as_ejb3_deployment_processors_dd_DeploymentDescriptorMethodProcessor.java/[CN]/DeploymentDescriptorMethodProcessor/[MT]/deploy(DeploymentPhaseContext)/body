{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final EEModuleDescription eeModuleDescription=deploymentUnit.getAttachment(org.jboss.as.ee.component.Attachments.EE_MODULE_DESCRIPTION);
  final DeploymentReflectionIndex reflectionIndex=deploymentUnit.getAttachment(org.jboss.as.server.deployment.Attachments.REFLECTION_INDEX);
  final DeploymentClassIndex classIndex=deploymentUnit.getAttachment(org.jboss.as.server.deployment.Attachments.CLASS_INDEX);
  if (eeModuleDescription != null) {
    for (    ComponentDescription component : eeModuleDescription.getComponentDescriptions()) {
      if (component instanceof SessionBeanComponentDescription) {
        try {
          handleSessionBean((SessionBeanComponentDescription)component,classIndex,reflectionIndex);
        }
 catch (        ClassNotFoundException e) {
          throw new DeploymentUnitProcessingException("Could not load component class",e);
        }
      }
    }
  }
}
