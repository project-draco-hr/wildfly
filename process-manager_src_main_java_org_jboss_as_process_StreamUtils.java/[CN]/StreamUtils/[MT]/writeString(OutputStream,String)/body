{
  final int length=s.length();
  int strIdx=0;
  while (strIdx < length) {
    final char c=s.charAt(strIdx++);
    if (c >= 0x20 && c <= 0x7f) {
      output.write((byte)c);
    }
 else     if (c <= 0x07ff) {
      output.write((byte)(0xc0 | 0x1f & c >> 6));
      output.write((byte)(0x80 | 0x3f & c));
    }
 else {
      output.write((byte)(0xe0 | 0x0f & c >> 12));
      output.write((byte)(0x80 | 0x3f & c >> 6));
      output.write((byte)(0x80 | 0x3f & c));
    }
  }
}
