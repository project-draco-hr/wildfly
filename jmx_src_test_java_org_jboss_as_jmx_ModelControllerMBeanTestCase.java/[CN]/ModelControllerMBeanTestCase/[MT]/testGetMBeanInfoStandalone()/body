{
  MBeanServerConnection connection=setupAndGetConnection(new MBeanInfoAdditionalInitialization(ProcessType.STANDALONE_SERVER,new TestExtension()));
  MBeanInfo info=connection.getMBeanInfo(LEGACY_ROOT_NAME);
  Assert.assertNotNull(info);
  for (  MBeanAttributeInfo attr : info.getAttributes()) {
    Assert.assertFalse(attr.getName().contains("-"));
  }
  for (  MBeanOperationInfo op : info.getOperations()) {
    Assert.assertFalse(op.getName().contains("-"));
    for (    MBeanParameterInfo param : op.getSignature()) {
      Assert.assertFalse(param.getName().contains("-"));
    }
  }
  info=connection.getMBeanInfo(createObjectName(LEGACY_DOMAIN + ":subsystem=jmx"));
  Assert.assertNotNull(info);
  Assert.assertEquals(JMXExtension.getResourceDescriptionResolver("").getResourceBundle(Locale.getDefault()).getString(CommonAttributes.JMX),info.getDescription());
  info=connection.getMBeanInfo(createObjectName(LEGACY_DOMAIN + ":subsystem=test"));
  Assert.assertNotNull(info);
  Assert.assertEquals("description",info.getDescription());
  checkMBeanInfoAttributes(info,true,false);
  MBeanOperationInfo[] operations=info.getOperations();
  Assert.assertEquals(4,operations.length);
  OpenMBeanOperationInfo op=findOperation(operations,ModelControllerResourceDefinition.VoidOperationNoParams.OPERATION_JMX_NAME);
  Assert.assertEquals(ModelControllerResourceDefinition.VoidOperationNoParams.OPERATION_JMX_NAME,op.getName());
  Assert.assertEquals("void-no-params",op.getDescription());
  Assert.assertEquals(0,op.getSignature().length);
  Assert.assertEquals(Void.class.getName(),op.getReturnType());
  op=findOperation(operations,ModelControllerResourceDefinition.IntOperationWithParams.OPERATION_JMX_NAME);
  Assert.assertEquals(ModelControllerResourceDefinition.IntOperationWithParams.OPERATION_JMX_NAME,op.getName());
  Assert.assertEquals("int-with-params",op.getDescription());
  Assert.assertEquals(String.class.getName(),op.getReturnType());
  Assert.assertEquals(5,op.getSignature().length);
  Assert.assertEquals("param1",op.getSignature()[0].getName());
  Assert.assertEquals("int-with-params-param1",op.getSignature()[0].getDescription());
  Assert.assertEquals(Long.class.getName(),op.getSignature()[0].getType());
  Assert.assertEquals("param2",op.getSignature()[1].getName());
  Assert.assertEquals("int-with-params-param2",op.getSignature()[1].getDescription());
  Assert.assertEquals(String[].class.getName(),op.getSignature()[1].getType());
  Assert.assertEquals("param3",op.getSignature()[2].getName());
  Assert.assertEquals("int-with-params-param3",op.getSignature()[2].getDescription());
  Assert.assertEquals(TabularData.class.getName(),op.getSignature()[2].getType());
  assertMapType(assertCast(OpenMBeanParameterInfo.class,op.getSignature()[2]).getOpenType(),SimpleType.STRING,SimpleType.INTEGER);
  Assert.assertEquals("param4",op.getSignature()[3].getName());
  Assert.assertEquals("int-with-params-param4",op.getSignature()[3].getDescription());
  Assert.assertEquals(Integer.class.getName(),op.getSignature()[3].getType());
  OpenMBeanParameterInfo parameterInfo=assertCast(OpenMBeanParameterInfo.class,op.getSignature()[3]);
  Assert.assertEquals(6,parameterInfo.getDefaultValue());
  Assert.assertEquals("param5",op.getSignature()[4].getName());
  Assert.assertEquals("int-with-params-param5",op.getSignature()[4].getDescription());
  Assert.assertEquals(Integer.class.getName(),op.getSignature()[4].getType());
  parameterInfo=assertCast(OpenMBeanParameterInfo.class,op.getSignature()[4]);
  Assert.assertNull(parameterInfo.getDefaultValue());
  Assert.assertNull(parameterInfo.getDefaultValue());
  op=findOperation(operations,ModelControllerResourceDefinition.ComplexOperation.OPERATION_NAME);
  Assert.assertEquals(ModelControllerResourceDefinition.ComplexOperation.OPERATION_NAME,op.getName());
  Assert.assertEquals("complex",op.getDescription());
  checkComplexTypeInfo(assertCast(CompositeType.class,op.getReturnOpenType()),false,"complex.");
  Assert.assertEquals(1,op.getSignature().length);
  checkComplexTypeInfo(assertCast(CompositeType.class,assertCast(OpenMBeanParameterInfo.class,op.getSignature()[0]).getOpenType()),false,"param1.");
}
