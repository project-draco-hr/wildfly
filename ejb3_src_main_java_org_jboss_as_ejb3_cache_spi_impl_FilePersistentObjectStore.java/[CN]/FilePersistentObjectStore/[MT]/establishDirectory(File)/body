{
  if (!dir.exists()) {
    if (MkdirsFileAction.mkdirs(dir)) {
      dir.deleteOnExit();
    }
 else     if (!dir.exists()) {
      throw EjbMessages.MESSAGES.passivationDirectoryCreationFailed(dir.getPath());
    }
  }
  if (!dir.isDirectory()) {
    throw EjbMessages.MESSAGES.passivationPathNotADirectory(dir.getPath());
  }
}
