{
  if (!dir.exists()) {
    if (!MkdirsFileAction.mkdirs(dir)) {
      throw EjbMessages.MESSAGES.passivationDirectoryCreationFailed(dir.getPath());
    }
    dir.deleteOnExit();
  }
  if (!dir.isDirectory()) {
    throw EjbMessages.MESSAGES.passivationPathNotADirectory(dir.getPath());
  }
}
