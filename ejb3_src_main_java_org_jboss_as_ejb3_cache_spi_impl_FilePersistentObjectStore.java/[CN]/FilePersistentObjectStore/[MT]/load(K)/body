{
  File file=getFile(key);
  if (!file.exists())   return null;
  log.tracef("Loading state from %s",file);
  try {
    Unmarshaller unmarshaller=this.marshallerFactory.createUnmarshaller(this.configuration);
    FileInputStream inputStream=null;
    try {
      inputStream=FISAction.open(file);
      unmarshaller.start(Marshalling.createByteInput(inputStream));
      try {
        V value=(V)unmarshaller.readObject();
        unmarshaller.finish();
        return value;
      }
  finally {
        unmarshaller.close();
      }
    }
  finally {
      safeClose(inputStream);
      DeleteFileAction.delete(file);
    }
  }
 catch (  Exception e) {
    throw EjbMessages.MESSAGES.activationFailed(e,key);
  }
}
