{
  XBundle sysbundle=(XBundle)context.getBundle(0);
  XBundleRevision revision=sysbundle.getBundleRevision();
  ModuleClassLoader moduleClassLoader=revision.getModuleClassLoader();
  ClassLoaderWrapper classLoader=new ClassLoaderWrapper(moduleClassLoader);
  List<String> inaccessible=new ArrayList<String>();
  for (  BundleCapability cap : revision.getDeclaredCapabilities(PackageNamespace.PACKAGE_NAMESPACE)) {
    XPackageCapability pcap=((XCapability)cap).adapt(XPackageCapability.class);
    Package definedPackage=classLoader.getPackage(pcap.getPackageName());
    System.out.println(pcap.getPackageName() + ": " + definedPackage);
    if (definedPackage == null && pcap.getPackageName().startsWith("javax.")) {
      inaccessible.add(pcap.getPackageName());
    }
  }
}
