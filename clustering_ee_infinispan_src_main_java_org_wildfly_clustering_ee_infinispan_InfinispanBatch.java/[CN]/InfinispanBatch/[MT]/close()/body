{
  if (this.count.getAndDecrement() == 0) {
    try {
      int status=this.tx.getStatus();
      if (status == Status.STATUS_MARKED_ROLLBACK) {
        this.tx.rollback();
      }
 else {
        this.tx.commit();
      }
    }
 catch (    RollbackException|HeuristicMixedException|HeuristicRollbackException|SystemException e) {
      throw new CacheException(e);
    }
  }
}
