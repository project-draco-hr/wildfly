{
  final File standalone=new File(getEnvironment().getServerConfigurationDir(),STANDALONE_XML);
  if (!standalone.isFile()) {
    throw new ServerStartException("File " + standalone.getAbsolutePath() + " does not exist.");
  }
  if (!standalone.canWrite()) {
    throw new ServerStartException("File " + standalone.getAbsolutePath() + " is not writable.");
  }
  final List<AbstractServerModelUpdate<?>> updates=new ArrayList<AbstractServerModelUpdate<?>>();
  try {
    final XMLMapper mapper=XMLMapper.Factory.create();
    extensionRegistrar.registerStandardStandaloneReaders(mapper);
    mapper.parseDocument(updates,XMLInputFactory.newInstance().createXMLStreamReader(new BufferedReader(new FileReader(standalone))));
  }
 catch (  Exception e) {
    throw new ServerStartException("Caught exception during processing of standalone.xml",e);
  }
  final ServerModel config=new ServerModel(null,0);
  try {
    for (    final AbstractServerModelUpdate<?> update : updates) {
      config.update(update);
    }
  }
 catch (  UpdateFailedException e) {
    throw new ServerStartException("failed to process updates",e);
  }
  start(config);
  new Thread(){
{
      setName("Server Life Thread");
      setDaemon(false);
      setPriority(MIN_PRIORITY);
    }
    public void run(){
      for (; ; )       try {
        sleep(1000000L);
      }
 catch (      InterruptedException ignore) {
      }
    }
  }
.start();
}
