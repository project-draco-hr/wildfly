{
  bindings=null;
  final String bindingName=binding.getBindingName();
  if (bindingDescriptions.containsKey(bindingName)) {
    final BindingDescription existingBinding=bindingDescriptions.get(bindingName);
    if (existingBinding.isSharable() != binding.isSharable() || existingBinding.getAuthenticationType() != binding.getAuthenticationType() || !existingBinding.getBindingType().equals(binding.getBindingType())) {
      throw new RuntimeException("Error merging binding " + binding + " with "+ existingBinding+ " in "+ this+ ", the JNDI bindings are not compatible.");
    }
    existingBinding.getInjectionTargetDescriptions().addAll(binding.getInjectionTargetDescriptions());
  }
 else   if (annotationBindingDescriptions.containsKey(bindingName)) {
    if (binding.getInjectionTargetDescriptions().size() == 1) {
      final BindingDescription existingBinding=annotationBindingDescriptions.get(bindingName);
      if (existingBinding.getInjectionTargetDescriptions().size() == 1) {
        InjectionTargetDescription existingTarget=existingBinding.getInjectionTargetDescriptions().get(0);
        InjectionTargetDescription newTarget=binding.getInjectionTargetDescriptions().get(0);
        if (newTarget.getClassName().equals(existingTarget.getClassName()) && newTarget.getType().equals(existingTarget.getType()) && newTarget.getName().equals(existingTarget.getName())) {
          return;
        }
      }
    }
    throw new RuntimeException("Duplicate binding of JNDI name " + bindingName);
  }
 else {
    annotationBindingDescriptions.put(bindingName,binding);
  }
}
