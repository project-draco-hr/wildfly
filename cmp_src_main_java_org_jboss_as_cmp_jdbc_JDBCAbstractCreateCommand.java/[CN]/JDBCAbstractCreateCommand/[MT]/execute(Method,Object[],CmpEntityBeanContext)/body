{
  if (insertAfterEjbPostCreate) {
    if (!JDBCEntityBridge.isEjbCreateDone(ctx)) {
      checkCreateAllowed();
      generateFields(ctx);
      JDBCEntityBridge.setEjbCreateDone(ctx);
    }
 else {
      beforeInsert(ctx);
      performInsert(ctx);
      afterInsert(ctx);
      JDBCEntityBridge.setCreated(ctx);
    }
  }
 else {
    checkCreateAllowed();
    generateFields(ctx);
    beforeInsert(ctx);
    performInsert(ctx);
    afterInsert(ctx);
    JDBCEntityBridge.setCreated(ctx);
  }
  return getPrimaryKey(ctx);
}
