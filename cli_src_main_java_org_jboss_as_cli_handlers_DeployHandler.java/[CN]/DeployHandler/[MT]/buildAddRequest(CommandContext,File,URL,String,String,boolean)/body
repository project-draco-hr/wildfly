{
  final ModelNode request=new ModelNode();
  request.get(Util.OPERATION).set(Util.ADD);
  request.get(Util.ADDRESS,Util.DEPLOYMENT).set(name);
  if (runtimeName != null) {
    request.get(Util.RUNTIME_NAME).set(runtimeName);
  }
  final ModelNode content=request.get(Util.CONTENT).get(0);
  if (f == null) {
    if (url == null) {
      addRequiresDeployment();
    }
    content.get(Util.URL).set(url.toExternalForm());
  }
 else {
    if (unmanaged) {
      content.get(Util.PATH).set(f.getAbsolutePath());
      content.get(Util.ARCHIVE).set(f.isFile());
    }
 else {
      content.get(Util.INPUT_STREAM_INDEX).set(0);
    }
  }
  return request;
}
