{
  byte[] bytes;
  FileInputStream is=null;
  try {
    is=new FileInputStream(f);
    bytes=new byte[(int)f.length()];
    int read=is.read(bytes);
    if (read != bytes.length) {
      throw new OperationFormatException("Failed to read bytes from " + f.getAbsolutePath() + ": "+ read+ " from "+ f.length());
    }
  }
 catch (  Exception e) {
    throw new OperationFormatException("Failed to read file " + f.getAbsolutePath(),e);
  }
 finally {
    StreamUtils.safeClose(is);
  }
  return bytes;
}
