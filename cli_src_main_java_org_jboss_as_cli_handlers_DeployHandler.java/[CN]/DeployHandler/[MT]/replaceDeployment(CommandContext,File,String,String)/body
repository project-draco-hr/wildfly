{
  ModelNode result;
  final ModelNode request=new ModelNode();
  request.get(Util.OPERATION).set(Util.FULL_REPLACE_DEPLOYMENT);
  request.get(Util.NAME).set(name);
  if (runtimeName != null) {
    request.get(Util.RUNTIME_NAME).set(runtimeName);
  }
  FileInputStream is=null;
  try {
    is=new FileInputStream(f);
    OperationBuilder op=new OperationBuilder(request);
    op.addInputStream(is);
    request.get(Util.CONTENT).get(0).get(Util.INPUT_STREAM_INDEX).set(0);
    result=ctx.getModelControllerClient().execute(op.build());
  }
 catch (  Exception e) {
    ctx.printLine("Failed to replace the deployment: " + e.getLocalizedMessage());
    return;
  }
 finally {
    StreamUtils.safeClose(is);
  }
  if (!Util.isSuccess(result)) {
    ctx.printLine(Util.getFailureDescription(result));
    return;
  }
}
