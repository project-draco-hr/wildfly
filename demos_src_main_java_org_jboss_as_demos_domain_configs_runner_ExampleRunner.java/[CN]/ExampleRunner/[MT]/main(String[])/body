{
  DomainClient client=null;
  try {
    client=DomainClient.Factory.create(InetAddress.getByName("localhost"),9999);
    System.out.println("\nReading the domain configuration:\n");
    System.out.println(writeModel("domain",client.getDomainModel()));
    System.out.println("\nReading the list of active server managers:\n");
    List<String> serverManagers=client.getServerManagerNames();
    for (    String sm : serverManagers) {
      System.out.println(sm);
    }
    for (    String sm : serverManagers) {
      System.out.println("\nReading host configuration for server manager " + sm + "\n");
      System.out.println(writeModel("host",client.getHostModel(sm)));
    }
  }
  finally {
    safeClose(client);
  }
}
