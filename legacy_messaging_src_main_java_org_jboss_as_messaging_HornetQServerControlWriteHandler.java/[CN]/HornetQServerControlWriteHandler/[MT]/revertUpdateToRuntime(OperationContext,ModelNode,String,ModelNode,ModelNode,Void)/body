{
  AttributeDefinition attr=getAttributeDefinition(attributeName);
  if (!attr.getFlags().contains(AttributeAccess.Flag.RESTART_ALL_SERVICES)) {
    ServiceRegistry registry=context.getServiceRegistry(true);
    final ServiceName hqServiceName=MessagingServices.getHornetQServiceName(PathAddress.pathAddress(operation.get(OP_ADDR)));
    ServiceController<?> hqService=registry.getService(hqServiceName);
    if (hqService != null && hqService.getState() == ServiceController.State.UP) {
      ModelNode revertOp=operation.clone();
      revertOp.get(attributeName).set(valueToRestore);
      applyOperationToHornetQService(context,revertOp,attributeName,hqService);
    }
  }
}
