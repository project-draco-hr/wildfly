{
  context.startSubsystemElement(Namespace.CURRENT.getUriString(),false);
  ModelNode node=context.getModelNode();
  if (isNonStandard(node,AUTHENTICATION_MANAGER_CLASS_NAME) || (node.hasDefined(DEEP_COPY_SUBJECT_MODE) && node.get(DEEP_COPY_SUBJECT_MODE).asBoolean()) || isNonStandard(node,DEFAULT_CALLBACK_HANDLER_CLASS_NAME)) {
    writer.writeEmptyElement(Element.SECURITY_MANAGEMENT.getLocalName());
    if (isNonStandard(node,AUTHENTICATION_MANAGER_CLASS_NAME)) {
      writeAttribute(writer,Attribute.AUTHENTICATION_MANAGER_CLASS_NAME,node.get(AUTHENTICATION_MANAGER_CLASS_NAME));
    }
    if (node.hasDefined(DEEP_COPY_SUBJECT_MODE) && node.get(DEEP_COPY_SUBJECT_MODE).asBoolean()) {
      writeAttribute(writer,Attribute.DEEP_COPY_SUBJECT_MODE,node.get(DEEP_COPY_SUBJECT_MODE));
    }
    if (isNonStandard(node,DEFAULT_CALLBACK_HANDLER_CLASS_NAME)) {
      writeAttribute(writer,Attribute.DEFAULT_CALLBACK_HANDLER_CLASS_NAME,node.get(DEFAULT_CALLBACK_HANDLER_CLASS_NAME));
    }
  }
  if (isNonStandard(node,SUBJECT_FACTORY_CLASS_NAME)) {
    writer.writeEmptyElement(Element.SUBJECT_FACTORY.getLocalName());
    writeAttribute(writer,Attribute.SUBJECT_FACTORY_CLASS_NAME,node.get(SUBJECT_FACTORY_CLASS_NAME));
  }
  if (node.hasDefined(JAAS_APPLICATION_POLICY) && node.get(JAAS_APPLICATION_POLICY).asInt() > 0) {
    throw new UnsupportedOperationException("Implement detyped jaas element marshalling");
  }
  writer.writeEndElement();
}
