{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final ModuleSpecification moduleSpecification=deploymentUnit.getAttachment(Attachments.MODULE_SPECIFICATION);
  final ModuleLoader moduleLoader=Module.getBootModuleLoader();
  addDependency(moduleSpecification,moduleLoader,JAVAX_PERSISTENCE_API_ID);
  if (!JPADeploymentMarker.isJPADeployment(deploymentUnit)) {
    log.infof("added javax.persistence.api dependency to %s",deploymentUnit.getName());
    return;
  }
  addDependency(moduleSpecification,moduleLoader,JAVAEE_API_ID);
  addDependency(moduleSpecification,moduleLoader,JBOSS_AS_JPA_ID);
  addDependency(moduleSpecification,moduleLoader,JBOSS_AS_JPA_SPI_ID);
  addDependency(moduleSpecification,moduleLoader,JAVASSIST_ID);
  log.infof("added javax.persistence.api, javaee.api, org.jboss.as.jpa, org.javassist dependencies to %s",deploymentUnit.getName());
  addPersistenceProviderModuleDependencies(phaseContext,moduleSpecification,moduleLoader);
}
