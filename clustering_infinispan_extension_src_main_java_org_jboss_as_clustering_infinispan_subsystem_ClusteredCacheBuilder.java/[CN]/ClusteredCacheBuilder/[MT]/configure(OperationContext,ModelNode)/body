{
  Mode mode=ModelNodes.asEnum(ClusteredCacheResourceDefinition.Attribute.MODE.getDefinition().resolveModelAttribute(context,model),Mode.class);
  ClusteringConfigurationBuilder builder=new ConfigurationBuilder().clustering().cacheMode(mode.apply(this.mode));
  if (mode.isSynchronous()) {
    builder.sync().replTimeout(REMOTE_TIMEOUT.getDefinition().resolveModelAttribute(context,model).asLong());
  }
 else {
    builder.async();
  }
  this.clustering=builder.create();
  return super.configure(context,model);
}
