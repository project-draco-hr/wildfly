{
  DeploymentManager manager=getDeploymentManager();
  ProgressObject progress=jsr88Deploy(manager,getBadWebArchive());
  TargetModuleID[] targetModules=progress.getResultTargetModuleIDs();
  try {
    DeploymentStatus state=progress.getDeploymentStatus();
    assertEquals(StateType.FAILED,state.getState());
  }
  finally {
    jsr88Undeploy(manager,targetModules);
  }
}
