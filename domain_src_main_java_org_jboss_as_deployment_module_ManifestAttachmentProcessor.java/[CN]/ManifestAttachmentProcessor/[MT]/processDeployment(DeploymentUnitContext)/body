{
  Manifest manifest=ManifestAttachment.getManifestAttachment(context);
  if (manifest != null)   return;
  final VirtualFile deploymentRoot=getVirtualFileAttachment(context);
  try {
    manifest=VFSUtils.getManifest(deploymentRoot);
    if (manifest != null)     ManifestAttachment.attachManifest(context,manifest);
  }
 catch (  IOException e) {
    throw new DeploymentUnitProcessingException("Failed to get manifest for deployment " + deploymentRoot,e);
  }
}
