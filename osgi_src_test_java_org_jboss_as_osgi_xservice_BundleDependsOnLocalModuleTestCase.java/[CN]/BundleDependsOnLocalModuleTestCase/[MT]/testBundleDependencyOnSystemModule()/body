{
  ModuleIdentifier moduleId=ModuleIdentifier.create("javax.transaction.api");
  assertNotNull("Module not null",loadModule(moduleId));
  Bundle txBundle=getBundleManager().installBundle(moduleId);
  assertBundleState(Bundle.INSTALLED,txBundle.getState());
  JavaArchive archive=getBundleArchive();
  Bundle bundle=executeDeploy(archive);
  assertBundleState(Bundle.INSTALLED,bundle.getState());
  bundle.start();
  assertBundleState(Bundle.ACTIVE,bundle.getState());
  bundle.uninstall();
  assertBundleState(Bundle.UNINSTALLED,bundle.getState());
  txBundle.uninstall();
  assertBundleState(Bundle.UNINSTALLED,txBundle.getState());
}
