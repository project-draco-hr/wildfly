{
  final byte rootId;
  final String filePath;
  ByteDataInput input=null;
  try {
    input=new SimpleByteDataInput(inputStream);
    expectHeader(input,DomainControllerProtocol.PARAM_ROOT_ID);
    rootId=input.readByte();
    expectHeader(input,DomainControllerProtocol.PARAM_FILE_PATH);
    filePath=input.readUTF();
  }
  finally {
    safeClose(input);
  }
  log.infof("Server manager [%s] requested file [%s] from root [%d]",serverManagerId,filePath,rootId);
switch (rootId) {
case 0:
{
      localPath=localFileRepository.getFile(filePath);
      break;
    }
case 1:
{
    localPath=localFileRepository.getConfigurationFile(filePath);
    break;
  }
case 2:
{
  byte[] hash=DeploymentUnitElement.hexStringToBytes(filePath);
  localPath=localFileRepository.getDeploymentRoot(hash);
  break;
}
default :
{
localPath=null;
}
}
}
