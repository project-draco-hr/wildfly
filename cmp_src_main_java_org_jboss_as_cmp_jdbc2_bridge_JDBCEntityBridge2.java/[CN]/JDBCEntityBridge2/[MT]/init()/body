{
  loadCMPFields(metadata);
  loadCMRFields(metadata);
  JDBCOptimisticLockingMetaData olMD=metadata.getOptimisticLocking();
  if (olMD != null) {
    if (olMD.getLockingStrategy() != JDBCOptimisticLockingMetaData.LockingStrategy.VERSION_COLUMN_STRATEGY) {
      throw new RuntimeException("Only version-column optimistic locking strategy is supported at the moment.");
    }
    JDBCCMPFieldMetaData versionMD=olMD.getLockingField();
    versionField=(JDBCCMPFieldBridge2)getFieldByName(versionMD.getFieldName());
  }
}
