{
  loadCMPFields(metadata);
  loadCMRFields(metadata);
  JDBCOptimisticLockingMetaData olMD=metadata.getOptimisticLocking();
  if (olMD != null) {
    if (olMD.getLockingStrategy() != JDBCOptimisticLockingMetaData.LockingStrategy.VERSION_COLUMN_STRATEGY) {
      throw CmpMessages.MESSAGES.onlyVersionLockingSupported();
    }
    JDBCCMPFieldMetaData versionMD=olMD.getLockingField();
    versionField=(JDBCCMPFieldBridge2)getFieldByName(versionMD.getFieldName());
  }
}
