{
  if (componentClass == null) {
    throw new DeploymentUnitProcessingException("Could not find method" + methodData.getMethodName() + "with parameter types"+ methodData.getMethodParams()+ " referenced in ejb-jar.xml");
  }
  final ClassReflectionIndex<?> classIndex=index.getClassIndex(componentClass);
  if (methodData.getMethodParams() == null) {
    final Collection<Method> methods=classIndex.getAllMethods(methodData.getMethodName());
    if (methods.isEmpty()) {
      return resolveMethod(index,componentClass.getSuperclass(),methodData);
    }
 else     if (methods.size() > 1) {
      throw new DeploymentUnitProcessingException("More than one method " + methodData.getMethodName() + "found on class"+ componentClass.getName()+ " referenced in ejb-jar.xml. Specify the parameter types to resolve the ambiguity");
    }
    return methods.iterator().next();
  }
 else {
    final Collection<Method> methods=classIndex.getAllMethods(methodData.getMethodName(),methodData.getMethodParams().size());
    for (    final Method method : methods) {
      boolean match=true;
      for (int i=0; i < method.getParameterTypes().length; ++i) {
        if (!method.getParameterTypes()[i].getName().equals(methodData.getMethodParams().get(i))) {
          match=false;
          break;
        }
      }
      if (match) {
        return method;
      }
    }
  }
  return resolveMethod(index,componentClass.getSuperclass(),methodData);
}
