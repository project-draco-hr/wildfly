{
  if (!cache.containsKey(key)) {
    final EntityBeanComponentInstance instance=createInstance(key);
    realCreate(instance);
  }
  final CacheEntry cacheEntry=cache.get(key);
  cacheEntry.referenceCount.incrementAndGet();
  if (cacheEntry.replacedInstance != null) {
    return cacheEntry.replacedInstance;
  }
 else {
    return cacheEntry.instance;
  }
}
