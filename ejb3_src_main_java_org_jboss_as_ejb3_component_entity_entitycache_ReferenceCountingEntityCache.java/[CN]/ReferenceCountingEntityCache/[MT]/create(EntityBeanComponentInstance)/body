{
  final CacheEntry existing=cache.putIfAbsent(instance.getPrimaryKey(),new CacheEntry(instance));
  if (existing != null) {
    if (existing.instance.isRemoved()) {
      existing.replacedInstance=instance;
    }
 else {
      throw new IllegalArgumentException("Instance for PK [" + instance.getPrimaryKey() + "] already registerd.");
    }
  }
}
