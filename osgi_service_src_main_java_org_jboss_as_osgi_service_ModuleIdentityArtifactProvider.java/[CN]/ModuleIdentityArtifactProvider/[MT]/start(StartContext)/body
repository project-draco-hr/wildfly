{
  BundleContext syscontext=injectedSystemContext.getValue();
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_RANKING,Integer.MAX_VALUE);
  registration=syscontext.registerService(ArtifactProviderPlugin.class.getName(),this,props);
  ServerEnvironment serverEnvironment=injectedEnvironment.getValue();
  bundlesDir=serverEnvironment.getBundlesDir();
  if (bundlesDir.isDirectory() == false)   throw MESSAGES.illegalStateArtifactBaseLocation(bundlesDir);
  modulesDir=new File(bundlesDir.getParent() + File.separator + "modules");
  if (modulesDir.isDirectory() == false)   throw MESSAGES.illegalStateArtifactBaseLocation(modulesDir);
}
