{
  KernelServices legacy=getLegacyServices(modelVersion);
  ModelNode result=new ModelNode();
  if (op.getTransformedOperation() != null) {
    result=legacy.executeOperation(op.getTransformedOperation(),new ModelController.OperationTransactionControl(){
      @Override public void operationPrepared(      ModelController.OperationTransaction transaction,      ModelNode result){
        if (op.rejectOperation(result)) {
          transaction.rollback();
        }
 else {
          transaction.commit();
        }
      }
    }
);
    if (op.rejectOperation(result)) {
      final ModelNode newResponse=new ModelNode();
      newResponse.get(OUTCOME).set(FAILED);
      newResponse.get(FAILURE_DESCRIPTION).set(op.getFailureDescription());
      return newResponse;
    }
  }
  OperationResultTransformer resultTransformer=op.getResultTransformer();
  if (resultTransformer != null) {
    result=resultTransformer.transformResult(result);
  }
  return result;
}
