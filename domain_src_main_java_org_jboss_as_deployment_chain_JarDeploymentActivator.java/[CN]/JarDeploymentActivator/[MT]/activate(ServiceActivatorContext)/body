{
  final BatchBuilder batchBuilder=context.getBatchBuilder();
  addDeploymentProcessor(batchBuilder,new ManifestAttachmentProcessor(),ManifestAttachmentProcessor.PRIORITY);
  addDeploymentProcessor(batchBuilder,new AnnotationIndexProcessor(),AnnotationIndexProcessor.PRIORITY);
  addDeploymentProcessor(batchBuilder,new ModuleDependencyProcessor(),ModuleDependencyProcessor.PRIORITY);
  addDeploymentProcessor(batchBuilder,new ModuleConfigProcessor(),ModuleConfigProcessor.PRIORITY);
  final InjectedValue<DeploymentModuleLoader> moduleLoaderInjector=new InjectedValue<DeploymentModuleLoader>();
  addDeploymentProcessor(batchBuilder,new DeploymentModuleLoaderProcessor(moduleLoaderInjector),DeploymentModuleLoaderProcessor.PRIORITY).addDependency(DeploymentModuleLoaderService.SERVICE_NAME,DeploymentModuleLoader.class,moduleLoaderInjector);
  addDeploymentProcessor(batchBuilder,new ModuleDeploymentProcessor(),ModuleDeploymentProcessor.PRIORITY);
  addDeploymentProcessor(batchBuilder,new ModuleContextProcessor(),ModuleContextProcessor.PRIORITY);
  addDeploymentProcessor(batchBuilder,new ServiceActivatorDependencyProcessor(),ServiceActivatorDependencyProcessor.PRIORITY);
  addDeploymentProcessor(batchBuilder,new ServiceActivatorProcessor(),ServiceActivatorProcessor.PRIORITY);
}
