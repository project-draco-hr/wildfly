{
  final BatchBuilder batchBuilder=context.getBatchBuilder();
  addDeploymentProcessor(batchBuilder,new ManifestAttachmentProcessor(),Phase.MANIFEST_ATTACHMENT_PROCESSOR);
  addDeploymentProcessor(batchBuilder,new AnnotationIndexProcessor(),Phase.ANNOTATION_INDEX_PROCESSOR);
  addDeploymentProcessor(batchBuilder,new ModuleDependencyProcessor(),Phase.MODULE_DEPENDENCY_PROCESSOR);
  addDeploymentProcessor(batchBuilder,new ModuleConfigProcessor(),Phase.MODULE_CONFIG_PROCESSOR);
  final InjectedValue<DeploymentModuleLoader> moduleLoaderInjector=new InjectedValue<DeploymentModuleLoader>();
  addDeploymentProcessor(batchBuilder,new DeploymentModuleLoaderProcessor(moduleLoaderInjector),Phase.DEPLOYMENT_MODULE_LOADER_PROCESSOR).addDependency(DeploymentModuleLoaderService.SERVICE_NAME,DeploymentModuleLoader.class,moduleLoaderInjector);
  addDeploymentProcessor(batchBuilder,new ModuleDeploymentProcessor(),Phase.MODULE_DEPLOYMENT_PROCESSOR);
  addDeploymentProcessor(batchBuilder,new ModuleContextProcessor(),Phase.MODULE_CONTEXT_PROCESSOR);
  addDeploymentProcessor(batchBuilder,new ServiceActivatorDependencyProcessor(),Phase.SERVICE_ACTIVATION_DEPENDENCY_PROCESSOR);
  addDeploymentProcessor(batchBuilder,new ServiceActivatorProcessor(),Phase.SERVICE_ACTIVATOR_PROCESSOR);
}
