{
  final Object other=context.getParameters()[0];
  final Class<?> proxyType=componentView.getProxyClass();
  if (proxyType.isAssignableFrom(other.getClass())) {
    if (other instanceof EJBLocalObject) {
      return ((EJBLocalObject)other).isIdentical(new SessionIdHolder(primaryKeyReference.get()));
    }
 else     if (other instanceof EJBObject) {
      return ((EJBObject)other).isIdentical(new SessionIdHolder(primaryKeyReference.get()));
    }
 else {
      throw new RuntimeException(getClass() + " was attached to a view that is not an EJBObject or a EJBLocalObject");
    }
  }
 else   if (other instanceof SessionIdHolder) {
    return primaryKeyReference.get().equals(((SessionIdHolder)other).primaryKey);
  }
 else {
    return false;
  }
}
