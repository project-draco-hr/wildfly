{
  final char[] thePassword;
  if (base64) {
    byte[] value=Base64.decode(password);
    String tempPassword=new String(value);
    String trimmedPassword=tempPassword.trim();
    if (tempPassword.equals(trimmedPassword) == false) {
      ROOT_LOGGER.whitespaceTrimmed();
    }
    thePassword=trimmedPassword.toCharArray();
  }
 else {
    thePassword=password.toCharArray();
  }
  factory=new CallbackHandlerFactory(){
    public CallbackHandler getCallbackHandler(    String username){
      return new SecretCallbackHandler(username,thePassword);
    }
  }
;
}
