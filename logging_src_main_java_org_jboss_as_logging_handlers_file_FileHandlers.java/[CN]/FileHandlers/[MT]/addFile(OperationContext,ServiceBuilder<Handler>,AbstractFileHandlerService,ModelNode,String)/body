{
  if (file.isDefined()) {
    final ModelNode path=PATH.resolveModelAttribute(context,file);
    final ModelNode relativeTo=RELATIVE_TO.resolveModelAttribute(context,file);
    final ServiceName serviceName=LogServices.handlerFileName(name);
    final ServiceTarget serviceTarget=context.getServiceTarget();
    final HandlerFileService fileService=new HandlerFileService(path.asString());
    final ServiceBuilder<?> fileBuilder=serviceTarget.addService(serviceName,fileService);
    if (relativeTo.isDefined()) {
      fileBuilder.addDependency(AbstractPathService.pathNameOf(relativeTo.asString()),String.class,fileService.getRelativeToInjector());
    }
    fileBuilder.setInitialMode(ServiceController.Mode.ACTIVE).install();
    serviceBuilder.addDependency(LogServices.handlerFileName(name),String.class,service.getFileNameInjector());
  }
}
