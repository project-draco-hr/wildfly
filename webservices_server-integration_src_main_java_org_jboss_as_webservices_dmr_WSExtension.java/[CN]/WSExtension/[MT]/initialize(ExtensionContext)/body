{
  final boolean registerRuntimeOnly=context.isRuntimeOnlyRegistrationValid();
  final SubsystemRegistration subsystem=context.registerSubsystem(SUBSYSTEM_NAME,1,0);
  subsystem.registerXMLElementWriter(WebservicesSubsystemParser.getInstance());
  final ManagementResourceRegistration registration=subsystem.registerSubsystemModel(WSSubsystemProviders.SUBSYSTEM);
  registration.registerOperationHandler(ADD,WSSubsystemAdd.INSTANCE,WSSubsystemProviders.SUBSYSTEM_ADD,false);
  registration.registerOperationHandler(DESCRIBE,WSSubsystemDescribe.INSTANCE,WSSubsystemProviders.SUBSYSTEM_DESCRIBE,false,PRIVATE);
  registration.registerOperationHandler(REMOVE,ReloadRequiredRemoveStepHandler.INSTANCE,WSSubsystemProviders.SUBSYSTEM_REMOVE,false);
  registration.registerReadWriteAttribute(Constants.WSDL_HOST,null,new WSSubsystemAttributeChangeHandler(new StringLengthValidator(1,Integer.MAX_VALUE,true,true)),Storage.CONFIGURATION);
  registration.registerReadWriteAttribute(Constants.WSDL_PORT,null,new WSSubsystemAttributeChangeHandler(new IntRangeValidator(1,Integer.MAX_VALUE,true,true)),Storage.CONFIGURATION);
  registration.registerReadWriteAttribute(Constants.WSDL_SECURE_PORT,null,new WSSubsystemAttributeChangeHandler(new IntRangeValidator(1,Integer.MAX_VALUE,true,true)),Storage.CONFIGURATION);
  registration.registerReadWriteAttribute(Constants.MODIFY_WSDL_ADDRESS,null,new WSSubsystemAttributeChangeHandler(new ModelTypeValidator(ModelType.BOOLEAN,true)),Storage.CONFIGURATION);
  final ManagementResourceRegistration epConfigs=registration.registerSubModel(PathElement.pathElement(ENDPOINT_CONFIG),WSSubsystemProviders.ENDPOINTCONFIG_DESCRIPTION);
  epConfigs.registerOperationHandler(ADD,EndpointConfigAdd.INSTANCE,WSSubsystemProviders.ENDPOINTCONFIG_ADD_DESCRIPTION,false);
  epConfigs.registerOperationHandler(REMOVE,EndpointConfigRemove.INSTANCE,WSSubsystemProviders.ENDPOINTCONFIG_REMOVE_DESCRIPTION,false);
  if (registerRuntimeOnly) {
    final ManagementResourceRegistration deployments=subsystem.registerDeploymentModel(WSSubsystemProviders.DEPLOYMENT_DESCRIPTION);
    final ManagementResourceRegistration endpoints=deployments.registerSubModel(PathElement.pathElement(ENDPOINT),WSSubsystemProviders.ENDPOINT_DESCRIPTION);
    for (    final String attributeName : WSEndpointMetrics.ATTRIBUTES) {
      endpoints.registerMetric(attributeName,WSEndpointMetrics.INSTANCE);
    }
  }
}
