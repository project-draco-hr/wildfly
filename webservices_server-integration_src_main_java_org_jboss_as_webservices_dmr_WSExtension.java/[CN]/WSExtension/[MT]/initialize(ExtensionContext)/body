{
  final boolean registerRuntimeOnly=context.isRuntimeOnlyRegistrationValid();
  final SubsystemRegistration subsystem=context.registerSubsystem(SUBSYSTEM_NAME,1,0);
  subsystem.registerXMLElementWriter(WebservicesSubsystemParser.getInstance());
  final ManagementResourceRegistration registration=subsystem.registerSubsystemModel(WSSubsystemProviders.SUBSYSTEM);
  registration.registerOperationHandler(ADD,WSSubsystemAdd.INSTANCE,WSSubsystemProviders.SUBSYSTEM_ADD,false);
  registration.registerOperationHandler(DESCRIBE,WSSubsystemDescribe.INSTANCE,WSSubsystemProviders.SUBSYSTEM_DESCRIBE,false,PRIVATE);
  registration.registerOperationHandler(REMOVE,ReloadRequiredRemoveStepHandler.INSTANCE,WSSubsystemProviders.SUBSYSTEM_REMOVE,false);
  registration.registerReadWriteAttribute(WSDL_HOST,null,new WSSubsystemAttributeChangeHandler(new StringLengthValidator(1,Integer.MAX_VALUE,true,true)),Storage.CONFIGURATION);
  registration.registerReadWriteAttribute(WSDL_PORT,null,new WSSubsystemAttributeChangeHandler(new IntRangeValidator(1,Integer.MAX_VALUE,true,true)),Storage.CONFIGURATION);
  registration.registerReadWriteAttribute(WSDL_SECURE_PORT,null,new WSSubsystemAttributeChangeHandler(new IntRangeValidator(1,Integer.MAX_VALUE,true,true)),Storage.CONFIGURATION);
  registration.registerReadWriteAttribute(MODIFY_WSDL_ADDRESS,null,new WSSubsystemAttributeChangeHandler(new ModelTypeValidator(ModelType.BOOLEAN,true)),Storage.CONFIGURATION);
  final ManagementResourceRegistration endpointConfig=registration.registerSubModel(endpointConfigPath,WSSubsystemProviders.ENDPOINT_CONFIG_DESCRIPTION);
  endpointConfig.registerOperationHandler(ADD,EndpointConfigAdd.INSTANCE,WSSubsystemProviders.ENDPOINT_CONFIG_ADD_DESCRIPTION,false);
  endpointConfig.registerOperationHandler(REMOVE,EndpointConfigRemove.INSTANCE,WSSubsystemProviders.ENDPOINT_CONFIG_REMOVE_DESCRIPTION,false);
  final ManagementResourceRegistration endpointConfigFeature=endpointConfig.registerSubModel(featurePath,WSSubsystemProviders.ENDPOINT_CONFIG_FEATURE_DESCRIPTION);
  endpointConfigFeature.registerOperationHandler(ADD,EndpointConfigFeatureAdd.INSTANCE,WSSubsystemProviders.ENDPOINT_CONFIG_FEATURE_ADD_DESCRIPTION,false);
  endpointConfigFeature.registerOperationHandler(REMOVE,EndpointConfigFeatureRemove.INSTANCE,WSSubsystemProviders.ENDPOINT_CONFIG_FEATURE_REMOVE_DESCRIPTION,false);
  final ManagementResourceRegistration endpointConfigProperty=endpointConfig.registerSubModel(propertyPath,WSSubsystemProviders.ENDPOINT_CONFIG_PROPERTY_DESCRIPTION);
  endpointConfigProperty.registerOperationHandler(ADD,EndpointConfigPropertyAdd.INSTANCE,WSSubsystemProviders.ENDPOINT_CONFIG_PROPERTY_ADD_DESCRIPTION,false);
  endpointConfigProperty.registerOperationHandler(REMOVE,EndpointConfigPropertyRemove.INSTANCE,WSSubsystemProviders.ENDPOINT_CONFIG_PROPERTY_REMOVE_DESCRIPTION,false);
  endpointConfigProperty.registerReadWriteAttribute(VALUE,null,new EndpointConfigPropertyValueChangeHandler(new StringLengthValidator(1,Integer.MAX_VALUE,true,true)),Storage.CONFIGURATION);
  if (registerRuntimeOnly) {
    final ManagementResourceRegistration deployments=subsystem.registerDeploymentModel(WSSubsystemProviders.DEPLOYMENT_DESCRIPTION);
    final ManagementResourceRegistration endpoints=deployments.registerSubModel(endpointPath,WSSubsystemProviders.ENDPOINT_DESCRIPTION);
    for (    final String attributeName : WSEndpointMetrics.ATTRIBUTES) {
      endpoints.registerMetric(attributeName,WSEndpointMetrics.INSTANCE);
    }
  }
}
