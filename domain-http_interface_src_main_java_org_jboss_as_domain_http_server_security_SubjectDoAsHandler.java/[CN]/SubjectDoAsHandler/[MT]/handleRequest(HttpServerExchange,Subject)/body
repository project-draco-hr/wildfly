{
  if (subject != null) {
    try {
      Subject.doAs(subject,new PrivilegedExceptionAction<Void>(){
        @Override public Void run() throws Exception {
          wrapped.handleRequest(exchange);
          return null;
        }
      }
);
    }
 catch (    PrivilegedActionException e) {
      throw e.getException();
    }
  }
 else {
    wrapped.handleRequest(exchange);
  }
}
