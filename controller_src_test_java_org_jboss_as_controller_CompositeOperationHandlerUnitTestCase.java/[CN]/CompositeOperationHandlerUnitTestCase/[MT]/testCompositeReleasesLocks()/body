{
  System.out.println("------");
  assertTrue(sharedState.get());
  ModelNode step1=getOperation("good","attr1",2);
  ModelNode step2=getOperation("good-service","attr2",1);
  controller.execute(getCompositeOperation(null,step1,step2),null,null,null);
  System.out.println("------");
  final CountDownLatch latch=new CountDownLatch(1);
  final AtomicInteger i=new AtomicInteger();
  new Thread(new Runnable(){
    @Override public void run(){
      i.set(controller.execute(getOperation("good","attr1",3),null,null,null).get("result").asInt());
      latch.countDown();
    }
  }
).start();
  latch.await();
  assertEquals(2,i.get());
}
