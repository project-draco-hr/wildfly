{
  ModelNode step1=getOperation("good","attr1",2);
  ModelNode step2=getOperation("good","attr2",1);
  ModelNode comp1=getCompositeOperation(null,step1,step2);
  ModelNode step3=getOperation("good","attr1",20);
  ModelNode step4=getOperation("good-service","attr2",10);
  ModelNode comp2=getCompositeOperation(null,step3,step4);
  ModelNode op=getCompositeOperation(null,comp1,comp2);
  ModelNode result=controller.execute(op,null,null,null);
  Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
  assertTrue(result.hasDefined(RESULT));
  assertTrue(result.get(RESULT).hasDefined("step-1"));
  assertTrue(result.get(RESULT,"step-1").hasDefined(OUTCOME));
  Assert.assertEquals(SUCCESS,result.get(RESULT,"step-1",OUTCOME).asString());
  assertTrue(result.get(RESULT).hasDefined("step-2"));
  assertTrue(result.get(RESULT,"step-2").hasDefined(OUTCOME));
  Assert.assertEquals(SUCCESS,result.get(RESULT,"step-2",OUTCOME).asString());
  Assert.assertEquals(20,controller.execute(getOperation("good","attr1",3),null,null,null).get(RESULT).asInt());
  Assert.assertEquals(10,controller.execute(getOperation("good","attr2",3),null,null,null).get(RESULT).asInt());
  assertFalse(sharedState.get());
  ServiceController<?> sc=container.getService(ServiceName.JBOSS.append("good-service"));
  assertNotNull(sc);
  Assert.assertEquals(ServiceController.State.UP,sc.getState());
}
