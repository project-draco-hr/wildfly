{
  if (config == null) {
    throw new IllegalArgumentException("null standalone config");
  }
  this.config=config;
  log.infof("Starting server '%s'",config.getServerName());
  serviceContainer=ServiceContainer.Factory.create();
  final BatchBuilder batchBuilder=serviceContainer.batchBuilder();
  final ServerStartupListener listener=new ServerStartupListener(createListenerCallback());
  batchBuilder.addListener(listener);
  try {
    final ServiceActivatorContext serviceActivatorContext=new ServiceActivatorContextImpl(batchBuilder);
    config.activate(serviceActivatorContext);
    batchBuilder.install();
    listener.finishBatch();
  }
 catch (  Throwable t) {
    throw new ServerStartException("Failed to start server",t);
  }
}
