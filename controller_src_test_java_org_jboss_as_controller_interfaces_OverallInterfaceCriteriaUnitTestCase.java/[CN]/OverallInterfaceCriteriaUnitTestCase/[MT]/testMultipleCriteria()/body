{
  if (nonLoopBackInterfaces.size() < 1 || loopbackInterfaces.size() < 1) {
    return;
  }
  Map<NetworkInterface,Set<InetAddress>> correct=new HashMap<NetworkInterface,Set<InetAddress>>();
  for (  NetworkInterface ni : loopbackInterfaces) {
    if (ni.isUp()) {
      correct.put(ni,getRightTypeAddresses(allCandidates.get(ni)));
    }
  }
  if (correct.size() == 0) {
    return;
  }
  Set<InterfaceCriteria> criterias=new HashSet<InterfaceCriteria>();
  criterias.add(UpInterfaceCriteria.INSTANCE);
  criterias.add(LoopbackInterfaceCriteria.INSTANCE);
  OverallInterfaceCriteria testee=new OverallInterfaceCriteria("test",criterias);
  Map<NetworkInterface,Set<InetAddress>> result=testee.getAcceptableAddresses(allCandidates);
  assertNotNull(result);
  assertEquals(1,result.size());
  Map.Entry<NetworkInterface,Set<InetAddress>> entry=result.entrySet().iterator().next();
  assertEquals(1,entry.getValue().size());
  Set<InetAddress> set=correct.get(entry.getKey());
  assertNotNull(set);
  assertTrue(set.contains(entry.getValue().iterator().next()));
}
