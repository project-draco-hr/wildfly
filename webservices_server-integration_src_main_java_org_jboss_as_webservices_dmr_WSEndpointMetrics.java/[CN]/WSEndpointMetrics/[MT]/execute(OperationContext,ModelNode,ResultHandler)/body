{
  if (context.getRuntimeContext() != null) {
    context.getRuntimeContext().setRuntimeTask(new RuntimeTask(){
      public void execute(      RuntimeTaskContext context) throws OperationFailedException {
        final ServiceController<?> controller=context.getServiceRegistry().getService(WSServices.REGISTRY_SERVICE);
        if (controller != null) {
          try {
            final ModelNode result=getEndpointMetricsFragment(operation,controller);
            resultHandler.handleResultFragment(ResultHandler.EMPTY_LOCATION,result);
            resultHandler.handleResultComplete();
          }
 catch (          Exception e) {
            throw new OperationFailedException(new ModelNode().set(getFallbackMessage() + ": " + e.getMessage()));
          }
        }
 else {
          fallback(resultHandler,getFallbackMessage());
        }
      }
    }
);
  }
 else {
    fallback(resultHandler,getFallbackMessage());
  }
  return new BasicOperationResult();
}
