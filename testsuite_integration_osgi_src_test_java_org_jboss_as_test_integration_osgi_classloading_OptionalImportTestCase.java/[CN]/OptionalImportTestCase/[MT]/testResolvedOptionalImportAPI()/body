{
  InputStream inputB=deployer.getDeployment(BUNDLE_B);
  Bundle bundleB=context.installBundle(BUNDLE_B,inputB);
  try {
    Assert.assertEquals("Bundle INSTALLED",Bundle.INSTALLED,bundleB.getState());
    InputStream inputA=deployer.getDeployment(BUNDLE_A);
    Bundle bundleA=context.installBundle(BUNDLE_A,inputA);
    try {
      Assert.assertEquals(Bundle.INSTALLED,bundleA.getState());
      bundleA.start();
      Assert.assertEquals("Bundle ACTIVE",Bundle.ACTIVE,bundleA.getState());
      Assert.assertEquals("Bundle RESOLVED",Bundle.RESOLVED,bundleB.getState());
      bundleA.loadClass(TestBA.class.getName()).newInstance();
    }
  finally {
      bundleA.uninstall();
    }
  }
  finally {
    bundleB.uninstall();
  }
}
