{
  if (qualifiedHostName == null) {
    qualifiedHostName=providedHostName;
    if (qualifiedHostName == null) {
      qualifiedHostName=env.get("HOSTNAME");
    }
    if (qualifiedHostName == null) {
      qualifiedHostName=env.get("COMPUTERNAME");
    }
    if (qualifiedHostName == null) {
      try {
        qualifiedHostName=NetworkUtils.canonize(InetAddressUtil.getLocalHost().getHostName());
      }
 catch (      UnknownHostException e) {
        qualifiedHostName=null;
      }
    }
    if (qualifiedHostName != null && qualifiedHostName.matches("^\\d+\\.\\d+\\.\\d+\\.\\d+$|:")) {
      qualifiedHostName=null;
    }
    if (qualifiedHostName == null) {
      qualifiedHostName="unknown-host.unknown-domain";
    }
 else {
      qualifiedHostName=qualifiedHostName.trim().toLowerCase();
    }
  }
 else {
    providedProperties.setProperty(QUALIFIED_HOST_NAME,qualifiedHostName);
  }
  this.qualifiedHostName=qualifiedHostName;
  configureHostName(providedProperties.getProperty(HOST_NAME),providedProperties);
}
