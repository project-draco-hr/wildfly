{
  if (props == null) {
    throw new IllegalArgumentException("props is null");
  }
  this.props=props;
  if (stdin == null) {
    throw new IllegalArgumentException("stdin is null");
  }
  this.stdin=stdin;
  if (stdout == null) {
    throw new IllegalArgumentException("stdout is null");
  }
  this.stdout=stdout;
  if (stderr == null) {
    throw new IllegalArgumentException("stderr is null");
  }
  this.stderr=stderr;
  this.processManagerPort=processManagerPort;
  if (processManagerPort != null) {
    if (processManagerAddress == null) {
      this.processManagerAddress=findLocalhost();
    }
 else {
      this.processManagerAddress=processManagerAddress;
    }
  }
 else   if (processManagerAddress != null) {
    throw new IllegalArgumentException("processManagerPort is null; cannot be null when processManagerAddress is set");
  }
 else {
    this.processManagerAddress=null;
  }
  this.homeDir=getFileFromProperty(HOME_DIR);
  if (homeDir == null)   throw new IllegalStateException("Missing configuration value for: " + HOME_DIR);
  System.setProperty(HOME_DIR,homeDir.getAbsolutePath());
  File tmp=getFileFromProperty(MODULES_DIR);
  if (tmp == null) {
    tmp=new File(this.homeDir,"modules");
  }
  this.modulesDir=tmp;
  System.setProperty(MODULES_DIR,this.modulesDir.getAbsolutePath());
  tmp=getFileFromProperty(SERVER_BASE_DIR);
  if (tmp == null) {
    tmp=new File(this.homeDir,"server");
  }
  this.serverBaseDir=tmp;
  System.setProperty(SERVER_BASE_DIR,this.serverBaseDir.getAbsolutePath());
  tmp=getFileFromProperty(SERVER_CONFIG_DIR);
  if (tmp == null) {
    tmp=new File(this.serverBaseDir,"configuration");
  }
  this.serverConfigurationDir=tmp;
  System.setProperty(SERVER_CONFIG_DIR,this.serverConfigurationDir.getAbsolutePath());
  tmp=getFileFromProperty(SERVER_DATA_DIR);
  if (tmp == null) {
    tmp=new File(this.serverBaseDir,"data");
  }
  this.serverDataDir=tmp;
  System.setProperty(SERVER_DATA_DIR,this.serverDataDir.getAbsolutePath());
  tmp=getFileFromProperty(SERVER_DEPLOY_DIR);
  if (tmp == null) {
    tmp=new File(this.serverBaseDir,"deployments");
  }
  this.serverDeployDir=tmp;
  System.setProperty(SERVER_DEPLOY_DIR,this.serverDeployDir.getAbsolutePath());
  tmp=getFileFromProperty(SERVER_LOG_DIR);
  if (tmp == null) {
    tmp=new File(this.serverBaseDir,"log");
  }
  this.serverLogDir=tmp;
  System.setProperty(SERVER_LOG_DIR,this.serverLogDir.getAbsolutePath());
  tmp=getFileFromProperty(SERVER_TEMP_DIR);
  if (tmp == null) {
    tmp=new File(this.serverBaseDir,"tmp");
  }
  this.serverTempDir=tmp;
  System.setProperty(SERVER_TEMP_DIR,this.serverTempDir.getAbsolutePath());
}
