{
  if (deploymentRepository != null) {
    try {
      validator.validate(operation);
      InputStream is=getContentInputStream(context,operation);
      try {
        byte[] hash=deploymentRepository.addDeploymentContent(is);
        resultHandler.handleResultFragment(EMPTY,new ModelNode().set(hash));
      }
  finally {
        safeClose(is);
      }
    }
 catch (    IOException e) {
      throw new OperationFailedException(new ModelNode().set(e.toString()));
    }
  }
  resultHandler.handleResultComplete();
  return new BasicOperationResult();
}
