{
  PathAddress pathAddress=PathAddress.pathAddress(operation.require(OP_ADDR));
  String channelName=pathAddress.getElement(pathAddress.size() - 1).getValue();
  String attrName=operation.require(NAME).asString();
  ChannelMetrics metric=ChannelMetrics.getStat(attrName);
  System.out.println("retrieving metric for attribute: " + attrName);
  ServiceName channelServiceName=ChannelInstanceCustomResource.CHANNEL_PARENT.append(channelName);
  ServiceController<?> controller=context.getServiceRegistry(false).getService(channelServiceName);
  boolean started=controller != null && controller.getValue() != null;
  ModelNode result=new ModelNode();
  if (metric == null) {
    context.getFailureDescription().set(String.format("Unknown metric %s",attrName));
  }
 else   if (!started) {
  }
 else {
    Channel channel=(Channel)controller.getValue();
switch (metric) {
case VIEW:
      result.set(channel.getView().toString());
    break;
case STATE:
  break;
}
context.getResult().set(result);
}
context.completeStep(OperationContext.ResultHandler.NOOP_RESULT_HANDLER);
}
