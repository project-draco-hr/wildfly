{
  String spec="osgi:eager,web";
  String profiles="";
  String prefix="subsystems";
  String filename="target/subsystems-osgi.xml";
  GenerateSubsystemsDefinition.main(new String[]{spec,profiles,prefix,filename});
  File outfile=new File(filename);
  Assert.assertTrue("File exists: " + outfile,outfile.exists());
  SubsystemsParser parser=new SubsystemsParser(outfile);
  parser.parse();
  SubsystemConfig[] configs=parser.getSubsystemConfigs().get("");
  Assert.assertEquals("Two subsystems",2,configs.length);
  Assert.assertEquals(prefix + "/osgi.xml",configs[0].getSubsystem());
  Assert.assertEquals("eager",configs[0].getSupplement());
  Assert.assertEquals(prefix + "/web.xml",configs[1].getSubsystem());
  Assert.assertNull(configs[1].getSupplement());
}
