{
  try {
    final JMSServerManager jmsServer=new JMSServerManagerImpl(hornetQServer.getValue());
    final NamingStore namingStore=namingStoreInjector.getOptionalValue();
    if (namingStore != null) {
      jmsServer.setContext((Context)namingStore.lookup(new CompositeName()));
    }
    try {
      final ClassLoader loader=getClass().getClassLoader();
      SecurityActions.setContextClassLoader(loader);
      jmsServer.start();
    }
  finally {
      SecurityActions.setContextClassLoader(null);
    }
    this.jmsServer=jmsServer;
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
}
