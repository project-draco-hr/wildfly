{
  log.infof("%s listening on %d",name,serverSocket.getLocalPort());
  try {
    while (!shutdown.get()) {
      Socket socket=serverSocket.accept();
      executor.execute(new AcceptorTask(socket));
    }
  }
 catch (  SocketException e) {
    log.infof("%s server socket was closed",name);
  }
catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
    shutdown();
  }
}
