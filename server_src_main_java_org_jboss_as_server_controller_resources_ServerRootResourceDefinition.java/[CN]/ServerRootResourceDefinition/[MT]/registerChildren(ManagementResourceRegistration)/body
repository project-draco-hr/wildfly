{
  resourceRegistration.registerSubModel(SystemPropertyResourceDefinition.createForStandaloneServer(serverEnvironment));
  resourceRegistration.registerSubModel(new VaultResourceDefinition(vaultReader));
  final EnvironmentNameReader environmentReader=new EnvironmentNameReader(){
    public boolean isServer(){
      return true;
    }
    public String getServerName(){
      return serverEnvironment.getServerName();
    }
    public String getHostName(){
      return serverEnvironment.getHostControllerName();
    }
    public String getProductName(){
      if (serverEnvironment.getProductConfig() != null && serverEnvironment.getProductConfig().getProductName() != null) {
        return serverEnvironment.getProductConfig().getProductName();
      }
      return null;
    }
  }
;
  final ResourceDefinition managementDefinition;
  if (isDomain) {
    managementDefinition=CoreManagementResourceDefinition.forDomainServer(authorizer,auditLogger,pathManager,environmentReader);
  }
 else {
    managementDefinition=CoreManagementResourceDefinition.forStandaloneServer(authorizer,auditLogger,pathManager,environmentReader,NativeManagementResourceDefinition.INSTANCE,NativeRemotingManagementResourceDefinition.INSTANCE,HttpManagementResourceDefinition.INSTANCE);
  }
  resourceRegistration.registerSubModel(managementDefinition);
  resourceRegistration.registerSubModel(new ServiceContainerResourceDefinition());
  resourceRegistration.registerSubModel(new ModuleLoadingResourceDefinition());
  PlatformMBeanResourceRegistrar.registerPlatformMBeanResources(resourceRegistration);
  resourceRegistration.registerSubModel(PathResourceDefinition.createSpecified(pathManager));
  ManagementResourceRegistration interfaces=resourceRegistration.registerSubModel(new InterfaceDefinition(SpecifiedInterfaceAddHandler.INSTANCE,SpecifiedInterfaceRemoveHandler.INSTANCE,true));
  interfaces.registerReadOnlyAttribute(NetworkInterfaceRuntimeHandler.RESOLVED_ADDRESS,NetworkInterfaceRuntimeHandler.INSTANCE);
  interfaces.registerOperationHandler(SpecifiedInterfaceResolveHandler.DEFINITION,SpecifiedInterfaceResolveHandler.INSTANCE);
  resourceRegistration.registerSubModel(new SocketBindingGroupResourceDefinition(BindingGroupAddHandler.INSTANCE,SocketBindingGroupRemoveHandler.INSTANCE,false,SocketBindingResourceDefinition.INSTANCE,RemoteDestinationOutboundSocketBindingResourceDefinition.INSTANCE,LocalDestinationOutboundSocketBindingResourceDefinition.INSTANCE));
  ManagementResourceRegistration deployments=resourceRegistration.registerSubModel(ServerDeploymentResourceDefinition.create(contentRepository,vaultReader));
  resourceRegistration.registerSubModel(new DeploymentOverlayDefinition(DeploymentOverlayPriority.SERVER,contentRepository,null));
  deployments.registerSubModel(new SimpleResourceDefinition(PathElement.pathElement(SUBDEPLOYMENT),DeploymentAttributes.DEPLOYMENT_RESOLVER));
  resourceRegistration.registerSubModel(new ExtensionResourceDefinition(extensionRegistry,parallelBoot,true,false));
  if (extensionRegistry != null) {
    extensionRegistry.setSubsystemParentResourceRegistrations(resourceRegistration,deployments);
    extensionRegistry.setPathManager(pathManager);
  }
  resourceRegistration.registerOperationHandler(DeployerChainAddHandler.DEFINITION,DeployerChainAddHandler.INSTANCE,false);
}
