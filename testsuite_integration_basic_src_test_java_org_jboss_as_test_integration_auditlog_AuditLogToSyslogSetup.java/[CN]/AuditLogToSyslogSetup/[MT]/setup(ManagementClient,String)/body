{
  SyslogServer.shutdown();
  final String host=Utils.getHost(managementClient);
  SyslogServerConfigIF config=getSyslogConfig();
  config.setUseStructuredData(true);
  config.setHost(host);
  config.setPort(SYSLOG_PORT);
  config.addEventHandler(new BlockedSyslogServerEventHandler());
  final String syslogProtocol=getSyslogProtocol();
  server=SyslogServer.createInstance(syslogProtocol,config);
  SyslogServer.getThreadedInstance(syslogProtocol);
  addSyslogHandler(managementClient,AUDIT_SYSLOG_HANDLER_ADDR,host,null,null);
  addSyslogHandler(managementClient,AUDIT_SYSLOG_HANDLER_ADDR2,host,"TestApp",Facility.LINE_PRINTER);
  ModelNode op=Util.createAddOperation(AUDIT_LOG_LOGGER_SYSLOG_HANDLER_ADDR);
  Utils.applyUpdate(op,managementClient.getControllerClient());
  op=Util.getWriteAttributeOperation(AUDIT_LOG_LOGGER_ADDR,LOG_READ_ONLY,false);
  Utils.applyUpdate(op,managementClient.getControllerClient());
}
