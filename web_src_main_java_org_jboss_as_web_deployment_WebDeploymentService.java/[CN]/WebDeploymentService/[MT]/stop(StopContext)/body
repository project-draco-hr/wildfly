{
  final ClassLoader oldTccl=SecurityActions.getContextClassLoader();
  try {
    SecurityActions.setContextClassLoader(context.getLoader().getClassLoader());
    try {
      context.stop();
    }
 catch (    LifecycleException e) {
      log.error("exception while stopping context",e);
    }
    try {
      context.destroy();
    }
 catch (    Exception e) {
      log.error("exception while destroying context",e);
    }
  }
  finally {
    SecurityActions.setContextClassLoader(oldTccl);
  }
}
