{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final Module module=deploymentUnit.getAttachment(org.jboss.as.server.deployment.Attachments.MODULE);
  final EEModuleDescription eeModuleDescription=deploymentUnit.getAttachment(Attachments.EE_MODULE_DESCRIPTION);
  final CompositeIndex index=deploymentUnit.getAttachment(org.jboss.as.server.deployment.Attachments.COMPOSITE_ANNOTATION_INDEX);
  final List<AnnotationInstance> resourceAnnotations=index.getAnnotations(WEB_SERVICE_REF_ANNOTATION_NAME);
  for (  AnnotationInstance annotation : resourceAnnotations) {
    final AnnotationTarget annotationTarget=annotation.target();
    final WebServiceRefWrapper annotationWrapper=new WebServiceRefWrapper(annotation);
    if (annotationTarget instanceof FieldInfo) {
      processFieldRef(deploymentUnit,module,eeModuleDescription,annotationWrapper,(FieldInfo)annotationTarget);
    }
 else     if (annotationTarget instanceof MethodInfo) {
      processMethodRef(deploymentUnit,module,eeModuleDescription,annotationWrapper,(MethodInfo)annotationTarget);
    }
 else     if (annotationTarget instanceof ClassInfo) {
      processClassRef(deploymentUnit,module,eeModuleDescription,annotationWrapper,(ClassInfo)annotationTarget);
    }
  }
  final List<AnnotationInstance> resourcesAnnotations=index.getAnnotations(WEB_SERVICE_REFS_ANNOTATION_NAME);
  for (  AnnotationInstance outerAnnotation : resourcesAnnotations) {
    final AnnotationTarget annotationTarget=outerAnnotation.target();
    if (annotationTarget instanceof ClassInfo) {
      final AnnotationInstance[] values=outerAnnotation.value("value").asNestedArray();
      for (      AnnotationInstance annotation : values) {
        processClassRef(deploymentUnit,module,eeModuleDescription,new WebServiceRefWrapper(annotation),(ClassInfo)annotationTarget);
      }
    }
  }
}
