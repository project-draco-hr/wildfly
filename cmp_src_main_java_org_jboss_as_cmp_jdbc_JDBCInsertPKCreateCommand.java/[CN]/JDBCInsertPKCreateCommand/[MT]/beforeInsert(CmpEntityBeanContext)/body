{
  if (existsSQL != null) {
    Connection c=null;
    PreparedStatement ps=null;
    ResultSet rs=null;
    try {
      if (debug)       log.debug("Executing SQL: " + existsSQL);
      c=entity.getDataSource().getConnection();
      ps=c.prepareStatement(existsSQL);
      Object pk=entity.extractPrimaryKeyFromInstance(ctx);
      entity.setPrimaryKeyParameters(ps,1,pk);
      rs=ps.executeQuery();
      if (!rs.next()) {
        throw MESSAGES.errorCheckingEntityExists(pk);
      }
      if (rs.getInt(1) > 0) {
        throw MESSAGES.entityWithPKExists(pk);
      }
    }
 catch (    SQLException e) {
      throw MESSAGES.errorCheckingIfEntityExists(e);
    }
 finally {
      JDBCUtil.safeClose(rs);
      JDBCUtil.safeClose(ps);
      JDBCUtil.safeClose(c);
    }
  }
}
