{
  UUID setId=unmarshal(unmarshaller,UUID.class);
  DeploymentSetPlanResult setResult=setResults.get(setId);
  if (setResult == null) {
    throw new IOException("Unknown deployment set plan " + setId);
  }
  byte nextHeader=unmarshaller.readByte();
  expectHeader(nextHeader,DomainClientProtocol.RETURN_DEPLOYMENT_ACTION_ID);
  do {
    nextHeader=readDeploymentActionRollback(setResult);
  }
 while (nextHeader != DomainClientProtocol.RETURN_DEPLOYMENT_ACTION_ID);
  if (nextHeader == DomainClientProtocol.RETURN_SERVER_DEPLOYMENT_ROLLBACK) {
    do {
      nextHeader=readServerDeploymentRollback(setResult);
    }
 while (nextHeader == DomainClientProtocol.RETURN_SERVER_DEPLOYMENT_ROLLBACK);
  }
  return nextHeader;
}
