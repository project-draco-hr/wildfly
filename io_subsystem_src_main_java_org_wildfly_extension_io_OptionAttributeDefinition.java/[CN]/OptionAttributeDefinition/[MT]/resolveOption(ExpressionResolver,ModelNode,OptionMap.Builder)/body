{
  ModelNode value=resolveModelAttribute(context,model);
  if (value.isDefined()) {
    if (getType() == ModelType.INT) {
      builder.set((Option<Integer>)option,value.asInt());
    }
 else     if (getType() == ModelType.LONG) {
      builder.set(option,value.asLong());
    }
 else     if (getType() == ModelType.BOOLEAN) {
      builder.set(option,value.asBoolean());
    }
 else     if (optionType.isEnum()) {
      builder.set(option,option.parseValue(value.asString(),option.getClass().getClassLoader()));
    }
 else     if (option.getClass().getSimpleName().equals("SequenceOption")) {
      builder.setSequence(option,value.asString().split(","));
    }
 else     if (getType() == ModelType.STRING) {
      builder.set(option,value.asString());
    }
 else {
      throw new OperationFailedException("Dont know how to handle: " + option + " with value: "+ value);
    }
  }
  return builder;
}
