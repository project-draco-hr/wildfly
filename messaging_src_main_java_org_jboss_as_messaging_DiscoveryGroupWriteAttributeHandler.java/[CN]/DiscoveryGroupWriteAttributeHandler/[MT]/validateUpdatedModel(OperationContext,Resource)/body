{
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    final OperationContext context,    final ModelNode operation) throws OperationFailedException {
      final String attributeName=operation.require(NAME).asString();
      final AttributeDefinition attr=getAttributeDefinition(attributeName);
      final Resource resource=context.readResource(PathAddress.EMPTY_ADDRESS);
      if (attr.hasAlternative(resource.getModel())) {
        context.setRollbackOnly();
        throw new OperationFailedException(new ModelNode().set(MESSAGES.altAttributeAlreadyDefined(attributeName)));
      }
      context.stepCompleted();
    }
  }
,OperationContext.Stage.VERIFY);
}
