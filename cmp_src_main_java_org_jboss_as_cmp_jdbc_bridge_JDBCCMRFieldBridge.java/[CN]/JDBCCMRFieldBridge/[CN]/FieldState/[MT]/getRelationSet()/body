{
  if (!isLoaded) {
    throw new EJBException("CMR field value not loaded yet");
  }
  if (ctx.isReadOnly()) {
    return new RelationSet(JDBCCMRFieldBridge.this,ctx,new List[]{new ArrayList(setHandle[0])},true);
  }
  if (relationSet != null) {
    return relationSet;
  }
  try {
    CmpEntityBeanComponent component=getJDBCStoreManager().getComponent();
    TransactionManager tm=component.getTransactionManager();
    Transaction tx=tm.getTransaction();
    if (tx != null && (tx.getStatus() == Status.STATUS_ACTIVE || tx.getStatus() == Status.STATUS_PREPARING)) {
      relationSet=new RelationSet(JDBCCMRFieldBridge.this,ctx,setHandle,false);
      TxSynchronization sync=new TxSynchronization(FieldState.this);
      tx.registerSynchronization(sync);
    }
 else {
      relationSet=new RelationSet(JDBCCMRFieldBridge.this,ctx,new List[1],false);
    }
    return relationSet;
  }
 catch (  SystemException e) {
    throw new EJBException("Error while creating RelationSet",e);
  }
catch (  RollbackException e) {
    throw new EJBException("Error while creating RelationSet",e);
  }
}
