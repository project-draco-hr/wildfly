{
  Object relatedId;
  if (relatedEntity.getLocalInterface().isAssignableFrom(localObject.getClass())) {
    EJBLocalObject local=(EJBLocalObject)localObject;
    try {
      relatedId=local.getPrimaryKey();
    }
 catch (    NoSuchObjectLocalException e) {
      throw MESSAGES.noSuchRelatedObject(e);
    }
  }
 else {
    throw MESSAGES.invalidCmrFieldValue(relatedEntity.getLocalInterface().getName());
  }
  return relatedId;
}
