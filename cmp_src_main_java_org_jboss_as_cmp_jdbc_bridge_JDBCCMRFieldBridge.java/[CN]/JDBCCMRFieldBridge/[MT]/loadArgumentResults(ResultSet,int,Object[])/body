{
  if (foreignKeyFields == null) {
    return parameterIndex;
  }
  boolean fkIsNull=false;
  Object[] argumentRef=new Object[1];
  for (int i=0; i < foreignKeyFields.length; ++i) {
    JDBCCMPFieldBridge field=foreignKeyFields[i];
    parameterIndex=field.loadArgumentResults(rs,parameterIndex,argumentRef);
    if (fkIsNull) {
      continue;
    }
    if (field.getPrimaryKeyField() != null) {
      if (argumentRef[0] == null) {
        fkRef[0]=null;
        fkIsNull=true;
      }
 else {
        if (fkRef[0] == null) {
          fkRef[0]=relatedEntity.createPrimaryKeyInstance();
        }
        try {
          field.getPrimaryKeyField().set(fkRef[0],argumentRef[0]);
        }
 catch (        Exception e) {
          throw MESSAGES.errorSettingFk(getFieldName(),e);
        }
      }
    }
 else {
      fkRef[0]=argumentRef[0];
    }
  }
  return parameterIndex;
}
