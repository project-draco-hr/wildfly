{
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      final ModelNode model=Resource.Tools.readModel(context.readResourceFromRoot(PathAddress.EMPTY_ADDRESS,true));
      final String group=getServerGroupName(operation);
      context.addStep(new OperationStepHandler(){
        @Override public void execute(        OperationContext context,        ModelNode operation) throws OperationFailedException {
          Map<String,ProcessInfo> processes=serverInventory.determineRunningProcesses(true);
          final Set<String> serversInGroup=getServersForGroup(model,group);
          for (          String serverName : processes.keySet()) {
            final String serverModelName=serverInventory.getProcessServerName(serverName);
            if (group == null || serversInGroup.contains(serverModelName)) {
              serverInventory.restartServer(serverModelName,TIMEOUT,model);
            }
          }
          context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
        }
      }
,Stage.RUNTIME);
      context.stepCompleted();
    }
  }
,Stage.RUNTIME);
  context.stepCompleted();
}
