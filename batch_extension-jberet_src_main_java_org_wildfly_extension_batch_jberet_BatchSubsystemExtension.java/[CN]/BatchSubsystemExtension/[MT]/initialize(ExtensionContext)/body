{
  final SubsystemRegistration subsystem=context.registerSubsystem(BatchSubsystemDefinition.NAME,CURRENT_MODEL_VERSION);
  subsystem.registerSubsystemModel(new BatchSubsystemDefinition(context.isRuntimeOnlyRegistrationValid()));
  subsystem.registerXMLElementWriter(new BatchSubsystemWriter());
  if (context.isRuntimeOnlyRegistrationValid()) {
    final SimpleResourceDefinition deploymentResource=new SimpleResourceDefinition(BatchSubsystemDefinition.SUBSYSTEM_PATH,BatchResourceDescriptionResolver.getResourceDescriptionResolver("deployment"));
    final ManagementResourceRegistration deployments=subsystem.registerDeploymentModel(deploymentResource);
    final ManagementResourceRegistration jobRegistration=deployments.registerSubModel(BatchJobResourceDefinition.INSTANCE);
    jobRegistration.registerSubModel(new BatchJobExecutionResourceDefinition()).setRuntimeOnly(true);
  }
}
