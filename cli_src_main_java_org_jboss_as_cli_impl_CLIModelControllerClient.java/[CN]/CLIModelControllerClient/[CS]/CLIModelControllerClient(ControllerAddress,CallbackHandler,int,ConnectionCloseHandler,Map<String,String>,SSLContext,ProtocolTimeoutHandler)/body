{
  this.handler=handler;
  this.sslContext=sslContext;
  this.closeHandler=closeHandler;
  this.channelAssociation=new ManagementChannelHandler(new ManagementClientChannelStrategy(){
    @Override public Channel getChannel() throws IOException {
      return getOrCreateChannel();
    }
    @Override public void close() throws IOException {
    }
  }
,executorService,this);
  channelConfig=new ProtocolChannelClient.Configuration();
  this.saslOptions=saslOptions;
  channelConfig.setSaslOptions(saslOptions);
  try {
    channelConfig.setUri(new URI(address.getProtocol(),null,address.getHost(),address.getPort(),null,null,null));
  }
 catch (  URISyntaxException e) {
    throw new IOException("Failed to create URI",e);
  }
  channelConfig.setOptionMap(DEFAULT_OPTIONS);
  if (connectionTimeout > 0) {
    channelConfig.setConnectionTimeout(connectionTimeout);
  }
  channelConfig.setEndpoint(endpoint);
  channelConfig.setTimeoutHandler(timeoutHandler);
}
