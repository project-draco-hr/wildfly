{
  final BlockingOperationListener listener=new BlockingOperationListener();
  final TestOperationHandler handler=new TestOperationHandler(){
    @Override public void execute(    ModelNode operation,    OperationMessageHandler handler,    OperationAttachments attachments) throws Exception {
    }
  }
;
  final TestUpdateWrapper wrapper=createTestClient(0,handler);
  final Future<ModelNode> futureResult=wrapper.execute(listener);
  listener.retrievePreparedOperation();
  futureConnection.get().close();
  try {
    futureResult.get();
    Assert.fail();
  }
 catch (  CancellationException expected) {
  }
}
