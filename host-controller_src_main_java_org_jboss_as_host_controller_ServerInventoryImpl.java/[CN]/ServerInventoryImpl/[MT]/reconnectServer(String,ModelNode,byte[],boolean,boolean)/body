{
  if (shutdown || connectionFinished) {
    throw HostControllerMessages.MESSAGES.hostAlreadyShutdown();
  }
  ManagedServer existing=servers.get(serverName);
  if (existing != null) {
    ROOT_LOGGER.existingServerWithState(serverName,existing.getState());
    return;
  }
  final ManagedServer server=createManagedServer(serverName,domainModel,authKey);
  if ((existing=servers.putIfAbsent(serverName,server)) != null) {
    ROOT_LOGGER.existingServerWithState(serverName,existing.getState());
    return;
  }
  if (running) {
    if (!stopping) {
      server.reconnectServerProcess();
      domainController.registerRunningServer(server.getProxyController());
    }
 else {
      server.setServerProcessStopping();
    }
  }
 else {
    server.removeServerProcess();
  }
synchronized (shutdownCondition) {
    shutdownCondition.notifyAll();
  }
}
