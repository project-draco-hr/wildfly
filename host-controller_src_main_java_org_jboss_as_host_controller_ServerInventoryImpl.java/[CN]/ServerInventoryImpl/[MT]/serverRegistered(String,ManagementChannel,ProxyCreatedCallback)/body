{
  try {
    final ManagedServer server=servers.get(serverProcessName);
    if (server == null) {
      log.errorf("No server called %s available",serverProcessName);
      return;
    }
    channel.addCloseHandler(new CloseHandler<Channel>(){
      @Override public void handleClose(      Channel closed){
        domainController.unregisterRunningServer(serverProcessName);
      }
    }
);
    server.setServerManagementChannel(channel);
    if (!environment.isRestart()) {
      checkState(server,ServerState.STARTING);
    }
    server.setState(ServerState.STARTED);
    final PathElement element=PathElement.pathElement(RUNNING_SERVER,server.getServerName());
    final ProxyController serverController=RemoteProxyController.create(Executors.newCachedThreadPool(),PathAddress.pathAddress(PathElement.pathElement(HOST,domainController.getLocalHostInfo().getLocalHostName()),element),ProxyOperationAddressTranslator.SERVER,channel);
    if (callback != null && serverController instanceof ManagementOperationHandler) {
      callback.proxyOperationHandlerCreated((ManagementOperationHandler)serverController);
    }
    domainController.registerRunningServer(serverController);
    server.resetRespawnCount();
  }
 catch (  final Exception e) {
    log.errorf(e,"Could not start server %s",serverProcessName);
  }
}
