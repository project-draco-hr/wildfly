{
  this.rootTask.run();
  Result result=null;
  for (  ServerUpdatePolicy policy : updatePolicies.values()) {
    if (policy.isFailed()) {
      domainOperationContext.setServerGroupRollback(policy.getServerGroupName(),true);
      if (rollbackAcrossGroups) {
        domainOperationContext.setCompleteRollback(true);
      }
      result=(result == null || result == Result.FAILED) ? Result.FAILED : Result.PARTIAL;
    }
 else {
      domainOperationContext.setServerGroupRollback(policy.getServerGroupName(),false);
      result=(result == null || result == Result.SUCCESS) ? Result.SUCCESS : Result.PARTIAL;
    }
  }
  return result;
}
