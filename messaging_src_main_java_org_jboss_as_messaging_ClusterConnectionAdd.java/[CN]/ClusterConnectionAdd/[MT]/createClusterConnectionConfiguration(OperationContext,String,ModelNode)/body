{
  final String address=ClusterConnectionDefinition.ADDRESS.resolveModelAttribute(context,model).asString();
  final String connectorName=ClusterConnectionDefinition.CONNECTOR_REF.resolveModelAttribute(context,model).asString();
  final long retryInterval=ClusterConnectionDefinition.RETRY_INTERVAL.resolveModelAttribute(context,model).asLong();
  final boolean duplicateDetection=ClusterConnectionDefinition.USE_DUPLICATE_DETECTION.resolveModelAttribute(context,model).asBoolean();
  final long connectionTTL=ClusterConnectionDefinition.CONNECTION_TTL.resolveModelAttribute(context,model).asInt();
  final int reconnectAttempts=ClusterConnectionDefinition.RECONNECT_ATTEMPTS.resolveModelAttribute(context,model).asInt();
  final long maxRetryInterval=ClusterConnectionDefinition.MAX_RETRY_INTERVAL.resolveModelAttribute(context,model).asLong();
  final double retryIntervalMultiplier=ClusterConnectionDefinition.RETRY_INTERVAL_MULTIPLIER.resolveModelAttribute(context,model).asDouble();
  final long clientFailureCheckPeriod=ClusterConnectionDefinition.CHECK_PERIOD.resolveModelAttribute(context,model).asInt();
  final boolean forwardWhenNoConsumers=ClusterConnectionDefinition.FORWARD_WHEN_NO_CONSUMERS.resolveModelAttribute(context,model).asBoolean();
  final int maxHops=ClusterConnectionDefinition.MAX_HOPS.resolveModelAttribute(context,model).asInt();
  final int confirmationWindowSize=CommonAttributes.BRIDGE_CONFIRMATION_WINDOW_SIZE.resolveModelAttribute(context,model).asInt();
  final ModelNode discoveryNode=ClusterConnectionDefinition.DISCOVERY_GROUP_NAME.resolveModelAttribute(context,model);
  final String discoveryGroupName=discoveryNode.isDefined() ? discoveryNode.asString() : null;
  final List<String> staticConnectors=discoveryGroupName == null ? getStaticConnectors(model) : null;
  final boolean allowDirectOnly=ClusterConnectionDefinition.ALLOW_DIRECT_CONNECTIONS_ONLY.resolveModelAttribute(context,model).asBoolean();
  final int minLargeMessageSize=CommonAttributes.MIN_LARGE_MESSAGE_SIZE.resolveModelAttribute(context,model).asInt();
  final long callTimeout=CommonAttributes.CALL_TIMEOUT.resolveModelAttribute(context,model).asLong();
  final long callFailoverTimeout=CommonAttributes.CALL_FAILOVER_TIMEOUT.resolveModelAttribute(context,model).asLong();
  if (discoveryGroupName != null) {
    return new ClusterConnectionConfiguration(name,address,connectorName,minLargeMessageSize,clientFailureCheckPeriod,connectionTTL,retryInterval,retryIntervalMultiplier,maxRetryInterval,reconnectAttempts,callTimeout,callFailoverTimeout,duplicateDetection,forwardWhenNoConsumers,maxHops,confirmationWindowSize,discoveryGroupName);
  }
 else {
    return new ClusterConnectionConfiguration(name,address,connectorName,minLargeMessageSize,clientFailureCheckPeriod,connectionTTL,retryInterval,retryIntervalMultiplier,maxRetryInterval,reconnectAttempts,callTimeout,callFailoverTimeout,duplicateDetection,forwardWhenNoConsumers,maxHops,confirmationWindowSize,staticConnectors,allowDirectOnly);
  }
}
