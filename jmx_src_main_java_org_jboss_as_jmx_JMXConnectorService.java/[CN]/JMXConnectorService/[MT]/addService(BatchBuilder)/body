{
  JMXConnectorService jmxConnectorService=new JMXConnectorService();
  BatchServiceBuilder<Void> serviceBuilder=batchBuilder.addService(JMXConnectorService.SERVICE_NAME,jmxConnectorService);
  serviceBuilder.addDependency(MBeanServerService.SERVICE_NAME,MBeanServer.class,jmxConnectorService.getMBeanServerServiceInjector());
  serviceBuilder.addDependency(SocketBinding.JBOSS_BINDING_NAME.append("jmx-connector-registry"),SocketBinding.class,jmxConnectorService.getRegistryPortBinding());
  serviceBuilder.addDependency(SocketBinding.JBOSS_BINDING_NAME.append("jmx-connector-server"),SocketBinding.class,jmxConnectorService.getServerPortBinding());
  serviceBuilder.setInitialMode(ServiceController.Mode.ACTIVE);
}
