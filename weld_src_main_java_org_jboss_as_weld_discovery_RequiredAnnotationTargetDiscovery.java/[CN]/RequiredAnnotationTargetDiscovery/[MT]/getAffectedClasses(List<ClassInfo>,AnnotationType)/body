{
  for (  AnnotationInstance instance : index.getAnnotations(annotation.getName())) {
    AnnotationTarget target=instance.target();
    if (target instanceof ClassInfo) {
      processTopLevelClass(classes,(ClassInfo)target,annotation.isInherited());
    }
 else     if (target instanceof FieldInfo) {
      processField(classes,(FieldInfo)target);
    }
 else     if (target instanceof MethodInfo) {
      MethodInfo method=(MethodInfo)target;
      if (CONSTRUCTOR_NAME.equals(method.name())) {
        processConstructor(classes,method);
      }
 else {
        processMethod(classes,method);
      }
    }
 else     if (target instanceof MethodParameterInfo) {
      processParameter(classes,(MethodParameterInfo)target);
    }
  }
  return classes;
}
