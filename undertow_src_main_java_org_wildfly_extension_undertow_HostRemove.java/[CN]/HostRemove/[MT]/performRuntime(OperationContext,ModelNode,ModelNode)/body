{
  final PathAddress address=context.getCurrentAddress();
  final PathAddress parent=address.getParent();
  final String name=address.getLastElement().getValue();
  final String serverName=parent.getLastElement().getValue();
  final ServiceName virtualHostServiceName=UndertowService.virtualHostName(serverName,name);
  context.removeService(virtualHostServiceName);
  final ServiceName consoleRedirectName=UndertowService.consoleRedirectServiceName(serverName,name);
  context.removeService(consoleRedirectName);
  final ServiceName commonHostName=WebHost.SERVICE_NAME.append(name);
  context.removeService(commonHostName);
  final String defaultWebModule=HostDefinition.DEFAULT_WEB_MODULE.resolveModelAttribute(context,model).asString();
  DefaultDeploymentMappingProvider.instance().removeMapping(defaultWebModule);
}
