{
  UUID actionId=unmarshal(unmarshaller,UUID.class);
  DeploymentActionImpl action=findDeploymentAction(actionId,setPlan);
  Set<DomainUpdateListener<?>> listeners=action.getListeners();
  expectHeader(DomainClientProtocol.RETURN_DEPLOYMENT_ACTION_MODEL_RESULT);
  DomainUpdateApplierResponse duar=unmarshal(unmarshaller,DomainUpdateApplierResponse.class);
  DeploymentActionResultImpl actionResult=new DeploymentActionResultImpl(action,duar);
  actionResults.put(actionId,actionResult);
  for (  DomainUpdateListener<?> listener : listeners) {
    if (duar.isCancelled()) {
      listener.handleCancelledByDomain();
    }
 else     if (duar.isRolledBack()) {
      listener.handleDomainRollback();
    }
 else     if (duar.getDomainFailure() != null) {
      listener.handleDomainFailed(duar.getDomainFailure());
    }
 else     if (duar.getHostFailures().size() > 0) {
      listener.handleHostFailed(duar.getHostFailures());
    }
 else {
      listener.handleServersIdentified(duar.getServers());
    }
  }
  return unmarshaller.readByte();
}
