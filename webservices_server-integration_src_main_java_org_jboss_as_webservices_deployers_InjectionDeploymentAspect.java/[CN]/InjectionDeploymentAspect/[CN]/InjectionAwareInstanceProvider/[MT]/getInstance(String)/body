{
  if (className.equals("org.jboss.ws.common.invocation.RecordingServerHandler"))   return delegate.getInstance(className);
  if (className.equals("org.jboss.ws.extensions.security.jaxws.WSSecurityHandlerServer"))   return delegate.getInstance(className);
  if (className.equals(endpointClass)) {
    if (isEjb3Endpoint)     return delegate.getInstance(className);
    final ServiceName endpointComponentName=getEndpointComponentServiceName();
    final BasicComponent endpointComponent=((ServiceController<BasicComponent>)WSServices.getContainerRegistry().getRequiredService(endpointComponentName)).getValue();
    final ComponentInstance endpointComponentInstance=endpointComponent.createInstance(delegate.getInstance(className));
    return endpointComponentInstance.getInstance();
  }
 else {
    final ServiceName handlerComponentName=getHandlerComponentServiceName(className);
    final BasicComponent handlerComponent=((ServiceController<BasicComponent>)WSServices.getContainerRegistry().getRequiredService(handlerComponentName)).getValue();
    final ComponentInstance handlerComponentInstance=handlerComponent.createInstance(delegate.getInstance(className));
    return handlerComponentInstance.getInstance();
  }
}
