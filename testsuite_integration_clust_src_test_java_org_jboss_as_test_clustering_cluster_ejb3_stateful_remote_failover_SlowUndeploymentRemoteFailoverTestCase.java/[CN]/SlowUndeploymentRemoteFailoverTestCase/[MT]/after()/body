{
  if (previousSelector != null) {
    EJBClientContext.setSelector(previousSelector);
  }
  if (!undeployedDeployments.contains(ClusteringTestConstants.DEPLOYMENT_1)) {
    try {
      NodeUtil.undeploy(deployer,ClusteringTestConstants.DEPLOYMENT_1);
    }
 catch (    Throwable t) {
      logger.info("Failed to undeploy " + ClusteringTestConstants.DEPLOYMENT_1);
    }
  }
  if (!undeployedDeployments.contains(ClusteringTestConstants.DEPLOYMENT_2)) {
    try {
      NodeUtil.undeploy(deployer,ClusteringTestConstants.DEPLOYMENT_2);
    }
 catch (    Throwable t) {
      logger.info("Failed to undeploy " + ClusteringTestConstants.DEPLOYMENT_2);
    }
  }
  NodeUtil.stop(controller,ClusteringTestConstants.CONTAINERS);
}
