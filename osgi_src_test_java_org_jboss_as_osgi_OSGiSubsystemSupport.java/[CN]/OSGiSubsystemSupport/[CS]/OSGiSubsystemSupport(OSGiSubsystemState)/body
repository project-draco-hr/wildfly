{
  if (subsystemState == null)   throw new IllegalArgumentException("Null subsystemState");
  this.subsystemState=subsystemState;
  serviceContainer=ServiceContainer.Factory.create();
  BatchedWork work=new BatchedWork(){
    @Override public void execute(    BatchBuilder batchBuilder) throws Exception {
      setupServices(batchBuilder);
    }
  }
;
  runWithLatchedBatch(work);
}
