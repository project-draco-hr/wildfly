{
  Map<DotName,List<AnnotationInstance>> annotationsOnBean=sessionBeanClass.annotations();
  if (annotationsOnBean == null || annotationsOnBean.isEmpty()) {
    String defaultLocalBusinessInterface=this.getDefaultLocalInterface(sessionBeanClass);
    if (defaultLocalBusinessInterface != null) {
      logger.debug("Session bean class: " + sessionBeanClass + " has no explicit local business interfaces, marking "+ defaultLocalBusinessInterface+ " as the (implicit) default local business interface");
      return Collections.singleton(defaultLocalBusinessInterface);
    }
    return Collections.emptySet();
  }
  List<AnnotationInstance> ejbLocalAnnotations=annotationsOnBean.get(DotName.createSimple(Local.class.getName()));
  if (ejbLocalAnnotations == null || ejbLocalAnnotations.isEmpty()) {
    String defaultLocalBusinessInterface=this.getDefaultLocalInterface(sessionBeanClass);
    if (defaultLocalBusinessInterface != null) {
      logger.debug("Session bean class: " + sessionBeanClass + " has no explicit local business interfaces, marking "+ defaultLocalBusinessInterface+ " as the (implicit) default local business interface");
      return Collections.singleton(defaultLocalBusinessInterface);
    }
    return Collections.emptySet();
  }
  if (ejbLocalAnnotations.size() > 1) {
    throw new RuntimeException("@Local appears more than once in EJB class: " + sessionBeanClass.name());
  }
  final Collection<String> localBusinessInterfaces=new HashSet<String>();
  AnnotationInstance ejbLocalAnnotation=ejbLocalAnnotations.get(0);
  AnnotationTarget target=ejbLocalAnnotation.target();
  if (target instanceof ClassInfo == false) {
    throw new RuntimeException("@Local should only appear on a class. Target: " + target + " is not a class");
  }
  AnnotationValue ejbLocalAnnValue=ejbLocalAnnotation.value();
  if (ejbLocalAnnValue == null) {
    DotName[] interfaces=sessionBeanClass.interfaces();
    if (interfaces.length != 1)     throw new DeploymentUnitProcessingException("Bean " + description + " specifies @Local, but does not implement 1 interface");
    localBusinessInterfaces.add(interfaces[0].toString());
    return localBusinessInterfaces;
  }
  Type[] localInterfaceTypes=ejbLocalAnnValue.asClassArray();
  for (  Type localInterface : localInterfaceTypes) {
    localBusinessInterfaces.add(localInterface.name().toString());
  }
  return localBusinessInterfaces;
}
