{
  KernelServices kernelServices=createKernelServicesBuilder().setXmlResource("domain-empty.xml").setModelInitializer(new ModelInitializer(){
    public void populateModel(    Resource rootResource){
      rootResource.registerChild(PathElement.pathElement(PROFILE,"test"),Resource.Factory.create());
    }
  }
).build();
  Assert.assertTrue(kernelServices.isSuccessfulBoot());
  String xml=kernelServices.getPersistedSubsystemXml();
  ModelTestUtils.compareXml(ModelTestUtils.readResource(this.getClass(),"domain-empty.xml"),xml);
  ModelNode model=kernelServices.readWholeModel();
  ModelNode jvmParent=model.get(SERVER_GROUP,"test",JVM);
  Assert.assertEquals(1,jvmParent.keys().size());
  checkEmptyJvm(jvmParent.get("empty"));
}
