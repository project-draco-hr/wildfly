{
  final Reference reference=(Reference)obj;
  final StringRefAddr nameAdr=(StringRefAddr)reference.get("nns");
  if (nameAdr == null) {
    throw new NamingException("Invalid context reference.  Not a 'nns' reference.");
  }
  final String contextName=(String)nameAdr.getContent();
  final NamespaceContextSelector selector=NamespaceContextSelector.getCurrentSelector();
  if (selector == null) {
    throw new NamingException("Failed to get context with name " + contextName);
  }
  return selector.getContext(contextName);
}
