{
synchronized (this) {
    if (stopped) {
      throw new IllegalStateException();
    }
    final ProcessBuilder builder=new ProcessBuilder(command);
    builder.redirectErrorStream(true);
    builder.environment().putAll(env);
    builder.directory(new File(workingDirectory));
    process=builder.start();
    final InputStream stdout=process.getInputStream();
    final Runnable consoleConsumer=new ConsoleConsumer(stdout,System.out);
    new Thread(consoleConsumer,"Console consumer " + processName).start();
  }
}
