{
  ModelControllerClient client=null;
  try {
    System.out.println("Connecting");
    client=ModelControllerClient.Factory.create(InetAddress.getByName("localhost"),9999,DemoAuthentication.getCallbackHandler());
    System.out.println("Connected");
    System.out.println("Dumping config as xml\n");
    ModelNode request=new ModelNode();
    request.get("operation").set("read-config-as-xml");
    request.get("address").setEmptyList();
    ModelNode r=client.execute(request);
    System.out.println(r.get("result").asString());
  }
  finally {
    StreamUtils.safeClose(client);
    System.out.println("Closed");
  }
}
