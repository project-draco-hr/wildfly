{
  ModelControllerClient client=ctx.getModelControllerClient();
  if (client == null) {
    ctx.printLine("The controller client is not available. Make sure you are connected to the controller.");
    return;
  }
  if (!ctx.hasArguments()) {
    printList(ctx,Util.getDeployments(ctx.getModelControllerClient()));
    return;
  }
  String deployment=null;
  List<String> args=ctx.getArguments();
  if (args.size() > 0) {
    deployment=args.get(0);
  }
  if (deployment == null) {
    printList(ctx,Util.getDeployments(ctx.getModelControllerClient()));
    return;
  }
  DefaultOperationRequestBuilder builder=new DefaultOperationRequestBuilder();
  builder=new DefaultOperationRequestBuilder();
  builder.setOperationName("undeploy");
  builder.addNode("deployment",deployment);
  ModelNode result;
  try {
    ModelNode request=builder.buildRequest();
    result=client.execute(request);
  }
 catch (  Exception e) {
    ctx.printLine("Failed to undeploy: " + e.getLocalizedMessage());
    return;
  }
  if (!Util.isSuccess(result)) {
    ctx.printLine("Undeploy failed: " + Util.getFailureDescription(result));
    return;
  }
  builder=new DefaultOperationRequestBuilder();
  builder.setOperationName("remove");
  builder.addNode("deployment",deployment);
  try {
    ModelNode request=builder.buildRequest();
    result=client.execute(request);
  }
 catch (  Exception e) {
    ctx.printLine("Failed to remove the deployment content from the repository: " + e.getLocalizedMessage());
    return;
  }
  if (!Util.isSuccess(result)) {
    ctx.printLine("Remove failed: " + Util.getFailureDescription(result));
    return;
  }
  ctx.printLine("'" + deployment + "' undeployed successfully.");
}
