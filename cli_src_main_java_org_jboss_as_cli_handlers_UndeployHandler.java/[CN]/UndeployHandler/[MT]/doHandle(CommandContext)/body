{
  ModelControllerClient client=ctx.getModelControllerClient();
  ParsedOperationRequest args=ctx.getParsedArguments();
  boolean l=this.l.isPresent(args);
  if (!args.hasProperties() || l) {
    printList(ctx,Util.getDeployments(client),l);
    return;
  }
  final String name=this.name.getValue(ctx.getParsedArguments());
  if (name == null) {
    printList(ctx,Util.getDeployments(client),l);
    return;
  }
  ModelNode request;
  try {
    request=buildRequest(ctx);
  }
 catch (  OperationFormatException e) {
    ctx.printLine(e.getLocalizedMessage());
    return;
  }
  ModelNode result;
  try {
    result=client.execute(request);
  }
 catch (  Exception e) {
    ctx.printLine("Undeploy failed: " + e.getLocalizedMessage());
    return;
  }
  if (!Util.isSuccess(result)) {
    ctx.printLine("Undeploy failed: " + Util.getFailureDescription(result));
    return;
  }
  ctx.printLine("Successfully undeployed " + name + ".");
}
