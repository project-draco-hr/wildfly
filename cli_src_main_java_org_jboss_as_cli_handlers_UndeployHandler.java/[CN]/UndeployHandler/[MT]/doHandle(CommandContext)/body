{
  final ModelControllerClient client=ctx.getModelControllerClient();
  final ParsedCommandLine args=ctx.getParsedCommandLine();
  final boolean l=this.l.isPresent(args);
  if (!args.hasProperties() || l) {
    printList(ctx,Util.getDeployments(client),l);
    return;
  }
  final String name=this.name.getValue(ctx.getParsedCommandLine());
  if (name == null) {
    printList(ctx,Util.getDeployments(client),l);
    return;
  }
  final ModelNode request;
  try {
    request=buildRequest(ctx);
    addHeaders(ctx,request);
  }
 catch (  OperationFormatException e) {
    ctx.error(e.getLocalizedMessage());
    return;
  }
  final ModelNode result;
  try {
    result=client.execute(request);
  }
 catch (  Exception e) {
    ctx.error("Undeploy failed: " + e.getLocalizedMessage());
    return;
  }
  if (!Util.isSuccess(result)) {
    ctx.error("Undeploy failed: " + Util.getFailureDescription(result));
    return;
  }
}
