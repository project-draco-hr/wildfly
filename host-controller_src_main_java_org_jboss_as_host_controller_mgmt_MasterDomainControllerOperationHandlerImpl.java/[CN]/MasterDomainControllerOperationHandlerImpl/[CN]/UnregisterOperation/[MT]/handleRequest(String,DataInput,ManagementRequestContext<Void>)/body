{
  domainController.unregisterRemoteHost(hostId);
  handler.removeHandlerFactory(proxyHandler);
  proxyHandler=null;
  final FlushableDataOutput os=writeGenericResponseHeader(context);
  try {
    os.write(ManagementProtocol.RESPONSE_END);
    os.close();
  }
  finally {
    StreamUtils.safeClose(os);
  }
}
