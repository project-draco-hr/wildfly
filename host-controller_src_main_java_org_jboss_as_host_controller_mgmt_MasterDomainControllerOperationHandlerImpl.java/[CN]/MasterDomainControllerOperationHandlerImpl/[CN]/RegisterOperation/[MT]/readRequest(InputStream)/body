{
  ByteDataInput input=null;
  try {
    input=new SimpleByteDataInput(inputStream);
    expectHeader(input,DomainControllerProtocol.PARAM_HOST_ID);
    hostId=input.readUTF();
    expectHeader(input,DomainControllerProtocol.PARAM_HOST_CONTROLLER_HOST);
    final int addressSize=input.readInt();
    byte[] addressBytes=new byte[addressSize];
    input.readFully(addressBytes);
    expectHeader(input,DomainControllerProtocol.PARAM_HOST_CONTROLLER_PORT);
    slavePort=input.readInt();
    slaveAddress=InetAddress.getByAddress(addressBytes);
    input.close();
  }
  finally {
    StreamUtils.safeClose(input);
  }
}
