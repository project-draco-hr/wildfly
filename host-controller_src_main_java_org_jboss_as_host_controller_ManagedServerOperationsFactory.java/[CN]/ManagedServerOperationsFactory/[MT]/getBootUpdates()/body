{
  int portOffSet=0;
  String socketBindingRef=null;
  if (serverGroup.hasDefined(SOCKET_BINDING_GROUP)) {
    socketBindingRef=serverGroup.get(SOCKET_BINDING_GROUP).asString();
  }
  if (serverModel.hasDefined(SOCKET_BINDING_GROUP)) {
    socketBindingRef=serverModel.get(SOCKET_BINDING_GROUP).asString();
  }
  if (serverGroup.hasDefined(SOCKET_BINDING_PORT_OFFSET)) {
    portOffSet=serverGroup.get(SOCKET_BINDING_PORT_OFFSET).asInt();
  }
  if (serverModel.hasDefined(SOCKET_BINDING_PORT_OFFSET)) {
    portOffSet=serverModel.get(SOCKET_BINDING_PORT_OFFSET).asInt();
  }
  if (socketBindingRef == null) {
    throw MESSAGES.undefinedSocketBinding(serverName);
  }
  final ModelNodeList updates=new ModelNodeList();
  addNamespaces(updates);
  addProfileName(updates);
  addSchemaLocations(updates);
  addExtensions(updates);
  addPaths(updates);
  addSystemProperties(updates);
  addVault(updates);
  addManagementSecurityRealms(updates);
  addAuditLog(updates);
  addManagementConnections(updates);
  addInterfaces(updates);
  addSocketBindings(updates,portOffSet,socketBindingRef);
  addSubsystems(updates);
  addDeployments(updates);
  addDeploymentOverlays(updates);
  return updates.model;
}
