{
  Unmarshaller unmarshaller=null;
  try {
    unmarshaller=MARSHALLER_FACTORY.createUnmarshaller(CONFIG);
    unmarshaller.start(Marshalling.createByteInput(inputStream));
    final byte commandByte=unmarshaller.readByte();
    final IncomingCommand command=IncomingCommand.commandFor(commandByte);
    if (command == null) {
      throw new RuntimeException("Invalid command byte received: " + commandByte);
    }
    command.execute(domainControllerClientService,unmarshaller);
    unmarshaller.finish();
  }
  finally {
    safeClose(unmarshaller);
  }
}
