{
  final XMLMapper mapper=XMLMapper.Factory.create();
  registerStandardHostReaders(mapper);
  try {
    final List<AbstractHostModelUpdate<?>> hostUpdates=new ArrayList<AbstractHostModelUpdate<?>>();
    mapper.parseDocument(hostUpdates,XMLInputFactory.newInstance().createXMLStreamReader(new BufferedInputStream(reader)));
    final HostModel hostModel=new HostModel();
    for (    final AbstractHostModelUpdate<?> update : hostUpdates) {
      hostModel.update(update);
    }
    return hostModel;
  }
 catch (  RuntimeException e) {
    throw e;
  }
catch (  Exception e) {
    throw new RuntimeException("Caught exception during processing of host.xml",e);
  }
}
