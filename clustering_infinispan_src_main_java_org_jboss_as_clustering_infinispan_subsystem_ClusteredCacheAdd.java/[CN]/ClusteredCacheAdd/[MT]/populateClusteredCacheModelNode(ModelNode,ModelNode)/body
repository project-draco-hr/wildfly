{
  PathAddress cacheAddress=PathAddress.pathAddress(operation.get(OP_ADDR));
  String cacheType=cacheAddress.getLastElement().getKey();
  populateCacheModelNode(operation,model);
  Configuration.CacheMode cacheMode=null;
  if (cacheType.equals(ModelKeys.INVALIDATION_CACHE))   cacheMode=Configuration.CacheMode.INVALIDATION_SYNC;
 else   if (cacheType.equals(ModelKeys.REPLICATED_CACHE))   cacheMode=Configuration.CacheMode.REPL_SYNC;
 else   if (cacheType.equals(ModelKeys.DISTRIBUTED_CACHE))   cacheMode=Configuration.CacheMode.DIST_SYNC;
 else {
    ModelNode exception=new ModelNode();
    exception.get(FAILURE_DESCRIPTION).set("Cache type not recognized.");
    throw new OperationFailedException(exception);
  }
  model.get(ModelKeys.CACHE_MODE).set(cacheMode.name());
  if (operation.hasDefined(ModelKeys.MODE)) {
    Mode syncMode=Mode.valueOf(operation.get(ModelKeys.MODE).asString());
    model.get(ModelKeys.CACHE_MODE).set(syncMode.apply(cacheMode).name());
  }
  populate(operation,model);
}
