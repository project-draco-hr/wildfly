{
  try {
    deployer.deploy("dependent");
    try {
      new InitialContext().lookup("java:global/dependent/DependentEjb");
      Assert.fail("deployment should have waited");
    }
 catch (    NamingException e) {
    }
    deployer.deploy("dependee");
    StringView ejb=(StringView)new InitialContext().lookup("java:global/dependent/DependentEjb");
    Assert.assertEquals("hello",ejb.getString());
  }
  finally {
    deployer.undeploy("dependent");
    deployer.undeploy("dependee");
  }
}
