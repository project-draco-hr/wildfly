{
  final WarMetaData warMetaData=deploymentUnitContext.getAttachment(WarMetaData.ATTACHMENT_KEY);
  JBossWebMetaData metaData=warMetaData.getMergedJBossWebMetaData();
  if (ok && (metaData != null)) {
    metaData.resolveAnnotations();
    resolveAnnotations(metaData.getAnnotations());
  }
  if (ok) {
    resolveServletSecurity();
  }
  if (ok) {
    validateSecurityRoles();
  }
  if (ok && (metaData != null)) {
    metaData.resolveRunAs();
  }
  if (ok) {
    if (authenValves != null)     setCustomAuthenticators(authenValves);
    authenticatorConfig();
  }
  if (!ok) {
    WebLogger.WEB_LOGGER.unavailable(context.getName());
    context.setConfigured(false);
  }
}
