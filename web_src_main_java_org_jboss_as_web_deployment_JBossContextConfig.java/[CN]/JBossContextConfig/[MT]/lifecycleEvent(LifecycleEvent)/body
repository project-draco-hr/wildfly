{
  if (event.getType().equals(Lifecycle.AFTER_START_EVENT)) {
    final ScisMetaData scisMetaData=deploymentUnitContext.getAttachment(ScisMetaData.ATTACHMENT_KEY);
    if (scisMetaData != null) {
      for (      ServletContainerInitializer sci : scisMetaData.getScis()) {
        try {
          sci.onStartup(scisMetaData.getHandlesTypes().get(sci),context.getServletContext());
        }
 catch (        Throwable t) {
          log.error("Error calling onStartup for servlet container initializer: " + sci.getClass().getName(),t);
          ok=false;
        }
      }
    }
    final WarMetaData warMetaData=deploymentUnitContext.getAttachment(WarMetaData.ATTACHMENT_KEY);
    List<String> order=warMetaData.getOrder();
    if (!warMetaData.isNoOrder()) {
      context.getServletContext().setAttribute(ServletContext.ORDERED_LIBS,order);
    }
  }
  super.lifecycleEvent(event);
}
