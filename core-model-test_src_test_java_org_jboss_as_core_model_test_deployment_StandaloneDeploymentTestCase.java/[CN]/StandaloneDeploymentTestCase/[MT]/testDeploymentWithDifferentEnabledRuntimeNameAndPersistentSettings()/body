{
  KernelServices kernelServices=createKernelServices();
  ModelNode content=getByteContent(1,2,3,4,5);
  ModelNode op=createOperation(kernelServices,"Test1","ONE",false,false,content);
  ModelTestUtils.checkOutcome(kernelServices.executeOperation(op));
  content=getByteContent(1,2,3,4,5);
  op=createOperation(kernelServices,"Test2","TWO",true,true,content);
  ModelTestUtils.checkOutcome(kernelServices.executeOperation(op));
  ModelNode deployments=getDeploymentParentResource(kernelServices);
  Assert.assertEquals(2,deployments.keys().size());
  Assert.assertEquals(false,deployments.get("Test1",ENABLED).asBoolean());
  Assert.assertEquals("Test1",deployments.get("Test1",NAME).asString());
  Assert.assertEquals(false,deployments.get("Test1",PERSISTENT).asBoolean());
  Assert.assertEquals("ONE",deployments.get("Test1",RUNTIME_NAME).asString());
  Assert.assertFalse(deployments.get("Test1",SUBDEPLOYMENT).isDefined());
  ModelNode bytes1=getContentHashOnly(deployments.get("Test1"));
  Assert.assertEquals(true,deployments.get("Test2",ENABLED).asBoolean());
  Assert.assertEquals("Test2",deployments.get("Test2",NAME).asString());
  Assert.assertEquals(true,deployments.get("Test2",PERSISTENT).asBoolean());
  Assert.assertEquals("TWO",deployments.get("Test2",RUNTIME_NAME).asString());
  Assert.assertFalse(deployments.get("Test2",SUBDEPLOYMENT).isDefined());
  ModelNode bytes2=getContentHashOnly(deployments.get("Test2"));
  Assert.assertEquals(bytes1,bytes2);
}
