{
  KernelServices kernelServices=createKernelServices();
  ModelNode operation=Util.createOperation(DeploymentUploadBytesHandler.OPERATION_NAME,PathAddress.EMPTY_ADDRESS);
  operation.get(BYTES).set(convertToByteArray(new int[]{1,2,3,4,5}));
  kernelServices.validateOperation(operation);
  ModelNode hashBytes=kernelServices.executeForResult(operation);
  checkNoDeployments(kernelServices);
  operation=Util.createOperation(DeploymentUploadURLHandler.OPERATION_NAME,PathAddress.EMPTY_ADDRESS);
  File file=writeToFile("Test-file1",new int[]{1,2,3,4,5});
  operation.get(URL).set(file.toURI().toURL().toString());
  kernelServices.validateOperation(operation);
  ModelNode hashUrl=kernelServices.executeForResult(operation);
  checkNoDeployments(kernelServices);
  Assert.assertEquals(hashBytes,hashUrl);
  operation=Util.createOperation(DeploymentUploadStreamAttachmentHandler.OPERATION_NAME,PathAddress.EMPTY_ADDRESS);
  operation.get(INPUT_STREAM_INDEX).set(0);
  ModelNode hashStream=kernelServices.executeForResult(operation,new ByteArrayInputStream(convertToByteArray(1,2,3,4,5)));
  checkNoDeployments(kernelServices);
  Assert.assertEquals(hashBytes,hashStream);
}
