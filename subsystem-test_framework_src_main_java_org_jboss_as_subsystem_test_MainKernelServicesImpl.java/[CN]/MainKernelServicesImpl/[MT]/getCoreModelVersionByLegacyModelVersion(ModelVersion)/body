{
  if (System.getProperty("jboss.test.core.model.version.override") != null) {
    return ModelVersion.fromString(System.getProperty("jboss.test.core.model.version.override"));
  }
  ModelVersion coreModelVersion=KnownVersions.getCoreModelVersionForSubsystemVersion(mainSubsystemName,legacyModelVersion);
  if (coreModelVersion != null) {
    return coreModelVersion;
  }
  String fileName=mainSubsystemName + "-versions-to-as-versions.properties";
  InputStream in=this.getClass().getResourceAsStream("/" + fileName);
  if (in == null) {
    return CURRENT_CORE_VERSION;
  }
  Properties props=new Properties();
  try {
    props.load(in);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    IoUtils.safeClose(in);
  }
  String asVersion=(String)props.get(legacyModelVersion.toString());
  if (asVersion == null) {
    return CURRENT_CORE_VERSION;
  }
  coreModelVersion=KnownVersions.AS_CORE_MODEL_VERSION_BY_AS_VERSION.get(asVersion);
  if (coreModelVersion == null) {
    coreModelVersion=CURRENT_CORE_VERSION;
  }
  return coreModelVersion;
}
