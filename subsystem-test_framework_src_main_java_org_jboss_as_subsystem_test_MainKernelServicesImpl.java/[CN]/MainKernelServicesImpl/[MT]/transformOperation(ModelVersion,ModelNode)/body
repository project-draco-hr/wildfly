{
  checkIsMainController();
  PathElement pathElement=PathElement.pathElement(SUBSYSTEM,mainSubsystemName);
  PathAddress opAddr=PathAddress.pathAddress(operation.get(OP_ADDR));
  if ((opAddr.size() > 0 && opAddr.getElement(0).equals(pathElement)) || operation.get(OP).asString().equals(COMPOSITE)) {
    final Map<PathAddress,ModelVersion> subsystem=Collections.singletonMap(PathAddress.EMPTY_ADDRESS.append(pathElement),modelVersion);
    final TransformationTarget transformationTarget=TransformationTargetImpl.create(extensionRegistry.getTransformerRegistry(),getCoreModelVersionByLegacyModelVersion(modelVersion),subsystem,MOCK_IGNORED_DOMAIN_RESOURCE_REGISTRY,TransformationTarget.TransformationTargetType.SERVER,null);
    final Transformers transformers=Transformers.Factory.create(transformationTarget);
    final TransformationContext transformationContext=createTransformationContext(transformationTarget);
    return transformers.transformOperation(transformationContext,operation);
  }
  return new OperationTransformer.TransformedOperation(operation,OperationResultTransformer.ORIGINAL_RESULT);
}
