{
  try {
    final Transaction transaction=getCurrentTransaction();
    if (delegate == null) {
      delegate=create(info,transaction);
      if (transaction != null) {
        transaction.registerSynchronization(new Synchronization(){
          @Override public void beforeCompletion(){
          }
          @Override public synchronized void afterCompletion(          int status){
            delegate.close();
            delegate=null;
          }
        }
);
      }
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  return delegate;
}
