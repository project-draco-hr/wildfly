{
  final DeploymentUnit deploymentUnitContext=phaseContext.getDeploymentUnit();
  Manifest manifest=deploymentUnitContext.getAttachment(Attachments.MANIFEST);
  if (manifest != null)   return;
  final VirtualFile deploymentRoot=deploymentUnitContext.getAttachment(Attachments.DEPLOYMENT_ROOT);
  try {
    manifest=VFSUtils.getManifest(deploymentRoot);
    if (manifest != null)     deploymentUnitContext.putAttachment(Attachments.MANIFEST,manifest);
  }
 catch (  IOException e) {
    throw new DeploymentUnitProcessingException("Failed to get manifest for deployment " + deploymentRoot,e);
  }
}
