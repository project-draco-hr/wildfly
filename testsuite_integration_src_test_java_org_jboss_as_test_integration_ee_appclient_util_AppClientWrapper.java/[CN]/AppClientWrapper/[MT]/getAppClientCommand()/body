{
  if (appClientCommand != null)   return appClientCommand;
  final String tempDir=System.getProperty("java.io.tmpdir");
  archiveOnDisk=new File(tempDir + File.separator + archive.getName());
  if (archiveOnDisk.exists()) {
    archiveOnDisk.delete();
  }
  final ZipExporter exporter=archive.as(ZipExporter.class);
  exporter.exportTo(archiveOnDisk);
  final String appClientArg;
  if (clientArchiveName == null) {
    appClientArg=archiveOnDisk.getAbsolutePath();
  }
 else {
    appClientArg=archiveOnDisk.getAbsolutePath() + "#" + clientArchiveName;
  }
  final File targetDir=new File("../../build/target");
  if ((!targetDir.exists()) || (!targetDir.isDirectory()))   throw new Exception("Missing AS target directory.");
  final String[] children=targetDir.list();
  String asDir=null;
  for (  final String child : children) {
    if (child.startsWith("jboss-as")) {
      asDir=child;
      break;
    }
  }
  if (asDir == null)   throw new Exception("Missing AS target directory.");
  appClientCommand="java " + "-Djboss.modules.dir=../../build/target/" + asDir + "/modules "+ "-Djline.WindowsTerminal.directConsole=false "+ "-jar ./target/jbossas/jboss-modules.jar "+ "-mp ../../build/target/"+ asDir+ "/modules "+ "-logmodule org.jboss.logmanager  org.jboss.as.appclient "+ "-Djboss.server.base.dir=target/jbossas/appclient "+ "-Djboss.home.dir=target/jbossas "+ appClientArg+ " "+ args;
  return appClientCommand;
}
