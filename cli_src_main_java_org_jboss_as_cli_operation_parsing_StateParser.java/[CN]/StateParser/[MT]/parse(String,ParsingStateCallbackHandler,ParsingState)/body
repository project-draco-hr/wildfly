{
  if (str == null || str.isEmpty()) {
    return;
  }
  ParsingContextImpl ctx=new ParsingContextImpl();
  ctx.initialState=initialState;
  ctx.callbackHandler=callbackHandler;
  for (int i=0; i < str.length(); ++i) {
    char ch=str.charAt(i);
    ctx.ch=ch;
    ctx.location=i;
    CharacterHandler handler=ctx.getState().getHandler(ch);
    handler.handle(ctx);
  }
  ParsingState state=ctx.getState();
  while (state != ctx.initialState) {
    state.getEndContentHandler().handle(ctx);
    ctx.leaveState();
    state=ctx.getState();
  }
}
