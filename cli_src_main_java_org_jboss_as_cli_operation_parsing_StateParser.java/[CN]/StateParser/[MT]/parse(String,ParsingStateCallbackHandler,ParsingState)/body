{
  if (str == null || str.isEmpty()) {
    return;
  }
  int i=0;
  while (i < str.length()) {
    if (!Character.isWhitespace(str.charAt(i))) {
      break;
    }
    ++i;
  }
  if (i == str.length()) {
    return;
  }
  ParsingContextImpl ctx=new ParsingContextImpl();
  ctx.initialState=initialState;
  ctx.callbackHandler=callbackHandler;
  while (i < str.length()) {
    char ch=str.charAt(i);
    ctx.ch=ch;
    ctx.location=i;
    CharacterHandler handler=ctx.getState().getHandler(ch);
    handler.handle(ctx);
    ++i;
  }
  ParsingState state=ctx.getState();
  while (state != ctx.initialState) {
    state.getEndContentHandler().handle(ctx);
    ctx.leaveState();
    state=ctx.getState();
  }
}
