{
  boolean enabled=model.hasDefined(ENABLED) ? model.get(ENABLED).asBoolean() : true;
  if (!enabled)   return;
  final ModelNode opAddr=operation.get(OP_ADDR);
  final PathAddress address=PathAddress.pathAddress(opAddr);
  final String name=address.getLastElement().getValue();
  final String deploymentUnitName=model.hasDefined(RUNTIME_NAME) ? model.get(RUNTIME_NAME).asString() : name;
  final ServiceName deploymentUnitServiceName=Services.deploymentUnitName(deploymentUnitName);
  context.removeService(deploymentUnitServiceName);
  context.removeService(deploymentUnitServiceName.append("contents"));
}
