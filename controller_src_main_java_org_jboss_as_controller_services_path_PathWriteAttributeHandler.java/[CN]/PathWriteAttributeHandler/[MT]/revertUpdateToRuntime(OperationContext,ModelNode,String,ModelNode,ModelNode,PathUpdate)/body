{
  final String pathName=PathAddress.pathAddress(operation.get(OP_ADDR)).getLastElement().getValue();
  final PathEntry backup=handback.backup;
  final PathEventContextImpl pathEventContext=handback.context;
  if (pathEventContext.isInstallServices()) {
    if (attributeName.equals(PATH)) {
      pathManager.changePath(pathName,backup.getPath());
      pathManager.changePathServices(context,pathName,valueToRestore.asString(),null);
    }
 else     if (attributeName.equals(RELATIVE_TO)) {
      try {
        pathManager.changeRelativePath(pathName,backup.getRelativeTo(),false);
      }
 catch (      OperationFailedException e) {
        throw new RuntimeException(e);
      }
      pathManager.changeRelativePathServices(context,pathName,valueToRestore.isDefined() ? valueToRestore.asString() : null,null);
    }
  }
 else {
    pathEventContext.revert();
  }
}
