{
  if (type.equals(JAVA_NET_URL_INJECTION_TYPE)) {
    final ManagedReferenceFactory managedReferenceFactory=new ManagedReferenceFactory(){
      @Override public ManagedReference getReference(){
        try {
          return new ImmediateManagedReference(new URL(name));
        }
 catch (        MalformedURLException e) {
          throw new RuntimeException(e);
        }
      }
    }
;
    try {
      return new FixedInjectionSource(managedReferenceFactory,new URL(name));
    }
 catch (    MalformedURLException e) {
      throw MESSAGES.cannotParseResourceRefUri(e,name);
    }
  }
 else {
    return JAVAX_NAMING_CONTEXT_INJECTION_TYPE.equals(type) ? new OptionalLookupInjectionSource(name) : new LookupInjectionSource(name);
  }
}
