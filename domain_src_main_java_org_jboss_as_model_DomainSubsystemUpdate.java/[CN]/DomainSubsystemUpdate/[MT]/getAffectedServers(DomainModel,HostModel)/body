{
  if (getServerModelUpdate() == null) {
    return Collections.emptyList();
  }
 else {
    List<String> result=new ArrayList<String>();
    Map<String,Set<String>> includedProfilesByRoot=new HashMap<String,Set<String>>();
    for (    String server : hostModel.getActiveServerNames()) {
      String serverGroupName=hostModel.getServer(server).getServerGroup();
      String sgProfileName=domainModel.getServerGroup(serverGroupName).getProfileName();
      if (!includedProfilesByRoot.containsKey(sgProfileName)) {
        includedProfilesByRoot.put(sgProfileName,domainModel.getProfiles(sgProfileName).keySet());
      }
      if (includedProfilesByRoot.get(sgProfileName).contains(profileName)) {
        result.add(server);
      }
    }
    return result;
  }
}
