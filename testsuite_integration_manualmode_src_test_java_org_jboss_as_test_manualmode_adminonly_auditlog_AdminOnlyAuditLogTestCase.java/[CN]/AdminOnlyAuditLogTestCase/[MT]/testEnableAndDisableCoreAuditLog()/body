{
  File file=new File(System.getProperty("jboss.home"));
  file=new File(file,"standalone");
  file=new File(file,"data");
  file=new File(file,"audit-log.log");
  if (file.exists()) {
    file.delete();
  }
  System.out.println(file.getAbsolutePath());
  ModelControllerClient client=managementClient.getControllerClient();
  try {
    ModelNode op=Util.createOperation(READ_RESOURCE_OPERATION,PathAddress.EMPTY_ADDRESS);
    ModelNode result=client.execute(op);
    junit.framework.Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
    junit.framework.Assert.assertFalse(file.exists());
    PathAddress auditLogConfigAddress=PathAddress.pathAddress(CoreManagementResourceDefinition.PATH_ELEMENT,AccessAuditResourceDefinition.PATH_ELEMENT,AuditLogLoggerResourceDefinition.PATH_ELEMENT);
    op=Util.getWriteAttributeOperation(auditLogConfigAddress,AuditLogLoggerResourceDefinition.ENABLED.getName(),new ModelNode(true));
    result=client.execute(op);
    junit.framework.Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
    junit.framework.Assert.assertTrue(file.exists());
    try {
      file.delete();
      op=Util.createOperation(READ_RESOURCE_OPERATION,PathAddress.EMPTY_ADDRESS);
      result=client.execute(op);
      junit.framework.Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
      junit.framework.Assert.assertTrue(file.exists());
    }
  finally {
      file.delete();
      op=Util.getWriteAttributeOperation(auditLogConfigAddress,AuditLogLoggerResourceDefinition.ENABLED.getName(),new ModelNode(false));
      result=client.execute(op);
      junit.framework.Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
      junit.framework.Assert.assertTrue(file.exists());
      file.delete();
      op=Util.createOperation(READ_RESOURCE_OPERATION,PathAddress.EMPTY_ADDRESS);
      result=client.execute(op);
      junit.framework.Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
      junit.framework.Assert.assertFalse(file.exists());
    }
  }
  finally {
    IoUtils.safeClose(client);
  }
}
