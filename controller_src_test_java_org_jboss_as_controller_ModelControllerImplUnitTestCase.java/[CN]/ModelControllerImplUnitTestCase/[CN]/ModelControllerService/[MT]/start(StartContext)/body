{
  ServiceTarget target=serviceContainer.subTarget();
  ServiceController<?> serviceController=context.getController();
  ModelNodeRegistration rootRegistration=ModelNodeRegistration.Factory.create(DESC_PROVIDER);
  rootRegistration.registerOperationHandler("setup",new SetupHandler(),DESC_PROVIDER,false);
  rootRegistration.registerOperationHandler("good",new ModelStageGoodHandler(),DESC_PROVIDER,false);
  rootRegistration.registerOperationHandler("bad",new ModelStageFailsHandler(),DESC_PROVIDER,false);
  rootRegistration.registerOperationHandler("evil",new ModelStageThrowsExceptionHandler(),DESC_PROVIDER,false);
  rootRegistration.registerOperationHandler("handleFailed",new RuntimeStageFailsHandler(state),DESC_PROVIDER,false);
  rootRegistration.registerOperationHandler("runtimeException",new RuntimeStageThrowsExceptionHandler(state),DESC_PROVIDER,false);
  rootRegistration.registerOperationHandler("good-service",new GoodServiceHandler(),DESC_PROVIDER,false);
  rootRegistration.registerOperationHandler("bad-service",new BadServiceHandler(),DESC_PROVIDER,false);
  rootRegistration.registerOperationHandler("missing-service",new MissingServiceHandler(),DESC_PROVIDER,false);
  value=new NewModelControllerImpl(serviceContainer,target,rootRegistration,new ContainerStateMonitor(serviceContainer,serviceController),new NullConfigurationPersister(),NewOperationContext.Type.SERVER,null);
  latch.countDown();
}
