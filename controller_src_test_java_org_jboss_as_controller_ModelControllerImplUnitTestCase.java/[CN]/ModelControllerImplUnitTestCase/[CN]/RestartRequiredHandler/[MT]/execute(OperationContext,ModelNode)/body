{
  String name=operation.require(NAME).asString();
  ModelNode model=context.readModelForUpdate(PathAddress.EMPTY_ADDRESS);
  ModelNode attr=model.get(name);
  final int current=attr.asInt();
  attr.set(operation.require(VALUE));
  context.getResult().set(current);
  context.runtimeUpdateSkipped();
  context.restartRequired();
  if (useNonRecursive) {
    context.completeStep(new OperationContext.RollbackHandler(){
      @Override public void handleRollback(      OperationContext context,      ModelNode operation){
        context.revertRestartRequired();
      }
    }
);
  }
 else   if (context.completeStep() == OperationContext.ResultAction.ROLLBACK) {
    context.revertRestartRequired();
  }
}
