{
  String name=operation.require("name").asString();
  ModelNode attr=context.readModelForUpdate(PathAddress.EMPTY_ADDRESS).get(name);
  int current=attr.asInt();
  attr.set(operation.require("value"));
  context.getResult().set(current);
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation){
      toggleRuntimeState(state);
      context.getFailureDescription().set("handleFailed");
      if (context.completeStep() == OperationContext.ResultAction.ROLLBACK) {
        toggleRuntimeState(state);
      }
    }
  }
,OperationContext.Stage.RUNTIME);
  context.completeStep();
}
