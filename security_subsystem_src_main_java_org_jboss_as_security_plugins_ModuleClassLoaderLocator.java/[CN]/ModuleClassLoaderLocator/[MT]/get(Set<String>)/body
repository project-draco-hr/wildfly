{
  try {
    List<ClassLoader> classLoaders=new ArrayList<>();
    for (    String module : configuredModules) {
      if (module != null && !module.isEmpty()) {
        classLoaders.add(SecurityActions.getModuleClassLoader(moduleLoader,module));
      }
    }
    classLoaders.add(WildFlySecurityManager.getCurrentContextClassLoaderPrivileged());
    return new CombinedClassLoader(classLoaders.toArray(new ClassLoader[classLoaders.size()]));
  }
 catch (  ModuleLoadException e) {
    throw SecurityLogger.ROOT_LOGGER.runtimeException(e);
  }
}
