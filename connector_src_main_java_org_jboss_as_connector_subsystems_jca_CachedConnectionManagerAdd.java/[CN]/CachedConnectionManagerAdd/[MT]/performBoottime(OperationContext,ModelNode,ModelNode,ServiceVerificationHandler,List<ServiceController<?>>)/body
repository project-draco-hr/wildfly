{
  final boolean debug=CcmParameters.DEBUG.getAttribute().validateResolvedOperation(model).asBoolean();
  final boolean error=CcmParameters.ERROR.getAttribute().validateResolvedOperation(model).asBoolean();
  final boolean install=CcmParameters.INSTALL.getAttribute().validateResolvedOperation(model).asBoolean();
  final ServiceTarget serviceTarget=context.getServiceTarget();
  if (install) {
    context.addStep(new AbstractDeploymentChainStep(){
      protected void execute(      DeploymentProcessorTarget processorTarget){
        processorTarget.addDeploymentProcessor(Phase.POST_MODULE,Phase.POST_MODULE_CACHED_CONNECTION_MANAGER,new CachedConnectionManagerSetupProcessor());
      }
    }
,OperationContext.Stage.RUNTIME);
  }
  CcmService ccmService=new CcmService(debug,error);
  newControllers.add(serviceTarget.addService(ConnectorServices.CCM_SERVICE,ccmService).addDependency(ConnectorServices.TRANSACTION_INTEGRATION_SERVICE,TransactionIntegration.class,ccmService.getTransactionIntegrationInjector()).addListener(verificationHandler).install());
}
