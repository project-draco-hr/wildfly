{
  final EnumSet<AttributeAccess.Flag> flags=definition.getFlags();
  final String attributeName=definition.getName();
  AttributeAccess.Storage storage=(flags != null && flags.contains(AttributeAccess.Flag.STORAGE_RUNTIME)) ? AttributeAccess.Storage.RUNTIME : AttributeAccess.Storage.CONFIGURATION;
  AttributeAccess aa=new AttributeAccess(AttributeAccess.AccessType.READ_WRITE,storage,readHandler,writeHandler,definition,flags);
  if (attributesUpdater.putIfAbsent(this,attributeName,aa) != null) {
    throw alreadyRegistered("attribute",attributeName);
  }
}
