{
  final ModelNode node=new ModelNode();
  boolean hasContent;
synchronized (content) {
    hasContent=!content.isEmpty();
    if (hasContent) {
      for (      Map.Entry<String,ManagedContent> entry : content.entrySet()) {
        node.get(entry.getKey()).set(entry.getValue().content);
      }
    }
  }
  if (hasContent) {
    ByteArrayInputStream bais=new ByteArrayInputStream(node.toString().getBytes());
    byte[] ourHash=contentRepository.addContent(bais);
    this.model.get(ModelDescriptionConstants.HASH).set(ourHash);
  }
 else {
    this.model.get(ModelDescriptionConstants.HASH).clear();
  }
}
