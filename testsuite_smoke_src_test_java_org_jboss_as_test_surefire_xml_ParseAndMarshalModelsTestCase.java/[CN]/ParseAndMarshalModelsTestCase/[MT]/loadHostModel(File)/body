{
  final QName rootElement=new QName(Namespace.CURRENT.getUriString(),"host");
  final HostXml parser=new HostXml(Module.getBootModuleLoader());
  final XmlConfigurationPersister persister=new XmlConfigurationPersister(file,rootElement,parser,parser);
  final List<ModelNode> ops=persister.load();
  final ModelNodeRegistration hostRegistry=HostModelUtil.createHostRegistry(persister,null,null);
  final ModelNodeRegistration rootRegistration=HostModelUtil.createBootstrapHostRegistry(hostRegistry,null);
  TestHostController controller=new TestHostController(persister,rootRegistration);
  executeOperations(controller,ops);
  ModelNode model=controller.getHostModel();
  System.out.println(model);
  persister.store(model);
  return model;
}
