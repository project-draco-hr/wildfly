{
  if (this.includedGroups.size() == 0)   return Collections.unmodifiableSet(new HashSet<SocketBindingElement>(socketBindings.values()));
 else {
    Map<String,SocketBindingElement> result=new HashMap<String,SocketBindingElement>();
    for (    String groupName : includedGroups.keySet()) {
      SocketBindingGroupElement group=includedGroupResolver.resolveRef(groupName);
      if (group == null) {
        throw new IllegalStateException("Cannot resolve reference from socket binding group " + name + " to included socket binding group "+ groupName);
      }
      Set<SocketBindingElement> included=group.getAllSocketBindings();
      for (      SocketBindingElement binding : included) {
        result.put(binding.getName(),binding);
      }
    }
    result.putAll(socketBindings);
    return Collections.unmodifiableSet(new HashSet<SocketBindingElement>(result.values()));
  }
}
