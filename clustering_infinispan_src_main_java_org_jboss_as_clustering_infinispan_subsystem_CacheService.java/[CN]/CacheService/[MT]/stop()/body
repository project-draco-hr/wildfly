{
  if ((this.cache != null) && this.cache.getStatus().allowInvocations()) {
    EmbeddedCacheManager container=this.dependencies.getCacheContainer();
    XAResourceRecoveryRegistry recoveryRegistry=this.dependencies.getRecoveryRegistry();
    if (recoveryRegistry != null) {
      recoveryRegistry.addXAResourceRecovery(new InfinispanXAResourceRecovery(this.name,container));
    }
    this.cache.stop();
  }
}
