{
  try {
    tx.setRollbackOnly();
  }
 catch (  SystemException ex) {
    log.error("SystemException while setting transaction for rollback only",ex);
  }
catch (  IllegalStateException ex) {
    log.error("IllegalStateException while setting transaction for rollback only",ex);
  }
}
