{
  LOGGER.info("start deployment");
  final WebArchive war=ShrinkWrap.create(WebArchive.class,"jaspi-test.war");
  war.addClasses(SimpleSecuredServlet.class,SimpleServlet.class);
  war.addAsWebInfResource(new StringAsset(SecurityTestConstants.WEB_XML_BASIC_AUTHN),"web.xml");
  war.addAsWebInfResource(new StringAsset("<jboss-web>" + "<security-domain>" + SECURITY_DOMAIN_NAME + "</security-domain>"+ "<valve><class-name>"+ WebJASPIAuthenticator.class.getName()+ "</class-name></valve>"+ "</jboss-web>"),"jboss-web.xml");
  war.addAsResource(new StringAsset("jduke=theduke\ntester=password"),"users.properties");
  war.addAsResource(new StringAsset("jduke=Authenticated,JBossAdmin\ntester=Authenticated"),"roles.properties");
  if (LOGGER.isInfoEnabled()) {
    LOGGER.info(war.toString(true));
  }
  return war;
}
