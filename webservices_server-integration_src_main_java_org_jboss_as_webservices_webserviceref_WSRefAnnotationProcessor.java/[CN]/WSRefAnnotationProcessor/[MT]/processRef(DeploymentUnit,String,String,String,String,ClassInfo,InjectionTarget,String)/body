{
  final EEApplicationClasses applicationClasses=deploymentUnit.getAttachment(Attachments.EE_APPLICATION_CLASSES_DESCRIPTION);
  final EEModuleClassDescription classDescription=applicationClasses.getOrAddClassByName(classInfo.name().toString());
  final ResourceInjectionConfiguration injectionConfiguration=targetDescription != null ? new ResourceInjectionConfiguration(targetDescription,new LookupInjectionSource(localContextName)) : null;
  final Module module=deploymentUnit.getAttachment(org.jboss.as.server.deployment.Attachments.MODULE);
  final ClassLoader classLoader=module.getClassLoader();
  final UnifiedServiceRefMetaData serviceRefUMDM=getServiceReference(deploymentUnit,classLoader,name,type,value,wsdlLocation);
  final InjectionSource valueSource=new WSRefValueSource(serviceRefUMDM);
  final BindingConfiguration bindingConfiguration=new BindingConfiguration(localContextName,valueSource);
  classDescription.getConfigurators().add(new BindingConfigurator(bindingConfiguration));
  if (injectionConfiguration != null) {
    classDescription.getConfigurators().add(new InjectionConfigurator(injectionConfiguration));
  }
}
