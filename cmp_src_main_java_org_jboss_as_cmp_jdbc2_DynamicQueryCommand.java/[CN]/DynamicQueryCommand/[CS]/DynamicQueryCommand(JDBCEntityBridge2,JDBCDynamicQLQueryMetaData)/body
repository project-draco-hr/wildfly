{
  log=Logger.getLogger(getClass().getName() + "." + entity.getEntityName()+ "#"+ metadata.getMethod().getName());
  this.entity=entity;
  this.metadata=metadata;
  Class returnType=metadata.getMethod().getReturnType();
  if (Collection.class.isAssignableFrom(returnType)) {
    if (Set.class.isAssignableFrom(returnType)) {
      collectionFactory=AbstractQueryCommand.SET_FACTORY;
    }
 else {
      collectionFactory=AbstractQueryCommand.COLLECTION_FACTORY;
    }
  }
}
