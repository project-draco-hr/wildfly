{
  executorService.execute(new Runnable(){
    @Override public void run(){
      final OperationMessageHandlerProxy messageHandlerProxy=new OperationMessageHandlerProxy(getChannel(),executeRequestContext.getBatchId());
      final ProxyOperationControlProxy control=new ProxyOperationControlProxy(executeRequestContext);
      final OperationAttachmentsProxy attachmentsProxy=new OperationAttachmentsProxy(getChannel(),executeRequestContext.getBatchId(),attachmentsLength);
      final ModelNode result;
      try {
        result=controller.execute(operation,messageHandlerProxy,control,attachmentsProxy);
      }
 catch (      Exception e) {
        final ModelNode failure=new ModelNode();
        failure.get(OUTCOME).set(FAILED);
        failure.get(FAILURE_DESCRIPTION).set(e.getClass().getName() + ":" + e.getMessage());
        control.operationFailed(failure);
        attachmentsProxy.shutdown(e);
        return;
      }
      if (result.hasDefined(FAILURE_DESCRIPTION)) {
        control.operationFailed(result);
      }
 else {
        try {
          executeRequestContext.awaitTxCompleted();
        }
 catch (        InterruptedException e) {
          Thread.currentThread().interrupt();
          executeRequestContext.setError(MESSAGES.errorWaitingForTransaction());
        }
        control.operationCompleted(result);
      }
    }
  }
);
}
