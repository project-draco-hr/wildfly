{
  final ModelNode model=context.readResourceForUpdate(PathAddress.EMPTY_ADDRESS).getModel();
  final ModelNode address=operation.require(OP_ADDR);
  final String raName=PathAddress.pathAddress(address).getLastElement().getValue();
  if (context.isNormalServer()) {
    context.addStep(new OperationStepHandler(){
      public void execute(      final OperationContext context,      ModelNode operation) throws OperationFailedException {
        RaOperationUtil.deactivateIfActive(context,raName);
        final String archiveName=model.get(ARCHIVE.getName()).asString();
        RaOperationUtil.activate(context,raName,archiveName);
        context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
      }
    }
,OperationContext.Stage.RUNTIME);
  }
  context.stepCompleted();
}
