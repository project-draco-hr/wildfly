{
  final ServiceContainer serviceContainer=context.getController().getServiceContainer();
  final ServiceController streamServerServiceController=serviceContainer.getRequiredService(this.remotingConnectorServiceName);
  final AbstractStreamServerService streamServerService=(AbstractStreamServerService)streamServerServiceController.getService();
  if (streamServerService instanceof InjectedSocketBindingStreamServerService) {
    this.remotingServer=(InjectedSocketBindingStreamServerService)streamServerService;
  }
  final OpenListener channelOpenListener=new ChannelOpenListener(serviceContainer);
  try {
    registration=endpointValue.getValue().registerService(EJB_CHANNEL_NAME,channelOpenListener,this.channelCreationOptions);
  }
 catch (  ServiceRegistrationException e) {
    throw new StartException(e);
  }
  final EJBClientTransactionContext ejbClientTransactionContext=EJBClientTransactionContext.create(this.txManager.getValue(),this.txSyncRegistry.getValue());
  EJBClientTransactionContext.setSelector(new ConstantContextSelector<EJBClientTransactionContext>(ejbClientTransactionContext));
}
