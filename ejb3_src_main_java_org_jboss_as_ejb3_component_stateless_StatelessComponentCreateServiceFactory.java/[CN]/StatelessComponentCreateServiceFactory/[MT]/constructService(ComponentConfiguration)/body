{
  if (this.ejbJarConfiguration == null) {
    throw MESSAGES.ejbJarConfigNotBeenSet(this,configuration.getComponentName());
  }
  configuration.getCreateDependencies().add(new DependencyConfigurator<StatelessSessionComponentCreateService>(){
    @Override public void configureDependency(    ServiceBuilder<?> builder,    StatelessSessionComponentCreateService service){
      if (service.getClustering() != null) {
        builder.addDependency(RegistryInstallerService.SERVICE_NAME);
        builder.addDependency(DependencyType.OPTIONAL,ServiceName.JBOSS.append("clustering","group","ejb","default"),Group.class,service.getGroupInjector());
      }
    }
  }
);
  return new StatelessSessionComponentCreateService(configuration,this.ejbJarConfiguration);
}
