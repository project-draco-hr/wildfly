{
  for (  final Property prop : resultsNode.asPropertyList()) {
    ModelNode result=prop.getValue();
    if (!result.hasDefined(OUTCOME) || !CANCELLED.equals(result.get(OUTCOME).asString())) {
      if (!modelComplete.get()) {
        result.get(ROLLED_BACK).set(true);
      }
      result.get(OUTCOME).set(FAILED);
      resultsNode.get(prop.getName()).set(result);
    }
  }
  resultHandler.handleResultFragment(ResultHandler.EMPTY_LOCATION,resultsNode);
  final ModelNode failureMsg=getOverallFailureDescription();
  resultHandler.handleFailed(failureMsg);
}
