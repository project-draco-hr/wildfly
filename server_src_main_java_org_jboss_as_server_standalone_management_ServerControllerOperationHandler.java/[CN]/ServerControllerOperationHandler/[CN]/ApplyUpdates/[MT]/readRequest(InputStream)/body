{
  final Unmarshaller unmarshaller=getUnmarshaller();
  unmarshaller.start(createByteInput(input));
  try {
    expectHeader(unmarshaller,StandaloneClientProtocol.PARAM_APPLY_UPDATES_RESULT_COUNT);
    int count=unmarshaller.readInt();
    updates=new ArrayList<AbstractServerModelUpdate<?>>();
    for (int i=0; i < count; i++) {
      expectHeader(unmarshaller,StandaloneClientProtocol.PARAM_SERVER_MODEL_UPDATE);
      final AbstractServerModelUpdate<?> update=unmarshal(unmarshaller,AbstractServerModelUpdate.class);
      updates.add(update);
    }
    unmarshaller.finish();
  }
  finally {
    safeFinish(unmarshaller);
  }
}
