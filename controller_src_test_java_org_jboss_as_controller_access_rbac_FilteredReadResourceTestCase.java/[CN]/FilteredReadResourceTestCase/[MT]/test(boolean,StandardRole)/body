{
  ModelNode operation=Util.createOperation(READ_RESOURCE_OPERATION,EMPTY_ADDRESS);
  operation.get(RECURSIVE).set(true);
  ModelNode result=executeWithRoles(operation,roles);
  assertEquals(SUCCESS,result.get(OUTCOME).asString());
  assertTrue(result.get(RESULT,UNCONSTRAINED_RESOURCE).has(FOO));
  assertTrue(result.get(RESULT,UNCONSTRAINED_RESOURCE).has(BAR));
  assertEquals(sensitiveResourceVisible,result.get(RESULT,SENSITIVE_CONSTRAINED_RESOURCE).has(FOO));
  assertEquals(sensitiveResourceVisible,result.get(RESULT,SENSITIVE_CONSTRAINED_RESOURCE).has(BAR));
  assertEquals(!sensitiveResourceVisible,result.get(RESPONSE_HEADERS,"access-control").get(0).get("hidden-children-types").get(0).asString().equals(SENSITIVE_CONSTRAINED_RESOURCE));
}
