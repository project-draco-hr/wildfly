{
  PathAddress address=PathAddress.pathAddress(operation.get(OP_ADDR));
  final String name=address.getLastElement().getValue();
  final ServiceTarget serviceTarget=context.getServiceTarget();
  final LdapConnectionManagerService connectionManagerService=new LdapConnectionManagerService();
  updateRuntime(context,model,connectionManagerService);
  ServiceBuilder<LdapConnectionManagerService> sb=serviceTarget.addService(LdapConnectionManagerService.ServiceUtil.createServiceName(name),connectionManagerService).setInitialMode(ServiceController.Mode.ON_DEMAND);
  if (verificationHandler != null) {
    sb.addListener(verificationHandler);
  }
  ModelNode securityRealm=SECURITY_REALM.resolveModelAttribute(context,model);
  if (securityRealm.isDefined()) {
    SSLIdentity.ServiceUtil.addDependency(sb,connectionManagerService.getSSLIdentityInjector(),securityRealm.asString(),false);
  }
  ServiceController<LdapConnectionManagerService> sc=sb.install();
  if (controllers != null) {
    controllers.add(sc);
  }
}
