{
  PathAddress address=PathAddress.pathAddress(operation.get(OP_ADDR));
  final String name=address.getLastElement().getValue();
  final ModelNode resolvedModel=createResolvedLdapConfiguration(context,model);
  final ServiceTarget serviceTarget=context.getServiceTarget();
  final LdapConnectionManagerService connectionManagerService=new LdapConnectionManagerService(resolvedModel);
  ServiceBuilder<LdapConnectionManagerService> sb=serviceTarget.addService(LdapConnectionManagerService.ServiceUtil.createServiceName(name),connectionManagerService).setInitialMode(ServiceController.Mode.ON_DEMAND);
  if (verificationHandler != null) {
    sb.addListener(verificationHandler);
  }
  if (resolvedModel.hasDefined(SECURITY_REALM)) {
    SSLIdentity.ServiceUtil.addDependency(sb,connectionManagerService.getSSLIdentityInjector(),resolvedModel.require(SECURITY_REALM).asString(),false);
  }
  ServiceController<LdapConnectionManagerService> sc=sb.install();
  if (controllers != null) {
    controllers.add(sc);
  }
}
