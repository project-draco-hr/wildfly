{
  PathAddress address=context.getCurrentAddress();
  for (  Capability capability : this.descriptor.getCapabilities()) {
    context.deregisterCapability(capability.getRuntimeCapability(address).getName());
  }
  ModelNode model=context.readResource(PathAddress.EMPTY_ADDRESS).getModel();
  ImmutableManagementResourceRegistration registration=context.getResourceRegistration();
  for (  String attributeName : registration.getAttributeNames(PathAddress.EMPTY_ADDRESS)) {
    AttributeAccess attribute=registration.getAttributeAccess(PathAddress.EMPTY_ADDRESS,attributeName);
    if (attribute != null) {
      AttributeDefinition definition=attribute.getAttributeDefinition();
      if (definition != null && (model.hasDefined(definition.getName()) || definition.hasCapabilityRequirements())) {
        definition.removeCapabilityRequirements(context,model.get(definition.getName()));
      }
    }
  }
  super.updateModel(context,operation);
}
