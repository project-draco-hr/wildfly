{
  final ServiceName hqServiceName=MessagingServices.getHornetQServiceName(PathAddress.pathAddress(operation.get(ModelDescriptionConstants.OP_ADDR)));
  ServiceController<?> hqService=context.getServiceRegistry(forWrite).getService(hqServiceName);
  HornetQServer server=HornetQServer.class.cast(hqService.getValue());
  PathAddress address=PathAddress.pathAddress(operation.require(OP_ADDR));
  T control=getHornetQComponentControl(server,address);
  if (control == null) {
    throw new OperationFailedException(MessagingMessages.MESSAGES.hqServerManagementServiceResourceNotFound(PathAddress.pathAddress(operation.require(OP_ADDR))));
  }
  return control;
}
