{
  final String localContextName=resourceInjectionConfiguration.getLocalContextName();
  final String targetContextName=resourceInjectionConfiguration.getTargetContextName();
  final ResourceInjection<Object> resourceInjection=getResourceInjection(resourceInjectionConfiguration);
  final ServiceName resourceBinderBaseName=ResourceBinder.MODULE_BINDER.append(deploymentName);
  final ServiceName binderName=resourceBinderBaseName.append(localContextName);
  serviceBuilder.addDependency(binderName,resourceInjection.getValueInjector());
  final LinkRef linkRef=new LinkRef(targetContextName.startsWith("java") ? targetContextName : ContextNames.MODULE_CONTEXT_NAME + "/" + targetContextName);
  final ResourceBinder<LinkRef> resourceBinder=new ResourceBinder<LinkRef>(localContextName,Values.immediateValue(linkRef));
  final BatchServiceBuilder<Object> binderServiceBuilder=batchBuilder.addService(binderName,resourceBinder);
  binderServiceBuilder.addDependency(moduleContextServiceName,Context.class,resourceBinder.getContextInjector());
  binderServiceBuilder.addDependency(resourceBinderBaseName.append(mangedBeanName));
  if (targetContextName.startsWith("java:")) {
    binderServiceBuilder.addOptionalDependency(ResourceBinder.JAVA_BINDER.append(targetContextName));
  }
 else {
    binderServiceBuilder.addOptionalDependency(resourceBinderBaseName.append(targetContextName));
  }
  return resourceInjection;
}
