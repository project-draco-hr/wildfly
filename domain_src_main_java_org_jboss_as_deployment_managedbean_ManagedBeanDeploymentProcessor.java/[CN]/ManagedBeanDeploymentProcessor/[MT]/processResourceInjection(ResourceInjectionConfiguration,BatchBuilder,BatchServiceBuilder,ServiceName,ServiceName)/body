{
  final String localContextName=resourceInjectionConfiguration.getLocalContextName();
  final String targetContextName=resourceInjectionConfiguration.getTargetContextName();
  final ResourceInjection<Object> resourceInjection=getResourceInjection(resourceInjectionConfiguration);
  final ServiceName binderName=beanContextServiceName.append(localContextName);
  serviceBuilder.addDependency(binderName,resourceInjection.getValueInjector());
  final LinkRef linkRef=new LinkRef(targetContextName.startsWith("java") ? targetContextName : ContextNames.MODULE_CONTEXT_NAME + "/" + targetContextName);
  final ResourceBinder<LinkRef> resourceBinder=new ResourceBinder<LinkRef>(localContextName,Values.immediateValue(linkRef));
  final BatchServiceBuilder<Object> binderServiceBuilder=batchBuilder.addService(binderName,resourceBinder);
  binderServiceBuilder.addDependency(beanContextServiceName,Context.class,resourceBinder.getContextInjector());
  if (targetContextName.startsWith("java:")) {
    binderServiceBuilder.addOptionalDependency(ResourceBinder.JAVA_BINDER.append(targetContextName));
  }
 else {
    binderServiceBuilder.addOptionalDependency(moduleContextServiceName.append(targetContextName));
  }
  return resourceInjection;
}
