{
  if (str == null) {
    return null;
  }
  if (str.startsWith("${") && str.endsWith("}")) {
    str=str.substring(2,str.length() - 1);
    final String resolved=WildFlySecurityManager.getPropertyPrivileged(str,null);
    if (resolved == null) {
      throw new XMLStreamException("Failed to resolve '" + str + "' to a non-null value.");
    }
    str=resolved;
  }
  return str;
}
