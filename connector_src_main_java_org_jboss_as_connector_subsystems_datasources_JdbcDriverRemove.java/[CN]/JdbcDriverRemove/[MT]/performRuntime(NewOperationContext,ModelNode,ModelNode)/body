{
  final String driverName=model.get(DRIVER_NAME).asString();
  final String moduleName=operation.require(DRIVER_MODULE_NAME).asString();
  final Module module;
  try {
    module=Module.getCallerModuleLoader().loadModule(ModuleIdentifier.create(moduleName));
  }
 catch (  ModuleLoadException e) {
    throw new OperationFailedException(e,new ModelNode().set("Failed to load module for driver [" + moduleName + "]"));
  }
  final ServiceLoader<Driver> serviceLoader=module.loadService(Driver.class);
  if (serviceLoader != null)   for (  Driver driver : serviceLoader) {
    final int majorVersion=driver.getMajorVersion();
    final int minorVersion=driver.getMinorVersion();
    context.removeService(ServiceName.JBOSS.append("jdbc-driver",driver.getClass().getName(),Integer.toString(majorVersion),Integer.toString(minorVersion)));
  }
}
