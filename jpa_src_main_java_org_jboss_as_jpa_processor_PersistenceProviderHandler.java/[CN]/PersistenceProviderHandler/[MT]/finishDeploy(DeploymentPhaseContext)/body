{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  PersistenceProviderDeploymentHolder persistenceProviderDeploymentHolder=getPersistenceProviderDeploymentHolder(deploymentUnit);
  if (persistenceProviderDeploymentHolder != null && persistenceProviderDeploymentHolder.getProvider() != null) {
    Set<ClassLoader> deploymentClassLoaders=allDeploymentModuleClassLoaders(deploymentUnit);
    for (    PersistenceProvider provider : persistenceProviderDeploymentHolder.getProvider()) {
      PersistenceProviderResolverImpl.getInstance().addDeploymentSpecificPersistenceProvider(provider,deploymentClassLoaders);
    }
  }
}
