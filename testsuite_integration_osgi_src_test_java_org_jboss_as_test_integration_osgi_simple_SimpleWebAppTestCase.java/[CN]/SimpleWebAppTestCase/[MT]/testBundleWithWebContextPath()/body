{
  ModelNode info=getBundleInfo(getControllerClient(),BUNDLE_D_WAB);
  Assert.assertEquals("ACTIVE",info.get(ModelConstants.STATE).asString());
  Assert.assertEquals(BUNDLE_D_WAB,info.get(ModelConstants.SYMBOLIC_NAME).asString());
  String result=performCall("osgi-webapp","simple","Hello");
  Assert.assertEquals("Simple Servlet called with input=Hello",result);
  result=performCall("osgi-webapp","message.txt",null);
  Assert.assertEquals("Hello from Resource",result);
  Assert.assertTrue("Bundle stopped",bundleStop(getControllerClient(),BUNDLE_D_WAB));
  Assert.assertEquals("RESOLVED",getBundleState(getControllerClient(),BUNDLE_D_WAB));
  try {
    performCall("osgi-webapp","simple","Hello");
    Assert.fail("IOException expected");
  }
 catch (  IOException ex) {
  }
  try {
    performCall("osgi-webapp","message.txt",null);
    Assert.fail("IOException expected");
  }
 catch (  IOException ex) {
  }
  Assert.assertTrue("Bundle started",bundleStart(getControllerClient(),BUNDLE_D_WAB));
  Assert.assertEquals("ACTIVE",getBundleState(getControllerClient(),BUNDLE_D_WAB));
  result=performCall("osgi-webapp","simple","Hello");
  Assert.assertEquals("Simple Servlet called with input=Hello",result);
  result=performCall("osgi-webapp","message.txt",null);
  Assert.assertEquals("Hello from Resource",result);
}
