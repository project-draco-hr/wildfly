{
  theConsole.printf(NEW_LINE);
  theConsole.printf(MESSAGES.enterNewUserDetails());
  theConsole.printf(NEW_LINE);
  String existingRealm=stateValues.getRealm();
  if (existingRealm == null) {
    existingRealm="";
  }
switch (stateValues.getRealmMode()) {
case DISCOVERED:
    theConsole.printf(MESSAGES.discoveredRealm(existingRealm));
  theConsole.printf(NEW_LINE);
return new PromptNewUserState(theConsole,stateValues);
case USER_SUPPLIED:
theConsole.printf(MESSAGES.userSuppliedRealm(existingRealm));
theConsole.printf(NEW_LINE);
return new PromptNewUserState(theConsole,stateValues);
default :
theConsole.printf(MESSAGES.realmPrompt(existingRealm));
String temp=theConsole.readLine(" : ");
if (temp == null) {
theConsole.printf(NEW_LINE);
return null;
}
if (temp.length() > 0 || stateValues.getRealm() == null) {
stateValues.setRealm(temp);
}
return new ValidateRealmState(theConsole,stateValues);
}
}
