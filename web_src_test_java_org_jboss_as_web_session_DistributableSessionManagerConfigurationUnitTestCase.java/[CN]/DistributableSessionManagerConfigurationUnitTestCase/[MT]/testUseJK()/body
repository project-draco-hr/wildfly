{
  log.info("Enter testUseJK");
  ++testCount;
  cacheContainer=SessionTestUtil.createCacheContainer(true,null,false,false);
  cacheContainer.start();
  JBossWebMetaData webMetaData=createWebMetaData(null,null,null,null,null);
  manager=SessionTestUtil.createManager(webMetaData,"test" + testCount,5,cacheContainer,null);
  manager.start();
  assertTrue("With no config, using JK",manager.getUseJK());
  manager.stop();
  webMetaData=createWebMetaData(null,null,null,null,Boolean.TRUE);
  manager=SessionTestUtil.createManager(webMetaData,"test" + ++testCount,5,cacheContainer,null);
  manager.start();
  assertTrue("With no jvmRoute but a config, using JK",manager.getUseJK());
  manager.stop();
  webMetaData=createWebMetaData(null,null,null,null,null);
  manager=SessionTestUtil.createManager(webMetaData,"test" + ++testCount,5,cacheContainer,"test");
  manager.start();
  assertTrue("With jvmRoute set, using JK",manager.getUseJK());
  manager.stop();
  webMetaData=createWebMetaData(null,null,null,null,Boolean.FALSE);
  manager=SessionTestUtil.createManager(webMetaData,"test" + ++testCount,5,cacheContainer,"test");
  manager.start();
  assertFalse("With a jvmRoute but config=false, not using JK",manager.getUseJK());
}
