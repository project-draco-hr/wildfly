{
  FileUtils.deleteDirectory(instanceLayout.getInstanceDirectory());
  File partitionsDir=instanceLayout.getPartitionsDirectory();
  if (!partitionsDir.exists()) {
    if (!partitionsDir.mkdirs()) {
      throw new IOException(I18n.err(I18n.ERR_112_COULD_NOT_CREATE_DIRECORY,partitionsDir));
    }
  }
  initSchemaManager();
  initSchemaLdifPartition();
  initConfigPartition();
  cpReader=new ConfigPartitionReader(configPartition);
  ConfigBean configBean=cpReader.readConfig();
  DirectoryServiceBean directoryServiceBean=configBean.getDirectoryServiceBean();
  initDirectoryService(directoryServiceBean);
  final LdapServerBean ldapServerBean=directoryServiceBean.getLdapServerBean();
  final TcpTransportBean tcpTransportBean=new TcpTransportBean();
  tcpTransportBean.setSystemPort(getPort());
  ldapServerBean.setTransports(tcpTransportBean);
  startLdap(ldapServerBean);
}
