{
  CountDownLatch latch=new CountDownLatch(numThreads);
  System.out.println("starting threads");
  for (int i=0; i < numThreads; i++) {
    threadFactory.newThread(new SendRunnable(latch,numMessages)).start();
  }
  System.out.println("start finished");
  latch.await(30,TimeUnit.SECONDS);
  System.out.println("DONE");
}
