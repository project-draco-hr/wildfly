{
switch (transition) {
case STARTING_to_UP:
    log.tracef("serviceStarted: %s",controller);
  done(controller,null);
break;
case STARTING_to_START_FAILED:
log.tracef(controller.getStartException(),"serviceFailed: %s",controller);
done(controller,controller.getStartException());
break;
case STOP_REQUESTED_to_STOPPING:
{
log.tracef("serviceStopping: %s",controller);
ModuleSpec moduleSpec=this.moduleSpec;
try {
Module module=loadModule(moduleSpec.getModuleIdentifier());
unloadModuleLocal(module);
}
 catch (ModuleLoadException e) {
}
controller.removeListener(this);
break;
}
}
}
