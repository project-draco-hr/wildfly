{
  Set<String> formatterNames=new HashSet<String>();
  try {
    for (    AuditLogHandler handler : config.getHandlersForLogging()) {
      formatterNames.add(handler.getFormatterName());
      handler.writeLogItem(item);
    }
  }
  finally {
    for (    String formatterName : formatterNames) {
      config.getFormatter(formatterName).clear();
    }
    if (handlerUpdateTask != null && !config.isManualCommit()) {
      handlerUpdateTask.applyChanges();
      handlerUpdateTask=null;
    }
  }
}
