{
  int i=0;
  try {
    while (cmdCtx.getExitCode() == 0 && i < commands.size() && !cmdCtx.isTerminated()) {
      cmdCtx.handleSafe(commands.get(i));
      ++i;
    }
  }
  finally {
    cmdCtx.terminateSession();
  }
}
