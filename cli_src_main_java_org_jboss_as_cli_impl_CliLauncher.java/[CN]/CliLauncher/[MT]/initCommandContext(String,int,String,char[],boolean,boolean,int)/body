{
  final CommandContext cmdCtx=CommandContextFactory.getInstance().newCommandContext(defaultHost,defaultPort,username,password,initConsole,timeout);
  if (connect) {
    try {
      cmdCtx.connectController();
    }
 catch (    CommandLineException e) {
      throw new CliInitializationException("Failed to connect to the controller",e);
    }
  }
  return cmdCtx;
}
