{
  if (type == Type.STANDALONE) {
    ServerControllerModelUtil.updateCoreModelNonVersions(rootResource.getModel(),null);
    ServerControllerModelUtil.initOperations(rootRegistration,createContentRepository(),new NullConfigurationPersister(),createStandaloneServerEnvironment(),null,runningModeControl,null,new ExtensionRegistry(ProcessType.STANDALONE_SERVER,runningModeControl),false,null,pathManagerService);
  }
 else   if (type == Type.HOST) {
    final String hostName="master";
    final ExtensionRegistry extensionRegistry=null;
    final HostControllerEnvironment env=createHostControllerEnvironment();
    final LocalHostControllerInfoImpl info=createLocalHostControllerInfo(env);
    final IgnoredDomainResourceRegistry ignoredRegistry=new IgnoredDomainResourceRegistry(info);
    final HostControllerConfigurationPersister persister=new HostControllerConfigurationPersister(env,info,Executors.newCachedThreadPool(),extensionRegistry);
    HostModelUtil.createRootRegistry(rootRegistration,env,ignoredRegistry,new HostModelRegistrar(){
      @Override public void registerHostModel(      String hostName,      ManagementResourceRegistration root){
      }
    }
);
    HostModelUtil.createHostRegistry(hostName,rootRegistration,persister,env,(HostRunningModeControl)runningModeControl,null,info,null,null,null,null,extensionRegistry,null,ignoredRegistry,null,pathManagerService);
  }
 else   if (type == Type.DOMAIN) {
    final HostControllerEnvironment env=createHostControllerEnvironment();
    final LocalHostControllerInfoImpl info=createLocalHostControllerInfo(env);
    final IgnoredDomainResourceRegistry ignoredRegistry=new IgnoredDomainResourceRegistry(info);
    DomainModelUtil.initializeMasterDomainRegistry(rootRegistration,new NullConfigurationPersister(),createContentRepository(),createHostFileRepository(),createDomainController(env,info),new ExtensionRegistry(ProcessType.HOST_CONTROLLER,runningModeControl),pathManagerService);
    HostModelUtil.createRootRegistry(rootRegistration,env,ignoredRegistry,new HostModelRegistrar(){
      @Override public void registerHostModel(      String hostName,      ManagementResourceRegistration root){
      }
    }
);
  }
  if (modelInitializer != null) {
    modelInitializer.populateModel(rootResource);
  }
}
