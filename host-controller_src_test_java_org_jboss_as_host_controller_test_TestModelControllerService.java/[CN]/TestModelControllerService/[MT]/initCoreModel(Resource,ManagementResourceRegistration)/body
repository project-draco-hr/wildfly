{
  System.setProperty("jboss.as.test.disable.runtime","1");
  if (type == Type.STANDALONE) {
    ServerControllerModelUtil.updateCoreModelNonVersions(rootResource.getModel(),null);
    ServerControllerModelUtil.initOperations(rootRegistration,createContentRepository(),new NullConfigurationPersister(),createStandaloneServerEnvironment(),null,runningModeControl,null,new ExtensionRegistry(ProcessType.STANDALONE_SERVER,runningModeControl),false,pathManagerService);
    rootResource.registerChild(PathElement.pathElement(ModelDescriptionConstants.CORE_SERVICE,ModelDescriptionConstants.MANAGEMENT),Resource.Factory.create());
    rootResource.registerChild(PathElement.pathElement(ModelDescriptionConstants.CORE_SERVICE,ModelDescriptionConstants.SERVICE_CONTAINER),Resource.Factory.create());
    rootResource.registerChild(ServerEnvironmentResourceDescription.RESOURCE_PATH,Resource.Factory.create());
    pathManagerService.addPathManagerResources(rootResource);
  }
 else   if (type == Type.HOST) {
    final String hostName="master";
    final ExtensionRegistry extensionRegistry=new ExtensionRegistry(ProcessType.HOST_CONTROLLER,runningModeControl);
    final HostControllerEnvironment env=createHostControllerEnvironment();
    final LocalHostControllerInfoImpl info=createLocalHostControllerInfo(env);
    final IgnoredDomainResourceRegistry ignoredRegistry=new IgnoredDomainResourceRegistry(info);
    final HostControllerConfigurationPersister persister=new HostControllerConfigurationPersister(env,info,Executors.newCachedThreadPool(),extensionRegistry);
    HostModelUtil.createRootRegistry(rootRegistration,env,ignoredRegistry,new HostModelRegistrar(){
      @Override public void registerHostModel(      String hostName,      ManagementResourceRegistration root){
      }
    }
);
    HostModelUtil.createHostRegistry(hostName,rootRegistration,persister,env,(HostRunningModeControl)runningModeControl,createHostFileRepository(),info,null,null,createContentRepository(),createDomainController(env,info),extensionRegistry,null,ignoredRegistry,null,pathManagerService);
  }
 else   if (type == Type.DOMAIN) {
    final HostControllerEnvironment env=createHostControllerEnvironment();
    final LocalHostControllerInfoImpl info=createLocalHostControllerInfo(env);
    final IgnoredDomainResourceRegistry ignoredRegistry=new IgnoredDomainResourceRegistry(info);
    DomainModelUtil.initializeMasterDomainRegistry(rootRegistration,new NullConfigurationPersister(),createContentRepository(),createHostFileRepository(),createDomainController(env,info),new ExtensionRegistry(ProcessType.HOST_CONTROLLER,runningModeControl),pathManagerService);
    HostModelUtil.createRootRegistry(rootRegistration,env,ignoredRegistry,new HostModelRegistrar(){
      @Override public void registerHostModel(      String hostName,      ManagementResourceRegistration root){
      }
    }
);
  }
  if (modelInitializer != null) {
    modelInitializer.populateModel(rootResource);
  }
}
