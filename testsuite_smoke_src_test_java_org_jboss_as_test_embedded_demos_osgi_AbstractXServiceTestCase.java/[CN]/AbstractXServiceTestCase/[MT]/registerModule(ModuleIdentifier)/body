{
  ObjectName oname=ObjectNameFactory.create("jboss.osgi:service=jmx,type=BundleManager");
  MBeanServerConnection mbeanServer=runtime.getMBeanServer();
  if (isRegisteredWithTimeout(mbeanServer,oname,10000) == false)   throw new InstanceNotFoundException(oname.getCanonicalName());
  try {
    Object[] params=new Object[]{moduleId};
    String[] signature=new String[]{ModuleIdentifier.class.getName()};
    Long bundleId=(Long)mbeanServer.invoke(oname,"installBundle",params,signature);
    return bundleId;
  }
 catch (  MBeanException ex) {
    throw ex.getTargetException();
  }
}
