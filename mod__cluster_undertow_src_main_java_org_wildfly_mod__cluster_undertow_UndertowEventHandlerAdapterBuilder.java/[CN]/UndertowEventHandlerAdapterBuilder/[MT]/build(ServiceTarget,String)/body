{
  InjectedValue<ContainerEventHandler> eventHandler=new InjectedValue<>();
  InjectedValue<UndertowService> undertowService=new InjectedValue<>();
  @SuppressWarnings("rawtypes") InjectedValue<ListenerService> listener=new InjectedValue<>();
  return target.addService(SERVICE_NAME,new UndertowEventHandlerAdapter(eventHandler,undertowService,listener)).addDependency(ContainerEventHandlerService.SERVICE_NAME,ContainerEventHandler.class,eventHandler).addDependency(UndertowService.UNDERTOW,UndertowService.class,undertowService).addDependency(UndertowService.LISTENER.append(connector),ListenerService.class,listener);
}
