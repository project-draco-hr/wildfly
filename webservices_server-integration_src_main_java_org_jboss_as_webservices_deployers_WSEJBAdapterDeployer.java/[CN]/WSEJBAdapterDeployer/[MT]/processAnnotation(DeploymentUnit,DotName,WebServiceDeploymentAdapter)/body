{
  final List<AnnotationInstance> webServiceAnnotations=getAnnotations(unit,annotation);
  final List<WebServiceDeclaration> endpoints=wsDeploymentAdapter.getServiceEndpoints();
  final EEModuleDescription moduleDescription=unit.getAttachment(EE_MODULE_DESCRIPTION);
  for (  final AnnotationInstance webServiceAnnotation : webServiceAnnotations) {
    final ClassInfo webServiceClassInfo=(ClassInfo)webServiceAnnotation.target();
    final String beanClassName=webServiceClassInfo.name().toString();
    final AbstractComponentDescription component=moduleDescription.getComponentByClassName(beanClassName);
    if (isStatelessEJB(component) || isSingletonEJB(component)) {
      final SessionBeanComponentDescription sessionComponent=(SessionBeanComponentDescription)component;
      final String ejbContainerName=newEJBContainerName(unit,component);
      endpoints.add(new WebServiceDeclarationAdapter(sessionComponent,webServiceClassInfo,ejbContainerName));
    }
  }
}
