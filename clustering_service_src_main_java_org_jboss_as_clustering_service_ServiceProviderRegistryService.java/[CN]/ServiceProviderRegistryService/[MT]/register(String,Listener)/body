{
  this.listeners.put(service,listener);
  final ClusterNode node=this.notifier.getClusterNode();
  Operation<Set<ClusterNode>> operation=new Operation<Set<ClusterNode>>(){
    @Override public Set<ClusterNode> invoke(    Cache<String,Map<ClusterNode,Void>> cache){
      Map<ClusterNode,Void> map=cache.putIfAbsent(service,null);
      if (!map.containsKey(node)) {
        map.put(node,null);
      }
      return map.keySet();
    }
  }
;
  Set<ClusterNode> nodes=this.invoker.invoke(this.cache,operation);
  listener.serviceProvidersChanged(nodes,false);
}
