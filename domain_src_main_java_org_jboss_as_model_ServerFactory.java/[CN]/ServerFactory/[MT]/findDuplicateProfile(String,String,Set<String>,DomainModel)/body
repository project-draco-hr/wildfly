{
  String duplicate=null;
  for (  String profile : processedProfiles) {
    if (profile.equals(currentProfile)) {
      continue;
    }
    ProfileElement pe=domainModel.getProfile(profile);
    if (pe.getSubsystem(namespaceURI) != null) {
      duplicate=profile;
      break;
    }
  }
  return new IllegalStateException(String.format("Subsystem with namespace %s " + "is declared in multiple profiles that are related to each " + "other via inclusion. Profiles are %s and %s. A subsystem can "+ "only appear once in a given server runtime, so declaring the "+ "same subsystem in multiple related profiles is illegal.",namespaceURI,duplicate,currentProfile));
}
