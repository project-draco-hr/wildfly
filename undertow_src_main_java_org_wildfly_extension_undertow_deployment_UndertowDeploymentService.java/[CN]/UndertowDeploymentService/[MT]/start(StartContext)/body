{
  DeploymentInfo deploymentInfo=deploymentInfoInjectedValue.getValue();
  StartupContext.setInjectionContainer(webInjectionContainer);
  try {
    deploymentManager=container.getValue().getServletContainer().addDeployment(deploymentInfo);
    deploymentManager.deploy();
    try {
      HttpHandler handler=deploymentManager.start();
      Deployment deployment=deploymentManager.getDeployment();
      host.getValue().registerDeployment(deployment,handler);
    }
 catch (    ServletException e) {
      throw new StartException(e);
    }
  }
  finally {
    StartupContext.setInjectionContainer(null);
  }
}
