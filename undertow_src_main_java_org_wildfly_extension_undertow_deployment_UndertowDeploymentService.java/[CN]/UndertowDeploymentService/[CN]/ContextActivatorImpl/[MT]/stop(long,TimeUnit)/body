{
  StabilityMonitor monitor=new StabilityMonitor();
  monitor.addController(controller);
  try {
    controller.setMode(ServiceController.Mode.NEVER);
    if (!monitor.awaitStability(timeout,unit)) {
      UndertowLogger.ROOT_LOGGER.debugf("Timeout stopping context: %s",controller.getName());
    }
  }
 catch (  final InterruptedException e) {
  }
 finally {
    monitor.removeController(controller);
  }
  return true;
}
