{
  if (controller.getMode() == ServiceController.Mode.NEVER) {
    controller.setMode(ServiceController.Mode.ACTIVE);
  }
  final StabilityMonitor monitor=new StabilityMonitor();
  monitor.addController(controller);
  try {
    if (!monitor.awaitStability(timeout,unit)) {
      throw UndertowMessages.MESSAGES.timeoutContextActivation(controller.getName());
    }
  }
 catch (  final InterruptedException e) {
  }
 finally {
    monitor.removeController(controller);
  }
  return true;
}
