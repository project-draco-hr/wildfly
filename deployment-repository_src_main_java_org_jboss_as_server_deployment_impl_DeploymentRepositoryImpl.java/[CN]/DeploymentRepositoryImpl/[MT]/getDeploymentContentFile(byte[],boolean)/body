{
  String sha1=HashUtil.bytesToHexString(deploymentHash);
  String partA=sha1.substring(0,2);
  String partB=sha1.substring(2);
  File base=new File(getRepoRoot(),partA);
  if (validate) {
    validateDir(base);
  }
  File hashDir=new File(base,partB);
  if (validate && !hashDir.exists() && !hashDir.mkdirs()) {
    throw new IllegalStateException("Cannot create directory " + hashDir.getAbsolutePath());
  }
  File content=new File(hashDir,CONTENT);
  return content;
}
