{
  ModelNode domainResult=hostControllerExecutionSupport.getFormattedDomainResult(localResult);
  overallResult.setEmptyObject();
  overallResult.get(DOMAIN_RESULTS).set(domainResult);
  ModelNode serverOpsNode=overallResult.get(SERVER_OPERATIONS);
  final Map<ModelNode,Set<ServerIdentity>> bundled=new HashMap<ModelNode,Set<ServerIdentity>>();
  for (  Map.Entry<ServerIdentity,ModelNode> entry : serverOps.entrySet()) {
    Set<ServerIdentity> idSet=bundled.get(entry.getValue());
    if (idSet == null) {
      idSet=new HashSet<ServerIdentity>();
      bundled.put(entry.getValue(),idSet);
    }
    idSet.add(entry.getKey());
  }
  for (  Map.Entry<ModelNode,Set<ServerIdentity>> entry : bundled.entrySet()) {
    ModelNode setNode=serverOpsNode.add();
    ModelNode serverNode=setNode.get("servers");
    serverNode.setEmptyList();
    for (    ServerIdentity server : entry.getValue()) {
      serverNode.add(server.getServerName(),server.getServerGroupName());
    }
    setNode.get(OP).set(entry.getKey());
  }
}
