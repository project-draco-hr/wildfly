{
  if (context.hasFailureDescription()) {
    localResponse.get(FAILURE_DESCRIPTION).set(context.getFailureDescription());
    context.setRollbackOnly();
  }
 else {
    boolean nullDomainOp=hostControllerExecutionSupport.getDomainOperation() == null;
    HostControllerExecutionSupport.ServerOperationProvider provider=nullDomainOp ? NO_OP_PROVIDER : new HostControllerExecutionSupport.ServerOperationProvider(){
      @Override public Map<Set<ServerIdentity>,ModelNode> getServerOperations(      ModelNode domainOp,      PathAddress address){
        return ServerOperationsResolverHandler.this.getServerOperations(context,domainOp,address);
      }
    }
;
    Map<Set<ServerIdentity>,ModelNode> serverOps=hostControllerExecutionSupport.getServerOps(provider);
    ModelNode domainOpResult=nullDomainOp ? new ModelNode(IGNORED) : (context.hasResult() ? context.getResult() : new ModelNode());
    ModelNode overallResult=localResponse == null ? context.getResult() : localResponse.get(RESULT);
    createOverallResult(serverOps,domainOpResult,overallResult);
    if (HOST_CONTROLLER_LOGGER.isTraceEnabled()) {
      HOST_CONTROLLER_LOGGER.tracef("%s responseNode is %s",getClass().getSimpleName(),overallResult);
    }
  }
  context.completeStep();
}
