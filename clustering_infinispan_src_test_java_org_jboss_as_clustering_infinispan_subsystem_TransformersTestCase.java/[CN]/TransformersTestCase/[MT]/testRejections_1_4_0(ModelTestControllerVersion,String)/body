{
  ModelVersion version_1_4_0=ModelVersion.create(1,4,0);
  KernelServicesBuilder builder=createKernelServicesBuilder(AdditionalInitialization.MANAGEMENT);
  LegacyKernelServicesInitializer legacyInitializer=builder.createLegacyKernelServicesBuilder(null,controllerVersion,version_1_4_0);
  for (  String mavenResourceURL : mavenResourceURLs) {
    legacyInitializer.addMavenResourceURL(mavenResourceURL);
  }
  legacyInitializer.dontPersistXml();
  KernelServices mainServices=builder.build();
  KernelServices legacyServices=mainServices.getLegacyServices(version_1_4_0);
  Assert.assertNotNull(legacyServices);
  Assert.assertTrue("main services did not boot",mainServices.isSuccessfulBoot());
  Assert.assertTrue(legacyServices.isSuccessfulBoot());
  List<ModelNode> xmlOps=builder.parseXmlResource("infinispan-transformer-2_0-backup.xml");
  ModelTestUtils.checkFailedTransformedBootOperations(mainServices,version_1_4_0,xmlOps,getFailedOperationConfig140());
}
