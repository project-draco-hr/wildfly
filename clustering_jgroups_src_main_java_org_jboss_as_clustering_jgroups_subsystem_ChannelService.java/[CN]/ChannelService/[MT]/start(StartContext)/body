{
  ChannelFactory factory=this.factory.getValue();
  try {
    this.channel=factory.createChannel(this.id);
    if (this.channel.getProtocolStack().findProtocol(STATE_TRANSFER.class,STATE.class,STATE_SOCK.class) != null) {
      this.channel.connect(this.id,null,STATE_TRANSFER_TIMEOUT);
    }
 else {
      this.channel.connect(this.id);
    }
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
  String localName=this.channel.getName();
  Address localAddress=this.channel.getAddress();
  for (  Address address : this.channel.getView()) {
    String name=this.channel.getName(address);
    if (name.equals(localName) && !address.equals(localAddress)) {
      this.channel.close();
      throw JGroupsMessages.MESSAGES.duplicateNodeName(factory.getProtocolStackConfiguration().getEnvironment().getNodeName());
    }
  }
}
