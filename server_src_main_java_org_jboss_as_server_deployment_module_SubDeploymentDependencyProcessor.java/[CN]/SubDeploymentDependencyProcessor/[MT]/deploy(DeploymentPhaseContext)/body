{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final DeploymentUnit parent=deploymentUnit.getParent();
  if (parent == null) {
    return;
  }
  final ModuleSpecification moduleSpec=deploymentUnit.getAttachment(Attachments.MODULE_SPECIFICATION);
  final ModuleLoader moduleLoader=deploymentUnit.getAttachment(Attachments.SERVICE_MODULE_LOADER);
  final ModuleIdentifier parentModule=parent.getAttachment(Attachments.MODULE_IDENTIFIER);
  if (parentModule != null) {
    ModuleDependency moduleDependency=new ModuleDependency(moduleLoader,parentModule,false,false,true);
    moduleDependency.addImportFilter(PathFilters.acceptAll(),true);
    moduleSpec.addDependency(moduleDependency);
  }
}
