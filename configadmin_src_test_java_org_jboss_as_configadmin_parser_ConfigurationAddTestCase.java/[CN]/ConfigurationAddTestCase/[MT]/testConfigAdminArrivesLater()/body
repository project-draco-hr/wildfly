{
  ServiceRegistry mockServiceRegistry=Mockito.mock(ServiceRegistry.class);
  ServiceBuilder mockBuilder=Mockito.mock(ServiceBuilder.class);
  ServiceTarget mockServiceTarget=Mockito.mock(ServiceTarget.class);
  Mockito.when(mockServiceTarget.addService(Mockito.eq(ServiceName.JBOSS.append("configadmin","data_initialization")),Mockito.any(Service.class))).thenReturn(mockBuilder);
  OperationContext mockOperationContext=Mockito.mock(OperationContext.class);
  Mockito.when(mockOperationContext.getServiceRegistry(true)).thenReturn(mockServiceRegistry);
  Mockito.when(mockOperationContext.getServiceTarget()).thenReturn(mockServiceTarget);
  Hashtable<String,String> values=new Hashtable<String,String>();
  values.put("a","aa");
  values.put("b","bb");
  ModelNode operation=getOperationModelNode("a.b.c",values);
  ConfigurationAdd.INSTANCE.performRuntime(mockOperationContext,operation,null,null,null);
  Mockito.verify(mockBuilder).addDependency(Mockito.eq(ConfigAdminService.SERVICE_NAME),Mockito.eq(ConfigAdminService.class),Mockito.any(Injector.class));
  Mockito.verify(mockBuilder).install();
  ConfigAdminServiceImpl mockCAS=Mockito.mock(ConfigAdminServiceImpl.class);
  ConfigurationAdd.InitializeConfigAdminService initSvc=getInitializationService();
  Field injectedCASField=initSvc.getClass().getDeclaredField("injectedConfigAdminService");
  injectedCASField.setAccessible(true);
  InjectedValue<ConfigAdminService> injectedCAS=(InjectedValue<ConfigAdminService>)injectedCASField.get(initSvc);
  injectedCAS.setValue(new ImmediateValue<ConfigAdminService>(mockCAS));
  Hashtable<String,String> values2=new Hashtable<String,String>();
  values2.put("x","x");
  values2.put(ConfigAdminService.SOURCE_PROPERTY_KEY,ConfigAdminService.FROM_NONDMR_SOURCE_VALUE);
  ModelNode op2=getOperationModelNode("xx",values2);
  ConfigurationAdd.INSTANCE.performRuntime(mockOperationContext,op2,null,null,null);
  initSvc.start(null);
  Mockito.verify(mockCAS).putConfigurationFromDMR("a.b.c",values);
  Mockito.verify(mockCAS).putConfigurationFromDMR("xx",values2);
}
