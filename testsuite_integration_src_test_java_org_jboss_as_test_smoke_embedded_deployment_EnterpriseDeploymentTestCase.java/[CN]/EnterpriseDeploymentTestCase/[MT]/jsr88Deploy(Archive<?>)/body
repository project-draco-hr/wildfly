{
  DeploymentManager manager=getDeploymentManager();
  Target[] targets=manager.getTargets();
  assertEquals(1,targets.length);
  InputStream deploymentPlan=createDeploymentPlan(archive.getName());
  InputStream inputStream=archive.as(ZipExporter.class).exportAsInputStream();
  ProgressObject progress=manager.distribute(targets,inputStream,deploymentPlan);
  awaitCompletion(progress,5000);
  progress=manager.start(progress.getResultTargetModuleIDs());
  awaitCompletion(progress,5000);
  return progress;
}
