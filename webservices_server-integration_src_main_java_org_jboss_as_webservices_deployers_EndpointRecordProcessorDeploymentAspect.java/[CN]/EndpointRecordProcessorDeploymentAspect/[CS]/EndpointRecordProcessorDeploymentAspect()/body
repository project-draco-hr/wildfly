{
  super();
  ServiceLoader<RecordProcessorFactory> loader=ServiceLoader.load(RecordProcessorFactory.class);
  Iterator<RecordProcessorFactory> iterator=loader.iterator();
  List<RecordProcessor> list=new LinkedList<RecordProcessor>();
  while (iterator.hasNext()) {
    RecordProcessorFactory factory=iterator.next();
    list.addAll(factory.newRecordProcessors());
  }
  setProcessors(list);
  final ServiceController<?> controller=WSServices.getContainerRegistry().getService(ServiceName.JBOSS.append("mbean","server"));
  if (controller != null) {
    setMbeanServer((MBeanServer)controller.getService().getValue());
  }
 else {
    setMbeanServer(ManagementFactory.getPlatformMBeanServer());
  }
}
