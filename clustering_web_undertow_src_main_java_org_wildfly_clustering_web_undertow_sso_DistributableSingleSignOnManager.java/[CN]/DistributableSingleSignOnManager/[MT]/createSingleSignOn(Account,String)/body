{
  String id=this.manager.createIdentifier();
  Batcher<Batch> batcher=this.manager.getBatcher();
  @SuppressWarnings("resource") Batch batch=batcher.createBatch();
  try {
    AuthenticatedSession session=new AuthenticatedSession(account,mechanism);
    SSO<AuthenticatedSession,String,Void> sso=this.manager.createSSO(id,session);
    return new DistributableSingleSignOn(sso,this.registry,batcher,batcher.suspendBatch());
  }
 catch (  RuntimeException|Error e) {
    batch.discard();
    batch.close();
    throw e;
  }
}
