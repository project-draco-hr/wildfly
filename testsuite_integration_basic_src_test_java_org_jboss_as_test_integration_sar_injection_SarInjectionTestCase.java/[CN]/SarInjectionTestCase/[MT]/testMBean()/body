{
  final ModelControllerClient client=ModelControllerClient.Factory.create(InetAddress.getByName("127.0.0.1"),9999,getCallbackHandler());
  try {
    final MBeanServerConnection mbeanServer=JMXConnectorFactory.connect(new JMXServiceURL("service:jmx:remoting-jmx://localhost:9999")).getMBeanServerConnection();
    final ObjectName objectName=new ObjectName("jboss:name=POJOService");
    Assert.assertTrue(2 == (Integer)mbeanServer.getAttribute(objectName,"Count"));
    Assert.assertTrue((Boolean)mbeanServer.getAttribute(objectName,"CreateCalled"));
    Assert.assertTrue((Boolean)mbeanServer.getAttribute(objectName,"StartCalled"));
    Assert.assertFalse((Boolean)mbeanServer.getAttribute(objectName,"StopCalled"));
    Assert.assertFalse((Boolean)mbeanServer.getAttribute(objectName,"DestroyCalled"));
  }
  finally {
    try {
      client.close();
    }
 catch (    IOException ignore) {
    }
  }
}
