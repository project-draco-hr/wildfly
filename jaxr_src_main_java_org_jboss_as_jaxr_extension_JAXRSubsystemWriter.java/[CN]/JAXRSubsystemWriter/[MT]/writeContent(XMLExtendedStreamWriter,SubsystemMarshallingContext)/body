{
  context.startSubsystemElement(Namespace.CURRENT.getUriString(),false);
  ModelNode node=context.getModelNode();
  if (has(node,ModelConstants.CONNECTIONFACTORY)) {
    writer.writeStartElement(Element.CONNECTIONFACTORY.getLocalName());
    writeAttribute(writer,Attribute.JNDI_NAME,node.get(ModelConstants.CONNECTIONFACTORY));
    writer.writeEndElement();
  }
  if (has(node,ModelConstants.DATASOURCE)) {
    writer.writeStartElement(Element.DATASOURCE.getLocalName());
    writeAttribute(writer,Attribute.JNDI_NAME,node.get(ModelConstants.DATASOURCE));
    writer.writeEndElement();
  }
  boolean flagsPresent=false;
  if (has(node,ModelConstants.DROPONSTART,ModelConstants.CREATEONSTART,ModelConstants.DROPONSTOP)) {
    writer.writeStartElement(Element.FLAGS.getLocalName());
    flagsPresent=true;
  }
  if (has(node,ModelConstants.DROPONSTART)) {
    writeAttribute(writer,Attribute.DROPONSTART,node.get(ModelConstants.DROPONSTART));
  }
  if (has(node,ModelConstants.CREATEONSTART)) {
    writeAttribute(writer,Attribute.CREATEONSTART,node.get(ModelConstants.CREATEONSTART));
  }
  if (has(node,ModelConstants.DROPONSTOP)) {
    writeAttribute(writer,Attribute.DROPONSTOP,node.get(ModelConstants.DROPONSTOP));
  }
  if (flagsPresent) {
    writer.writeEndElement();
  }
  writer.writeEndElement();
}
