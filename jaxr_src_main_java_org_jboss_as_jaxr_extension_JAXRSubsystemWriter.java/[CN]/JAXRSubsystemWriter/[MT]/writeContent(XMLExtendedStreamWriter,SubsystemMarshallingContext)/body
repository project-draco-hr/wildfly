{
  context.startSubsystemElement(Namespace.CURRENT.getUriString(),false);
  ModelNode node=context.getModelNode();
  writer.writeStartElement(Element.CONNECTION_FACTORY.getLocalName());
  writeAttribute(writer,Attribute.JNDI_NAME,node.get(ModelConstants.CONNECTION_FACTORY));
  ModelNode clazz=node.get(ModelConstants.CONNECTION_FACTORY_IMPL);
  if (clazz.isDefined()) {
    writeAttribute(writer,Attribute.CLASS,clazz);
  }
  writer.writeEndElement();
  writer.writeStartElement(Element.PROPERTIES.getLocalName());
  ModelNode properties=node.get(ModelConstants.PROPERTY);
  if (properties.isDefined()) {
    for (    String key : properties.keys()) {
      String val=properties.get(key).get(ModelConstants.VALUE).asString();
      writer.writeStartElement(Element.PROPERTY.getLocalName());
      writer.writeAttribute(Attribute.NAME.getLocalName(),key);
      writer.writeAttribute(Attribute.VALUE.getLocalName(),val);
      writer.writeEndElement();
    }
  }
  writer.writeEndElement();
  writer.writeEndElement();
}
