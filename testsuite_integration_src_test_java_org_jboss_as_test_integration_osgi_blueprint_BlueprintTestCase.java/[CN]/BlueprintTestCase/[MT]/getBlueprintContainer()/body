{
  int timeout=10000;
  ServiceReference sref=null;
  while (sref == null && 0 < (timeout-=200)) {
    String filter="(osgi.blueprint.container.symbolicname=example-blueprint)";
    ServiceReference[] srefs=context.getServiceReferences(BlueprintContainer.class.getName(),filter);
    if (srefs != null && srefs.length > 0)     sref=srefs[0];
    Thread.sleep(200);
  }
  assertNotNull("BlueprintContainer not null",sref);
  BlueprintContainer bpContainer=(BlueprintContainer)context.getService(sref);
  return bpContainer;
}
