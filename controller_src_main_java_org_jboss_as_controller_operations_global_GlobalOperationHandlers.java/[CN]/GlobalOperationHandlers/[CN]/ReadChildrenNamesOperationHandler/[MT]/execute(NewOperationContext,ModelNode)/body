{
  validator.validate(operation);
  final String childType=operation.require(CHILD_TYPE).asString();
  ModelNode subModel=safeReadModel(context);
  ImmutableModelNodeRegistration registry=context.getModelNodeRegistration();
  Map<String,Set<String>> childAddresses=getChildAddresses(registry,subModel,childType);
  Set<String> childNames=childAddresses.get(childType);
  if (childNames == null) {
    throw new OperationFailedException(new ModelNode().set(String.format("No known child type named %s",childType)));
  }
  childNames=new TreeSet<String>(childNames);
  ModelNode result=context.getResult();
  result.setEmptyList();
  for (  String childName : childNames) {
    result.add(childName);
  }
  context.completeStep();
}
