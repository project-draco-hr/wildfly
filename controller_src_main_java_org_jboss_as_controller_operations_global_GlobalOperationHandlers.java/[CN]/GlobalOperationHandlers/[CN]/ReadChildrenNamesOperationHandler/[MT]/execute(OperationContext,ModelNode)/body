{
  validator.validate(operation);
  final String childType=operation.require(CHILD_TYPE).asString();
  final Resource resource=context.readResource(PathAddress.EMPTY_ADDRESS);
  ImmutableManagementResourceRegistration registry=context.getResourceRegistration();
  Map<String,Set<String>> childAddresses=getChildAddresses(registry,resource,childType);
  Set<String> childNames=childAddresses.get(childType);
  if (childNames == null) {
    throw new OperationFailedException(new ModelNode().set(MESSAGES.unknownChildType(childType)));
  }
  childNames=new TreeSet<String>(childNames);
  ModelNode result=context.getResult();
  result.setEmptyList();
  for (  String childName : childNames) {
    result.add(childName);
  }
  context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
}
