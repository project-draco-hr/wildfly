{
  String symbolicName="archive-deployer-test-bundle";
  Archive<?> archive=provider.getClientDeployment(symbolicName);
  String depname=archiveDeployer.deploy(archive);
  Bundle bundle=null;
  try {
    for (    Bundle aux : context.getBundles()) {
      if (symbolicName.equals(aux.getSymbolicName())) {
        bundle=aux;
        break;
      }
    }
    assertNotNull("Bundle found",bundle);
    bundle.start();
    OSGiTestHelper.assertBundleState(Bundle.ACTIVE,bundle.getState());
    bundle.stop();
    OSGiTestHelper.assertBundleState(Bundle.RESOLVED,bundle.getState());
  }
  finally {
    archiveDeployer.undeploy(depname);
    OSGiTestHelper.assertBundleState(Bundle.UNINSTALLED,bundle.getState());
  }
}
