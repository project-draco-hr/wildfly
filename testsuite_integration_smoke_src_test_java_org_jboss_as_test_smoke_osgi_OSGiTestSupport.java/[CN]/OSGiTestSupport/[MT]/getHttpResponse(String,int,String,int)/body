{
  int fraction=200;
  String line=null;
  IOException lastException=null;
  while (line == null && 0 < (timeout-=fraction)) {
    try {
      URL url=new URL("http://" + host + ":"+ port+ reqPath);
      BufferedReader br=new BufferedReader(new InputStreamReader(url.openStream()));
      line=br.readLine();
      br.close();
    }
 catch (    IOException ex) {
      lastException=ex;
      try {
        Thread.sleep(fraction);
      }
 catch (      InterruptedException ie) {
      }
    }
  }
  if (line == null && lastException != null)   throw lastException;
  return line;
}
