{
  QName rootElement=new QName(Namespace.CURRENT.getUriString(),"domain");
  HostXml parser=new HostXml(Module.getSystemModuleLoader());
  final XMLMapper mapper=XMLMapper.Factory.create();
  mapper.registerRootElement(rootElement,parser);
  List<ModelNode> updates=new ArrayList<ModelNode>();
  try {
    final FileInputStream fis=new FileInputStream(new File(environment.getDomainConfigurationDir(),"domain.xml"));
    try {
      BufferedInputStream input=new BufferedInputStream(fis);
      XMLStreamReader streamReader=XMLInputFactory.newInstance().createXMLStreamReader(input);
      mapper.parseDocument(updates,streamReader);
      streamReader.close();
      input.close();
      fis.close();
      System.out.println("Parsed domain updates " + updates);
    }
  finally {
      StreamUtils.safeClose(fis);
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  return updates;
}
