{
  final ServiceBuilder<ServerConfig> builder=serviceTarget.addService(WSServices.CONFIG_SERVICE,new ServerConfigService(serverConfig));
  builder.addDependency(DependencyType.OPTIONAL,MBEAN_SERVER_NAME,MBeanServer.class,serverConfig.getMBeanServerInjector());
  builder.addDependency(ServerEnvironmentService.SERVICE_NAME,ServerEnvironment.class,serverConfig.getServerEnvironmentInjector());
  for (  ServiceName dep : dependencies) {
    builder.addDependency(dep);
  }
  builder.addListener(listener);
  builder.setInitialMode(Mode.ACTIVE);
  ServiceController<?> sc=builder.install();
  return sc;
}
