{
  SFSBHibernatewithMetaDataSession sfsb=lookup("SFSBHibernatewithMetaDataSession",SFSBHibernatewithMetaDataSession.class);
  sfsb.setupConfig();
  try {
    Set<Satellite> satellites1=new HashSet<Satellite>();
    Satellite sat=new Satellite();
    sat.setId(new Integer(1));
    sat.setName("MOON");
    satellites1.add(sat);
    Planet s1=sfsb.prepareData("EARTH","MILKY WAY","SUN",satellites1,new Integer(1));
    ClassMetadata data=sfsb.getPlanetClassMetadata(new Integer(1));
    assertNotNull(data);
    assertEquals("planetId",data.getIdentifierPropertyName());
    Map coldata=sfsb.getCollectionMetaData();
    Iterator iterator=coldata.keySet().iterator();
    String key=iterator.next().toString();
    assertEquals("org.jboss.as.test.integration.hibernate.Planet.satellites",key);
  }
  finally {
    sfsb.cleanup();
  }
}
