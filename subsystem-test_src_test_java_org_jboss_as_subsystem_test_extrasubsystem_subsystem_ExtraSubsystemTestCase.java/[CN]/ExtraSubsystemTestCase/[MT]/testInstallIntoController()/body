{
  String subsystemXml="<subsystem xmlns=\"" + DependencySubsystemExtension.NAMESPACE + "\">"+ "</subsystem>"+ "<subsystem xmlns=\""+ MainSubsystemExtension.NAMESPACE+ "\">"+ "</subsystem>";
  KernelServices services=createKernelServicesBuilder(new DependencyAdditionalInitialization()).setSubsystemXml(subsystemXml).build();
  ModelNode model=services.readWholeModel();
  Assert.assertTrue(model.get(SUBSYSTEM).hasDefined(DependencySubsystemExtension.SUBSYSTEM_NAME));
  Assert.assertTrue(model.get(SUBSYSTEM).hasDefined(MainSubsystemExtension.SUBSYSTEM_NAME));
  Assert.assertNotNull(services.getContainer().getService(Dependency.NAME));
  Assert.assertNotNull(services.getContainer().getService(MainService.NAME));
  MainService mainService=(MainService)services.getContainer().getService(MainService.NAME).getValue();
  Assert.assertNotNull(mainService.dependencyValue.getValue());
}
