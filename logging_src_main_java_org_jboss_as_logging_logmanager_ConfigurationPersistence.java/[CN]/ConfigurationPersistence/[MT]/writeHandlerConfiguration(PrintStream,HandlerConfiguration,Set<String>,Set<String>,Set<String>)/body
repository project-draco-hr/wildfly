{
  if (handler != null) {
    out.println();
    if (handler instanceof HandlerConfigurationImpl) {
      if (((HandlerConfigurationImpl)handler).isLog4jAppender()) {
        out.println("# Note: This is a log4j appender and will not work with normal log managers.");
        out.println("#       References to this appender should be removed if a different log manager is used.");
      }
    }
    final String name=handler.getName();
    final String prefix="handler." + name + ".";
    final String className=handler.getClassName();
    writeProperty(out,"handler.",name,className);
    final String moduleName=handler.getModuleName();
    if (moduleName != null) {
      writeProperty(out,prefix,"module",moduleName);
    }
    final String level=handler.getLevel();
    if (level != null) {
      writeProperty(out,prefix,"level",level);
    }
    final String filter=handler.getFilter();
    if (filter != null) {
      writeProperty(out,prefix,"filter",filter);
    }
    final String formatterName=handler.getFormatterName();
    if (formatterName != null) {
      writeProperty(out,prefix,"formatter",formatterName);
      implicitFormatters.add(formatterName);
    }
    final String errorManagerName=handler.getErrorManagerName();
    if (errorManagerName != null) {
      writeProperty(out,prefix,"errorManager",errorManagerName);
      implicitErrorManagers.add(errorManagerName);
    }
    final List<String> handlerNames=handler.getHandlerNames();
    if (!handlerNames.isEmpty()) {
      writeProperty(out,prefix,"handlers",toCsvString(handlerNames));
      for (      String handlerName : handlerNames) {
        implicitHandlers.add(handlerName);
      }
    }
    writeProperties(out,prefix,handler);
  }
}
