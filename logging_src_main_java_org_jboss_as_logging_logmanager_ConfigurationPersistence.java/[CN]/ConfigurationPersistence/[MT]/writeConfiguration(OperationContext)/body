{
  final String loggingConfig;
switch (context.getProcessType()) {
case DOMAIN_SERVER:
{
      loggingConfig=FileResolver.resolvePath(context,"jboss.server.data.dir",PROPERTIES_FILE);
      break;
    }
default :
{
    loggingConfig=FileResolver.resolvePath(context,"jboss.server.config.dir",PROPERTIES_FILE);
  }
}
if (loggingConfig == null) {
LoggingLogger.ROOT_LOGGER.pathManagerServiceNotStarted();
}
 else {
final File configFile=new File(loggingConfig);
synchronized (LOCK) {
  try {
    commit();
    FileOutputStream out=null;
    try {
      out=new FileOutputStream(configFile);
      final FileLock lock=out.getChannel().lock();
      try {
        out.write(NOTE_MESSAGE);
        config.writeConfiguration(out);
      }
  finally {
        if (lock.isValid()) {
          lock.release();
        }
      }
      LoggingLogger.ROOT_LOGGER.tracef("Logging configuration file '%s' successfully written.",configFile.getAbsolutePath());
    }
 catch (    IOException e) {
      throw LoggingMessages.MESSAGES.failedToWriteConfigurationFile(e,configFile);
    }
 finally {
      safeClose(out);
    }
  }
  finally {
    forget();
  }
}
}
}
