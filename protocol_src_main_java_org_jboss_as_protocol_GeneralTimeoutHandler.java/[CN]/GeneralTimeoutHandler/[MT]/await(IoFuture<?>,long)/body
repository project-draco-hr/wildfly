{
  final long startTime=System.currentTimeMillis();
  IoFuture.Status status=future.await(timeoutMillis,TimeUnit.MILLISECONDS);
  while (status == IoFuture.Status.WAITING) {
    if (thinking) {
      status=future.await(timeoutMillis,TimeUnit.MILLISECONDS);
    }
 else {
      long timeToWait=(timeoutMillis + thinkTime) - (System.currentTimeMillis() - startTime);
      if (timeToWait > 0) {
        status=future.await(timeToWait,TimeUnit.MILLISECONDS);
      }
 else {
        return status;
      }
    }
  }
  return status;
}
