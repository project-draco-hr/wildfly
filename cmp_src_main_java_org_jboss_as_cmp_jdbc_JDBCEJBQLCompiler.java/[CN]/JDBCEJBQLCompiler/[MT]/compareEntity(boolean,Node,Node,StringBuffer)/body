{
  buf.append('(');
  if (not) {
    buf.append(SQLUtil.NOT).append('(');
  }
  String fromAlias;
  JDBCEntityBridge fromEntity;
  ASTPath fromPath=(ASTPath)fromNode;
  addJoinPath(fromPath);
  fromAlias=aliasManager.getAlias(fromPath.getPath());
  fromEntity=(JDBCEntityBridge)fromPath.getEntity();
  if (toNode instanceof ASTParameter) {
    ASTParameter toParam=(ASTParameter)toNode;
    verifyParameterEntityType(toParam.number,fromEntity);
    inputParameters.addAll(QueryParameter.createParameters(toParam.number - 1,fromEntity));
    SQLUtil.getWhereClause(fromEntity.getPrimaryKeyFields(),fromAlias,buf);
  }
 else {
    String toAlias;
    JDBCEntityBridge toEntity;
    ASTPath toPath=(ASTPath)toNode;
    addJoinPath(toPath);
    toAlias=aliasManager.getAlias(toPath.getPath());
    toEntity=(JDBCEntityBridge)toPath.getEntity();
    if (!fromEntity.equals(toEntity)) {
      throw CmpMessages.MESSAGES.onlyLikeTypesCanBeCompared(fromEntity.getEntityName(),toEntity.getEntityName());
    }
    SQLUtil.getSelfCompareWhereClause(fromEntity.getPrimaryKeyFields(),fromAlias,toAlias,buf);
  }
  if (not) {
    buf.append(')');
  }
  buf.append(')');
}
