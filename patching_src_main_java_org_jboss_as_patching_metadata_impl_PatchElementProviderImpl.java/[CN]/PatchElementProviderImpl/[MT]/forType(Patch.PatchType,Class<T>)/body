{
  if (patchType != this.patchType) {
    throw new IllegalStateException(this.patchType + " was: " + patchType);
  }
  if (patchType == Patch.PatchType.ONE_OFF) {
    if (cumulativeTarget == null) {
      throw new IllegalStateException("Cumulative target is missing");
    }
  }
  return clazz.cast(this);
}
