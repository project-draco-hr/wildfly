{
  final ModelNode address=new ModelNode();
  address.add(ModelDescriptionConstants.DEPLOYMENT,"ws-example.war");
  address.add(ModelDescriptionConstants.SUBSYSTEM,WSExtension.SUBSYSTEM_NAME);
  address.add("endpoint","*");
  final ModelNode operation=new ModelNode();
  operation.get(ModelDescriptionConstants.OP).set(ModelDescriptionConstants.READ_RESOURCE_OPERATION);
  operation.get(ModelDescriptionConstants.OP_ADDR).set(address);
  operation.get(ModelDescriptionConstants.INCLUDE_RUNTIME).set(true);
  operation.get(ModelDescriptionConstants.RECURSIVE).set(true);
  final ModelNode result=managementClient.getControllerClient().execute(operation);
  Assert.assertEquals(ModelDescriptionConstants.SUCCESS,result.get(ModelDescriptionConstants.OUTCOME).asString());
  for (  final ModelNode endpointResult : result.get("result").asList()) {
    final ModelNode endpoint=endpointResult.get("result");
    Assert.assertTrue(endpoint.hasDefined("class"));
    Assert.assertTrue(endpoint.hasDefined("name"));
    Assert.assertTrue(endpoint.hasDefined("wsdl-url"));
    Assert.assertTrue(endpoint.get("wsdl-url").asString().endsWith("?wsdl"));
    Assert.assertTrue(endpoint.hasDefined("request-count"));
    Assert.assertTrue(endpoint.get("request-count").asString().contains("No metrics available"));
  }
}
