{
  final List<ModelNode> operations=new ArrayList<ModelNode>();
  XMLMapper mapper=XMLMapper.Factory.create();
  mapper.registerRootElement(new QName(Namespace.CURRENT.getUri(),"subsystem"),Namespace.CURRENT.getXMLReader());
  XMLStreamReader reader=XMLInputFactory.newInstance().createXMLStreamReader(new FileInputStream(file));
  mapper.parseDocument(operations,reader);
  final ModelNode ret=operations.get(0);
  final ModelNode config=ret.get("mod-cluster-config");
  XMLExtendedStreamWriter streamWriter=new FormattingXMLStreamWriter(XMLOutputFactory.newInstance().createXMLStreamWriter((new FileOutputStream(file))));
  SubsystemMarshallingContext context=new SubsystemMarshallingContext(config,streamWriter);
  mapper.deparseDocument(new ModClusterSubsystemXMLWriter(),context,streamWriter);
  streamWriter.close();
  return ret;
}
