{
  try {
    final BeanManager manager=(BeanManager)new InitialContext().lookup("java:comp/BeanManager");
    final Bean<BoundSessionContext> sessionContextBean=(Bean<BoundSessionContext>)manager.resolve(manager.getBeans(BoundSessionContext.class,BoundLiteral.INSTANCE));
    CreationalContext<?> ctx=manager.createCreationalContext(sessionContextBean);
    final BoundSessionContext sessionContext=(BoundSessionContext)manager.getReference(sessionContextBean,BoundSessionContext.class,ctx);
    sessionContext.deactivate();
    final Bean<BoundRequestContext> requestContextBean=(Bean<BoundRequestContext>)manager.resolve(manager.getBeans(BoundSessionContext.class,BoundLiteral.INSTANCE));
    ctx=manager.createCreationalContext(requestContextBean);
    final BoundRequestContext requestContext=(BoundRequestContext)manager.getReference(requestContextBean,BoundSessionContext.class,ctx);
    requestContext.deactivate();
    final Bean<BoundConversationContext> conversationContextBean=(Bean<BoundConversationContext>)manager.resolve(manager.getBeans(BoundConversationContext.class,BoundLiteral.INSTANCE));
    ctx=manager.createCreationalContext(conversationContextBean);
    final BoundConversationContext conversationContext=(BoundConversationContext)manager.getReference(conversationContextBean,BoundSessionContext.class,ctx);
    conversationContext.deactivate();
  }
 catch (  NamingException e) {
    log.error("Failed to tear down Weld contexts",e);
  }
}
