{
  BufferedWriter writer=new BufferedWriter(new FileWriter(new File(mainDirectory,"module.xml")));
  try {
    writer.write("<module xmlns=\"urn:jboss:module:1.1\" name=\"" + moduleName + "\">");
    writer.write("<resources>");
    for (    JavaArchive jar : resources) {
      writer.write("<resource-root path=\"" + jar.getName() + "\"/>");
    }
    writer.write("</resources>");
    writer.write("<dependencies>");
    for (    String dependency : dependencies) {
      writer.write("<module name=\"" + dependency + "\"/>");
    }
    writer.write("</dependencies>");
    writer.write("</module>");
  }
  finally {
    writer.close();
  }
}
