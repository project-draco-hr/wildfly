{
  PathAddress address=PathAddress.pathAddress(operation.require(OP_ADDR));
  String asyncHandlerName=address.getLastElement().getValue();
  String handlerNameToAssign=operation.get(CommonAttributes.NAME).asString();
  ServiceRegistry serviceRegistry=context.getServiceRegistry(false);
  ServiceController<Handler> asyncHandlerController=(ServiceController<Handler>)serviceRegistry.getService(LogServices.handlerName(asyncHandlerName));
  ServiceController<Handler> handlerToAssignController=(ServiceController<Handler>)serviceRegistry.getService(LogServices.handlerName(handlerNameToAssign));
  if (handlerToAssignController == null) {
    opFailed("Handler " + handlerNameToAssign + " not found.");
  }
  AsyncHandlerService service=(AsyncHandlerService)asyncHandlerController.getService();
  InjectedValue<Handler> injectedHandler=new InjectedValue<Handler>();
  injectedHandler.inject(handlerToAssignController.getValue());
  service.addHandler(injectedHandler);
}
