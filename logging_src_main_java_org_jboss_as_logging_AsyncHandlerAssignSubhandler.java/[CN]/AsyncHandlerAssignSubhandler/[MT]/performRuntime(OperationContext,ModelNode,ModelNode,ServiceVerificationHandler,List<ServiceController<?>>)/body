{
  PathAddress address=PathAddress.pathAddress(operation.require(OP_ADDR));
  String asyncHandlerName=address.getLastElement().getValue();
  String handlerNameToAssign=NAME.resolveModelAttribute(context,model).asString();
  ServiceRegistry serviceRegistry=context.getServiceRegistry(true);
  @SuppressWarnings("unchecked") ServiceController<Handler> asyncHandlerController=(ServiceController<Handler>)serviceRegistry.getService(LogServices.handlerName(asyncHandlerName));
  @SuppressWarnings("unchecked") ServiceController<Handler> handlerToAssignController=(ServiceController<Handler>)serviceRegistry.getService(LogServices.handlerName(handlerNameToAssign));
  if (handlerToAssignController == null) {
    throw createFailureMessage(MESSAGES.handlerNotFound(handlerNameToAssign));
  }
  AsyncHandlerService service=(AsyncHandlerService)asyncHandlerController.getService();
  InjectedValue<Handler> injectedHandler=new InjectedValue<Handler>();
  injectedHandler.inject(handlerToAssignController.getValue());
  service.addHandler(injectedHandler);
}
