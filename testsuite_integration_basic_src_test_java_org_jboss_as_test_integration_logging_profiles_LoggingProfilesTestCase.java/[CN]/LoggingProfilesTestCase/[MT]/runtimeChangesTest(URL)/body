{
  ModelNode op=new ModelNode();
  op.get(OP).set("change-file");
  op.get(OP_ADDR).add(SUBSYSTEM,"logging");
  op.get(OP_ADDR).add("logging-profile","dummy-profile1");
  op.get(OP_ADDR).add("periodic-rotating-file-handler","DUMMY1");
  ModelNode file=new ModelNode();
  file.get("relative-to").set("jboss.server.log.dir");
  file.get("path").set(CHANGED_LOG_NAME);
  op.get("file").set(file);
  applyUpdate(op,managementClient.getControllerClient());
  URL url=new URL(deployementUrl,"Logger?text=DummyProfile1");
  int statusCode=testResponse(url);
  assertTrue("Invalid response statusCode: " + statusCode,statusCode == HttpServletResponse.SC_OK);
  BufferedReader br=new BufferedReader(new InputStreamReader(new FileInputStream(dummyLog1Changed),Charset.forName("UTF-8")));
  String line=br.readLine();
  Assert.assertTrue("\"LoggingServlet is logging fatal message\" should be presented in dummy-profile1.log",line.contains("DummyProfile1: LoggingServlet is logging fatal message"));
  Assert.assertTrue("Only one log should be found in dummy-profile1.log",br.readLine() == null);
  br.close();
}
