{
  EntityBeanComponentInstance instance=(EntityBeanComponentInstance)context.getPrivateData(ComponentInstance.class);
  if (instance.isInvocationInProgress()) {
    throw EjbLogger.ROOT_LOGGER.failToReacquireLockForNonReentrant(context.getPrivateData(ComponentInstance.class));
  }
  instance.setInvocationInProgress(true);
  try {
    return context.proceed();
  }
  finally {
    instance.setInvocationInProgress(false);
  }
}
