{
  PathAddress operationAddress=PathAddress.pathAddress(operation.get(OP_ADDR));
  PathAddress discoveryOptionsAddress=operationAddress.subAddress(0,operationAddress.size() - 1);
  ModelNode discoveryOptions=Resource.Tools.readModel(context.readResourceFromRoot(discoveryOptionsAddress));
  ModelNode discoveryOptionsOrdering=discoveryOptions.get(DISCOVERY_OPTIONS);
  String name=Util.getNameFromAddress(operation.get(OP_ADDR));
  ModelNode newDiscoveryOptionsOrdering=new ModelNode();
  for (  Property prop : discoveryOptionsOrdering.asPropertyList()) {
    String discoveryOptionType=prop.getName();
    String discoveryOptionName=prop.getValue().asString();
    if (!(discoveryOptionName.equals(name) && discoveryOptionType.equals(type))) {
      newDiscoveryOptionsOrdering.add(discoveryOptionType,discoveryOptionName);
    }
  }
  ModelNode writeOp=Util.getWriteAttributeOperation(discoveryOptionsAddress,DISCOVERY_OPTIONS,newDiscoveryOptionsOrdering);
  OperationStepHandler writeHandler=context.getRootResourceRegistration().getSubModel(discoveryOptionsAddress).getOperationHandler(PathAddress.EMPTY_ADDRESS,WRITE_ATTRIBUTE_OPERATION);
  context.addStep(new ModelNode(),writeOp,writeHandler,OperationContext.Stage.MODEL,true);
}
