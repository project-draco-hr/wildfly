{
  if (isReadOnly()) {
    throw ControllerLogger.ROOT_LOGGER.permissionCollectionIsReadOnly();
  }
  if (type.equals(permission.getClass())) {
    ManagementPermission mperm=(ManagementPermission)permission;
synchronized (permissions) {
      permissions.put(mperm.getActionEffect(),mperm);
    }
  }
 else {
    throw ControllerLogger.ROOT_LOGGER.incompatiblePermissionType(permission.getClass());
  }
}
