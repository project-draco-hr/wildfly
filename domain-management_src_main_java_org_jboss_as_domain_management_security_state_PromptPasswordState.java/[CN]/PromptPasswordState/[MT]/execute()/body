{
  State continuingState=new WeakCheckState(theConsole,stateValues);
  if (stateValues.isSilentOrNonInteractive() == false) {
    theConsole.printf(MESSAGES.passwordPrompt());
    char[] tempChar=theConsole.readPassword(" : ");
    if (tempChar == null || tempChar.length == 0) {
      return new ErrorState(theConsole,MESSAGES.noPasswordExiting());
    }
    theConsole.printf(MESSAGES.passwordConfirmationPrompt());
    char[] secondTempChar=theConsole.readPassword(" : ");
    if (secondTempChar == null) {
      secondTempChar=new char[0];
    }
    if (Arrays.equals(tempChar,secondTempChar) == false) {
      return new ErrorState(null,MESSAGES.passwordMisMatch(),this);
    }
    stateValues.setPassword(tempChar);
    if (!stateValues.isManagement()) {
      theConsole.printf(MESSAGES.rolesPrompt());
      String userRoles=stateValues.getKnownRoles().get(stateValues.getUserName());
      stateValues.setRoles(theConsole.readLine("[%1$2s]: ",(userRoles == null ? "" : userRoles)));
    }
  }
  return continuingState;
}
