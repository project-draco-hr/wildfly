{
  String name=Operations.getPathAddress(operation).getLastElement().getValue();
  String stack=ModelNodes.asString(ChannelResourceDefinition.STACK.resolveModelAttribute(context,model),ChannelFactoryService.DEFAULT);
  ModuleIdentifier module=ModelNodes.asModuleIdentifier(ChannelResourceDefinition.MODULE.resolveModelAttribute(context,model));
  ServiceTarget target=context.getServiceTarget();
  new AliasServiceBuilder<>(ChannelServiceName.FACTORY.getServiceName(name),ChannelFactoryService.getServiceName(stack),ChannelFactory.class).build(target).install();
  new ChannelBuilder(name).build(target).install();
  new ChannelConnectorBuilder(name).build(target).install();
  new BinderServiceBuilder<>(JGroupsBindingFactory.createChannelBinding(name),ChannelServiceName.CHANNEL.getServiceName(name),Channel.class).build(target).install();
  new ForkChannelFactoryService(name).build(target).install();
  new BinderServiceBuilder<>(ChannelFactoryService.createChannelFactoryBinding(name),ChannelFactoryService.getServiceName(name),ChannelFactory.class).build(target).install();
  for (  GroupServiceInstaller installer : ServiceLoader.load(ClusteredGroupServiceInstaller.class,ClusteredGroupServiceInstaller.class.getClassLoader())) {
    JGroupsLogger.ROOT_LOGGER.debugf("Installing %s for channel %s",installer.getClass().getSimpleName(),name);
    installer.install(target,name,module);
  }
}
