{
  try {
    PropagationContext pc=null;
    final TransactionManager tm=getTransactionManager();
    final Transaction tx=tm.getTransaction();
    if (!TxUtils.isUncommitted(tx)) {
      if (traceEnabled)       log.trace("No transaction context");
      return null;
    }
    if (traceEnabled)     log.trace("Propagating empty OTS context");
    pc=getEmptyPropagationContext();
    final Any any=CorbaORBService.getCurrent().create_any();
    PropagationContextHelper.insert(any,pc);
    return any;
  }
 catch (  Exception e) {
    throw new NestedRuntimeException("Error getting tpc",e);
  }
}
