{
  Predicate predicate=Predicates.truePredicate();
  if (model.hasDefined(PREDICATE.getName())) {
    String predicateString=model.get(PREDICATE.getName()).asString();
    predicate=PredicateParser.parse(predicateString,getClass().getClassLoader());
  }
  EncodingHandler encodingHandler=new EncodingHandler(new ContentEncodingRepository().addEncodingHandler("gzip",new GzipEncodingProvider(),50,predicate));
  encodingHandler.setNext(next);
  return encodingHandler;
}
