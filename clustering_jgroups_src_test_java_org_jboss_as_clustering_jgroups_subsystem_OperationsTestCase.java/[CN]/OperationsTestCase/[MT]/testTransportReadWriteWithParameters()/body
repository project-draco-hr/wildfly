{
  String subsystemXml=getSubsystemXml();
  KernelServices servicesA=createKernelServicesBuilder(null).setSubsystemXml(subsystemXml).build();
  Assert.assertTrue("Could not create services",servicesA.isSuccessfulBoot());
  ModelNode result=servicesA.executeOperation(addStackOpWithParams);
  Assert.assertEquals(result.get(FAILURE_DESCRIPTION).asString(),SUCCESS,result.get(OUTCOME).asString());
  result=servicesA.executeOperation(readTransportTypeOp);
  Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
  Assert.assertEquals("TCP",result.get(RESULT).asString());
  result=servicesA.executeOperation(writeTransportRackOp);
  Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
  result=servicesA.executeOperation(readTransportRackOp);
  Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
  Assert.assertEquals("new-rack",result.get(RESULT).asString());
}
