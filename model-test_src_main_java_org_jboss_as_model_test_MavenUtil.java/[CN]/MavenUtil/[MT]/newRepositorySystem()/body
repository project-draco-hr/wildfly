{
  DefaultServiceLocator locator=new DefaultServiceLocator();
  locator.addService(ArtifactDescriptorReader.class,DefaultArtifactDescriptorReader.class);
  locator.addService(VersionResolver.class,DefaultVersionResolver.class);
  locator.addService(VersionRangeResolver.class,DefaultVersionRangeResolver.class);
  locator.addService(MetadataGeneratorFactory.class,SnapshotMetadataGeneratorFactory.class);
  locator.addService(MetadataGeneratorFactory.class,VersionsMetadataGeneratorFactory.class);
  locator.setErrorHandler(new MyErrorHandler());
  locator.addService(RepositoryConnectorFactory.class,BasicRepositoryConnectorFactory.class);
  locator.addService(TransporterFactory.class,FileTransporterFactory.class);
  locator.addService(TransporterFactory.class,HttpTransporterFactory.class);
  return locator.getService(RepositorySystem.class);
}
