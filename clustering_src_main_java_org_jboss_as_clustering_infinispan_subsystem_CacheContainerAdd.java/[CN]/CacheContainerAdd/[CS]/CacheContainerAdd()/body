{
  InfinispanConfiguration config=load(DEFAULTS);
  this.global=config.parseGlobalConfiguration();
  this.configs=new EnumMap<CacheMode,Configuration>(CacheMode.class);
  this.defaultConfig=config.parseDefaultConfiguration();
  Map<String,Configuration> namedConfigs=config.parseNamedConfigurations();
  for (  CacheMode mode : CacheMode.values()) {
    Configuration configuration=this.defaultConfig.clone();
    Configuration override=namedConfigs.get(mode.name());
    if (override != null) {
      configuration.applyOverrides(override);
    }
    configuration.setCacheMode(mode);
    this.configs.put(mode,configuration);
  }
}
