{
  final Artifact<? extends State,P> parent=artifact.getParent();
  if (parent == null) {
    if (root == null) {
      root=(ArtifactTreeNodeBuilder<PatchingHistoryRoot.State,PatchingHistoryRoot.State>)new ArtifactTreeNodeBuilder<P,S>(artifact);
    }
    return (ArtifactTreeNodeBuilder<P,S>)root;
  }
  final ArtifactTreeNodeBuilder<? extends Artifact.State,P> parentBuilder=getNodeBuilder(parent);
  return parentBuilder.getChildNodeBuilder(artifact);
}
