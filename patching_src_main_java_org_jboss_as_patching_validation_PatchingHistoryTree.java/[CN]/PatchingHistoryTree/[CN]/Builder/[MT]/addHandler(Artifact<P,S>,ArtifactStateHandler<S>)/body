{
  final ArtifactTreeNodeBuilder<P,S> nodeBuilder=getNodeBuilder(artifact);
  if (nodeBuilder.handler != null) {
    throw new IllegalStateException("handler has already been specified for artifact " + artifact);
  }
  nodeBuilder.handler=handler;
  return this;
}
