{
synchronized (capabilities) {
    for (Iterator<OSGiCapability> it=capabilities.iterator(); it.hasNext(); ) {
      OSGiCapability module=it.next();
      if (module.getIdentifier().equals(id)) {
        it.remove();
        notifyObservers(new ChangeEvent(ChangeType.CAPABILITY,true,id));
        return module;
      }
    }
    return null;
  }
}
