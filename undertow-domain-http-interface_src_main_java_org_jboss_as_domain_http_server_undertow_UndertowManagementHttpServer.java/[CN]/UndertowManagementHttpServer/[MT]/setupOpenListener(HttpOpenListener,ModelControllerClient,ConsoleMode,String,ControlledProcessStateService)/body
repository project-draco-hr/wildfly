{
  CanonicalPathHandler canonicalPathHandler=new CanonicalPathHandler();
  HttpTransferEncodingHandler httpTransferEncodingHandler=new HttpTransferEncodingHandler(canonicalPathHandler);
  listener.setRootHandler(httpTransferEncodingHandler);
  PathHandler pathHandler=new PathHandler();
  canonicalPathHandler.setNext(pathHandler);
  ResourceHandler consoleHandler=null;
  try {
    consoleHandler=consoleMode.createConsoleHandler(consoleSlot);
  }
 catch (  ModuleLoadException e) {
    ROOT_LOGGER.consoleModuleNotFound(consoleSlot == null ? "main" : consoleSlot);
  }
  ManagementRootConsoleRedirectHandler rootConsoleRedirectHandler=new ManagementRootConsoleRedirectHandler(consoleHandler);
  DomainApiCheckHandler domainApiHandler=new DomainApiCheckHandler(modelControllerClient,null,controlledProcessStateService);
  pathHandler.setDefaultHandler(rootConsoleRedirectHandler);
  if (consoleHandler != null) {
    pathHandler.addPath(consoleHandler.getContext(),new BlockingHandler(consoleHandler));
  }
  pathHandler.addPath(DomainApiCheckHandler.PATH,domainApiHandler);
}
