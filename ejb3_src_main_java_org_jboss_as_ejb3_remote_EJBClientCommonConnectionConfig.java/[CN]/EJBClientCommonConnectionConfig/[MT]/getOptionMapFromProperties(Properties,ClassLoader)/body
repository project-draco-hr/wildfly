{
  final OptionMap.Builder optionMapBuilder=OptionMap.builder();
  for (  final String propertyName : properties.stringPropertyNames()) {
    try {
      final Option<?> option=Option.fromString(propertyName,classLoader);
      optionMapBuilder.parse(option,properties.getProperty(propertyName),classLoader);
    }
 catch (    IllegalArgumentException e) {
      logger.warn("Could not parse property " + propertyName + " while creating OptionMap",e);
    }
  }
  return optionMapBuilder.getMap();
}
