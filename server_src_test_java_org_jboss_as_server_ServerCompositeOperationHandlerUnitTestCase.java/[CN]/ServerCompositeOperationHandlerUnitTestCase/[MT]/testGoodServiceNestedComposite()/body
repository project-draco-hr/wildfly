{
  Operation step1=getOperation("good","attr1",2);
  Operation step2=getOperation("good","attr2",1);
  Operation comp1=getCompositeOperation(null,step1,step2);
  Operation step3=getOperation("good","attr1",20);
  Operation step4=getOperation("good-service","attr2",10);
  Operation comp2=getCompositeOperation(null,step3,step4);
  Operation op=getCompositeOperation(null,comp1,comp2);
  ModelNode result=controller.execute(op);
  assertEquals(SUCCESS,result.get(OUTCOME).asString());
  assertTrue(result.hasDefined(RESULT));
  assertTrue(result.get(RESULT).hasDefined("step-1"));
  assertTrue(result.get(RESULT,"step-1").hasDefined(OUTCOME));
  assertEquals(SUCCESS,result.get(RESULT,"step-1",OUTCOME).asString());
  assertTrue(result.get(RESULT).hasDefined("step-2"));
  assertTrue(result.get(RESULT,"step-2").hasDefined(OUTCOME));
  assertEquals(SUCCESS,result.get(RESULT,"step-2",OUTCOME).asString());
  assertEquals(20,controller.execute(getOperation("good","attr1",3)).get(RESULT).asInt());
  assertEquals(10,controller.execute(getOperation("good","attr2",3)).get(RESULT).asInt());
  assertFalse(controller.state.get());
  ServiceController<?> sc=container.getService(ServiceName.JBOSS.append("good-service"));
  assertNotNull(sc);
  assertEquals(State.UP,sc.getState());
}
