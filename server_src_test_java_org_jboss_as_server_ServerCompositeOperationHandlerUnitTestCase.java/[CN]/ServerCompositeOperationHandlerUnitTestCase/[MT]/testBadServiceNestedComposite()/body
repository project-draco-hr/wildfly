{
  Operation step1=getOperation("good","attr1",2);
  Operation step2=getOperation("good","attr2",1);
  Operation comp1=getCompositeOperation(null,step1,step2);
  Operation step3=getOperation("good","attr1",20);
  Operation step4=getOperation("bad-service","attr2",10);
  Operation comp2=getCompositeOperation(null,step3,step4);
  Operation op=getCompositeOperation(null,comp1,comp2);
  ModelNode result=controller.execute(op);
  assertEquals("failed",result.get("outcome").asString());
  assertTrue(result.hasDefined(FAILURE_DESCRIPTION));
  assertTrue(runtimeState.get());
  ServiceController<?> sc=container.getService(ServiceName.JBOSS.append("bad-service"));
  if (sc != null) {
    assertEquals(Mode.REMOVE,sc.getMode());
  }
  assertEquals(1,controller.execute(getOperation("good","attr1",3)).get("result").asInt());
  assertEquals(2,controller.execute(getOperation("good","attr2",3)).get("result").asInt());
}
