{
  ModelNode step1=getOperation("good","attr1",2);
  ModelNode step2=getOperation("handleFailed","attr2",1);
  try {
    ModelNode op=getCompositeOperation(null,step1,step2);
    op.get("rollback-on-runtime-failure").set(false);
    controller.execute(op);
    fail("should have thrown OperationFailedException");
  }
 catch (  OperationFailedException e) {
    assertTrue(e.getFailureDescription().get("failure-description").toString().indexOf("handleFailed") > -1);
  }
  assertTrue(runtimeState.get());
  assertEquals(2,controller.execute(getOperation("good","attr1",3)).get("result").asInt());
  assertEquals(1,controller.execute(getOperation("good","attr2",3)).get("result").asInt());
}
