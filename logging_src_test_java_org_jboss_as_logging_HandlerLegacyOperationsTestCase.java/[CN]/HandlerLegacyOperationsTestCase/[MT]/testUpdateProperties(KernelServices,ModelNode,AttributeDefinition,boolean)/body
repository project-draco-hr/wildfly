{
  final ModelNode original=SubsystemOperations.readResult(executeOperation(kernelServices,SubsystemOperations.createReadResourceOperation(address,true)));
  ModelNode op=OperationBuilder.create(AbstractHandlerDefinition.UPDATE_OPERATION_NAME,address).addAttribute(attribute,value).build();
  executeOperation(kernelServices,op);
  op=SubsystemOperations.createReadAttributeOperation(address,attribute);
  final ModelNode result=executeOperation(kernelServices,op);
  assertEquals(value,SubsystemOperations.readResult(result).asBoolean());
  final ModelNode newModel=SubsystemOperations.readResult(executeOperation(kernelServices,SubsystemOperations.createReadResourceOperation(address,true)));
  original.get(attribute.getName()).set(value);
  compare(original,newModel);
}
