{
  final ModelNode original=SubsystemOperations.readResult(executeOperation(kernelServices,SubsystemOperations.createReadResourceOperation(address,true)));
  ModelNode op=OperationBuilder.create(AbstractHandlerDefinition.UPDATE_OPERATION_NAME,address).addAttribute(attribute,value).build();
  executeOperation(kernelServices,op);
  op=SubsystemOperations.createReadAttributeOperation(address,attribute);
  final ModelNode result=executeOperation(kernelServices,op);
  assertEquals(value,SubsystemOperations.readResultAsString(result));
  final ModelNode newModel=SubsystemOperations.readResult(executeOperation(kernelServices,SubsystemOperations.createReadResourceOperation(address,true)));
  original.get(attribute.getName()).set(value);
  if (attribute.getName().equals(CommonAttributes.FILTER_SPEC.getName())) {
    original.get(CommonAttributes.FILTER.getName()).set(newModel.get(CommonAttributes.FILTER.getName()));
  }
  compare(original,newModel);
}
