{
  if (deploymentActions.size() > 0) {
    throw new IllegalStateException(InitialDeploymentPlanBuilder.class.getSimpleName() + " operations are not allowed after content and deployment modifications");
  }
  if (globalRollback)   throw new IllegalStateException("Global rollback is not compatible with a server restart");
  long period=timeUnit.toMillis(timeout);
  if (shutdown && period != gracefulShutdownPeriod) {
    throw new IllegalStateException("Graceful shutdown already configured with a timeout of " + gracefulShutdownPeriod + " ms");
  }
  return new DeploymentPlanBuilderImpl(this,period);
}
