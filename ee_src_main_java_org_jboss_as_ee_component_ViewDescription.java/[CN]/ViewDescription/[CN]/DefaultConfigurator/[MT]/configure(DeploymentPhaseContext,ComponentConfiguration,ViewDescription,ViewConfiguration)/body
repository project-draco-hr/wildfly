{
  DeploymentReflectionIndex reflectionIndex=context.getDeploymentUnit().getAttachment(REFLECTION_INDEX);
  ClassReflectionIndex<?> index=reflectionIndex.getClassIndex(componentConfiguration.getComponentClass());
  List<Method> methods=configuration.getProxyFactory().getCachedMethods();
  for (  Method method : methods) {
    final Method componentMethod=ClassReflectionIndexUtil.findMethod(reflectionIndex,index,MethodIdentifier.getIdentifierForMethod(method));
    if (componentMethod != null) {
      configuration.addViewInterceptor(method,new ImmediateInterceptorFactory(new ComponentDispatcherInterceptor(componentMethod)),InterceptorOrder.View.COMPONENT_DISPATCHER);
      configuration.addClientInterceptor(method,CLIENT_DISPATCHER_INTERCEPTOR_FACTORY,InterceptorOrder.Client.CLIENT_DISPATCHER);
    }
  }
  configuration.addClientPostConstructInterceptor(Interceptors.getTerminalInterceptorFactory(),InterceptorOrder.ClientPostConstruct.TERMINAL_INTERCEPTOR);
  configuration.addClientPreDestroyInterceptor(Interceptors.getTerminalInterceptorFactory(),InterceptorOrder.ClientPreDestroy.TERMINAL_INTERCEPTOR);
}
