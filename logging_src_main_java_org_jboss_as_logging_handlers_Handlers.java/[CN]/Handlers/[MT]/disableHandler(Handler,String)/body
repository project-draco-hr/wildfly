{
  Map<String,Filter> disableHandlers=ROOT.getAttachment(DISABLED_HANDLERS_KEY);
  if (disableHandlers == null) {
    disableHandlers=new HashMap<String,Filter>();
    final Map<String,Filter> current=ROOT.attachIfAbsent(DISABLED_HANDLERS_KEY,disableHandlers);
    if (current != null) {
      disableHandlers=current;
    }
  }
synchronized (HANDLER_LOCK) {
    if (!disableHandlers.containsKey(handlerName)) {
      disableHandlers.put(handlerName,handler.getFilter());
      handler.setFilter(DenyAllFilter.getInstance());
    }
  }
}
