{
  if (model.isDefined()) {
    for (    Property p : model.asPropertyList()) {
      if (p.getValue().getType() == ModelType.OBJECT) {
        model.get(p.getName()).set(cleanUndefined(p.getValue()));
      }
 else {
        if (!p.getValue().isDefined()) {
          model.remove(p.getName());
        }
      }
    }
  }
  return model;
}
