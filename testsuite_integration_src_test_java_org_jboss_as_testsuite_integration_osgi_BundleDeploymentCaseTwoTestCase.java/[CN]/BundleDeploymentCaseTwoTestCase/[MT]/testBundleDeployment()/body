{
  String symbolicName="test-bundle-two";
  Archive<?> bundleArchive=provider.getClientDeployment(symbolicName);
  String deploymentName=archiveDeployer.deploy(bundleArchive);
  assertNotNull("Deployment name not null",deploymentName);
  Bundle bundle=null;
  try {
    for (    Bundle aux : context.getBundles()) {
      if (symbolicName.equals(aux.getSymbolicName())) {
        bundle=aux;
        break;
      }
    }
    assertNotNull("Bundle found",bundle);
    bundle.start();
    OSGiTestHelper.assertBundleState(Bundle.ACTIVE,bundle.getState());
    bundle.stop();
    OSGiTestHelper.assertBundleState(Bundle.RESOLVED,bundle.getState());
  }
  finally {
    archiveDeployer.undeploy(deploymentName);
    OSGiTestHelper.assertBundleState(Bundle.UNINSTALLED,bundle.getState());
  }
}
