{
  final String deploymentName=deploymentRoot.getRootName();
  final DeploymentUnit deploymentUnit=new DeploymentUnitImpl(parent,deploymentName,registry);
  deploymentUnit.putAttachment(Attachments.DEPLOYMENT_ROOT,deploymentRoot);
  deploymentUnit.putAttachment(Attachments.MODULE_SPECIFICATION,new ModuleSpecification());
  deploymentUnit.putAttachment(DeploymentModelUtils.REGISTRATION_ATTACHMENT,registration);
  deploymentUnit.putAttachment(DeploymentModelUtils.MUTABLE_REGISTRATION_ATTACHMENT,mutableRegistration);
  deploymentUnit.putAttachment(DeploymentModelUtils.DEPLOYMENT_RESOURCE,resource);
  deploymentUnit.putAttachment(Attachments.SERVICE_VERIFICATION_HANDLER,serviceVerificationHandler);
  deploymentUnit.putAttachment(Attachments.VAULT_READER_ATTACHMENT_KEY,vaultReader);
  this.resource=null;
  return deploymentUnit;
}
