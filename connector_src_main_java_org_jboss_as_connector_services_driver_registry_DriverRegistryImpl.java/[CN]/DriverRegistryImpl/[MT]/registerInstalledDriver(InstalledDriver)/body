{
  if (driver == null)   throw new IllegalArgumentException(ConnectorLogger.ROOT_LOGGER.nullVar("driver"));
  DEPLOYMENT_CONNECTOR_REGISTRY_LOGGER.tracef("Adding driver: %s",driver);
  String profile=driver.getProfile() != null ? driver.getProfile() : "nullProfile";
synchronized (drivers) {
    final HashMap<String,InstalledDriver> driversInProfile;
    if (drivers.get(profile) == null) {
      driversInProfile=new HashMap<String,InstalledDriver>();
    }
 else {
      driversInProfile=drivers.get(profile);
    }
    driversInProfile.put(driver.getDriverName(),driver);
    drivers.put(profile,driversInProfile);
  }
}
