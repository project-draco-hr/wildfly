{
  Set<InstalledDriver> installedDrivers=new HashSet<>();
synchronized (drivers) {
    if (profileName != null) {
      if (drivers.get(profileName) != null) {
        installedDrivers.addAll(drivers.get(profileName).values());
      }
    }
 else {
      if (drivers.get(DEFAULT_PROFILE) == null) {
        throw ROOT_LOGGER.noDriverDefinedInDefaultProfile();
      }
    }
    if (drivers.get(DEFAULT_PROFILE) != null) {
      installedDrivers.addAll(drivers.get(DEFAULT_PROFILE).values());
    }
  }
  return Collections.unmodifiableSet(installedDrivers);
}
