{
  List<String> subsystems;
synchronized (subsystemsByModule) {
    subsystems=subsystemsByModule.get(moduleName);
    if (subsystems != null) {
      for (      String subsystem : subsystems) {
        if (rootResource.getChild(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM,subsystem)) != null) {
          throw MESSAGES.removingExtensionWithRegisteredSubsystem(moduleName,subsystem);
        }
      }
      for (      String subsystem : subsystems) {
        profileRegistration.unregisterSubModel(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM,subsystem));
        subsystemDeploymentRegistration.unregisterSubModel(PathElement.pathElement(ModelDescriptionConstants.SUBSYSTEM,subsystem));
      }
      subsystems.remove(moduleName);
    }
  }
}
