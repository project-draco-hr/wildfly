{
synchronized (lock) {
    if (shutdown) {
      return;
    }
    shutdown=true;
    if (state == State.STARTED) {
      log.stoppingProcess(processName);
      stopRequested=true;
      StreamUtils.safeClose(stdin);
      state=State.STOPPING;
    }
 else     if (state == State.STOPPING) {
      return;
    }
 else {
      new Thread(){
        @Override public void run(){
          processController.removeProcess(processName);
        }
      }
.start();
    }
  }
}
