{
  ModelNode addr=operation.require(ModelDescriptionConstants.OP_ADDR);
  PathAddress pathAddress=PathAddress.pathAddress(addr);
  String value=pathAddress.getLastElement().getValue();
  Bundle bundle=null;
  try {
    Long bundleId=Long.parseLong(value);
    bundle=getSystemContext(context).getBundle(bundleId);
  }
 catch (  NumberFormatException ex) {
    bundle=getBundleManager(context).getBundleByLocation(value);
  }
  if (bundle == null)   throw MESSAGES.illegalArgumentCannotObtainBundleResource(value);
  return bundle;
}
