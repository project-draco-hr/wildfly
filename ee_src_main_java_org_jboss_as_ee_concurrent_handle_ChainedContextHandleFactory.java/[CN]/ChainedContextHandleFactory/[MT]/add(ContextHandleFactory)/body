{
  final Comparator<ContextHandleFactory> comparator=new Comparator<ContextHandleFactory>(){
    @Override public int compare(    ContextHandleFactory o1,    ContextHandleFactory o2){
      return o1.getType().compareTo(o2.getType());
    }
  }
;
  SortedSet<ContextHandleFactory> sortedSet=new TreeSet<>(comparator);
  for (  ContextHandleFactory factory : factories) {
    sortedSet.add(factory);
  }
  sortedSet.add(factoryToAdd);
  factories=sortedSet.toArray(new ContextHandleFactory[sortedSet.size()]);
}
