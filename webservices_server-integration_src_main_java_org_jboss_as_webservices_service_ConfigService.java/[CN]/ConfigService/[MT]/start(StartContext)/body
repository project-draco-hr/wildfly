{
  if (client) {
    ClientConfig clientConfig=new ClientConfig();
    clientConfig.setConfigName(configName);
    clientConfig.setPreHandlerChains(new CopyOnWriteArrayList<UnifiedHandlerChainMetaData>(preHandlerChains));
    clientConfig.setPostHandlerChains(new CopyOnWriteArrayList<UnifiedHandlerChainMetaData>(postHandlerChains));
    serverConfig.addClientConfig(clientConfig);
    config=clientConfig;
  }
 else {
    EndpointConfig endpointConfig=new EndpointConfig();
    endpointConfig.setConfigName(configName);
    endpointConfig.setPreHandlerChains(new CopyOnWriteArrayList<UnifiedHandlerChainMetaData>(preHandlerChains));
    endpointConfig.setPostHandlerChains(new CopyOnWriteArrayList<UnifiedHandlerChainMetaData>(postHandlerChains));
    serverConfig.addEndpointConfig(endpointConfig);
    config=endpointConfig;
  }
}
