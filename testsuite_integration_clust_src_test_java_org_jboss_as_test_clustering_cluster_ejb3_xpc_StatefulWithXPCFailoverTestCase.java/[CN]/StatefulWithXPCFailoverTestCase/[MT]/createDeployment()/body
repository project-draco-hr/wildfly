{
  WebArchive war=ShrinkWrap.create(WebArchive.class,"stateful.war");
  war.addPackage(StatefulBean.class.getPackage());
  war.addClasses(EJBDirectory.class,AbstractEJBDirectory.class,LocalEJBDirectory.class);
  war.setWebXML(StatefulBean.class.getPackage(),"web.xml");
  war.addAsResource(new StringAsset(persistence_xml),"META-INF/persistence.xml");
  war.addClasses(ViewChangeListener.class,ViewChangeListenerBean.class,ViewChangeListenerServlet.class);
  war.setManifest(new StringAsset("Manifest-Version: 1.0\nDependencies: org.jboss.msc, org.jboss.as.clustering.common, org.infinispan\n"));
  System.out.println(war.toString(true));
  return war;
}
