{
  HttpSession session=req.getSession(true);
  Stateful bean=(Stateful)session.getAttribute("bean");
  if (bean == null) {
    try {
      bean=(Stateful)new InitialContext().lookup("java:app/stateful/StatefulBean!" + Stateful.class.getName());
    }
 catch (    NamingException e) {
      throw new ServletException(e);
    }
  }
  String command=req.getParameter("command");
  if ("createEmployee".equals(command)) {
    bean.createEmployee("Tom Brady","New England Patriots",1);
    resp.setHeader("employee",bean.getEmployee(1).getName());
  }
 else   if ("getEmployee".equals(command)) {
    Employee employee=bean.getEmployee(1);
    resp.setHeader("employee",employee.getName());
  }
 else   if ("getSecondBeanEmployee".equals(command)) {
    Employee employee=bean.getSecondBeanEmployee(1);
    resp.setHeader("employee",employee.getName());
  }
 else   if ("destroy".equals(command)) {
    bean.destroy();
    resp.setHeader("employee",command);
  }
  resp.getWriter().write("Success");
  session.setAttribute("bean",bean);
}
