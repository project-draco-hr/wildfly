{
  return new Runnable(){
    public void run(){
      final ServerStartBatchBuilder deploymentBatchBuilder=new ServerStartBatchBuilder(container.batchBuilder(),serverStartupListener);
      deploymentBatchBuilder.addListener(serverStartupListener);
      serverStartupListener.startBatch(null);
      final UpdateContext context=new UpdateContext(){
        public BatchBuilder getBatchBuilder(){
          return deploymentBatchBuilder;
        }
        public ServiceContainer getServiceContainer(){
          return container;
        }
      }
;
      for (      AbstractServerModelUpdate<?> update : updates) {
        if (update.isDeploymentUpdate()) {
          update.applyUpdateBootAction(context);
        }
      }
      serverStartupListener.finish();
      try {
        deploymentBatchBuilder.install();
        serverStartupListener.finishBatch();
      }
 catch (      ServiceRegistryException e) {
        throw new RuntimeException(e);
      }
    }
  }
;
}
