{
  return new ServerStartupListener.Callback(){
    public void run(    Map<ServiceName,StartException> serviceFailures,    long elapsedTime,    int totalServices,    int onDemandServices,    int startedServices){
      if (serviceFailures.isEmpty()) {
        log.infof("JBoss AS %s \"%s\" started in %dms. - Services [Total: %d, On-demand: %d. Started: %d]",Version.AS_VERSION,Version.AS_RELEASE_CODENAME,Long.valueOf(elapsedTime),Integer.valueOf(totalServices),Integer.valueOf(onDemandServices),Integer.valueOf(startedServices));
      }
 else {
        final StringBuilder buff=new StringBuilder(String.format("JBoss AS server start failed. Attempted to start %d services in %dms",Integer.valueOf(totalServices),Long.valueOf(elapsedTime)));
        buff.append("\nThe following services failed to start:\n");
        for (        Map.Entry<ServiceName,StartException> entry : serviceFailures.entrySet()) {
          buff.append(String.format("\t%s => %s\n",entry.getKey(),entry.getValue().getMessage()));
        }
        log.error(buff.toString());
      }
    }
  }
;
}
