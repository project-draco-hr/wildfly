{
  if (serverName == null || serverName.length() == 0) {
    throw new IllegalArgumentException("Server name " + serverName + " is invalid; cannot be null or blank");
  }
  this.serverName=serverName;
  this.portOffset=portOffset;
  this.startServices=startServices;
  this.updates=updates;
  final Properties properties=new Properties(System.getProperties());
  properties.setProperty("jboss.server.name",serverName);
  properties.setProperty("jboss.server.deploy.dir",properties.getProperty("jboss.domain.deployment.dir"));
  properties.setProperty("jboss.server.base.dir",properties.getProperty("jboss.domain.servers.dir") + File.separatorChar + serverName);
  providedEnvironment=new ServerEnvironment(properties,System.getenv(),null,ServerEnvironment.LaunchType.DOMAIN);
}
