{
  if (serverName == null || serverName.length() == 0) {
    throw new IllegalArgumentException("Server name \"" + serverName + "\" is invalid; cannot be null or blank");
  }
  if (hostControllerName == null || hostControllerName.length() == 0) {
    throw new IllegalArgumentException("Host Controller name \"" + hostControllerName + "\" is invalid; cannot be null or blank");
  }
  this.serverName=serverName;
  this.portOffset=portOffset;
  this.startServices=startServices;
  this.updates=updates;
  final Properties properties=new Properties(System.getProperties());
  properties.setProperty(ServerEnvironment.SERVER_NAME,serverName);
  properties.setProperty(ServerEnvironment.SERVER_DEPLOY_DIR,properties.getProperty("jboss.domain.deployment.dir"));
  properties.setProperty(ServerEnvironment.SERVER_BASE_DIR,properties.getProperty("jboss.domain.servers.dir") + File.separatorChar + serverName);
  properties.setProperty(ServerEnvironment.CONTROLLER_TEMP_DIR,properties.getProperty("jboss.domain.temp.dir"));
  providedEnvironment=new ServerEnvironment(hostControllerName,properties,System.getenv(),null,ServerEnvironment.LaunchType.DOMAIN,RunningMode.NORMAL);
}
