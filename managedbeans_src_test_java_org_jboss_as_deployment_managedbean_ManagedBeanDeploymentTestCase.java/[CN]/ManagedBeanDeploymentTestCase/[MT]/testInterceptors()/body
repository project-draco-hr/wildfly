{
  final VirtualFile deploymentRoot=initializeDeployment("/test/managedBeanDeployment.jar");
  final String expectedDeploymentName=getDeploymentName(deploymentRoot);
  final LinkRef moduleLink=new LinkRef("java:global/" + expectedDeploymentName);
  javaContext.rebind("module",moduleLink);
  executeDeployment(deploymentRoot);
  final ServiceController<?> testServiceController=serviceContainer.getService(ManagedBeanService.SERVICE_NAME.append(expectedDeploymentName,"TestBeanWithInjection"));
  assertNotNull(testServiceController);
  final ManagedBeanContainer<TestManagedBeanWithInjection> managedBeanContainer=(ManagedBeanContainer<TestManagedBeanWithInjection>)testServiceController.getValue();
  final TestManagedBeanWithInjection testManagedBean=managedBeanContainer.createInstance();
  assertNotNull(testManagedBean);
  TestInterceptor.invoked=false;
  TestManagedBeanWithInjection.invoked=false;
  assertNotNull(testManagedBean.getOther());
  assertTrue(TestInterceptor.invoked);
  assertTrue(TestManagedBeanWithInjection.invoked);
}
