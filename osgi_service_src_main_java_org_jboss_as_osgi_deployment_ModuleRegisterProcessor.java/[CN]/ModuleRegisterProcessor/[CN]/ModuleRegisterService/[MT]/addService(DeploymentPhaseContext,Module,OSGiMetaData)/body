{
  final ModuleRegisterService service=new ModuleRegisterService(module,metadata);
  final ServiceName serviceName=getServiceName(module.getIdentifier());
  final ServiceTarget serviceTarget=phaseContext.getServiceTarget();
  ServiceBuilder<ModuleRegisterService> builder=serviceTarget.addService(serviceName,service);
  builder.addDependency(Services.ENVIRONMENT,XEnvironment.class,service.injectedEnvironment);
  builder.addDependency(Services.SYSTEM_CONTEXT,BundleContext.class,service.injectedSystemContext);
  builder.addDependency(ServiceModuleLoader.moduleServiceName(module.getIdentifier()));
  builder.install();
}
