{
  final String defaultHost=this.defaultHost != null ? this.defaultHost : "localhost";
  final WebServerService service=new WebServerService(defaultHost);
  context.getBatchBuilder().addService(WebSubsystemElement.JBOSS_WEB,service).addDependency(AbstractPathService.pathNameOf(BASE_DIR),String.class,service.getPathInjector()).addOptionalDependency(ServiceName.JBOSS.append("mbean","server"),MBeanServer.class,service.getMbeanServer()).addListener(new UpdateResultHandler.ServiceStartListener<P>(resultHandler,param)).setInitialMode(Mode.ON_DEMAND);
  WebDeploymentActivator.activate(defaultHost,new SharedWebMetaDataBuilder(config),context.getBatchBuilder());
}
