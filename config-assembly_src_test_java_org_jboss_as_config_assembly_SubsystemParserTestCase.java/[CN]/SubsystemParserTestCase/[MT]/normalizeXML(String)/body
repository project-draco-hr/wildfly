{
  xml=xml.replaceAll("\\s*<","<");
  xml=xml.replaceAll(">\\s*",">");
  DOMImplementationRegistry registry=DOMImplementationRegistry.newInstance();
  DOMImplementationLS domLS=(DOMImplementationLS)registry.getDOMImplementation("LS");
  LSParser lsParser=domLS.createLSParser(DOMImplementationLS.MODE_SYNCHRONOUS,null);
  LSInput input=domLS.createLSInput();
  input.setStringData(xml);
  Document document=lsParser.parse(input);
  LSSerializer lsSerializer=domLS.createLSSerializer();
  lsSerializer.getDomConfig().setParameter("comments",Boolean.TRUE);
  lsSerializer.getDomConfig().setParameter("format-pretty-print",Boolean.TRUE);
  return lsSerializer.writeToString(document);
}
