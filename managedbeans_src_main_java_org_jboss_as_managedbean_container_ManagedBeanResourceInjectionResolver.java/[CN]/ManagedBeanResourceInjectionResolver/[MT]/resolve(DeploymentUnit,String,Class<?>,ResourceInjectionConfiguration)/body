{
  final JndiName managedBeanContextJndiName=ContextNames.MODULE_CONTEXT_NAME.append("env").append(beanName);
  final JndiName localContextName=managedBeanContextJndiName.append(configuration.getLocalContextName());
  final NamingLookupValue<Object> lookupValue=new NamingLookupValue<Object>(localContextName);
  final ResourceInjection injection=ResourceInjection.Factory.create(configuration,beanClass,lookupValue);
  final NamingContextConfig moduleContext=deploymentUnit.getAttachment(org.jboss.as.ee.naming.Attachments.MODULE_CONTEXT_CONFIG);
  final ServiceName managedBeanContextServiceName=moduleContext.getContextServiceName().append("env").append(beanName);
  final String targetName=configuration.getTargetContextName();
  if (targetName == null) {
    throw new IllegalArgumentException("Resource configuration does not have target JNDI name");
  }
  final JndiName targetLookupName=targetName.startsWith("java") ? JndiName.of(targetName) : ContextNames.MODULE_CONTEXT_NAME.append(targetName);
  final List<ResolverDependency<?>> dependencies=new ArrayList<ResolverDependency<?>>();
  dependencies.add(new ResolverDependency<Context>(){
    public ServiceName getServiceName(){
      return managedBeanContextServiceName;
    }
    public Injector<Context> getInjector(){
      return lookupValue.getContextInjector();
    }
    public Class<Context> getInjectorType(){
      return Context.class;
    }
  }
);
  return new ResolverResult(){
    public ResourceInjection getInjection(){
      return injection;
    }
    public ServiceName getBindContextName(){
      return managedBeanContextServiceName;
    }
    public String getBindName(){
      return localContextName.getLocalName();
    }
    public String getBindTargetName(){
      return targetLookupName.getAbsoluteName();
    }
    public List<ResolverDependency<?>> getDependencies(){
      return dependencies;
    }
    public boolean shouldBind(){
      return injection != null;
    }
  }
;
}
