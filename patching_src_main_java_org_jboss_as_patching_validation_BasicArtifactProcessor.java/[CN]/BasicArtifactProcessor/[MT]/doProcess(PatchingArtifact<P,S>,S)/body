{
  final PatchingArtifactStateHandler<S> handler=getHandlerForArtifact(artifact);
  if (!state.isValid(getValidationContext())) {
    return false;
  }
  boolean valid=true;
  for (  final PatchingArtifact<S,? extends PatchingArtifact.ArtifactState> child : artifact.getArtifacts()) {
    if (!child.process(state,this)) {
      valid=false;
    }
  }
  if (valid && handler != null) {
    handler.handleValidatedState(state);
  }
  return valid;
}
