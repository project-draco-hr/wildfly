{
  boolean removed=false;
  if (loaded) {
    Set value=getLoadedValue(ctx);
    if (!value.isEmpty()) {
      removed=value.remove(relatedId);
    }
  }
 else {
    loadOnlyFromCache(ctx);
    if (loaded) {
      Set value=getLoadedValue(ctx);
      if (!value.isEmpty()) {
        removed=value.remove(relatedId);
      }
    }
 else {
      removed=removeWhileNotLoaded(relatedId);
    }
  }
  modified=true;
  if (removed) {
    ((PersistentContext)ctx.getPersistenceContext()).setDirtyRelations();
  }
  return removed;
}
