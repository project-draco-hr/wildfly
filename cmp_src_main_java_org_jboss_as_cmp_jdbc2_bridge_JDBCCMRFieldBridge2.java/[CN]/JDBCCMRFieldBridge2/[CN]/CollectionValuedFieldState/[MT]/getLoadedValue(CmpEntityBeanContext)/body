{
  if (!loaded) {
    loadOnlyFromCache(ctx);
    if (!loaded) {
      if (value == null || value == Collections.EMPTY_SET) {
        value=new HashSet();
      }
      loader.load(ctx,this);
      cacheValue(ctx);
      loaded=true;
    }
    if (addedWhileNotLoaded != null) {
      value.addAll(addedWhileNotLoaded);
      addedWhileNotLoaded=null;
    }
    if (removedWhileNotLoaded != null) {
      value.removeAll(removedWhileNotLoaded);
      removedWhileNotLoaded=null;
    }
  }
  return value;
}
