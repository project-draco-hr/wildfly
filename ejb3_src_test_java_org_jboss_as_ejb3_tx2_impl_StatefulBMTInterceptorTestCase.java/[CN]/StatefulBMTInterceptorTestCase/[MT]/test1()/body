{
  final String componentName="Test";
  StatefulBMTInterceptor interceptor=new StatefulBMTInterceptor(){
    @Override protected String getComponentName(){
      return componentName;
    }
    @Override protected TransactionManager getTransactionManager(){
      return transactionManager;
    }
  }
;
  TransactionalInvocationContext invocation=mock(TransactionalInvocationContext.class);
  when(invocation.proceed()).thenAnswer(new Answer<Object>(){
    @Override public Object answer(    InvocationOnMock invocation) throws Throwable {
      transactionManager.begin();
      return transactionManager.getTransaction();
    }
  }
);
  Transaction expected=(Transaction)interceptor.invoke(invocation);
  assertNotNull(expected);
  assertSame(expected,interceptor.getTransaction());
}
