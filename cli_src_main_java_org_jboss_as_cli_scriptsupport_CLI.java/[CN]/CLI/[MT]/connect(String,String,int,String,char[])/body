{
  checkAlreadyConnected();
  try {
    ctx=CommandContextFactory.getInstance().newCommandContext(new URI(protocol,null,controllerHost,controllerPort,null,null,null).toString(),username,password);
    ctx.connectController();
  }
 catch (  URISyntaxException e) {
    throw new IllegalStateException("Unable to construct URI.",e);
  }
catch (  CliInitializationException e) {
    throw new IllegalStateException("Unable to initialize command context.",e);
  }
catch (  CommandLineException e) {
    throw new IllegalStateException("Unable to connect to controller.",e);
  }
}
