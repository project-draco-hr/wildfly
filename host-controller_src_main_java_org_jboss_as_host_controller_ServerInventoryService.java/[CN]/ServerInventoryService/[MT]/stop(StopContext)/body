{
  final boolean shutdownServers=runningModeControl.getRestartMode() == RestartMode.SERVERS;
  if (shutdownServers) {
    context.asynchronous();
    Runnable r=new Runnable(){
      @Override public void run(){
        try {
          serverInventory.shutdown(true,-1,true);
          serverInventory=null;
        }
  finally {
          serverCallback.getValue().setCallbackHandler(null);
          context.complete();
        }
      }
    }
;
    executorService.getValue().execute(r);
  }
 else {
    serverInventory.shutdown(false,-1,true);
    serverInventory=null;
  }
}
