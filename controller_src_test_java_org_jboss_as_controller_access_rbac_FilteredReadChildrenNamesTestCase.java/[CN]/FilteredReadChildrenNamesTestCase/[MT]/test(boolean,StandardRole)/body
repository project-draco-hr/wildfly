{
  ModelNode operation=Util.createOperation(READ_CHILDREN_NAMES_OPERATION,EMPTY_ADDRESS);
  operation.get(CHILD_TYPE).set(UNCONSTRAINED_RESOURCE);
  ModelNode result=executeWithRoles(operation,roles);
  assertEquals(SUCCESS,result.get(OUTCOME).asString());
  assertTrue(has(FOO,result.get(RESULT)));
  assertTrue(has(BAR,result.get(RESULT)));
  operation.get(CHILD_TYPE).set(SENSITIVE_CONSTRAINED_RESOURCE);
  result=executeWithRoles(operation,roles);
  assertEquals(sensitiveResourceVisible,has(FOO,result.get(RESULT)));
  assertEquals(sensitiveResourceVisible,has(BAR,result.get(RESULT)));
  assertEquals(!sensitiveResourceVisible,result.get(RESPONSE_HEADERS,ACCESS_CONTROL).get(0).get("filtered-children-types").get(0).asString().equals(SENSITIVE_CONSTRAINED_RESOURCE));
}
