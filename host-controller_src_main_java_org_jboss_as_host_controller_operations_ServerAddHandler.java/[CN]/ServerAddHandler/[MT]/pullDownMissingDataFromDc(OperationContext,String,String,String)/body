{
  context.addStep(new OperationStepHandler(){
    public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      final MasterDomainControllerClient masterDomainControllerClient=(MasterDomainControllerClient)context.getServiceRegistry(false).getRequiredService(MasterDomainControllerClient.SERVICE_NAME).getValue();
      masterDomainControllerClient.pullDownDataForUpdatedServerConfigAndApplyToModel(context,serverName,serverGroupName,socketBindingGroupName);
      context.addStep(new OperationStepHandler(){
        public void execute(        OperationContext context,        ModelNode operation) throws OperationFailedException {
          final Resource root=context.readResourceFromRoot(PathAddress.EMPTY_ADDRESS,false);
          if (!root.hasChild(PathElement.pathElement(SERVER_GROUP,serverGroupName))) {
            throw HostControllerLogger.ROOT_LOGGER.noServerGroupCalled(serverGroupName);
          }
          if (socketBindingGroupName != null) {
            if (!root.hasChild(PathElement.pathElement(SOCKET_BINDING_GROUP,socketBindingGroupName))) {
              throw HostControllerLogger.ROOT_LOGGER.noSocketBindingGroupCalled(socketBindingGroupName);
            }
          }
          context.stepCompleted();
        }
      }
,Stage.MODEL);
      context.stepCompleted();
    }
  }
,Stage.MODEL);
}
