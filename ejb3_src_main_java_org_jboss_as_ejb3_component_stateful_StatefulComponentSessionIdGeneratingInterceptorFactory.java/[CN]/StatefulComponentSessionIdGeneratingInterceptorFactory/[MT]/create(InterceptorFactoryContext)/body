{
  AtomicReference<Serializable> sessionIdReference=new AtomicReference<Serializable>();
  context.getContextData().put(this.sessionIdContextKey,sessionIdReference);
  final Serializable id=(Serializable)context.getContextData().get(StatefulSessionComponent.SESSION_ATTACH_KEY);
  if (id == null) {
    return new StatefulComponentSessionIdGeneratingInterceptor(sessionIdReference);
  }
 else {
    sessionIdReference.set(id);
    return Interceptors.getTerminalInterceptor();
  }
}
