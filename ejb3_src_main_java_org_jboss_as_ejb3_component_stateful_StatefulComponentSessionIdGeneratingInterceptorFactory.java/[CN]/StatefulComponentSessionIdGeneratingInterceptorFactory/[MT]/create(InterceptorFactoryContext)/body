{
  final AtomicReference<byte[]> sessionIdReference=new AtomicReference<byte[]>();
  context.getContextData().put(StatefulSessionComponent.SESSION_ID_REFERENCE_KEY,sessionIdReference);
  final byte[] id=(byte[])context.getContextData().get(StatefulSessionComponent.SESSION_ATTACH_KEY);
  if (id == null) {
    return new StatefulComponentSessionIdGeneratingInterceptor(sessionIdReference);
  }
 else {
    sessionIdReference.set(id);
    return Interceptors.getTerminalInterceptor();
  }
}
