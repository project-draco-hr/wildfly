{
  if (serverConfiguration == null)   throw new IllegalArgumentException("serverConfiguration is null");
  if (serviceContainer == null)   throw new IllegalArgumentException("serviceContainer is null");
  this.serverConfiguration=serverConfiguration;
  this.serviceContainer=serviceContainer;
  this.contentDistributor=new DeploymentContentDistributor(){
    @Override public byte[] distributeDeploymentContent(    String name,    String runtimeName,    InputStream stream) throws IOException, DuplicateDeploymentNameException {
      if (ServerDeploymentManagerImpl.this.serverConfiguration.getDeployment(name) != null) {
        throw new DuplicateDeploymentNameException(name,false);
      }
      return getDeploymentRepository().addDeploymentContent(name,runtimeName,stream);
    }
    @Override public byte[] distributeReplacementDeploymentContent(    String name,    String runtimeName,    InputStream stream) throws IOException {
      return getDeploymentRepository().addDeploymentContent(name,runtimeName,stream);
    }
  }
;
}
