{
  if (found.add(prop.getName())) {
    throw new OperationFailedException(new ModelNode().set(String.format("Invalid rollout plan. Server group %s appears more than once in the plan.",prop.getName())));
  }
  ModelNode plan=prop.getValue();
  if (plan.hasDefined(MAX_FAILURE_PERCENTAGE)) {
    if (plan.has(MAX_FAILED_SERVERS)) {
      plan.remove(MAX_FAILED_SERVERS);
    }
    int max=plan.get(MAX_FAILURE_PERCENTAGE).asInt();
    if (max < 0 || max > 100) {
      throw new OperationFailedException(new ModelNode().set(String.format("Invalid rollout plan. Server group %s has a %s value of %s; must be between 0 and 100.",prop.getName(),MAX_FAILURE_PERCENTAGE,max)));
    }
  }
  if (plan.hasDefined(MAX_FAILED_SERVERS)) {
    int max=plan.get(MAX_FAILED_SERVERS).asInt();
    if (max < 0) {
      throw new OperationFailedException(new ModelNode().set(String.format("Invalid rollout plan. Server group %s has a %s value of %s; cannot be less than 0.",prop.getName(),MAX_FAILED_SERVERS,max)));
    }
  }
}
