{
  Map<ServerIdentity,ServerStatus> result=new HashMap<ServerIdentity,ServerStatus>();
  Map<String,Future<Map<ServerIdentity,ServerStatus>>> futures=new HashMap<String,Future<Map<ServerIdentity,ServerStatus>>>();
  for (  Map.Entry<String,ServerManagerClient> entry : clients.entrySet()) {
    final ServerManagerClient client=entry.getValue();
    Callable<Map<ServerIdentity,ServerStatus>> callable=new Callable<Map<ServerIdentity,ServerStatus>>(){
      @Override public Map<ServerIdentity,ServerStatus> call(){
        return client.getServerStatuses();
      }
    }
;
    futures.put(entry.getKey(),scheduledExecutorService.getValue().submit(callable));
  }
  for (  Map.Entry<String,Future<Map<ServerIdentity,ServerStatus>>> entry : futures.entrySet()) {
    try {
      Map<ServerIdentity,ServerStatus> map=entry.getValue().get();
      if (map != null) {
        result.putAll(map);
      }
    }
 catch (    InterruptedException e) {
      log.errorf("Interrupted while reading server statuses from server manager %s -- aborting",entry.getKey());
      Thread.currentThread().interrupt();
      break;
    }
catch (    ExecutionException e) {
      log.errorf(e,"Caught exception while reading server statuses from server manager %s -- ignoring that server manager",entry.getKey());
    }
  }
  return result;
}
