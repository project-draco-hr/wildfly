{
  try {
    final InputStream reader=configPersister.getConfigurationInputStream();
    final List<AbstractDomainModelUpdate<?>> domainUpdates=new ArrayList<AbstractDomainModelUpdate<?>>();
    mapper.parseDocument(domainUpdates,XMLInputFactory.newInstance().createXMLStreamReader(new BufferedInputStream(reader)));
    final DomainModel domainModel=new DomainModel();
    for (    final AbstractDomainModelUpdate<?> update : domainUpdates) {
      domainModel.update(update);
    }
    return domainModel;
  }
 catch (  final RuntimeException e) {
    throw e;
  }
catch (  final Exception e) {
    throw new RuntimeException("Caught exception during processing of domain.xml",e);
  }
}
