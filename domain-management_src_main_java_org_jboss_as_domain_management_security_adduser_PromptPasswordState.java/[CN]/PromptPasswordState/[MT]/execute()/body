{
  if (stateValues.isSilentOrNonInteractive() == false) {
    if (rePrompt == false) {
      if (!RestrictionLevel.RELAX.equals(stateValues.getOptions().getCheckUtil().getRestrictionLevel())) {
        final List<PasswordRestriction> passwordRestrictions=stateValues.getOptions().getCheckUtil().getPasswordRestrictions(stateValues.getUserName());
        theConsole.printf(DomainManagementMessages.MESSAGES.passwordRequirements());
        theConsole.printf(NEW_LINE);
        for (        PasswordRestriction passwordRestriction : passwordRestrictions) {
          final String message=passwordRestriction.getMessage();
          if (message != null && !message.isEmpty()) {
            theConsole.printf(message);
            theConsole.printf(NEW_LINE);
          }
        }
      }
      theConsole.printf(MESSAGES.passwordPrompt());
      char[] tempChar=theConsole.readPassword(" : ");
      if (tempChar == null || tempChar.length == 0) {
        return new ErrorState(theConsole,MESSAGES.noPasswordExiting());
      }
      stateValues.setPassword(new String(tempChar));
      return new ValidatePasswordState(theConsole,stateValues);
    }
 else {
      theConsole.printf(MESSAGES.passwordConfirmationPrompt());
      char[] secondTempChar=theConsole.readPassword(" : ");
      if (secondTempChar == null) {
        secondTempChar=new char[0];
      }
      if (Arrays.equals(stateValues.getPassword().toCharArray(),secondTempChar) == false) {
        return new ErrorState(theConsole,MESSAGES.passwordMisMatch(),new PromptPasswordState(theConsole,stateValues,false));
      }
      return stateValues.groupPropertiesFound() ? new PromptGroupsState(theConsole,stateValues) : new PreModificationState(theConsole,stateValues);
    }
  }
  return new ValidatePasswordState(theConsole,stateValues);
}
