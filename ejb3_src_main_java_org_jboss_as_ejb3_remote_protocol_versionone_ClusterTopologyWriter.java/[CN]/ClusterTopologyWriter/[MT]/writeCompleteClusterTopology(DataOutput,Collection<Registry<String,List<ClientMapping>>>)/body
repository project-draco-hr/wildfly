{
  if (output == null) {
    throw new IllegalArgumentException("Cannot write to null dataoutput");
  }
  if (clientMappingsRegistries == null || clientMappingsRegistries.isEmpty()) {
    return;
  }
  output.write(HEADER_COMPLETE_CLUSTER_TOPOLOGY);
  PackedInteger.writePackedInteger(output,clientMappingsRegistries.size());
  for (  final Registry<String,List<ClientMapping>> registry : clientMappingsRegistries) {
    output.writeUTF(registry.getName());
    this.writeClusterNodes(output,registry.getName(),registry.getEntries());
  }
}
