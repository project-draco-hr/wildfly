{
  final String jbossHome=System.getProperty("jboss.home",System.getenv("JBOSS_HOME"));
  final String modulePath=System.getProperty("module.path",System.getenv("JAVA_MODULEPATH"));
  final File root=jbossHome == null ? new File(".") : new File(jbossHome);
  final File[] files=modulePath == null ? new File[0] : getFiles(modulePath,0,0);
  try {
    return PatchModulePathFactory.load(root,files);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
