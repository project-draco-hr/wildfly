{
  DeploymentUnit depUnit=phaseContext.getDeploymentUnit();
  Deployment deployment=depUnit.getAttachment(OSGiConstants.DEPLOYMENT_KEY);
  XBundle bundle=depUnit.getAttachment(OSGiConstants.INSTALLED_BUNDLE_KEY);
  if (bundle != null && deployment.isAutoStart() && bundle.isResolved()) {
    try {
      int options=Bundle.START_ACTIVATION_POLICY;
      if (deploymentTracker.hasDeploymentName(depUnit.getName()) == false) {
        options|=Bundle.START_TRANSIENT;
      }
      bundle.start(options);
      depUnit.putAttachment(Attachments.BUNDLE_STATE_KEY,BundleState.ACTIVE);
    }
 catch (    BundleException ex) {
      LOGGER.errorCannotStartBundle(ex,bundle);
    }
  }
}
