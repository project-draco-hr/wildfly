{
  final List<File> path=new ArrayList<File>();
  for (  final String patch : patches) {
    path.add(environment.getBundlesPatchDirectory(patch));
  }
  if (!BASE.equals(cumulativeId)) {
    path.add(environment.getBundlesPatchDirectory(cumulativeId));
  }
  final String bundleDir=System.getProperty(BUNDLES_DIR);
  if (bundleDir == null) {
    path.add(environment.getInstalledImage().getBundlesDir());
  }
 else {
    path.add(new File(bundleDir));
  }
  return path.toArray(new File[path.size()]);
}
