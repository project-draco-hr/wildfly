{
  final ModuleRegisterService service=new ModuleRegisterService(module,metadata);
  final ServiceName serviceName=getServiceName(module.getIdentifier());
  final ServiceTarget serviceTarget=phaseContext.getServiceTarget();
  ServiceBuilder<ModuleRegisterService> builder=serviceTarget.addService(serviceName,service);
  builder.addDependency(Services.BUNDLE_MANAGER,BundleManagerService.class,service.injectedBundleManager);
  builder.addDependency(ServiceModuleLoader.moduleServiceName(module.getIdentifier()));
  builder.addDependency(Services.FRAMEWORK_ACTIVATOR);
  builder.install();
}
