{
  final InitialContext ctx=getRemoteContext();
  final ClassLoader current=Thread.currentThread().getContextClassLoader();
  try {
    Thread.currentThread().setContextClassLoader(Remote.class.getClassLoader());
    Remote remote=(Remote)ctx.lookup(ARCHIVE_NAME + "/" + Bean.class.getSimpleName()+ "!"+ Remote.class.getName());
    assertNotNull(remote);
    assertEquals("Echo: test",remote.echo("test"));
    remote=(Remote)ctx.lookup(ARCHIVE_NAME + "/" + Singleton.class.getSimpleName()+ "!"+ Remote.class.getName());
    assertNotNull(remote);
    assertEquals("Echo: test",remote.echo("test"));
    remote=(Remote)ctx.lookup(ARCHIVE_NAME + "/" + StatefulBean.class.getSimpleName()+ "!"+ Remote.class.getName());
    assertNotNull(remote);
    assertEquals("Echo: test",remote.echo("test"));
  }
  finally {
    ctx.close();
    Thread.currentThread().setContextClassLoader(current);
  }
}
