{
  final AnnotationValue lookupAnnotation=annotation.value("lookup");
  String lookup=lookupAnnotation == null ? null : lookupAnnotation.asString();
  if (isEmpty(lookup) && FIXED_LOCATIONS.containsKey(injectionType)) {
    lookup=FIXED_LOCATIONS.get(injectionType);
  }
  InjectionSource valueSource=null;
  final boolean isEnvEntryType=this.isEnvEntryType(injectionType);
  if (!isEmpty(lookup)) {
    valueSource=new LookupInjectionSource(lookup);
  }
 else   if (isEnvEntryType) {
  }
 else   if (KNOWN_EXTERNAL_RESOURCE_TYPES.contains(injectionType)) {
    logger.debug("Processing of @Resource of type: " + injectionType + " for ENC name: "+ localContextName+ " is being skipped and will be processed separately by a different deployment unit processor");
    return;
  }
 else {
    throw new DeploymentUnitProcessingException("Can't handle @Resource for ENC name: " + localContextName + " since it's missing a lookup value and isn't of any known type");
  }
  final InjectionSource injectionSource=new LookupInjectionSource(localContextName,isEnvEntryType);
  final ResourceInjectionConfiguration injectionConfiguration=targetDescription != null ? new ResourceInjectionConfiguration(targetDescription,injectionSource) : null;
  final BindingConfiguration bindingConfiguration;
  if (isEnvEntryType) {
    bindingConfiguration=null;
  }
 else {
    bindingConfiguration=new BindingConfiguration(localContextName,valueSource);
  }
  classDescription.getConfigurators().add(new ClassConfigurator(){
    public void configure(    final DeploymentPhaseContext context,    final EEModuleClassDescription description,    final EEModuleClassConfiguration configuration) throws DeploymentUnitProcessingException {
      if (bindingConfiguration != null) {
        configuration.getBindingConfigurations().add(bindingConfiguration);
      }
      if (injectionConfiguration != null) {
        configuration.getInjectionConfigurations().add(injectionConfiguration);
      }
    }
  }
);
}
