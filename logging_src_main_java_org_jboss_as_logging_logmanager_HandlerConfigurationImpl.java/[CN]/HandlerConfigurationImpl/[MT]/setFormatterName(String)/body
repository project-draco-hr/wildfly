{
  final String oldFormatterName=this.formatterName;
  this.formatterName=formatterName;
  final LogContextConfigurationImpl configuration=getConfiguration();
  configuration.addAction(new ConfigAction<Void>(){
    public Void validate() throws IllegalArgumentException {
      if (formatterName != null && configuration.getFormatterConfiguration(formatterName) == null) {
        throw LoggingMessages.MESSAGES.formatterNotFound(formatterName);
      }
      return null;
    }
    public void applyPreCreate(    final Void param){
    }
    public void applyPostCreate(    final Void param){
      configuration.getHandlerRefs().get(getName()).setFormatter(formatterName == null ? null : configuration.getFormatterRefs().get(formatterName));
    }
    public void rollback(){
      HandlerConfigurationImpl.this.formatterName=oldFormatterName;
    }
  }
);
}
