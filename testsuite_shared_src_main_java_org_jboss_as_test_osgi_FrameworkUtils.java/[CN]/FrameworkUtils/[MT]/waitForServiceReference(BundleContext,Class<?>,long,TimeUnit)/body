{
  ServiceTracker tracker=new ServiceTracker(context,clazz.getName(),null);
  tracker.open();
  ServiceReference sref=null;
  try {
    tracker.waitForService(unit.toMillis(timeout));
    sref=tracker.getServiceReference();
  }
 catch (  InterruptedException intEx) {
  }
  tracker.close();
  Assert.assertNotNull("Service registered: " + clazz.getName(),sref);
  return sref;
}
