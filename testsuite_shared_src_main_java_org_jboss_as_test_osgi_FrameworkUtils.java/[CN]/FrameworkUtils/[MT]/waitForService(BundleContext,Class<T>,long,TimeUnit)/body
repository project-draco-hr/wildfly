{
  ServiceTracker tracker=new ServiceTracker(context,clazz.getName(),null);
  tracker.open();
  T service=null;
  long start=System.currentTimeMillis();
  do {
    try {
      service=(T)tracker.waitForService(unit.toMillis(timeout));
    }
 catch (    InterruptedException intEx) {
    }
  }
 while (System.currentTimeMillis() - start < unit.toMillis(timeout));
  tracker.close();
  Assert.assertNotNull("Service registered: " + clazz.getName(),service);
  return service;
}
