{
  byte[] bytes=this.bytes;
  if (bytes != null)   return bytes;
  if (this.object == null)   return null;
  ByteArrayOutputStream output=new ByteArrayOutputStream();
  Marshaller marshaller=this.context.createMarshaller();
  ContextClassLoaderSwitcher.SwitchContext switchContext=switcher.getSwitchContext(context.getClassLoader());
  try {
    marshaller.start(Marshalling.createByteOutput(output));
    marshaller.writeObject(this.object);
    marshaller.finish();
    return output.toByteArray();
  }
  finally {
    switchContext.reset();
    marshaller.close();
  }
}
