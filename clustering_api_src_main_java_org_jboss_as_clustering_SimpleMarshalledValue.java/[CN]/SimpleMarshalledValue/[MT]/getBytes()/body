{
  byte[] bytes=this.bytes;
  if (bytes != null)   return bytes;
  if (this.object == null)   return null;
  ByteArrayOutputStream output=new ByteArrayOutputStream();
  Marshaller marshaller=this.context.createMarshaller();
  try {
    marshaller.start(Marshalling.createByteOutput(output));
    ClassLoader currentLoader=null;
    ClassLoader contextLoader=context.getContextClassLoader();
    if (contextLoader != null) {
      currentLoader=getCurrentThreadContextClassLoader();
      setCurrentThreadContextClassLoader(contextLoader);
    }
    try {
      marshaller.writeObject(this.object);
    }
  finally {
      if (contextLoader != null) {
        setCurrentThreadContextClassLoader(currentLoader);
      }
    }
    marshaller.finish();
    return output.toByteArray();
  }
  finally {
    marshaller.close();
  }
}
