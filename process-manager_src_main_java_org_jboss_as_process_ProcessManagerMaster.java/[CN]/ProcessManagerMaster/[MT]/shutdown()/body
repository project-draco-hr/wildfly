{
  boolean isShutdown=shutdown.getAndSet(true);
  if (isShutdown)   return;
  log.info("Initiating shutdown of ProcessManager");
  ManagedProcess serverManager=null;
synchronized (processes) {
    serverManager=processes.get(SERVER_MANAGER_PROCESS_NAME);
  }
  if (serverManager != null) {
    try {
      log.info("Stopping ServerManager");
      serverManager.stop();
    }
 catch (    IOException e) {
      log.error("Error sending SHUTDOWN to ServerManager");
    }
  }
synchronized (processes) {
    for (    ManagedProcess proc : processes.values()) {
      try {
        log.info("Stopping " + proc.getProcessName());
        proc.stop();
      }
 catch (      IOException e) {
        log.error("Error sending SHUTDOWN to " + proc.getProcessName());
      }
    }
    processes.clear();
  }
  socketListener.shutdown();
  log.info("Shutdown ProcessManager");
}
