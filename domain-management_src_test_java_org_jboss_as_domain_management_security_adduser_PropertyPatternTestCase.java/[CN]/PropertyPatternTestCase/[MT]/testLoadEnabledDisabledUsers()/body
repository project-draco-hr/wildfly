{
  File usersPropertyFile=File.createTempFile("User",null);
  usersPropertyFile.deleteOnExit();
  List<String> content=Arrays.asList("#Guillaume.Grossetie=abc123","Aldo.Raine@Inglorious-Basterds.com=def456","# Comment","","#","#Omar.Ulmer=ghi789");
  PrintWriter writer=new PrintWriter(usersPropertyFile,"UTF-8");
  try {
    for (    String line : content) {
      writer.println(line);
    }
  }
  finally {
    writer.close();
  }
  UserPropertiesFileLoader propertiesLoad=new UserPropertiesFileLoader(usersPropertyFile.getAbsolutePath());
  propertiesLoad.start(null);
  assertEquals(1,propertiesLoad.getEnabledUserNames().size());
  assertEquals(2,propertiesLoad.getDisabledUserNames().size());
  assertEquals(3,propertiesLoad.getUserNames().size());
  assertTrue(propertiesLoad.getEnabledUserNames().contains("Aldo.Raine@Inglorious-Basterds.com"));
  assertTrue(propertiesLoad.getDisabledUserNames().contains("Guillaume.Grossetie"));
  propertiesLoad.stop(null);
}
