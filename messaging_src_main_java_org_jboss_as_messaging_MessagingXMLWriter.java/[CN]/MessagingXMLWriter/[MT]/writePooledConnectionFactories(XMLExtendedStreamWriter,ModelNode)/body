{
  if (!node.isDefined() || node.keys().size() == 0) {
    return;
  }
  List<Property> properties=node.asPropertyList();
  if (!properties.isEmpty()) {
    for (    Property prop : properties) {
      final String name=prop.getName();
      final ModelNode factory=prop.getValue();
      if (factory.isDefined()) {
        writer.writeStartElement(Element.POOLED_CONNECTION_FACTORY.getLocalName());
        writer.writeAttribute(Attribute.NAME.getLocalName(),name);
        if (factory.hasDefined(INBOUND_CONFIG)) {
          final ModelNode inboundConfigs=factory.get(INBOUND_CONFIG);
          if (inboundConfigs.getType() == ModelType.LIST) {
            writer.writeStartElement(Element.INBOUND_CONFIG.getLocalName());
            for (            ModelNode config : inboundConfigs.asList()) {
              if (config.isDefined()) {
                for (                ConnectionFactoryAttribute attribute : PooledConnectionFactoryDefinition.ATTRIBUTES) {
                  if (attribute.isInboundConfig()) {
                    attribute.getDefinition().marshallAsElement(factory,writer);
                  }
                }
              }
            }
            writer.writeEndElement();
          }
        }
        for (        ConnectionFactoryAttribute attribute : PooledConnectionFactoryDefinition.ATTRIBUTES) {
          if (!attribute.isInboundConfig()) {
            attribute.getDefinition().marshallAsElement(factory,writer);
          }
        }
        writer.writeEndElement();
      }
    }
  }
}
