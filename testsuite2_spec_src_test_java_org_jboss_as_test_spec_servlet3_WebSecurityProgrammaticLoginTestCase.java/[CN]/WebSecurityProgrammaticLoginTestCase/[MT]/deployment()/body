{
  ClassLoader tccl=Thread.currentThread().getContextClassLoader();
  URL webxml=tccl.getResource("web-secure-programmatic-login.war/web.xml");
  WebArchive war=ShrinkWrap.create(WebArchive.class,"web-secure-programmatic-login.war");
  war.addAsResource(tccl.getResource("security/users.properties"),"users.properties");
  war.addAsResource(tccl.getResource("security/roles.properties"),"roles.properties");
  war.addAsManifestResource(tccl.getResource("web-secure-programmatic-login.war/MANIFEST.MF"),"MANIFEST.MF");
  war.addClass(LoginServlet.class);
  war.addClass(SecuredServlet.class);
  if (webxml != null) {
    war.setWebXML(webxml);
  }
  printWar(war);
  return war;
}
