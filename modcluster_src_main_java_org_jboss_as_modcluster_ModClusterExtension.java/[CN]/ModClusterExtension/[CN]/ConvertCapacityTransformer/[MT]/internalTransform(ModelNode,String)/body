{
  model=model.clone();
  if (model.hasDefined(name) && model.get(name).getType() != ModelType.EXPRESSION) {
    long rounded=Math.round(model.get(name).asDouble());
    if (rounded > Integer.MAX_VALUE) {
      throw ModClusterMessages.MESSAGES.capacityIsGreaterThanIntegerMaxValue(rounded);
    }
    model.get(name).set((int)rounded);
  }
  return fixProperties(model);
}
