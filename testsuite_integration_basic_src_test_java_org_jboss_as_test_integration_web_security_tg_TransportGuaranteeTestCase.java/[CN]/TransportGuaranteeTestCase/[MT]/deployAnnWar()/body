{
  log.info("starting deployAnnWar()");
  try {
    log.info("createSecurityDomain");
    SecurityTest.createSecurityDomain();
    log.info("Done");
  }
 catch (  Exception e) {
    log.error(e);
  }
  ClassLoader tccl=Thread.currentThread().getContextClassLoader();
  WebArchive war=ShrinkWrap.create(WebArchive.class,TG_ANN + WAR);
  war.addClass(TransportGuaranteeAnnotatedServlet.class);
  war.addAsResource(tccl.getResource("web/sec/tg/users.properties"),"users.properties");
  war.addAsResource(tccl.getResource("web/sec/tg/roles.properties"),"roles.properties");
  war.setWebXML(tccl.getResource("web/sec/tg/annotated/web.xml"));
  war.addAsWebInfResource("web/sec/tg/jboss-web.xml","jboss-web.xml");
  log.info(war.toString());
  return war;
}
