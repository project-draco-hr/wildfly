{
  String cacheManager=pu.getProperties().getProperty("hibernate.cache.infinispan.cachemanager");
  String useCache=pu.getProperties().getProperty("hibernate.cache.use_second_level_cache");
  String regionFactoryClass=pu.getProperties().getProperty("hibernate.cache.region.factory_class");
  if ((useCache != null && useCache.equalsIgnoreCase("true")) || cacheManager != null) {
    if (regionFactoryClass == null) {
      regionFactoryClass="org.hibernate.cache.infinispan.JndiInfinispanRegionFactory";
      pu.getProperties().put("hibernate.cache.region.factory_class",regionFactoryClass);
    }
    if (cacheManager == null) {
      cacheManager="java:jboss/infinispan/hibernate";
      pu.getProperties().put("hibernate.cache.infinispan.cachemanager",cacheManager);
    }
    ArrayList<ServiceName> result=new ArrayList<ServiceName>();
    result.add(adjustJndiName(cacheManager));
    return result;
  }
  return null;
}
