{
  Map<String,Map<String,Set<String>>> configuredConstraints=new HashMap<String,Map<String,Set<String>>>();
  if (constraint.hasDefined(APPLICATION_TYPE)) {
    ModelNode appTypeParent=constraint.require(APPLICATION_TYPE);
    if (appTypeParent.hasDefined(APPLICATION_TYPE)) {
      for (      Property applicationTypeProperty : appTypeParent.get(APPLICATION_TYPE).asPropertyList()) {
        if (applicationTypeProperty.getValue().hasDefined(TYPE)) {
          for (          Property typeProperty : applicationTypeProperty.getValue().get(TYPE).asPropertyList()) {
            ModelNode applicationType=typeProperty.getValue();
            if (applicationType.hasDefined(ApplicationTypeConfigResourceDefinition.CONFIGURED_APPLICATION.getName())) {
              Map<String,Set<String>> constraintMap=configuredConstraints.get(APPLICATION_TYPE);
              if (constraintMap == null) {
                constraintMap=new HashMap<String,Set<String>>();
                configuredConstraints.put(APPLICATION_TYPE,constraintMap);
              }
              Set<String> types=constraintMap.get(applicationTypeProperty.getName());
              if (types == null) {
                types=new HashSet<String>();
                constraintMap.put(applicationTypeProperty.getName(),types);
              }
              types.add(typeProperty.getName());
            }
          }
        }
      }
    }
  }
  return configuredConstraints;
}
