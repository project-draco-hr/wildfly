{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  final ModuleSpecification moduleSpecification=deploymentUnit.getAttachment(Attachments.MODULE_SPECIFICATION);
  final ModuleLoader moduleLoader=Module.getBootModuleLoader();
  if (deploymentUnit.hasAttachment(Attachments.RESOURCE_ROOTS)) {
    final List<ResourceRoot> resourceRoots=deploymentUnit.getAttachmentList(Attachments.RESOURCE_ROOTS);
    for (    ResourceRoot root : resourceRoots) {
      VirtualFile child=root.getRoot().getChild(SERVICE_FILE_NAME);
      if (child.exists()) {
        moduleSpecification.addSystemDependency(new ModuleDependency(moduleLoader,JTA,false,false,false,false));
        break;
      }
    }
  }
}
