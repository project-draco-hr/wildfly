{
  phaseContext.addToAttachmentList(Attachments.NEXT_PHASE_DEPS,NamingService.SERVICE_NAME);
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  List<ServiceName> dependencies=deploymentUnit.getAttachmentList(Attachments.JNDI_DEPENDENCIES);
  final ServiceName serviceName=serviceName(deploymentUnit);
  final ServiceBuilder<Void> serviceBuilder=phaseContext.getServiceTarget().addService(serviceName,Service.NULL);
  serviceBuilder.addDependencies(dependencies);
  if (deploymentUnit.getParent() != null) {
    serviceBuilder.addDependencies(deploymentUnit.getParent().getAttachment(Attachments.JNDI_DEPENDENCIES));
  }
  serviceBuilder.install();
}
