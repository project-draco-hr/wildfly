{
  final ManagedBeanConfigurations managedBeanConfigurations=phaseContext.getAttachment(ManagedBeanConfigurations.ATTACHMENT_KEY);
  if (managedBeanConfigurations == null) {
    return;
  }
  final ModuleContextConfig moduleContext=phaseContext.getAttachment(ModuleContextConfig.ATTACHMENT_KEY);
  if (moduleContext == null) {
    throw new DeploymentUnitProcessingException("Unable to deploy managed beans without a module naming context");
  }
  final ServiceTarget serviceTarget=phaseContext.getServiceTarget();
  final Module module=phaseContext.getAttachment(ModuleDeploymentProcessor.MODULE_ATTACHMENT_KEY);
  final ClassLoader classLoader=module.getClassLoader();
  for (  ManagedBeanConfiguration managedBeanConfiguration : managedBeanConfigurations.getConfigurations().values()) {
    processManagedBean(phaseContext.getDeploymentUnitContext(),classLoader,moduleContext,managedBeanConfiguration,serviceTarget);
  }
}
