{
  DeploymentManager manager=getDeploymentManager();
  Target[] targets=manager.getTargets();
  TargetModuleID[] availableModules=manager.getAvailableModules(ModuleType.EAR,targets);
  assertNull(availableModules);
  ProgressObject progress=jsr88Deploy(getEarArchive());
  TargetModuleID[] targetModules=progress.getResultTargetModuleIDs();
  try {
    availableModules=manager.getAvailableModules(ModuleType.EAR,targets);
    assertNotNull(availableModules);
    assertEquals(1,availableModules.length);
    TargetModuleID targetModuleID=availableModules[0];
    String moduleID=targetModuleID.getModuleID();
    assertTrue("Ends with deployment-app.ear",moduleID.endsWith("deployment-app.ear"));
  }
  finally {
    jsr88Undeploy(targetModules);
  }
}
