{
  installOneOffCpOneOff();
  final Context ctx=getContext();
  final Iterator<PatchHistoryDir.State> historyDir=PatchingHistoryTree.stateIterator(PatchHistoryDir.getInstance(),ctx);
  assertTrue(historyDir.hasNext());
  PatchHistoryDir.State hdir=historyDir.next();
  assertNotNull(hdir);
  File dir=hdir.getDirectory();
  assertNotNull(dir);
  assertEquals("oneOff2",dir.getName());
  assertTrue(historyDir.hasNext());
  hdir=historyDir.next();
  assertNotNull(hdir);
  dir=hdir.getDirectory();
  assertNotNull(dir);
  assertEquals("cp1",dir.getName());
  assertTrue(historyDir.hasNext());
  hdir=historyDir.next();
  assertNotNull(hdir);
  dir=hdir.getDirectory();
  assertNotNull(dir);
  assertEquals("oneOff1",dir.getName());
  assertFalse(historyDir.hasNext());
}
