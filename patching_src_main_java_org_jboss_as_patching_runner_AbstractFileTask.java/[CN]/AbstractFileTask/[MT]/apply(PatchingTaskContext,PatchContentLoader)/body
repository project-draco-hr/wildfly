{
  final MiscContentItem item=contentItem;
  if (item.isDirectory()) {
    if (!target.mkdirs() && !target.isDirectory()) {
      throw PatchMessages.MESSAGES.cannotCreateDirectory(target.getAbsolutePath());
    }
    return NO_CONTENT;
  }
 else {
    if (!target.exists()) {
      createParentDirectories(target,item.getPath(),item.getPath().length,context);
    }
    final InputStream is=loader.openContentStream(item);
    try {
      return copy(is,target);
    }
  finally {
      safeClose(is);
    }
  }
}
