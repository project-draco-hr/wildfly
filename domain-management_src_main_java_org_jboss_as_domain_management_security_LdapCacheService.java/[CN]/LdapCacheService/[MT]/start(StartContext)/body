{
switch (mode) {
case OFF:
    cacheImplementation=new NoCacheCache();
  break;
case BY_ACCESS:
cacheImplementation=new ByAccessCache(evictionTime,cacheFailures,maxCacheSize);
break;
case BY_SEARCH:
cacheImplementation=new BySearchCache(evictionTime,cacheFailures,maxCacheSize);
break;
default :
throw new IllegalStateException(String.format("Unknown cache mode '%s'",mode));
}
if (evictionTime > 0) {
executorService=Executors.newSingleThreadScheduledExecutor(new ThreadFactory(){
@Override public Thread newThread(Runnable r){
return new Thread(r,String.format("LDAP Cache Eviction Thread (%d)",THREAD_COUNT++));
}
}
);
}
}
