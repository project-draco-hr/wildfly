{
  File workDir=null;
  try {
    workDir=IdentityPatchRunner.createTempDir();
    final File cachedContent=new File(workDir,"content");
    IoUtils.copy(is,cachedContent);
    ZipUtils.unzip(cachedContent,workDir);
    return execute(workDir,contentPolicy);
  }
 catch (  Exception e) {
    throw new PatchingException(e);
  }
 finally {
    if (workDir != null && !IoUtils.recursiveDelete(workDir)) {
      PatchLogger.ROOT_LOGGER.debugf("failed to remove work directory (%s)",workDir);
    }
  }
}
