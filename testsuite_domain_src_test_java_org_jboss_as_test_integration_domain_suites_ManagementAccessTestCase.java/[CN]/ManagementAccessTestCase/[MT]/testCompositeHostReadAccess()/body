{
  ModelNode masterRequest=getEmptyOperation(COMPOSITE,null);
  ModelNode steps=masterRequest.get(STEPS);
  steps.add(getReadAttributeOperation(MASTER_ROOT_ADDRESS,NAME));
  steps.add(getReadAttributeOperation(MASTER_INTERFACE_ADDRESS,INET_ADDRESS));
  masterRequest.protect();
  ModelNode response=masterClient.execute(masterRequest);
  System.out.println(response);
  ModelNode returnVal=validateResponse(response).get(DOMAIN_RESULTS);
  ModelNode name=validateResponse(returnVal.get("step-1"));
  Assert.assertEquals("master",name.asString());
  ModelNode inetAddress=validateResponse(returnVal.get("step-2"));
  Assert.assertEquals(ModelType.EXPRESSION,inetAddress.getType());
  ModelNode slaveRequest=getEmptyOperation(COMPOSITE,null);
  steps=slaveRequest.get(STEPS);
  steps.add(getReadAttributeOperation(SLAVE_ROOT_ADDRESS,NAME));
  steps.add(getReadAttributeOperation(SLAVE_INTERFACE_ADDRESS,INET_ADDRESS));
  masterRequest.protect();
  response=slaveClient.execute(slaveRequest);
  System.out.println(response);
  ModelNode slaveReturnVal=validateResponse(response).get(DOMAIN_RESULTS);
  name=validateResponse(slaveReturnVal.get("step-1"));
  Assert.assertEquals("slave",name.asString());
  inetAddress=validateResponse(slaveReturnVal.get("step-2"));
  Assert.assertEquals(ModelType.EXPRESSION,inetAddress.getType());
  response=masterClient.execute(slaveRequest);
  returnVal=validateResponse(response).get(DOMAIN_RESULTS);
  Assert.assertEquals(returnVal,slaveReturnVal);
  response=slaveClient.execute(masterRequest);
  validateFailedResponse(response);
}
