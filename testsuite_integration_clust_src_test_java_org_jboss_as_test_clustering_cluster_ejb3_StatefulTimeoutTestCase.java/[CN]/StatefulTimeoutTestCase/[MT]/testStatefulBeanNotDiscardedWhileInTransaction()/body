{
  ClusteredBean.preDestroy=false;
  ClusteredBean.prePassivate=false;
  try {
    userTransaction.begin();
    ClusteredBean sfsb1=lookup(ClusteredBean.class);
    Assert.assertFalse(ClusteredBean.preDestroy);
    Assert.assertFalse(ClusteredBean.prePassivate);
    sfsb1.increment();
    Assert.assertFalse(ClusteredBean.prePassivate);
    Thread.sleep(1500);
    sfsb1.increment();
    Assert.assertFalse(ClusteredBean.preDestroy);
    userTransaction.commit();
    Assert.assertTrue(ClusteredBean.prePassivate);
  }
 catch (  Exception e) {
    e.printStackTrace();
    userTransaction.rollback();
  }
}
