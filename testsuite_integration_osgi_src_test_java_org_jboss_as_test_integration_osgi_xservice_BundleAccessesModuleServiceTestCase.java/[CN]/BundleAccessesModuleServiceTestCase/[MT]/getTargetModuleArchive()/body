{
  final JavaArchive archive=ShrinkWrap.create(JavaArchive.class,TARGET_MODULE_NAME);
  archive.addClasses(Echo.class,EchoService.class,TargetModuleActivator.class);
  archive.addAsServiceProvider(ServiceActivator.class,TargetModuleActivator.class);
  archive.setManifest(new Asset(){
    @Override public InputStream openStream(){
      ManifestBuilder builder=ManifestBuilder.newInstance();
      builder.addManifestHeader("Dependencies","org.osgi.core,org.jboss.osgi.framework,org.jboss.modules,org.jboss.logging");
      return builder.openStream();
    }
  }
);
  return archive;
}
