{
  ControllerAddress address=addressResolver.resolveAddress(controller);
  try {
    CallbackHandler cbh=new AuthenticationCallbackHandler(username,password);
    if (log.isDebugEnabled()) {
      log.debug("connecting to " + address.getHost() + ':'+ address.getPort()+ " as "+ username);
    }
    ModelControllerClient tempClient=ModelControllerClientFactory.CUSTOM.getClient(address,cbh,disableLocalAuth,sslContext,connectionTimeout,this,timeoutHandler);
    tryConnection(tempClient,address);
    initNewClient(tempClient,address);
  }
 catch (  RedirectException re) {
    throw new CommandLineException("Server at " + address.getHost() + ":"+ address.getPort()+ " does not support "+ address.getProtocol());
  }
catch (  IOException e) {
    throw new CommandLineException("Failed to resolve host '" + address.getHost() + "'",e);
  }
}
