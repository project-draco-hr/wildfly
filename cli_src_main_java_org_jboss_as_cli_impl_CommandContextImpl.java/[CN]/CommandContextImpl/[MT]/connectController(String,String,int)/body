{
  if (host == null) {
    host=defaultControllerHost;
  }
  if (port < 0) {
    port=defaultControllerPort;
  }
  if (protocol == null) {
    protocol=defaultControllerProtocol;
  }
  boolean retry;
  do {
    retry=false;
    try {
      ModelControllerClient newClient=null;
      CallbackHandler cbh=new AuthenticationCallbackHandler(username,password);
      if (log.isDebugEnabled()) {
        log.debug("connecting to " + host + ':'+ port+ " as "+ username);
      }
      ModelControllerClient tempClient=ModelControllerClientFactory.CUSTOM.getClient(protocol,host,port,cbh,disableLocalAuth,sslContext,connectionTimeout,this);
      retry=tryConnection(tempClient,host,port);
      if (!retry) {
        newClient=tempClient;
      }
      initNewClient(newClient,host,port);
    }
 catch (    IOException e) {
      throw new CommandLineException("Failed to resolve host '" + host + "': "+ e.getLocalizedMessage());
    }
  }
 while (retry);
}
