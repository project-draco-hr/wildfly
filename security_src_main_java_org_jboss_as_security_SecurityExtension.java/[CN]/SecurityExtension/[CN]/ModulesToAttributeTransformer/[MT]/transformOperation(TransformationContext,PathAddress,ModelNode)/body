{
  ModelNode model=new ModelNode();
  transformModulesToAttributes(address,resourceName,oldName,context,model);
  ModelNode modules=model.get(oldName);
  int len=modules.asList().size();
  boolean addOpAdded=isAddOpAdded(address);
  if (len == 0) {
    operation=new ModelNode();
    operation.get(OP).set(REMOVE);
  }
 else   if (!addOpAdded) {
    operation=model.clone();
    operation.get(OP).set(ADD);
  }
 else {
    operation.clear();
    operation.get(OP).set(WRITE_ATTRIBUTE_OPERATION);
    operation.get(ModelDescriptionConstants.NAME).set(oldName);
    operation.get(ModelDescriptionConstants.VALUE).set(modules);
  }
  operation.get(ModelDescriptionConstants.OP_ADDR).set(address.toModelNode());
  return new TransformedOperation(operation,OperationResultTransformer.ORIGINAL_RESULT);
}
