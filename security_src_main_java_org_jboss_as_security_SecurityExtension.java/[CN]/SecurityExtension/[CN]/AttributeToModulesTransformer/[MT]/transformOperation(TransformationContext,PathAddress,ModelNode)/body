{
  final ModelNode transformedOp;
  if (!operation.has(attributeName)) {
    transformedOp=operation;
  }
 else   if (!operation.hasDefined(attributeName)) {
    transformedOp=operation.clone();
    transformedOp.remove(attributeName);
  }
 else {
    PathAddress pa=PathAddress.pathAddress(operation.get(OP_ADDR));
    transformedOp=Util.createEmptyOperation(COMPOSITE,null);
    ModelNode steps=transformedOp.get(STEPS);
    ModelNode clone=operation.clone();
    clone.remove(attributeName);
    steps.add(clone);
    ModelNode writeOp=Util.createEmptyOperation(WRITE_ATTRIBUTE_OPERATION,pa);
    writeOp.get(NAME).set(attributeName);
    writeOp.get(VALUE).set(operation.get(attributeName));
    steps.add(writeOp);
  }
  return new TransformedOperation(transformedOp,OperationResultTransformer.ORIGINAL_RESULT);
}
