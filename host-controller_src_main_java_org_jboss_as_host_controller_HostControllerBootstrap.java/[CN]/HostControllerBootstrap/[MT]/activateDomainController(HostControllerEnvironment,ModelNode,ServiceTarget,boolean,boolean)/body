{
  final FileRepository fileRepository=new LocalFileRepository(environment);
  boolean slave=!host.get(DOMAIN_CONTROLLER,LOCAL).isDefined();
  if (slave) {
    installRemoteDomainControllerConnection(environment,host,serviceTarget,fileRepository);
  }
  installLocalDomainController(environment,host,serviceTarget,slave,fileRepository,backupDomainFiles,useCachedDc);
}
