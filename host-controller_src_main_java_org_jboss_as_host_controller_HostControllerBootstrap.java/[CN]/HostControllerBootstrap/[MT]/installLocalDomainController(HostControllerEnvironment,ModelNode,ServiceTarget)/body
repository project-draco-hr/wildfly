{
  final File configDir=environment.getDomainConfigurationDir();
  final ExtensibleConfigurationPersister domainConfigurationPersister=createDomainConfigurationPersister(configDir);
  final DomainControllerService dcService=new DomainControllerService(domainConfigurationPersister);
  serviceTarget.addService(DomainController.SERVICE_NAME,dcService).install();
  final LocalDomainConnectionService service=new LocalDomainConnectionService();
  serviceTarget.addService(DomainControllerConnection.SERVICE_NAME,service).addDependency(DomainController.SERVICE_NAME,DomainController.class,service.getDomainController()).setInitialMode(Mode.ACTIVE).install();
  final DomainControllerOperationHandlerService operationHandlerService=new DomainControllerOperationHandlerService();
  serviceTarget.addService(DomainControllerOperationHandlerService.SERVICE_NAME,operationHandlerService).addDependency(ManagementCommunicationService.SERVICE_NAME,ManagementCommunicationService.class,operationHandlerService.getManagementCommunicationServiceValue()).addDependency(DomainController.SERVICE_NAME,ModelController.class,operationHandlerService.getModelControllerValue()).setInitialMode(ServiceController.Mode.ACTIVE).install();
}
