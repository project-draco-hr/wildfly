{
  try {
    Collection<TransportConfiguration> acceptors=configuration.getAcceptorConfigurations();
    Collection<TransportConfiguration> connectors=configuration.getConnectorConfigurations().values();
    if (connectors != null) {
      for (      TransportConfiguration tc : connectors) {
        SocketBinding binding=socketBindings.get(tc.getName());
        if (binding == null) {
          throw new StartException("Failed to find SocketBinding for connector: " + tc.getName());
        }
        log.debug("Applying socket binding: " + binding);
        tc.getParams().put(HOST,binding.getSocketAddress().getHostName());
        tc.getParams().put(PORT,"" + binding.getSocketAddress().getPort());
      }
    }
    if (acceptors != null) {
      for (      TransportConfiguration tc : acceptors) {
        SocketBinding binding=socketBindings.get(tc.getName());
        if (binding == null) {
          throw new StartException("Failed to find SocketBinding for acceptor: " + tc.getName());
        }
        log.debug("Applying socket binding: " + binding);
        tc.getParams().put(HOST,binding.getSocketAddress().getHostName());
        tc.getParams().put(PORT,"" + binding.getSocketAddress().getPort());
      }
    }
    server=new HornetQServerImpl(configuration);
    log.info("Starting the HornetQServer...");
    server.start();
  }
 catch (  Exception e) {
    throw new StartException("Failed to start service",e);
  }
}
