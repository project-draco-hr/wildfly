{
  final File tempFileName=FilePersistenceUtils.createTempFile(fileName);
  try {
    FilePersistenceUtils.writeToTempFile(marshalled,tempFileName);
    FilePersistenceUtils.moveTempFileToMain(tempFileName,fileName);
  }
 catch (  Exception e) {
    MGMT_OP_LOGGER.failedToStoreConfiguration(e,fileName.getName());
  }
 finally {
    if (tempFileName.exists() && !tempFileName.delete()) {
      MGMT_OP_LOGGER.cannotDeleteTempFile(tempFileName.getName());
      tempFileName.deleteOnExit();
    }
  }
}
