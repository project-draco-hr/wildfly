{
  try {
    final DeploymentOperations.Factory factory=new DeploymentOperations.Factory(){
      @Override public DeploymentOperations create(){
        return new DefaultDeploymentOperations(controllerValue.getValue().createClient(scheduledExecutorValue.getValue()));
      }
    }
;
    if (scanner == null) {
      final PathManager pathManager=pathManagerValue.getValue();
      final String pathName=pathManager.resolveRelativePathEntry(path,relativeTo);
      File relativePath=null;
      if (relativeTo != null) {
        relativePath=new File(pathManager.getPathEntry(relativeTo).resolvePath());
        callbackHandle=pathManager.registerCallback(pathName,PathManager.ReloadServerCallback.create(),PathManager.Event.UPDATED,PathManager.Event.REMOVED);
      }
      final FileSystemDeploymentService scanner=new FileSystemDeploymentService(relativeTo,new File(pathName),relativePath,factory,scheduledExecutorValue.getValue());
      scanner.setScanInterval(unit.toMillis(interval));
      scanner.setAutoDeployExplodedContent(autoDeployExploded);
      scanner.setAutoDeployZippedContent(autoDeployZipped);
      scanner.setAutoDeployXMLContent(autoDeployXml);
      scanner.setRuntimeFailureCausesRollback(rollbackOnRuntimeFailure);
      if (deploymentTimeout != null) {
        scanner.setDeploymentTimeout(deploymentTimeout);
      }
      this.scanner=scanner;
    }
 else {
      this.scanner.setDeploymentOperationsFactory(factory);
    }
    if (enabled) {
      scanner.startScanner();
    }
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
}
