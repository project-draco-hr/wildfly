{
  boolean mbeanAvailable=false;
  MBeanServerConnection mbeanServer=getMBeanServerConnection(timeout);
  while (timeout > 0 && mbeanAvailable == false) {
    try {
      mbeanAvailable=mbeanServer.isRegistered(objectName);
    }
 catch (    Exception ex) {
    }
    if (mbeanAvailable == false) {
      try {
        Thread.sleep(100);
        timeout-=100;
      }
 catch (      InterruptedException ex) {
      }
    }
  }
  if (mbeanAvailable == false)   throw new IllegalStateException("MBean not available: " + objectName);
}
