{
synchronized (stateLock) {
    if (inManagedTransaction)     throw new SQLException("You cannot rollback during a managed transaction!");
    if (jdbcAutoCommit)     throw new SQLException("You cannot rollback with autocommit set!");
  }
  con.rollback(savepoint);
}
