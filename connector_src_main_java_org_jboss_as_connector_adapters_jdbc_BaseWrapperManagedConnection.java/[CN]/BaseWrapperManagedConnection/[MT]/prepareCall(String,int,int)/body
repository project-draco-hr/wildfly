{
  if (psCache != null) {
    PreparedStatementCache.Key key=new PreparedStatementCache.Key(sql,PreparedStatementCache.Key.CALLABLE_STATEMENT,resultSetType,resultSetConcurrency);
    CachedCallableStatement cachedps=(CachedCallableStatement)psCache.get(key);
    if (cachedps != null) {
      if (canUse(cachedps)) {
        cachedps.inUse();
      }
 else {
        return doPrepareCall(sql,resultSetType,resultSetConcurrency);
      }
    }
 else {
      CallableStatement cs=doPrepareCall(sql,resultSetType,resultSetConcurrency);
      cachedps=WRAPPED_CONNECTION_FACTORY.createCachedCallableStatement(cs);
      psCache.insert(key,cachedps);
    }
    return cachedps;
  }
 else {
    return doPrepareCall(sql,resultSetType,resultSetConcurrency);
  }
}
