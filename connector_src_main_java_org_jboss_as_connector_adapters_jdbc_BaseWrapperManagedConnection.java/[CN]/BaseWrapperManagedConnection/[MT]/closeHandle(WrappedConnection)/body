{
synchronized (stateLock) {
    if (destroyed)     return;
  }
synchronized (handles) {
    handles.remove(handle);
  }
  Collection<ConnectionEventListener> copy=null;
synchronized (cels) {
    if (cels != null && cels.size() > 0)     copy=new ArrayList<ConnectionEventListener>(cels);
  }
  if (copy != null) {
    ConnectionEvent ce=new ConnectionEvent(this,ConnectionEvent.CONNECTION_CLOSED);
    ce.setConnectionHandle(handle);
    for (Iterator<ConnectionEventListener> i=copy.iterator(); i.hasNext(); ) {
      ConnectionEventListener cel=i.next();
      cel.connectionClosed(ce);
    }
  }
}
