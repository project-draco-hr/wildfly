{
  final InputStream input=ProcessManagerSlave.this.input;
  final StringBuilder b=new StringBuilder();
  try {
    for (; ; ) {
      Status status=StreamUtils.readWord(input,b);
      if (status == Status.END_OF_STREAM) {
        log.info("Received end of stream closing down");
        shutdown();
        break;
      }
      try {
        final OutgoingPmCommand command=OutgoingPmCommand.valueOf(b.toString());
        status=command.handleMessage(input,status,handler,b);
      }
 catch (      IllegalArgumentException e) {
      }
      if (status == Status.MORE)       StreamUtils.readToEol(input);
    }
  }
 catch (  IOException e) {
    log.info("Error, closing down",e);
  }
catch (  Throwable t) {
    log.info("Throwable, closing down",t);
  }
 finally {
    shutdown();
  }
}
