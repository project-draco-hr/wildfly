{
  validator.validateParameter(NAME,operation.get(NAME));
  validator.validateParameter(VALUE,operation.get(VALUE));
  final Resource resource=context.readResourceForUpdate(PathAddress.EMPTY_ADDRESS);
  final ModelNode model=resource.getModel();
  final String name=operation.require(NAME).asString();
  final String value=operation.require(VALUE).asString();
  ModelNode variables=model.get(JvmAttributes.JVM_ENV_VARIABLES);
  if (variables.isDefined()) {
    for (    ModelNode varNode : variables.asList()) {
      if (varNode.asProperty().getName().equals(name)) {
        throw MESSAGES.envVariableAlreadyExists(varNode.asProperty().getName());
      }
    }
  }
  model.get(JvmAttributes.JVM_ENV_VARIABLES).add(name,value);
  context.stepCompleted();
}
