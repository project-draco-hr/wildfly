{
  final Resource resource=context.readResourceForUpdate(PathAddress.EMPTY_ADDRESS);
  final ModelNode model=resource.getModel();
  final String name=NAME.validateOperation(operation).asString();
  final String value=VALUE.validateOperation(operation).asString();
  ModelNode variables=model.get(JvmAttributes.JVM_ENV_VARIABLES);
  if (variables.isDefined()) {
    for (    ModelNode varNode : variables.asList()) {
      if (varNode.asProperty().getName().equals(name)) {
        throw MESSAGES.envVariableAlreadyExists(varNode.asProperty().getName());
      }
    }
  }
  model.get(JvmAttributes.JVM_ENV_VARIABLES).add(name,value);
  context.stepCompleted();
}
