{
  int nextCharIndex=0;
  while (nextCharIndex < buffer.length()) {
    if (!Character.isWhitespace(buffer.charAt(nextCharIndex))) {
      break;
    }
    ++nextCharIndex;
  }
  List<String> all=candidatesProvider.getAllCandidates(ctx);
  if (all.isEmpty()) {
    return -1;
  }
  String opBuffer=buffer.substring(nextCharIndex).trim();
  if (opBuffer.isEmpty()) {
    candidates.addAll(all);
  }
 else {
    for (    String name : all) {
      if (name.startsWith(opBuffer)) {
        candidates.add(name);
      }
    }
    Collections.sort(candidates);
  }
  return nextCharIndex;
}
