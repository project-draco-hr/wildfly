{
  try {
    final ManagedConnectionFactory mcf=createManagedConnectionFactory(jndiName,driverValue.getValue());
    final PoolConfiguration pc=createPoolConfig();
    final Pool pool=createPool(jndiName,mcf,pc);
    final ConnectionManager cm=createConnectionManager(jndiName,pool);
    sqlDataSource=(javax.sql.DataSource)mcf.createConnectionFactory(cm);
    org.jboss.jca.core.api.management.DataSource mgtDs=new org.jboss.jca.core.api.management.DataSource(false);
    mgtDs.setJndiName(jndiName);
    mgtDs.setPoolConfiguration(pc);
    mgtDs.setPool(pool);
    log.debugf("Adding management datasource: %s",mgtDs);
    managementRepository.getValue().getDataSources().add(mgtDs);
  }
 catch (  Throwable t) {
    throw new StartException("Error during the deployment of " + jndiName,t);
  }
}
