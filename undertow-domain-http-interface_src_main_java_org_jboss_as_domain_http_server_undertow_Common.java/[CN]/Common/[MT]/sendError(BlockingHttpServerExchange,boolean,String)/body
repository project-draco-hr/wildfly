{
  byte[] bytes=msg.getBytes();
  HttpServerExchange exchange=blockingExchange.getExchange();
  exchange.getResponseHeaders().put(Headers.CONTENT_TYPE,TEXT_PLAIN + ";" + UTF_8);
  exchange.getResponseHeaders().put(Headers.CONTENT_LENGTH,String.valueOf(bytes.length));
  exchange.setResponseCode(StatusCodes.CODE_500.getCode());
  OutputStream out=blockingExchange.getOutputStream();
  try {
    try {
      out.write(msg.getBytes());
    }
  finally {
      try {
        out.flush();
      }
  finally {
        IoUtils.safeClose(out);
      }
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
