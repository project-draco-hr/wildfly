{
  try {
    System.out.println("---- Client executing request " + getBatchId());
    activeRequests.put(getBatchId(),executeRequestContext);
    output.write(NewModelControllerProtocol.PARAM_OPERATION);
    operation.writeExternal(output);
    output.write(NewModelControllerProtocol.PARAM_INPUTSTREAMS_LENGTH);
    int inputStreamLength=0;
    if (executeRequestContext.getAttachments() != null) {
      List<InputStream> streams=executeRequestContext.getAttachments().getInputStreams();
      if (streams != null) {
        inputStreamLength=streams.size();
      }
    }
    output.writeInt(inputStreamLength);
  }
 catch (  Exception e) {
    super.setError(e);
    if (e instanceof IOException) {
      throw (IOException)e;
    }
    if (e instanceof RuntimeException) {
      throw (RuntimeException)e;
    }
    throw new IOException(e);
  }
}
