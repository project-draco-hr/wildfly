{
  System.out.println("---- Client getting response " + getBatchId());
  try {
    ProtocolUtils.expectHeader(input,NewModelControllerProtocol.PARAM_RESPONSE);
    ModelNode node=new ModelNode();
    node.readExternal(input);
    return node;
  }
 catch (  Exception e) {
    super.setError(e);
    if (e instanceof IOException) {
      throw (IOException)e;
    }
    if (e instanceof RuntimeException) {
      throw (RuntimeException)e;
    }
    throw new IOException(e);
  }
 finally {
    ManagementBatchIdManager.DEFAULT.freeBatchId(getBatchId());
    activeRequests.remove(getCurrentRequestId());
    executeRequestContext.done();
    System.out.println("---- Client finished response " + getBatchId());
  }
}
