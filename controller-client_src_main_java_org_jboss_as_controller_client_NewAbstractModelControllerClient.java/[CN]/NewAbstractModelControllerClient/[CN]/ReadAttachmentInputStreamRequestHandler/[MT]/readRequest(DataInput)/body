{
  int batchId=getContext().getHeader().getBatchId();
  log.tracef("Client got inputstream request %d" + batchId);
  ProtocolUtils.expectHeader(input,NewModelControllerProtocol.PARAM_INPUTSTREAM_INDEX);
  int index=input.readInt();
  ExecuteRequestContext requestContext=activeRequests.get(batchId);
  if (requestContext == null) {
    throw new IOException("No active request found for " + batchId);
  }
  InputStream in=requestContext.getAttachments().getInputStreams().get(index);
  attachmentInput=in != null ? new BufferedInputStream(in) : null;
}
