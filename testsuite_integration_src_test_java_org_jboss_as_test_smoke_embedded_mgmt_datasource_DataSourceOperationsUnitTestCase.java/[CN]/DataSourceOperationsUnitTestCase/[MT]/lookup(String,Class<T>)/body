{
  MBeanServerConnectionProvider provider=MBeanServerConnectionProvider.defaultProvider();
  MBeanServerConnection mbeanServer=provider.getConnection();
  ObjectName objectName=new ObjectName("jboss:name=test,type=fakejndi");
  PollingUtils.retryWithTimeout(10000,new PollingUtils.WaitForMBeanTask(mbeanServer,objectName));
  Object o=mbeanServer.invoke(objectName,"lookup",new Object[]{name},new String[]{"java.lang.String"});
  return expected.cast(o);
}
