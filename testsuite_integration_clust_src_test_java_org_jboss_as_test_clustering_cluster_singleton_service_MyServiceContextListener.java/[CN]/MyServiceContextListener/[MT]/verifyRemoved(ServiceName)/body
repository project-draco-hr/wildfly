{
  ServiceController<?> controller=ServiceContainerHelper.getCurrentServiceContainer().getService(name);
  if ((controller != null) && (controller.getState() != ServiceController.State.REMOVED)) {
    throw new IllegalStateException(String.format("%s state = %s",name.getCanonicalName(),controller.getState()));
  }
}
