{
  MyService service=new MyService();
  SingletonService<Environment> singleton=new SingletonService<Environment>(service,MyService.SERVICE_NAME);
  singleton.setElectionPolicy(new PreferredSingletonElectionPolicy(new NamePreference(PREFERRED_NODE + "/" + SingletonService.DEFAULT_CONTAINER),new SimpleSingletonElectionPolicy()));
  ServiceController<Environment> controller=singleton.build(ServiceContainerHelper.getCurrentServiceContainer()).addDependency(ServerEnvironmentService.SERVICE_NAME,ServerEnvironment.class,service.getEnvInjector()).setInitialMode(ServiceController.Mode.ACTIVE).install();
  try {
    ServiceContainerHelper.start(controller);
  }
 catch (  StartException e) {
    throw new IllegalStateException(e);
  }
}
