{
  _orb=orb;
  try {
    org.omg.CORBA.Object ncRef;
    if (ncIor != null) {
      if (debug) {
        System.err.println("Passing to string_to_object: " + ncIor);
      }
      ncRef=_orb.string_to_object(ncIor);
    }
 else {
      ncRef=_orb.resolve_initial_references("NameService");
    }
    if (debug) {
      System.err.println("Naming Context Ref: " + ncRef);
    }
    _nc=NamingContextHelper.narrow(ncRef);
    if (_nc == null) {
      if (ncIor != null) {
        throw new ConfigurationException("Cannot convert IOR to a NamingContext: " + ncIor);
      }
 else {
        throw new ConfigurationException("ORB.resolve_initial_references(\"NameService\") does not return a NamingContext");
      }
    }
  }
 catch (  org.omg.CORBA.ORBPackage.InvalidName in) {
    NamingException ne=new ConfigurationException("COS Name Service not registered with ORB under the name 'NameService'");
    ne.setRootCause(in);
    throw ne;
  }
catch (  org.omg.CORBA.COMM_FAILURE e) {
    NamingException ne=new CommunicationException("Cannot connect to ORB");
    ne.setRootCause(e);
    throw ne;
  }
catch (  org.omg.CORBA.BAD_PARAM e) {
    NamingException ne=new ConfigurationException("Invalid URL or IOR: " + ncIor);
    ne.setRootCause(e);
    throw ne;
  }
catch (  org.omg.CORBA.INV_OBJREF e) {
    NamingException ne=new ConfigurationException("Invalid object reference: " + ncIor);
    ne.setRootCause(e);
    throw ne;
  }
}
