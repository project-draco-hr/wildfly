{
  if (context.isNormalServer()) {
    context.addStep(new OperationStepHandler(){
      @Override public void execute(      OperationContext context,      ModelNode operation) throws OperationFailedException {
        final PathAddress address=PathAddress.pathAddress(operation.require(OP_ADDR));
        final String name=address.getLastElement().getValue();
        final String attributeName=operation.require(NAME).asString();
        final ServiceController<?> controller=context.getServiceRegistry(false).getService(WebSubsystemServices.JBOSS_WEB_CONNECTOR.append(name));
        if (controller != null) {
          try {
            final Connector connector=(Connector)controller.getValue();
            final ModelNode result=context.getResult();
            if (connector.getProtocolHandler() != null && connector.getProtocolHandler().getRequestGroupInfo() != null) {
              RequestGroupInfo info=connector.getProtocolHandler().getRequestGroupInfo();
              if (Constants.BYTES_SENT.equals(attributeName)) {
                result.set("" + info.getBytesSent());
              }
 else               if (Constants.BYTES_RECEIVED.equals(attributeName)) {
                result.set("" + info.getBytesReceived());
              }
 else               if (Constants.PROCESSING_TIME.equals(attributeName)) {
                result.set("" + info.getProcessingTime());
              }
 else               if (Constants.ERROR_COUNT.equals(attributeName)) {
                result.set("" + info.getErrorCount());
              }
 else               if (Constants.MAX_TIME.equals(attributeName)) {
                result.set("" + info.getMaxTime());
              }
 else               if (Constants.REQUEST_COUNT.equals(attributeName)) {
                result.set("" + info.getRequestCount());
              }
            }
          }
 catch (          Exception e) {
            throw new OperationFailedException(new ModelNode().set(MESSAGES.failedToGetMetrics(e.getMessage())));
          }
        }
 else {
          context.getResult().set(MESSAGES.noMetricsAvailable());
        }
        context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
      }
    }
,OperationContext.Stage.RUNTIME);
  }
 else {
    context.getResult().set(MESSAGES.noMetricsAvailable());
  }
  context.completeStep(OperationContext.RollbackHandler.NOOP_ROLLBACK_HANDLER);
}
