{
  AbstractServer server=null;
  try {
    ServerEnvironment config=determineEnvironment(args,props,stdin,stdout,stderr);
    if (config == null) {
      abort(null);
    }
 else {
      if (config.isStandalone()) {
        server=new StandaloneServer(config);
      }
 else {
        server=new Server(config);
      }
      server.start();
      return server;
    }
  }
 catch (  Throwable t) {
    abort(t);
  }
  return null;
}
