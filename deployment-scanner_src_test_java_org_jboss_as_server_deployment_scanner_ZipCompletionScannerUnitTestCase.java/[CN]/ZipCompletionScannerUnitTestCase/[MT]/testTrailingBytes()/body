{
  File trailing=testSupport.getFile("trailingbytes.jar");
  FileChannel in=testSupport.getChannel(testSupport.getBasicWar(),true);
  FileChannel out=testSupport.getChannel(trailing,false);
  int maxShort=(1 << 16) - 1;
  ByteBuffer bb=getByteBuffer((int)in.size());
  in.read(bb);
  putUnsignedShort(bb,maxShort,(int)in.size() - 2);
  bb.flip();
  out.write(bb);
  long size=out.size();
  bb=ByteBuffer.allocate(1);
  bb.put((byte)0);
  bb.flip();
  out.write(bb,size + maxShort - 1);
  Assert.assertTrue(ZipCompletionScanner.isCompleteZip(trailing));
}
