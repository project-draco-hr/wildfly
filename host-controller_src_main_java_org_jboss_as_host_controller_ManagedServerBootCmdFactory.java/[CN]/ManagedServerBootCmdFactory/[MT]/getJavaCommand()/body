{
  String javaHome=jvmElement.getJavaHome();
  if (javaHome == null) {
    if (environment.getDefaultJVM() != null) {
      String defaultJvm=environment.getDefaultJVM().getAbsolutePath();
      if (!defaultJvm.equals("java") || (defaultJvm.equals("java") && System.getenv("JAVA_HOME") != null)) {
        return defaultJvm;
      }
    }
    javaHome=DefaultJvmUtils.getCurrentJvmHome();
  }
  return DefaultJvmUtils.findJavaExecutable(javaHome);
}
