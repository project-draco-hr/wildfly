{
  auditLogger.getUpdater().removeHandlerReference(PathAddress.pathAddress(operation.require(OP_ADDR)));
  context.addStep(new OperationStepHandler(){
    @Override public void execute(    OperationContext context,    ModelNode operation) throws OperationFailedException {
      context.completeStep(new OperationContext.ResultHandler(){
        @Override public void handleResult(        ResultAction resultAction,        OperationContext context,        ModelNode operation){
          if (resultAction == ResultAction.KEEP) {
            auditLogger.getUpdater().applyChanges();
          }
        }
      }
);
    }
  }
,Stage.RUNTIME);
}
