{
  int numAttachments=input.readByte();
  if (numAttachments == 0) {
    return null;
  }
  final RemotingAttachments attachments=new RemotingAttachments();
  for (int i=0; i < numAttachments; i++) {
    final short attachmentId=input.readShort();
    final int dataLength=PackedInteger.readPackedInteger(input);
    final byte[] data=new byte[dataLength];
    input.readFully(data);
    attachments.putPayloadAttachment(attachmentId,data);
  }
  return attachments;
}
