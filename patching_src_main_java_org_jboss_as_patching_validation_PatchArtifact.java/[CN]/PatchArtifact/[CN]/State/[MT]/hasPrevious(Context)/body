{
  getHistoryDir(ctx);
  if (!historyDir.getRollbackXml(ctx).getFile().exists()) {
    return false;
  }
  final RollbackPatch patch=(RollbackPatch)historyDir.getRollbackXml(ctx).getPatch(ctx);
  TargetInfo targetInfo;
  try {
    targetInfo=patch.getIdentityState().getIdentity().loadTargetInfo();
  }
 catch (  IOException e) {
    ctx.getErrorHandler().error("Failed to load identity info for patch " + patch.getPatchId(),e);
    return false;
  }
  return !Constants.BASE.equals(targetInfo.getCumulativePatchID()) || !targetInfo.getPatchIDs().isEmpty();
}
