{
  this.deploymentName=context + ".deployment";
  JAXWSDeployment jaxwsDeployment=new JAXWSDeployment();
  if (jbossWebMetaData == null) {
    jbossWebMetaData=new JBossWebMetaData();
  }
  jbossWebMetaData.setContextRoot(context);
  for (  String urlPattern : urlPatternToClassName.keySet()) {
    addEndpoint(jbossWebMetaData,jaxwsDeployment,urlPatternToClassName.get(urlPattern),urlPattern);
  }
  this.putAttachment(WSAttachmentKeys.CLASSLOADER_KEY,loader);
  this.putAttachment(WSAttachmentKeys.JAXWS_ENDPOINTS_KEY,jaxwsDeployment);
  this.putAttachment(WSAttachmentKeys.JBOSSWEB_METADATA_KEY,jbossWebMetaData);
  if (metadata != null) {
    this.putAttachment(WSAttachmentKeys.WEBSERVICES_METADATA_KEY,metadata);
  }
}
