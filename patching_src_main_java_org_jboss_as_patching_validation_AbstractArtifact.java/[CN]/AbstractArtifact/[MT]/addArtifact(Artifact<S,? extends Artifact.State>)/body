{
  if (a == null) {
    throw new IllegalArgumentException("Artifact is null");
  }
switch (artifacts.size()) {
case 0:
    artifacts=Collections.<Artifact<S,? extends Artifact.State>>singletonList(a);
  break;
case 1:
final Artifact<S,? extends Artifact.State> first=artifacts.get(0);
artifacts=new ArrayList<Artifact<S,? extends Artifact.State>>();
artifacts.add(first);
default :
artifacts.add(a);
}
}
