{
  Set<Node> nodes=new CopyOnWriteArraySet<>(Collections.singleton(node));
  Set<Node> existing=this.cache.getAdvancedCache().withFlags(Flag.FORCE_SYNCHRONOUS).putIfAbsent(service,nodes);
  if (existing != null) {
    if (existing.add(node)) {
      this.cache.getAdvancedCache().withFlags(Flag.IGNORE_RETURN_VALUES).replace(service,existing);
    }
  }
}
