{
  final ServiceName serviceName=configuration.getComponentDescription().getServiceName().append("WeldInstantiator");
  final WeldManagedReferenceFactory factory=new WeldManagedReferenceFactory(componentClass,beanName,interceptorClasses,classLoader,beanDeploymentArchiveId);
  target.addService(serviceName,factory).addDependency(weldServiceName,WeldContainer.class,factory.getWeldContainer()).install();
  configuration.setInstanceFactory(factory);
  configuration.getStartDependencies().add(new DependencyConfigurator(){
    @Override public void configureDependency(    final ServiceBuilder<?> serviceBuilder) throws DeploymentUnitProcessingException {
      serviceBuilder.addDependency(serviceName);
    }
  }
);
}
