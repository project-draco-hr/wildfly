{
  final Set<String> children=rr.getChildNames(PathAddress.EMPTY_ADDRESS);
  final Set<String> attributeNames=rr.getAttributeNames(PathAddress.EMPTY_ADDRESS);
  for (  ModelNode el : model.asList()) {
    String name=el.asProperty().getName();
    ModelNode value=el.asProperty().getValue();
    if (attributeNames.contains(name)) {
      AttributeAccess aa=rr.getAttributeAccess(PathAddress.EMPTY_ADDRESS,name);
      Assert.assertNotNull(getComparePathAsString(stack) + " Attribute " + name+ " is not known",aa);
      AttributeDefinition ad=aa.getAttributeDefinition();
      if (!value.isDefined()) {
        Assert.assertTrue(getComparePathAsString(stack) + " Attribute " + name+ " does not allow null",ad.isAllowNull());
      }
 else {
      }
      try {
        if (!ad.isAllowNull() && value.isDefined()) {
          ad.getValidator().validateParameter(name,value);
        }
      }
 catch (      OperationFailedException e) {
        Assert.fail(getComparePathAsString(stack) + " validation for attribute '" + name+ "' failed, "+ e.getFailureDescription().asString());
      }
    }
 else     if (!children.contains(name)) {
      Assert.fail(getComparePathAsString(stack) + " Element '" + name+ "' is not known in target definition");
    }
  }
  for (  PathElement pe : rr.getChildAddresses(PathAddress.EMPTY_ADDRESS)) {
    if (pe.isWildcard()) {
      if (children.contains(pe.getKey()) && model.hasDefined(pe.getKey())) {
        for (        ModelNode v : model.get(pe.getKey()).asList()) {
          String name=v.asProperty().getName();
          ModelNode value=v.asProperty().getValue();
          ManagementResourceRegistration sub=rr.getSubModel(PathAddress.pathAddress(pe));
          Assert.assertNotNull(getComparePathAsString(stack) + " Child with name '" + name+ "' not found",sub);
          if (value.isDefined()) {
            stack.push(pe);
            checkModelAgainstDefinition(value,sub,stack);
            stack.pop();
          }
        }
      }
    }
 else {
      if (children.contains(pe.getKeyValuePair())) {
        String name=pe.getValue();
        ModelNode value=model.get(pe.getKeyValuePair());
        ManagementResourceRegistration sub=rr.getSubModel(PathAddress.pathAddress(pe));
        Assert.assertNotNull(getComparePathAsString(stack) + " Child with name '" + name+ "' not found",sub);
        if (value.isDefined()) {
          stack.push(pe);
          checkModelAgainstDefinition(value,sub,stack);
          stack.pop();
        }
      }
    }
  }
}
