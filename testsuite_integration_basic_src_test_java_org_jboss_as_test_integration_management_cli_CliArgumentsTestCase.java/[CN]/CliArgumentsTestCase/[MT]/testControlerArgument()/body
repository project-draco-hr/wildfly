{
  CLIWrapper cli=new CLIWrapper(false,new String[]{"--controller=localhost:" + String.valueOf(MGMT_PORT)});
  cli.sendLine("connect");
  cli.sendLine("ls");
  String output=cli.readAllUnformated(WAIT_TIMEOUT,WAIT_LINETIMEOUT);
  Assert.assertTrue(output.contains("subsystem"));
  Assert.assertTrue(output.contains("extension"));
  cli.quit();
  cli=new CLIWrapper(false,new String[]{"--controller=localhost:" + String.valueOf(MGMT_PORT - 1)});
  cli.sendLine("connect");
  output=cli.readAllUnformated(WAIT_TIMEOUT,WAIT_LINETIMEOUT * 10);
  Assert.assertTrue(output.contains("The controller is not available"));
  cli.quit();
}
