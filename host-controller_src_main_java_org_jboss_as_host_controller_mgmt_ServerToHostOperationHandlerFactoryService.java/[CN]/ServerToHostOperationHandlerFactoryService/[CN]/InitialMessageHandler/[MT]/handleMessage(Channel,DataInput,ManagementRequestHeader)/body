{
  final byte type=header.getOperationId();
  if (type == DomainServerProtocol.REGISTER_REQUEST || type == DomainServerProtocol.SERVER_RECONNECT_REQUEST) {
    expectHeader(input,DomainServerProtocol.PARAM_SERVER_NAME);
    final String serverName=input.readUTF();
    CONTROLLER_MANAGEMENT_LOGGER.serverRegistered(serverName,channel);
    executorService.execute(new Runnable(){
      @Override public void run(){
        final ManagementChannelHandler handler=new ManagementChannelHandler(channel,executorService,new ServerHandlerFactory(serverName));
        serverInventory.getValue().serverCommunicationRegistered(serverName,handler);
        safeWriteResponse(channel,header,null);
        if (type == DomainServerProtocol.SERVER_RECONNECT_REQUEST) {
          serverInventory.getValue().serverStarted(serverName);
        }
        channel.receiveMessage(handler.getReceiver());
      }
    }
);
  }
 else {
    safeWriteResponse(channel,header,MESSAGES.unrecognizedType(type));
    channel.close();
  }
}
