{
  ByteDataInput input=null;
  try {
    input=new SimpleByteDataInput(inputStream);
    expectHeader(input,DomainClientProtocol.PARAM_DEPLOYMENT_NAME);
    final String deploymentName=input.readUTF();
    expectHeader(input,DomainClientProtocol.PARAM_DEPLOYMENT_RUNTIME_NAME);
    final String deploymentRuntimeName=input.readUTF();
    expectHeader(input,DomainClientProtocol.PARAM_DEPLOYMENT_CONTENT);
    deploymentHash=domainController.addDeploymentContent(deploymentName,deploymentRuntimeName,(InputStream)input);
    input.close();
  }
  finally {
    safeClose(input);
  }
}
