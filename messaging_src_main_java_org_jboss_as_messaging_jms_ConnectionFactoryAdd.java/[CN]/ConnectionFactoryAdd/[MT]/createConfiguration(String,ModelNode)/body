{
  final ConnectionFactoryConfiguration config=new ConnectionFactoryConfigurationImpl(name,HornetQClient.DEFAULT_HA,JndiEntriesAttribute.getJndiBindings(operation));
  config.setHA(HA.validateResolvedOperation(operation).asBoolean());
  config.setAutoGroup(AUTO_GROUP.validateResolvedOperation(operation).asBoolean());
  config.setBlockOnAcknowledge(BLOCK_ON_ACK.validateResolvedOperation(operation).asBoolean());
  config.setBlockOnDurableSend(BLOCK_ON_DURABLE_SEND.validateResolvedOperation(operation).asBoolean());
  config.setBlockOnNonDurableSend(BLOCK_ON_NON_DURABLE_SEND.validateResolvedOperation(operation).asBoolean());
  config.setCacheLargeMessagesClient(CACHE_LARGE_MESSAGE_CLIENT.validateResolvedOperation(operation).asBoolean());
  config.setCallTimeout(CALL_TIMEOUT.validateResolvedOperation(operation).asLong());
  config.setClientFailureCheckPeriod(CLIENT_FAILURE_CHECK_PERIOD.validateResolvedOperation(operation).asInt());
  final ModelNode clientId=CLIENT_ID.validateResolvedOperation(operation);
  if (clientId.isDefined()) {
    config.setClientID(clientId.asString());
  }
  config.setConfirmationWindowSize(CONFIRMATION_WINDOW_SIZE.validateResolvedOperation(operation).asInt());
  config.setConnectionTTL(CONNECTION_TTL.validateResolvedOperation(operation).asLong());
  if (operation.hasDefined(CONNECTOR)) {
    ModelNode connectorRefs=operation.get(CONNECTOR);
    List<String> connectorNames=new ArrayList<String>();
    for (    String connectorName : operation.get(CONNECTOR).keys()) {
      ModelNode connectorRef=connectorRefs.get(connectorName);
      connectorNames.add(connectorName);
    }
    config.setConnectorNames(connectorNames);
  }
  config.setConsumerMaxRate(CONSUMER_MAX_RATE.validateResolvedOperation(operation).asInt());
  config.setConsumerWindowSize(CONSUMER_WINDOW_SIZE.validateResolvedOperation(operation).asInt());
  final ModelNode discoveryGroupName=DISCOVERY_GROUP_NAME.validateResolvedOperation(operation);
  if (discoveryGroupName.isDefined()) {
    config.setDiscoveryGroupName(discoveryGroupName.asString());
  }
  config.setDupsOKBatchSize(DUPS_OK_BATCH_SIZE.validateResolvedOperation(operation).asInt());
  config.setFailoverOnInitialConnection(FAILOVER_ON_INITIAL_CONNECTION.validateResolvedOperation(operation).asBoolean());
  final ModelNode groupId=GROUP_ID.validateResolvedOperation(operation);
  if (groupId.isDefined()) {
    config.setGroupID(groupId.asString());
  }
  final ModelNode lbcn=LOAD_BALANCING_CLASS_NAME.validateResolvedOperation(operation);
  if (lbcn.isDefined()) {
    config.setLoadBalancingPolicyClassName(lbcn.asString());
  }
  config.setMaxRetryInterval(MAX_RETRY_INTERVAL.validateResolvedOperation(operation).asLong());
  config.setMinLargeMessageSize(MIN_LARGE_MESSAGE_SIZE.validateResolvedOperation(operation).asInt());
  config.setPreAcknowledge(PRE_ACK.validateResolvedOperation(operation).asBoolean());
  config.setProducerMaxRate(PRODUCER_MAX_RATE.validateResolvedOperation(operation).asInt());
  config.setProducerWindowSize(PRODUCER_WINDOW_SIZE.validateResolvedOperation(operation).asInt());
  config.setReconnectAttempts(RECONNECT_ATTEMPTS.validateResolvedOperation(operation).asInt());
  config.setRetryInterval(RETRY_INTERVAL.validateResolvedOperation(operation).asLong());
  config.setRetryIntervalMultiplier(RETRY_INTERVAL_MULTIPLIER.validateResolvedOperation(operation).asDouble());
  config.setScheduledThreadPoolMaxSize(CONNECTION_SCHEDULED_THREAD_POOL_MAX_SIZE.validateResolvedOperation(operation).asInt());
  config.setThreadPoolMaxSize(CONNECTION_THREAD_POOL_MAX_SIZE.validateResolvedOperation(operation).asInt());
  config.setTransactionBatchSize(TRANSACTION_BATCH_SIZE.validateResolvedOperation(operation).asInt());
  config.setUseGlobalPools(USE_GLOBAL_POOLS.validateResolvedOperation(operation).asBoolean());
  return config;
}
