{
  ClassLoader contextClassLoader=Thread.currentThread().getContextClassLoader();
  final Referenceable referenceable;
  try {
    Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());
    final SPIProvider spiProvider=SPIProviderResolver.getInstance().getProvider();
    final ServiceRefHandler serviceRefHandler=spiProvider.getSPI(ServiceRefHandlerFactory.class).getServiceRefHandler();
    return serviceRefHandler.createReferenceable(serviceRef);
  }
  finally {
    Thread.currentThread().setContextClassLoader(contextClassLoader);
  }
}
