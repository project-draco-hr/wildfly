{
  KernelServices mainServices=createKernelServicesBuilder(new AdditionalInitialization(){
    @Override protected ProcessType getProcessType(){
      return ProcessType.STANDALONE_SERVER;
    }
  }
).setSubsystemXml(getSubsystemXml()).build();
  PathAddress address=PathAddress.pathAddress(FederationExtension.SUBSYSTEM_PATH).append(ModelElement.FEDERATION.getName(),"federation-without-signatures").append(ModelElement.IDENTITY_PROVIDER.getName(),"idp.war").append(ModelElement.IDENTITY_PROVIDER_TRUST_DOMAIN.getName(),"invalid-trust-domain");
  ModelNode operation=Util.createAddOperation(address);
  operation.get(ModelElement.IDENTITY_PROVIDER_TRUST_DOMAIN_CERT_ALIAS.getName()).set("servercert");
  mainServices.executeForFailure(operation);
}
