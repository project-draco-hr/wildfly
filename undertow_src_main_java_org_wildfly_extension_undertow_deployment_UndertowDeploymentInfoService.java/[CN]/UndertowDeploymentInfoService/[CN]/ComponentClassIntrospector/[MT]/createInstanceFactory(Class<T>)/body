{
  try {
    final ComponentRegistry.ComponentManagedReferenceFactory component=componentRegistry.getComponentsByClass().get(clazz);
    if (component == null) {
      return new ConstructorInstanceFactory<>(clazz.getDeclaredConstructor());
    }
 else {
      return new ManagedReferenceInstanceFactory<>(component);
    }
  }
 catch (  NoSuchMethodException e) {
    throw new RuntimeException(e);
  }
}
