{
  K key=object.getId();
  SerializationGroupMember<K,V,G> entry=peek(key);
  entry.lock();
  try {
    if (entry.getGroup() != null) {
      throw EjbMessages.MESSAGES.existingSerializationGroup(key,entry.getGroup());
    }
    if (!memberContainer.isCompatibleWith(group)) {
      throw EjbMessages.MESSAGES.incompatibleSerializationGroup(object,group);
    }
    entry.setGroup(group);
    entry.getGroup().addMember(entry);
  }
  finally {
    entry.unlock();
  }
}
