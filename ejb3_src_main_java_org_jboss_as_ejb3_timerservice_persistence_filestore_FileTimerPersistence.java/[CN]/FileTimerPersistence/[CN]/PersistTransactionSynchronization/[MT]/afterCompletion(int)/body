{
  if (timer == null) {
    return;
  }
  try {
    lock.lock();
    if (status == Status.STATUS_COMMITTED) {
      final Map<String,TimerEntity> map=getTimers(timer.getTimedObjectId());
      if (timer.getTimerState() == TimerState.CANCELED || timer.getTimerState() == TimerState.EXPIRED) {
        map.remove(timer.getId());
      }
 else {
        map.put(timer.getId(),timer);
      }
      writeFile(timer);
    }
  }
  finally {
    lock.unlock();
  }
}
