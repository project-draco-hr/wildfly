{
  try {
    final int status=transactionManager.getValue().getStatus();
    if (status == Status.STATUS_UNKNOWN || status == Status.STATUS_NO_TRANSACTION) {
      return timerEntity;
    }
    final String key=timerTransactionKey(timerEntity);
    TimerEntity existing=(TimerEntity)transactionSynchronizationRegistry.getValue().getResource(key);
    return existing != null ? existing : timerEntity;
  }
 catch (  SystemException e) {
    throw new RuntimeException(e);
  }
}
