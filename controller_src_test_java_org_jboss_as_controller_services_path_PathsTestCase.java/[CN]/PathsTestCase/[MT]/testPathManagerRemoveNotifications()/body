{
  testAddPath();
  ServiceController<?> pathManagerService=getContainer().getRequiredService(PathManagerService.SERVICE_NAME);
  PathManager pathManager=(PathManager)pathManagerService.getValue();
  PerformChangeCallback allCallback1=new PerformChangeCallback(pathManager,"add1",Event.ADDED,Event.REMOVED,Event.UPDATED);
  PerformChangeCallback addCallback1=new PerformChangeCallback(pathManager,"add1",Event.ADDED);
  PerformChangeCallback changeCallback1=new PerformChangeCallback(pathManager,"add1",Event.UPDATED);
  PerformChangeCallback removeCallback1=new PerformChangeCallback(pathManager,"add1",Event.REMOVED);
  PerformChangeCallback allCallback2=new PerformChangeCallback(pathManager,"add2",Event.ADDED,Event.REMOVED,Event.UPDATED);
  ModelNode operation=createOperation(REMOVE);
  operation.get(OP_ADDR).add(PATH,"add2");
  executeForResult(operation);
  allCallback1.checkDone();
  addCallback1.checkDone();
  changeCallback1.checkDone();
  removeCallback1.checkDone();
  allCallback2.checkEvent(Event.REMOVED,"add2","123","add1");
  allCallback2.checkDone();
  operation=createOperation(REMOVE);
  operation.get(OP_ADDR).add(PATH,"add1");
  executeForResult(operation);
  allCallback1.checkEvent(Event.REMOVED,"add1","xyz",null);
  allCallback1.checkDone();
  addCallback1.checkDone();
  changeCallback1.checkDone();
  removeCallback1.checkEvent(Event.REMOVED,"add1","xyz",null);
  removeCallback1.checkDone();
  allCallback2.checkDone();
  allCallback1.remove();
  addCallback1.remove();
  changeCallback1.remove();
  removeCallback1.remove();
  allCallback2.remove();
  testAddPath();
  operation=createOperation(REMOVE);
  operation.get(OP_ADDR).add(PATH,"add2");
  executeForResult(operation);
  operation=createOperation(REMOVE);
  operation.get(OP_ADDR).add(PATH,"add1");
  executeForResult(operation);
  allCallback1.checkDone();
  addCallback1.checkDone();
  changeCallback1.checkDone();
  removeCallback1.checkDone();
  allCallback2.checkDone();
}
