{
  ByteArrayOutputStream baos=new ByteArrayOutputStream(1024);
  Checksum chksum=new Adler32();
  CheckedOutputStream cos=new CheckedOutputStream(baos,chksum);
  ObjectOutputStream oos=null;
  try {
    oos=new ObjectOutputStream(cos);
    oos.writeObject(command);
    oos.close();
    oos=null;
    communicationHandler.sendMessage(baos.toByteArray(),chksum.getValue());
  }
  finally {
    if (oos != null) {
      try {
        oos.close();
      }
 catch (      IOException ignored) {
      }
    }
  }
}
