{
  final Thread thread=FACTORY.newThread(new Runnable(){
    public void run(){
      try {
        final InputStreamReader reader=new InputStreamReader(errorStream);
        final BufferedReader bufferedReader=new BufferedReader(reader);
        String line;
        try {
          while ((line=bufferedReader.readLine()) != null) {
            System.err.println("Server reported error: " + line.trim());
          }
        }
 catch (        IOException e) {
        }
      }
  finally {
        try {
          errorStream.close();
        }
 catch (        IOException e) {
        }
      }
    }
  }
);
  thread.start();
  FACTORY.newThread(new Runnable(){
    public void run(){
      String cmd;
      try {
        while ((cmd=readCommand(inputStream)) != null) {
          System.out.println("Got msg: " + cmd);
        }
      }
 catch (      IOException e) {
      }
 finally {
        try {
          inputStream.close();
        }
 catch (        IOException e) {
        }
      }
    }
  }
);
}
