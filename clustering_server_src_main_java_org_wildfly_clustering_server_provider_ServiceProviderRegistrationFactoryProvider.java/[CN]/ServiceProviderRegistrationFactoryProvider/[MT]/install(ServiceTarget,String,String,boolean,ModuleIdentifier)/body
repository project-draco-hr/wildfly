{
  ServiceName name=getServiceName(containerName,cacheName);
  ContextNames.BindInfo bindInfo=createBinding(containerName,cacheName);
  logger.debugf("Installing %s service, bound to ",name.getCanonicalName(),bindInfo.getAbsoluteJndiName());
  ServiceProviderRegistrationFactoryConfig config=new ServiceProviderRegistrationFactoryConfig(name);
  Service<ServiceProviderRegistrationFactory> service=new ServiceProviderRegistrationFactoryService(config);
  ServiceBuilder<?> builder=AsynchronousService.addService(target,name,service).addDependency(CacheService.getServiceName(containerName,cacheName),Cache.class,config.getCacheInjector()).addDependency(CacheGroupProvider.getServiceName(containerName,cacheName),Group.class,config.getGroupInjector()).addDependency(CommandDispatcherFactoryProvider.getServiceName(containerName),CommandDispatcherFactory.class,config.getCommandDispatcherFactoryInjector()).setInitialMode(ServiceController.Mode.ON_DEMAND);
  BinderService binder=new BinderService(bindInfo.getBindName());
  ServiceBuilder<?> binderBuilder=target.addService(bindInfo.getBinderServiceName(),binder).addAliases(ContextNames.JAVA_CONTEXT_SERVICE_NAME.append(bindInfo.getBindName())).addDependency(name,ServiceProviderRegistrationFactory.class,new ManagedReferenceInjector<ServiceProviderRegistrationFactory>(binder.getManagedObjectInjector())).addDependency(bindInfo.getParentContextServiceName(),ServiceBasedNamingStore.class,binder.getNamingStoreInjector()).setInitialMode(ServiceController.Mode.PASSIVE);
  if (defaultCache) {
    ContextNames.BindInfo info=createBinding(containerName,CacheContainer.DEFAULT_CACHE_ALIAS);
    binderBuilder.addAliases(info.getBinderServiceName(),ContextNames.JAVA_CONTEXT_SERVICE_NAME.append(info.getBindName()));
    builder.addAliases(getServiceName(containerName,CacheContainer.DEFAULT_CACHE_ALIAS));
  }
  return Arrays.asList(builder.install(),binderBuilder.install());
}
