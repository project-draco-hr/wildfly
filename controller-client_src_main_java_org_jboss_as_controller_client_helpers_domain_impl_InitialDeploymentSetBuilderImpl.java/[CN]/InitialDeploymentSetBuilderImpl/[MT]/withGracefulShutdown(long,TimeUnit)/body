{
  DeploymentSetPlanImpl currentSet=getCurrentDeploymentSetPlan();
  long period=timeUnit.toMillis(timeout);
  if (currentSet.isShutdown() && period != currentSet.getGracefulShutdownTimeout()) {
    throw new IllegalStateException("Graceful shutdown already configured with a timeout of " + currentSet.getGracefulShutdownTimeout() + " ms");
  }
  DeploymentSetPlanImpl newSet=currentSet.setGracefulTimeout(period);
  return new InitialDeploymentSetBuilderImpl(this,newSet);
}
