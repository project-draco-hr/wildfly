{
  DeploymentSetPlanImpl currentSet=getCurrentDeploymentSetPlan();
  long period=timeUnit.toMillis(timeout);
  if (currentSet.isShutdown() && period != currentSet.getGracefulShutdownTimeout()) {
    throw ControllerClientLogger.ROOT_LOGGER.gracefulShutdownAlreadyConfigured(currentSet.getGracefulShutdownTimeout());
  }
  DeploymentSetPlanImpl newSet=currentSet.setGracefulTimeout(period);
  return new InitialDeploymentSetBuilderImpl(this,newSet);
}
