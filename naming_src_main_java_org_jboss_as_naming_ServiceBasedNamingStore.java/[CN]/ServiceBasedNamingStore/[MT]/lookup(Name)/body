{
  if (name.isEmpty()) {
    return new NamingContext(EMPTY_NAME,this,null);
  }
  final ServiceName lookupName=buildServiceName(name);
  Object obj=lookup(lookupName);
  if (obj == null) {
    final ServiceName lower=boundServices.lower(lookupName);
    if (lower != null && lower.isParentOf(lookupName)) {
      obj=lookup(lower);
      checkReferenceForContinuation(name,obj);
      return new ResolveResult(obj,suffix(lower,lookupName));
    }
    final ServiceName ceiling=boundServices.ceiling(lookupName);
    if (ceiling != null && lookupName.isParentOf(ceiling)) {
      return new NamingContext((Name)name.clone(),this,null);
    }
    throw new NameNotFoundException(name.toString() + " -- " + lookupName);
  }
  return obj;
}
