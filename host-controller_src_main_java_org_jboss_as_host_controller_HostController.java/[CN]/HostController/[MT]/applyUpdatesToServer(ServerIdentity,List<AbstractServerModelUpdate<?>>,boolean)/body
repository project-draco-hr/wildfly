{
  final ManagedServer client=servers.get(ManagedServer.getServerProcessName(server.getServerName()));
  List<UpdateResultHandlerResponse<?>> responses;
  if (client == null) {
    responses=new ArrayList<UpdateResultHandlerResponse<?>>();
    final UpdateResultHandlerResponse<?> failure=UpdateResultHandlerResponse.createFailureResponse(new IllegalStateException("unknown host " + server.getHostName()));
    for (int i=0; i < updates.size(); i++) {
      responses.add(failure);
    }
  }
 else {
    responses=client.applyUpdates(updates,allowOverallRollback);
  }
  return responses;
}
