{
  ServerInventory result=null;
synchronized (serverInventoryLock) {
    if (serverInventoryLock.get()) {
      result=serverInventory;
    }
 else {
      try {
        serverInventoryLock.wait(SERVER_INVENTORY_TIMEOUT);
        if (serverInventoryLock.get()) {
          result=serverInventory;
        }
      }
 catch (      InterruptedException e) {
        Thread.currentThread().interrupt();
      }
    }
  }
  if (result == null) {
    throw new IllegalStateException();
  }
  return result;
}
