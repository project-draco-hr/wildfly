{
  if (unregisteredHostChannels.containsKey(hostName)) {
    throw new IllegalArgumentException("Already have a connection for host " + hostName);
  }
  unregisteredHostChannels.put(hostName,channel);
  proxyCreatedCallbacks.put(hostName,callback);
  channel.addCloseHandler(new CloseHandler<Channel>(){
    public void handleClose(    final Channel closed,    final IOException exception){
      unregisteredHostChannels.remove(hostName);
      proxyCreatedCallbacks.remove(hostName);
    }
  }
);
}
