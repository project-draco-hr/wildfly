{
  final Map<String,NewProxyController> hostProxies=new ConcurrentHashMap<String,NewProxyController>();
  final LocalHostControllerInfoImpl hostControllerInfo=new LocalHostControllerInfoImpl(processState);
  final PrepareStepHandler prepareStepHandler=new PrepareStepHandler(hostControllerInfo,hostProxies);
  DomainModelControllerService service=new DomainModelControllerService(environment,processState,hostControllerInfo,new HostControllerConfigurationPersister(environment),hostProxies,prepareStepHandler);
  return serviceTarget.addService(SERVICE_NAME,service).addDependency(NewHostControllerBootstrap.SERVICE_NAME_BASE.append("executor"),ExecutorService.class,service.injectedExecutorService).setInitialMode(ServiceController.Mode.ACTIVE).install();
}
