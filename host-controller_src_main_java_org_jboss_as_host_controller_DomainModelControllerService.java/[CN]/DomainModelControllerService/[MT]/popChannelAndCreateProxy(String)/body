{
  final Channel channel=unregisteredHostChannels.remove(hostName);
  if (channel == null) {
    throw new IllegalArgumentException("No channel for host " + hostName);
  }
  channel.addCloseHandler(new CloseHandler<Channel>(){
    public void handleClose(    final Channel closed,    final IOException exception){
      unregisterRemoteHost(hostName);
    }
  }
);
  final PathAddress addr=PathAddress.pathAddress(PathElement.pathElement(ModelDescriptionConstants.HOST,hostName));
  RemoteProxyController proxy=RemoteProxyController.create(proxyExecutor,addr,ProxyOperationAddressTranslator.HOST,channel);
  ProxyCreatedCallback callback=proxyCreatedCallbacks.remove(hostName);
  if (callback != null) {
    callback.proxyCreated(proxy);
  }
  return proxy;
}
