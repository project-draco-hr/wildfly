{
  final ServiceTarget serviceTarget=context.getServiceTarget();
  try {
    super.boot(configurationPersister.load());
    NewServerInventoryService inventory=setupInventoryAndStartRemoting(serviceTarget);
    if (!hostControllerInfo.isMasterDomainController()) {
      Future<NewMasterDomainControllerClient> clientFuture=NewRemoteDomainConnectionService.install(serviceTarget,getValue(),hostControllerInfo.getLocalHostName(),hostControllerInfo.getRemoteDomainControllerHost(),hostControllerInfo.getRemoteDomainControllertPort(),remoteFileRepository);
      try {
        NewMasterDomainControllerClient client=clientFuture.get();
        client.register();
      }
 catch (      InterruptedException e) {
        Thread.currentThread().interrupt();
        throw new RuntimeException(e);
      }
catch (      ExecutionException e) {
        throw new RuntimeException(e);
      }
    }
 else {
      ConfigurationPersister domainPersister=configurationPersister.getDomainPersister();
      super.boot(domainPersister.load());
      RemotingServices.installChannelServices(serviceTarget,new NewMasterDomainControllerOperationHandlerService(this,this),DomainModelControllerService.SERVICE_NAME,RemotingServices.DOMAIN_CHANNEL,null,null);
    }
    Future<NewServerInventory> future=inventory.getInventoryFuture();
    try {
      serverInventory=future.get();
      startServers();
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new RuntimeException(e);
    }
catch (    ExecutionException e) {
      throw new RuntimeException(e);
    }
  }
  finally {
    finishBoot();
  }
}
