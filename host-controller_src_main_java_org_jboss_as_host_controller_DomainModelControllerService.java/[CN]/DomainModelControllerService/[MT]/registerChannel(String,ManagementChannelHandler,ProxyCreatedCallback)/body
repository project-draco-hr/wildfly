{
  if (unregisteredHostChannels.containsKey(hostName)) {
    throw MESSAGES.hostNameAlreadyConnected(hostName);
  }
  unregisteredHostChannels.put(hostName,channelHandler);
  proxyCreatedCallbacks.put(hostName,callback);
  try {
    channelHandler.getChannel().addCloseHandler(new CloseHandler<Channel>(){
      public void handleClose(      final Channel closed,      final IOException exception){
        unregisteredHostChannels.remove(hostName);
        proxyCreatedCallbacks.remove(hostName);
      }
    }
);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
