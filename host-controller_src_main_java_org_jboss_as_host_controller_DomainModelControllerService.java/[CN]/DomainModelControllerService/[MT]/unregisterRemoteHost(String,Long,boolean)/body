{
  DomainSlaveHostRegistrations.DomainHostConnection hostRegistration=slaveHostRegistrations.getRegistration(id);
  if (hostRegistration != null) {
    if ((remoteConnectionId == null || remoteConnectionId.equals(hostRegistration.getRemoteConnectionId()))) {
      final SlaveHostPinger pinger=hostRegistration.getPinger();
      if (pinger != null) {
        pinger.cancel();
      }
      boolean registered=hostProxies.remove(id) != null;
      runtimeIgnoreTransformationRegistry.unregisterHost(id);
      modelNodeRegistration.unregisterProxyController(PathElement.pathElement(HOST,id));
      if (registered) {
        final String address=hostRegistration.getAddress();
        final Event event=cleanShutdown ? create(HostConnectionInfo.EventType.UNREGISTERED,address) : create(HostConnectionInfo.EventType.UNCLEAN_UNREGISTRATION,address);
        slaveHostRegistrations.unregisterHost(id,event);
        if (!cleanShutdown) {
          DOMAIN_LOGGER.lostConnectionToRemoteHost(id);
        }
 else {
          DOMAIN_LOGGER.unregisteredRemoteSlaveHost(id);
        }
      }
    }
  }
}
