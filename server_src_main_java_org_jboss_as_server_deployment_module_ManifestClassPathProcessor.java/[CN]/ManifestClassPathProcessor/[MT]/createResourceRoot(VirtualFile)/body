{
  try {
    final Closeable closable=file.isFile() ? VFS.mountZip(file,file,TempFileProviderService.provider()) : null;
    final MountHandle mountHandle=new MountHandle(closable);
    final ResourceRoot resourceRoot=new ResourceRoot(file,mountHandle);
    ModuleRootMarker.mark(resourceRoot);
    ResourceRootIndexer.indexResourceRoot(resourceRoot);
    return resourceRoot;
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
