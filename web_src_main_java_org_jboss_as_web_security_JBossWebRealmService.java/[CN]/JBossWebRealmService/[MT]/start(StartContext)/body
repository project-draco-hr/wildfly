{
  JBossWebRealm jbossWebRealm=new JBossWebRealm();
  SecurityDomainContext sdc=securityDomainContextValue.getValue();
  jbossWebRealm.setAuthenticationManager(sdc.getAuthenticationManager());
  jbossWebRealm.setAuthorizationManager(sdc.getAuthorizationManager());
  jbossWebRealm.setMappingManager(sdc.getMappingManager());
  jbossWebRealm.setAuditManager(sdc.getAuditManager());
  jbossWebRealm.setDeploymentUnit(deploymentUnit);
  this.realm=jbossWebRealm;
  try {
    HttpServletRequestPolicyContextHandler handler=new HttpServletRequestPolicyContextHandler();
    PolicyContext.registerHandler(SecurityConstants.WEB_REQUEST_KEY,handler,true);
  }
 catch (  Exception e) {
    throw new StartException(e);
  }
}
