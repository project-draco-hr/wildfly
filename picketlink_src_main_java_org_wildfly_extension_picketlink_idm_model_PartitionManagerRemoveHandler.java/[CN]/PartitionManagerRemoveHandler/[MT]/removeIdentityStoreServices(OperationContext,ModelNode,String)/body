{
  ModelNode identityConfigurationNode=model.get(IDENTITY_CONFIGURATION.getName());
  if (!identityConfigurationNode.isDefined()) {
    throw PicketLinkLogger.ROOT_LOGGER.idmNoIdentityConfigurationProvided();
  }
  for (  Property identityConfiguration : identityConfigurationNode.asPropertyList()) {
    String configurationName=identityConfiguration.getName();
    ModelNode value=identityConfiguration.getValue();
    if (value.isDefined()) {
      for (      Property store : value.asPropertyList()) {
        context.removeService(PartitionManagerService.createIdentityStoreServiceName(federationName,configurationName,store.getName()));
      }
    }
  }
}
