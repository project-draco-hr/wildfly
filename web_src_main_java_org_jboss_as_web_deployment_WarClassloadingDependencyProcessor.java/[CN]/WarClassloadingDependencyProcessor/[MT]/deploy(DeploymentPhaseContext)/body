{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  if (!DeploymentTypeMarker.isType(DeploymentType.WAR,deploymentUnit)) {
    return;
  }
  final ModuleLoader moduleLoader=Module.getSystemModuleLoader();
  final ModuleLoader deploymentModuleLoader=deploymentUnit.getAttachment(Attachments.SERVICE_MODULE_LOADER);
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,JAVAX_EE_API,false,false,false));
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,JBOSS_WEB,false,false,false));
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,SYSTEM,false,false,false));
  deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(moduleLoader,LOG,false,false,false));
  if (deploymentUnit.getParent() != null) {
    final DeploymentUnit parent=deploymentUnit.getParent();
    final ModuleIdentifier parentModule=parent.getAttachment(Attachments.MODULE_IDENTIFIER);
    if (parentModule != null) {
      deploymentUnit.addToAttachmentList(Attachments.MODULE_DEPENDENCIES,new ModuleDependency(deploymentModuleLoader,parentModule,false,false,false));
    }
  }
}
