{
  context.startSubsystemElement(Namespace.CURRENT.getUriString(),false);
  ModelNode model=context.getModelNode();
  UndertowRootDefinition.DEFAULT_SERVER.marshallAsAttribute(model,writer);
  UndertowRootDefinition.DEFAULT_VIRTUAL_HOST.marshallAsAttribute(model,writer);
  UndertowRootDefinition.DEFAULT_SERVLET_CONTAINER.marshallAsAttribute(model,writer);
  UndertowRootDefinition.INSTANCE_ID.marshallAsAttribute(model,writer);
  if (model.hasDefined(Constants.BUFFER_CACHE)) {
    writer.writeStartElement(Constants.BUFFER_CACHES);
    BufferCacheDefinition.INSTANCE.persist(writer,model);
    writer.writeEndElement();
  }
  ServerDefinition.INSTANCE.persist(writer,model);
  ServletContainerDefinition.INSTANCE.persist(writer,model);
  writer.writeEndElement();
}
