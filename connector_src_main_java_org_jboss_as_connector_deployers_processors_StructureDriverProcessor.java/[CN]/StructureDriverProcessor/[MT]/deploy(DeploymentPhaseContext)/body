{
  final DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  Boolean ignore=deploymentUnit.getAttachment(Attachments.IGNORE_OSGI);
  if (ignore != null && ignore.booleanValue()) {
    return;
  }
  List<ResourceRoot> resourceRoots=DeploymentUtils.allResourceRoots(deploymentUnit);
  for (  ResourceRoot resourceRoot : resourceRoots) {
    final VirtualFile deploymentRoot=resourceRoot.getRoot();
    if (deploymentRoot.getChild("META-INF/services/java.sql.Driver") != null) {
      deploymentUnit.putAttachment(Attachments.IGNORE_OSGI,Boolean.TRUE);
      break;
    }
  }
}
