{
  QueueConnection conn=null;
  QueueSession session=null;
  try {
    QueueConnectionFactory qcf=lookup("RemoteConnectionFactory",QueueConnectionFactory.class);
    Queue queue=lookup("queue/test",Queue.class);
    conn=qcf.createQueueConnection();
    conn.start();
    session=conn.createQueueSession(false,QueueSession.AUTO_ACKNOWLEDGE);
    QueueReceiver recv=session.createReceiver(queue);
    recv.setMessageListener(new MessageListener(){
      @Override public void onMessage(      Message message){
        TextMessage msg=(TextMessage)message;
        try {
          System.out.println("---->Received from queue: " + msg.getText());
        }
 catch (        JMSException e) {
          e.printStackTrace();
        }
      }
    }
);
    connect("other?value=One");
    connect("simple?value=Two");
    connect("other?value=Three");
  }
  finally {
    conn.close();
  }
}
