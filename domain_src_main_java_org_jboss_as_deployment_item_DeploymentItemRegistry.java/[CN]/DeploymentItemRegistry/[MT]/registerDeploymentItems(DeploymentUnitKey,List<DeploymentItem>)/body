{
  cache.put(key,deploymentItems);
  try {
    final Marshaller marshaller=marshallerFactory.createMarshaller(marshallingConfiguration);
    final ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();
    marshaller.start(Marshalling.createByteOutput(byteArrayOutputStream));
    marshaller.writeInt(deploymentItems.size());
    for (    DeploymentItem deploymentItem : deploymentItems) {
      marshaller.writeObject(deploymentItem);
    }
    marshaller.finish();
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
