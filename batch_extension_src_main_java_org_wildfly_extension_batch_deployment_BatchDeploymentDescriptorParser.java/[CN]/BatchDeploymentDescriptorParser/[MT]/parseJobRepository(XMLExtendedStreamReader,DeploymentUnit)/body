{
  if (reader.hasNext() && reader.nextTag() != END_ELEMENT) {
    final String localName=reader.getLocalName();
    final Element element=Element.forName(localName);
    if (element == Element.IN_MEMORY) {
      ParseUtils.requireNoContent(reader);
      return new InMemoryRepository();
    }
 else     if (element == Element.JDBC) {
      final String value=ParseUtils.readStringAttributeElement(reader,Attribute.JNDI_NAME.getLocalName());
      final Properties configProperties=new Properties();
      configProperties.setProperty(JobRepositoryFactory.JNDI_NAME,value);
      return JdbcRepository.create(configProperties);
    }
 else {
      throw ParseUtils.unexpectedElement(reader);
    }
  }
  BatchLogger.LOGGER.emptyJobRepositoryElement(deploymentUnit.getName());
  return null;
}
