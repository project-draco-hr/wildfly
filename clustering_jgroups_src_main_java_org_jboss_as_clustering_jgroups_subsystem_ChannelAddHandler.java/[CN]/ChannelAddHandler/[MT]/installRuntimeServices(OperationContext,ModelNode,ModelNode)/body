{
  PathAddress address=PathAddress.pathAddress(operation.get(OP_ADDR));
  String channelName=address.getLastElement().getValue();
  String stackName=ModelNodes.asString(ChannelResourceDefinition.STACK.resolveModelAttribute(context,model),ChannelFactoryService.DEFAULT);
  ModuleIdentifier module=ModelNodes.asModuleIdentifier(ChannelResourceDefinition.MODULE.resolveModelAttribute(context,model));
  ServiceTarget target=context.getServiceTarget();
  new InjectedValueServiceBuilder(target).build(ChannelService.getFactoryServiceName(channelName),ChannelFactoryService.getServiceName(stackName),ChannelFactory.class).install();
  ChannelService.build(target,channelName).setInitialMode(ON_DEMAND).install();
  ConnectedChannelService.build(target,channelName).setInitialMode(ON_DEMAND).install();
  new BinderServiceBuilder(target).build(ChannelService.createChannelBinding(channelName),ChannelService.getServiceName(channelName),Channel.class).install();
  ForkChannelFactoryService.build(target,channelName).setInitialMode(ON_DEMAND).install();
  new BinderServiceBuilder(target).build(ChannelFactoryService.createChannelFactoryBinding(channelName),ChannelFactoryService.getServiceName(channelName),ChannelFactory.class).install();
  for (  GroupServiceInstaller installer : ServiceLoader.load(ClusteredGroupServiceInstaller.class,ClusteredGroupServiceInstaller.class.getClassLoader())) {
    JGroupsLogger.ROOT_LOGGER.debugf("Installing %s for channel %s",installer.getClass().getSimpleName(),channelName);
    installer.install(target,channelName,module);
  }
}
