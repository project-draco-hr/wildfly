{
  final EntityBeanComponentInstance instance;
  try {
    instance=ejbComponent.getCache().get(timer.getPrimaryKey());
    ejbComponent.getCache().reference(instance);
  }
 catch (  Exception e) {
    throw new BeanRemovedException(e);
  }
  boolean discarded=false;
  try {
    instance.invokeTimeoutMethod(timeoutMethod,timer);
  }
 catch (  Exception ex) {
    if (ejbComponent.getApplicationException(ex.getClass(),timeoutMethod) != null) {
      throw ex;
    }
    if (ex instanceof ConcurrentAccessTimeoutException || ex instanceof ConcurrentAccessException) {
      throw ex;
    }
    if (ex instanceof RuntimeException || ex instanceof RemoteException) {
      discarded=true;
      instance.discard();
    }
    throw ex;
  }
catch (  final Error e) {
    discarded=true;
    instance.discard();
    throw e;
  }
catch (  final Throwable t) {
    discarded=true;
    instance.discard();
    throw new RuntimeException(t);
  }
 finally {
    if (!discarded) {
      ejbComponent.getCache().release(instance,true);
    }
  }
}
