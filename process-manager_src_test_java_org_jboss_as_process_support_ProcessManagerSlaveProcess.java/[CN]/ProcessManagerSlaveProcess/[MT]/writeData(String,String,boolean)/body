{
  if (!message.contains("$"))   writeData(sourceProcessName + "-" + processName+ "-"+ message);
  if (message.startsWith("Fwd$")) {
    writeData(sourceProcessName + "-" + processName+ "-"+ message);
    int index=message.indexOf('$',5);
    String nextProcess=message.substring(4,index);
    message=message.substring(index + 1);
    debug(processName,"Sending data to " + nextProcess + " '"+ message+ "'");
    if (!bytes)     sendMessage(nextProcess,Collections.singletonList(message));
 else     sendMessage(nextProcess,message.getBytes());
  }
 else   if (message.startsWith("Bcst$")) {
    writeData(sourceProcessName + "-" + processName+ "-"+ message);
    message=message.substring(5);
    debug(processName,"broadcasting data '" + message + "'");
    if (!bytes)     broadcastMessage(Collections.singletonList(message));
 else     broadcastMessage(message.getBytes());
  }
 else   if (message.startsWith("Add$")) {
    int index1=message.indexOf("$");
    int index2=message.indexOf("$",index1 + 1);
    String proc=message.substring(index1 + 1,index2);
    String clazz=message.substring(index2 + 1);
    debug(processName,"Adding " + proc + ":"+ clazz);
    addProcess(proc,clazz);
    writeData(processName + "-" + message);
  }
 else   if (message.startsWith("Start$")) {
    int index=message.indexOf("$");
    String proc=message.substring(index + 1);
    debug(processName,"Starting " + proc + ":"+ proc);
    startProcess(proc);
    writeData(processName + "-" + message);
  }
 else   if (message.startsWith("Stop$")) {
    int index=message.indexOf("$");
    String proc=message.substring(index + 1);
    debug(processName,"Stopping " + proc + ":"+ proc);
    stopProcess(proc);
    writeData(processName + "-" + message);
  }
 else   if (message.startsWith("Remove$")) {
    int index=message.indexOf("$");
    String proc=message.substring(index + 1);
    debug(processName,"Removing " + proc + ":"+ proc);
    removeProcess(proc);
    writeData(processName + "-" + message);
  }
}
