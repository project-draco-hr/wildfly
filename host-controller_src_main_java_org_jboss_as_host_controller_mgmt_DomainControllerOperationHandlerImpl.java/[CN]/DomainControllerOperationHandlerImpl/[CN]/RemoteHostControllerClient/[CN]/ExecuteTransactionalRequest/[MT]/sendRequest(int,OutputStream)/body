{
  output.write(TRANSACTION_ID);
  transactionId.writeExternal(output);
  output.write(ModelControllerClientProtocol.PARAM_OPERATION);
  executionContext.getOperation().writeExternal(output);
  List<InputStream> streams=executionContext.getInputStreams();
  for (  InputStream in : streams) {
    output.write(ModelControllerClientProtocol.PARAM_INPUT_STREAM);
    if (in == null) {
      output.write(0);
      continue;
    }
    output.write(1);
    try {
      byte[] buffer=new byte[8192];
      int read;
      while ((read=in.read(buffer)) != -1) {
        output.write(buffer,0,read);
      }
    }
  finally {
      StreamUtils.safeClose(in);
    }
  }
  output.write(ModelControllerClientProtocol.PARAM_REQUEST_END);
}
