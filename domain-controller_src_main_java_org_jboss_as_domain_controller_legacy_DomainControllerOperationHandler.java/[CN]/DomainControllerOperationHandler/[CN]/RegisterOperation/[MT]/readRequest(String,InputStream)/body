{
  ByteDataInput input=null;
  try {
    input=new SimpleByteDataInput(inputStream);
    expectHeader(input,DomainControllerProtocol.PARAM_HOST_CONTROLLER_HOST);
    final int addressSize=input.readInt();
    byte[] addressBytes=new byte[addressSize];
    input.readFully(addressBytes);
    expectHeader(input,DomainControllerProtocol.PARAM_HOST_CONTROLLER_PORT);
    final int port=input.readInt();
    final InetAddress address=InetAddress.getByAddress(addressBytes);
    final HostControllerClient client=new RemoteHostControllerClient(hostControllerId,address,port,executorService,threadFactory);
    domainController.addClient(client);
    log.infof("host controller registered [%s]",client);
    input.close();
  }
  finally {
    safeClose(input);
  }
}
