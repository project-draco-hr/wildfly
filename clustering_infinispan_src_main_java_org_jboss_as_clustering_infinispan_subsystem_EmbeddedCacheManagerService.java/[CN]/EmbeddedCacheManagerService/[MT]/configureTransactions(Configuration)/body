{
  boolean transactional=config.isTransactionalCache();
  boolean synchronizations=transactional && config.isUseSynchronizationForTransactions();
  config.fluent().transaction().transactionManagerLookup(transactional ? new TransactionManagerProvider(this.configuration.getTransactionManager()) : null).transactionSynchronizationRegistryLookup(synchronizations ? new TransactionSynchronizationRegistryProvider(this.configuration.getTransactionSynchronizationRegistry()) : null);
}
