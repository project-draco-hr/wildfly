{
  DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  List<HandlerWrapper> attachment=deploymentUnit.getAttachment(UndertowHandlerWrapperDeploymentProcessor.UNDERTOW_INITIAL_HANDLER_CHAIN_WRAPPERS);
  if (attachment == null) {
    attachment=new LinkedList<HandlerWrapper>();
    deploymentUnit.putAttachment(UndertowHandlerWrapperDeploymentProcessor.UNDERTOW_INITIAL_HANDLER_CHAIN_WRAPPERS,attachment);
  }
  attachment.add(new HandlerWrapper(){
    @Override public HttpHandler wrap(    final HttpHandler handler){
      return new RequestCountHttpHandler(handler);
    }
  }
);
}
