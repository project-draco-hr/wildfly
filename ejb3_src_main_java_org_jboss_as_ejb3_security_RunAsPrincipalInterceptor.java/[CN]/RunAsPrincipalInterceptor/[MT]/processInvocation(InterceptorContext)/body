{
  final SecurityDomain securityDomain=context.getPrivateData(SecurityDomain.class);
  Assert.checkNotNullParam("securityDomain",securityDomain);
  final SecurityIdentity newIdentity=securityDomain.getCurrentSecurityIdentity().createRunAsIdentity(runAsPrincipal);
  return newIdentity.runAs(context);
}
