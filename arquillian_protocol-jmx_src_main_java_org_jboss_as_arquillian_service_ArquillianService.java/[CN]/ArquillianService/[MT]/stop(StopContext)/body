{
  log.debugf("Stopping Arquillian Test Runner");
  if (resource != null) {
    XEnvironment env=injectedEnvironment.getValue();
    env.uninstallResources(resource);
  }
  try {
    if (jmxTestRunner != null) {
      jmxTestRunner.unregisterMBean(injectedMBeanServer.getValue());
    }
  }
 catch (  Exception ex) {
    log.errorf(ex,"Cannot stop Arquillian Test Runner");
  }
 finally {
    context.getController().getServiceContainer().removeListener(listener);
  }
}
