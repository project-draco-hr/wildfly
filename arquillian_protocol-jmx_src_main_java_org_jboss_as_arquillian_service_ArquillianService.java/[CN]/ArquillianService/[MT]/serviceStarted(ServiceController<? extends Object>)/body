{
  ServiceName serviceName=controller.getName();
  String simpleName=serviceName.getSimpleName();
  if (JBOSS_DEPLOYMENT.isParentOf(serviceName) && simpleName.equals(Phase.INSTALL.toString())) {
    ServiceName parentName=serviceName.getParent();
    ServiceController<?> parentController=serviceContainer.getService(parentName);
    DeploymentUnit deploymentUnit=(DeploymentUnit)parentController.getValue();
    this.processor=new ArquillianRunWithProcessor(deploymentUnit);
    ArquillianConfig arqConfig=processor.getArquillianConfig();
    if (arqConfig != null) {
      new ArquillianDeploymentProcessor(deploymentUnit).deploy(serviceTarget);
      new ArquillianDependencyProcessor(deploymentUnit).deploy();
      log.debug("Registering Arquillian Deployment: " + parentName);
      registerDeployment(parentName,arqConfig);
    }
  }
}
