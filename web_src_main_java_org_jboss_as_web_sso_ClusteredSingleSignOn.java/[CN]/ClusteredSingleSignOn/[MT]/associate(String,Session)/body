{
  log.tracef("Associate sso id %s with session %s",ssoId,session);
  SingleSignOnEntry sso=getSingleSignOnEntry(ssoId);
  boolean added=false;
  if (sso != null) {
    added=sso.addSession2(this,session);
  }
synchronized (reverse) {
    reverse.put(session,ssoId);
  }
  if (added) {
    Manager manager=session.getManager();
    if (activeManagers.add(manager)) {
      ((Lifecycle)manager).addLifecycleListener(this);
    }
    if (ssoClusterManager != null) {
      ssoClusterManager.addSession(ssoId,getFullyQualifiedSessionId(session));
    }
  }
}
