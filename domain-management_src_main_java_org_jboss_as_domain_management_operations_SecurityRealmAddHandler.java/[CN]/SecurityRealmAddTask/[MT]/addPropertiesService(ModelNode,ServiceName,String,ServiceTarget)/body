{
  ServiceName propsServiceName=realmServiceName.append(PropertiesCallbackHandler.SERVICE_SUFFIX);
  PropertiesCallbackHandler propsCallbackHandler=new PropertiesCallbackHandler(realmName,properties);
  ServiceBuilder propsBuilder=serviceTarget.addService(propsServiceName,propsCallbackHandler);
  if (properties.hasDefined(RELATIVE_TO)) {
    propsBuilder.addDependency(pathName(properties.get(RELATIVE_TO).asString()),String.class,propsCallbackHandler.getRelativeToInjector());
  }
  propsBuilder.setInitialMode(ServiceController.Mode.ON_DEMAND).install();
  return propsServiceName;
}
